ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.reverse8,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	reverse8:
  24              	.LFB15:
  25              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "ubertooth_rssi.h"
  29:bluetooth_rxtx.c **** #include "ubertooth_cs.h"
  30:bluetooth_rxtx.c **** #include "ubertooth_dma.h"
  31:bluetooth_rxtx.c **** #include "ubertooth_clock.h"
  32:bluetooth_rxtx.c **** #include "bluetooth.h"
  33:bluetooth_rxtx.c **** #include "bluetooth_le.h"
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 2


  34:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  35:bluetooth_rxtx.c **** #include "ego.h"
  36:bluetooth_rxtx.c **** 
  37:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  38:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /* build info */
  41:bluetooth_rxtx.c **** const char compile_info[] =
  42:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  43:bluetooth_rxtx.c **** 
  44:bluetooth_rxtx.c **** /* hopping stuff */
  45:bluetooth_rxtx.c **** volatile uint8_t  hop_mode = HOP_NONE;
  46:bluetooth_rxtx.c **** volatile uint8_t  do_hop = 0;                  // set by timer interrupt
  47:bluetooth_rxtx.c **** volatile uint16_t channel = 2441;
  48:bluetooth_rxtx.c **** volatile uint16_t hop_direct_channel = 0;      // for hopping directly to a channel
  49:bluetooth_rxtx.c **** volatile uint16_t hop_timeout = 158;
  50:bluetooth_rxtx.c **** volatile uint16_t requested_channel = 0;
  51:bluetooth_rxtx.c **** volatile uint16_t le_adv_channel = 2402;
  52:bluetooth_rxtx.c **** 
  53:bluetooth_rxtx.c **** /* bulk USB stuff */
  54:bluetooth_rxtx.c **** volatile uint8_t  idle_buf_clkn_high = 0;
  55:bluetooth_rxtx.c **** volatile uint32_t idle_buf_clk100ns = 0;
  56:bluetooth_rxtx.c **** volatile uint16_t idle_buf_channel = 0;
  57:bluetooth_rxtx.c **** volatile uint8_t  dma_discard = 0;
  58:bluetooth_rxtx.c **** volatile uint8_t  status = 0;
  59:bluetooth_rxtx.c **** 
  60:bluetooth_rxtx.c **** /* operation mode */
  61:bluetooth_rxtx.c **** volatile uint8_t mode = MODE_IDLE;
  62:bluetooth_rxtx.c **** volatile uint8_t requested_mode = MODE_IDLE;
  63:bluetooth_rxtx.c **** volatile uint8_t jam_mode = JAM_NONE;
  64:bluetooth_rxtx.c **** volatile uint8_t ego_mode = EGO_FOLLOW;
  65:bluetooth_rxtx.c **** 
  66:bluetooth_rxtx.c **** volatile uint8_t modulation = MOD_BT_BASIC_RATE;
  67:bluetooth_rxtx.c **** 
  68:bluetooth_rxtx.c **** /* specan stuff */
  69:bluetooth_rxtx.c **** volatile uint16_t low_freq = 2400;
  70:bluetooth_rxtx.c **** volatile uint16_t high_freq = 2483;
  71:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
  72:bluetooth_rxtx.c **** 
  73:bluetooth_rxtx.c **** /* Generic TX stuff */
  74:bluetooth_rxtx.c **** generic_tx_packet tx_pkt;
  75:bluetooth_rxtx.c **** 
  76:bluetooth_rxtx.c **** /* le stuff */
  77:bluetooth_rxtx.c **** uint8_t slave_mac_address[6] = { 0, };
  78:bluetooth_rxtx.c **** 
  79:bluetooth_rxtx.c **** 
  80:bluetooth_rxtx.c **** le_state_t le = {
  81:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  82:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  83:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  84:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  85:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  86:bluetooth_rxtx.c **** 	.crc_verify = 0,
  87:bluetooth_rxtx.c **** 
  88:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
  89:bluetooth_rxtx.c **** 	.conn_epoch = 0,
  90:bluetooth_rxtx.c **** 	.target_set = 0,
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 3


  91:bluetooth_rxtx.c **** 	.last_packet = 0,
  92:bluetooth_rxtx.c **** };
  93:bluetooth_rxtx.c **** 
  94:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
  95:bluetooth_rxtx.c **** 	u32 aa;
  96:bluetooth_rxtx.c **** 	int count;
  97:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
  98:bluetooth_rxtx.c **** 
  99:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 100:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 101:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 102:bluetooth_rxtx.c **** 
 103:bluetooth_rxtx.c **** 	// recovering hop interval
 104:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 105:bluetooth_rxtx.c **** 	int consec_intervals;
 106:bluetooth_rxtx.c **** } le_promisc_state_t;
 107:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 108:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** /* LE jamming */
 111:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 112:bluetooth_rxtx.c **** int le_jam_count = 0;
 113:bluetooth_rxtx.c **** 
 114:bluetooth_rxtx.c **** /* set LE access address */
 115:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 116:bluetooth_rxtx.c **** 
 117:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 118:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 119:bluetooth_rxtx.c **** 
 120:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 121:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 122:bluetooth_rxtx.c **** 
 123:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 124:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 125:bluetooth_rxtx.c **** 
 126:bluetooth_rxtx.c **** static int enqueue(uint8_t type, uint8_t* buf)
 127:bluetooth_rxtx.c **** {
 128:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** 	/* fail if queue is full */
 131:bluetooth_rxtx.c **** 	if (f == NULL) {
 132:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 133:bluetooth_rxtx.c **** 		return 0;
 134:bluetooth_rxtx.c **** 	}
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** 	f->pkt_type = type;
 137:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 138:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 139:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 140:bluetooth_rxtx.c **** 	} else {
 141:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 142:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 143:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 144:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 145:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 146:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 147:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 4


 148:bluetooth_rxtx.c **** 	}
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 151:bluetooth_rxtx.c **** 
 152:bluetooth_rxtx.c **** 	f->status = status;
 153:bluetooth_rxtx.c **** 	status = 0;
 154:bluetooth_rxtx.c **** 
 155:bluetooth_rxtx.c **** 	return 1;
 156:bluetooth_rxtx.c **** }
 157:bluetooth_rxtx.c **** 
 158:bluetooth_rxtx.c **** int enqueue_with_ts(uint8_t type, uint8_t* buf, uint32_t ts)
 159:bluetooth_rxtx.c **** {
 160:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 161:bluetooth_rxtx.c **** 
 162:bluetooth_rxtx.c **** 	/* fail if queue is full */
 163:bluetooth_rxtx.c **** 	if (f == NULL) {
 164:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 165:bluetooth_rxtx.c **** 		return 0;
 166:bluetooth_rxtx.c **** 	}
 167:bluetooth_rxtx.c **** 
 168:bluetooth_rxtx.c **** 	f->pkt_type = type;
 169:bluetooth_rxtx.c **** 
 170:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 171:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** 	f->channel = (uint8_t)((channel - 2402) & 0xff);
 174:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 175:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 176:bluetooth_rxtx.c **** 
 177:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 178:bluetooth_rxtx.c **** 
 179:bluetooth_rxtx.c **** 	f->status = status;
 180:bluetooth_rxtx.c **** 	status = 0;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** 	return 1;
 183:bluetooth_rxtx.c **** }
 184:bluetooth_rxtx.c **** 
 185:bluetooth_rxtx.c **** static int vendor_request_handler(uint8_t request, uint16_t* request_params, uint8_t* data, int* da
 186:bluetooth_rxtx.c **** {
 187:bluetooth_rxtx.c **** 	uint32_t clock;
 188:bluetooth_rxtx.c **** 	size_t length; // string length
 189:bluetooth_rxtx.c **** 	usb_pkt_rx* p = NULL;
 190:bluetooth_rxtx.c **** 	uint16_t reg_val;
 191:bluetooth_rxtx.c **** 	uint8_t i;
 192:bluetooth_rxtx.c **** 
 193:bluetooth_rxtx.c **** 	switch (request) {
 194:bluetooth_rxtx.c **** 
 195:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 196:bluetooth_rxtx.c **** 		*data_len = 0;
 197:bluetooth_rxtx.c **** 		break;
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 200:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 201:bluetooth_rxtx.c **** 		*data_len = 0;
 202:bluetooth_rxtx.c **** 		break;
 203:bluetooth_rxtx.c **** 
 204:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_SYMBOLS:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 5


 205:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 206:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 207:bluetooth_rxtx.c **** 		*data_len = 0;
 208:bluetooth_rxtx.c **** 		break;
 209:bluetooth_rxtx.c **** 
 210:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 211:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 212:bluetooth_rxtx.c **** 		*data_len = 1;
 213:bluetooth_rxtx.c **** 		break;
 214:bluetooth_rxtx.c **** 
 215:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 216:bluetooth_rxtx.c **** 		if (request_params[0])
 217:bluetooth_rxtx.c **** 			USRLED_SET;
 218:bluetooth_rxtx.c **** 		else
 219:bluetooth_rxtx.c **** 			USRLED_CLR;
 220:bluetooth_rxtx.c **** 		break;
 221:bluetooth_rxtx.c **** 
 222:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 223:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 224:bluetooth_rxtx.c **** 		*data_len = 1;
 225:bluetooth_rxtx.c **** 		break;
 226:bluetooth_rxtx.c **** 
 227:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 228:bluetooth_rxtx.c **** 		if (request_params[0])
 229:bluetooth_rxtx.c **** 			RXLED_SET;
 230:bluetooth_rxtx.c **** 		else
 231:bluetooth_rxtx.c **** 			RXLED_CLR;
 232:bluetooth_rxtx.c **** 		break;
 233:bluetooth_rxtx.c **** 
 234:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 235:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 236:bluetooth_rxtx.c **** 		*data_len = 1;
 237:bluetooth_rxtx.c **** 		break;
 238:bluetooth_rxtx.c **** 
 239:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 240:bluetooth_rxtx.c **** 		if (request_params[0])
 241:bluetooth_rxtx.c **** 			TXLED_SET;
 242:bluetooth_rxtx.c **** 		else
 243:bluetooth_rxtx.c **** 			TXLED_CLR;
 244:bluetooth_rxtx.c **** 		break;
 245:bluetooth_rxtx.c **** 
 246:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 247:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 248:bluetooth_rxtx.c **** 		*data_len = 1;
 249:bluetooth_rxtx.c **** 		break;
 250:bluetooth_rxtx.c **** 
 251:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 252:bluetooth_rxtx.c **** 		if (request_params[0])
 253:bluetooth_rxtx.c **** 			CC1V8_SET;
 254:bluetooth_rxtx.c **** 		else
 255:bluetooth_rxtx.c **** 			CC1V8_CLR;
 256:bluetooth_rxtx.c **** 		break;
 257:bluetooth_rxtx.c **** 
 258:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 259:bluetooth_rxtx.c **** 		get_part_num(data, data_len);
 260:bluetooth_rxtx.c **** 		break;
 261:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 6


 262:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 263:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 264:bluetooth_rxtx.c **** 		break;
 265:bluetooth_rxtx.c **** 
 266:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 267:bluetooth_rxtx.c **** 		get_device_serial(data, data_len);
 268:bluetooth_rxtx.c **** 		break;
 269:bluetooth_rxtx.c **** 
 270:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 271:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 272:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 273:bluetooth_rxtx.c **** 		*data_len = 1;
 274:bluetooth_rxtx.c **** 		break;
 275:bluetooth_rxtx.c **** 
 276:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 277:bluetooth_rxtx.c **** 		if (request_params[0])
 278:bluetooth_rxtx.c **** 			PAEN_SET;
 279:bluetooth_rxtx.c **** 		else
 280:bluetooth_rxtx.c **** 			PAEN_CLR;
 281:bluetooth_rxtx.c **** 		break;
 282:bluetooth_rxtx.c **** 
 283:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 284:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 285:bluetooth_rxtx.c **** 		*data_len = 1;
 286:bluetooth_rxtx.c **** 		break;
 287:bluetooth_rxtx.c **** 
 288:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 289:bluetooth_rxtx.c **** 		if (request_params[0])
 290:bluetooth_rxtx.c **** 			HGM_SET;
 291:bluetooth_rxtx.c **** 		else
 292:bluetooth_rxtx.c **** 			HGM_CLR;
 293:bluetooth_rxtx.c **** 		break;
 294:bluetooth_rxtx.c **** #endif
 295:bluetooth_rxtx.c **** 
 296:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 297:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 298:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 299:bluetooth_rxtx.c **** 		break;
 300:bluetooth_rxtx.c **** 
 301:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 302:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 303:bluetooth_rxtx.c **** 		*data_len = 1;
 304:bluetooth_rxtx.c **** 		break;
 305:bluetooth_rxtx.c **** 
 306:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 307:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 308:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 309:bluetooth_rxtx.c **** 		} else {
 310:bluetooth_rxtx.c **** 			return 0;
 311:bluetooth_rxtx.c **** 		}
 312:bluetooth_rxtx.c **** 		break;
 313:bluetooth_rxtx.c **** 
 314:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 315:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 316:bluetooth_rxtx.c **** 		break;
 317:bluetooth_rxtx.c **** 
 318:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 7


 319:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 320:bluetooth_rxtx.c **** 		break;
 321:bluetooth_rxtx.c **** #endif
 322:bluetooth_rxtx.c **** 
 323:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 324:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 325:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 326:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 327:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 328:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 329:bluetooth_rxtx.c **** 		*data_len = 5;
 330:bluetooth_rxtx.c **** 		break;
 331:bluetooth_rxtx.c **** 
 332:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 333:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 334:bluetooth_rxtx.c **** 		break;
 335:bluetooth_rxtx.c **** 
 336:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 337:bluetooth_rxtx.c **** 		data[0] = modulation;
 338:bluetooth_rxtx.c **** 		*data_len = 1;
 339:bluetooth_rxtx.c **** 		break;
 340:bluetooth_rxtx.c **** 
 341:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 342:bluetooth_rxtx.c **** 		modulation = request_params[0];
 343:bluetooth_rxtx.c **** 		break;
 344:bluetooth_rxtx.c **** 
 345:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 346:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 347:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 348:bluetooth_rxtx.c **** 		*data_len = 2;
 349:bluetooth_rxtx.c **** 		break;
 350:bluetooth_rxtx.c **** 
 351:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 352:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 353:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 354:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 355:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 356:bluetooth_rxtx.c **** 			requested_channel = 2402;
 357:bluetooth_rxtx.c **** 		}
 358:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 359:bluetooth_rxtx.c **** 		else {
 360:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 361:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 362:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 363:bluetooth_rxtx.c **** 		}
 364:bluetooth_rxtx.c **** 
 365:bluetooth_rxtx.c **** 		le_adv_channel = requested_channel;
 366:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE && mode != MODE_BOSS_MASTER_LE) {
 367:bluetooth_rxtx.c **** 			channel = requested_channel;
 368:bluetooth_rxtx.c **** 			requested_channel = 0;
 369:bluetooth_rxtx.c **** 
 370:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 371:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 372:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
 373:bluetooth_rxtx.c **** 		}
 374:bluetooth_rxtx.c **** 		break;
 375:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 8


 376:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 377:bluetooth_rxtx.c **** 		set_isp();
 378:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 379:bluetooth_rxtx.c **** 		break;
 380:bluetooth_rxtx.c **** 
 381:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 382:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 383:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 384:bluetooth_rxtx.c **** 		break;
 385:bluetooth_rxtx.c **** 
 386:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 387:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 ||
 388:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 389:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 390:bluetooth_rxtx.c **** 			return 0;
 391:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 392:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 393:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 394:bluetooth_rxtx.c **** 		*data_len = 0;
 395:bluetooth_rxtx.c **** 		break;
 396:bluetooth_rxtx.c **** 
 397:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_GENERIC:
 398:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_GENERIC;
 399:bluetooth_rxtx.c **** 		*data_len = 0;
 400:bluetooth_rxtx.c **** 		break;
 401:bluetooth_rxtx.c **** 
 402:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 403:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 404:bluetooth_rxtx.c **** 			return 0;
 405:bluetooth_rxtx.c **** 		rssi_threshold = 54 - request_params[0];
 406:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 407:bluetooth_rxtx.c **** 		*data_len = 0;
 408:bluetooth_rxtx.c **** 		break;
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 411:bluetooth_rxtx.c **** 		data[0] = 0x00;
 412:bluetooth_rxtx.c **** 		data[1] = 0x00;
 413:bluetooth_rxtx.c **** 
 414:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 415:bluetooth_rxtx.c **** 		data[2] = length;
 416:bluetooth_rxtx.c **** 
 417:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 418:bluetooth_rxtx.c **** 
 419:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 420:bluetooth_rxtx.c **** 		break;
 421:bluetooth_rxtx.c **** 
 422:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 423:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 424:bluetooth_rxtx.c **** 		data[0] = length;
 425:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 426:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 427:bluetooth_rxtx.c **** 		break;
 428:bluetooth_rxtx.c **** 
 429:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 430:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 431:bluetooth_rxtx.c **** 		*data_len = 1;
 432:bluetooth_rxtx.c **** 		break;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 9


 433:bluetooth_rxtx.c **** 
 434:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 435:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 436:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 437:bluetooth_rxtx.c **** 		break;
 438:bluetooth_rxtx.c **** 
 439:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 440:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 441:bluetooth_rxtx.c **** 		*data_len = 1;
 442:bluetooth_rxtx.c **** 		break;
 443:bluetooth_rxtx.c **** 
 444:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 445:bluetooth_rxtx.c **** 		target.address = 0;
 446:bluetooth_rxtx.c **** 		target.syncword = 0;
 447:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 448:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 449:bluetooth_rxtx.c **** 		}
 450:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 451:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 452:bluetooth_rxtx.c **** 		}
 453:bluetooth_rxtx.c **** 		precalc();
 454:bluetooth_rxtx.c **** 		break;
 455:bluetooth_rxtx.c **** 
 456:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 457:bluetooth_rxtx.c **** 		clkn_offset = 0;
 458:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 459:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 460:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 461:bluetooth_rxtx.c **** 		}
 462:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 463:bluetooth_rxtx.c **** 		dma_discard = 1;
 464:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 465:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 466:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 467:bluetooth_rxtx.c **** 		break;
 468:bluetooth_rxtx.c **** 
 469:bluetooth_rxtx.c **** 	case UBERTOOTH_AFH:
 470:bluetooth_rxtx.c **** 		hop_mode = HOP_AFH;
 471:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 472:bluetooth_rxtx.c **** 
 473:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 474:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 475:bluetooth_rxtx.c **** 		}
 476:bluetooth_rxtx.c **** 		used_channels = 0;
 477:bluetooth_rxtx.c **** 		afh_enabled = 1;
 478:bluetooth_rxtx.c **** 		break;
 479:bluetooth_rxtx.c **** 
 480:bluetooth_rxtx.c **** 	case UBERTOOTH_HOP:
 481:bluetooth_rxtx.c **** 		do_hop = 1;
 482:bluetooth_rxtx.c **** 		break;
 483:bluetooth_rxtx.c **** 
 484:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 485:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 486:bluetooth_rxtx.c **** 		clkn = clock;
 487:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 488:bluetooth_rxtx.c **** 		break;
 489:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 10


 490:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 491:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 492:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 493:bluetooth_rxtx.c **** 		}
 494:bluetooth_rxtx.c **** 		afh_enabled = 1;
 495:bluetooth_rxtx.c **** 		*data_len = 10;
 496:bluetooth_rxtx.c **** 		break;
 497:bluetooth_rxtx.c **** 
 498:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 499:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 500:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 501:bluetooth_rxtx.c **** 		}
 502:bluetooth_rxtx.c **** 		afh_enabled = 0;
 503:bluetooth_rxtx.c **** 		*data_len = 10;
 504:bluetooth_rxtx.c **** 		break;
 505:bluetooth_rxtx.c **** 
 506:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 507:bluetooth_rxtx.c **** 		clock = clkn;
 508:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 509:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 510:bluetooth_rxtx.c **** 		}
 511:bluetooth_rxtx.c **** 		*data_len = 4;
 512:bluetooth_rxtx.c **** 		break;
 513:bluetooth_rxtx.c **** 
 514:bluetooth_rxtx.c **** 	case UBERTOOTH_TRIM_CLOCK:
 515:bluetooth_rxtx.c **** 		clk100ns_offset = (data[0] << 8) | (data[1] << 0);
 516:bluetooth_rxtx.c **** 		break;
 517:bluetooth_rxtx.c **** 
 518:bluetooth_rxtx.c **** 	case UBERTOOTH_FIX_CLOCK_DRIFT:
 519:bluetooth_rxtx.c **** 		clk_drift_ppm += (int16_t)(data[0] << 8) | (data[1] << 0);
 520:bluetooth_rxtx.c **** 
 521:bluetooth_rxtx.c **** 		// Too slow
 522:bluetooth_rxtx.c **** 		if (clk_drift_ppm < 0) {
 523:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 524:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 525:bluetooth_rxtx.c **** 		}
 526:bluetooth_rxtx.c **** 		// Too fast
 527:bluetooth_rxtx.c **** 		else if (clk_drift_ppm > 0) {
 528:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 529:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 530:bluetooth_rxtx.c **** 		}
 531:bluetooth_rxtx.c **** 		// Don't trim
 532:bluetooth_rxtx.c **** 		else {
 533:bluetooth_rxtx.c **** 			clk_drift_correction = 0;
 534:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 535:bluetooth_rxtx.c **** 		}
 536:bluetooth_rxtx.c **** 
 537:bluetooth_rxtx.c **** 		break;
 538:bluetooth_rxtx.c **** 
 539:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 540:bluetooth_rxtx.c **** 		*data_len = 0;
 541:bluetooth_rxtx.c **** 
 542:bluetooth_rxtx.c **** 		do_hop = 0;
 543:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 544:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 545:bluetooth_rxtx.c **** 
 546:bluetooth_rxtx.c **** 		queue_init();
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 11


 547:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 548:bluetooth_rxtx.c **** 		break;
 549:bluetooth_rxtx.c **** 
 550:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_BOSS_MASTER:
 551:bluetooth_rxtx.c **** 		*data_len = 0;
 552:bluetooth_rxtx.c **** 
 553:bluetooth_rxtx.c **** 		do_hop = 0;
 554:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 555:bluetooth_rxtx.c **** 		requested_mode = MODE_BOSS_MASTER_LE;
 556:bluetooth_rxtx.c **** 
 557:bluetooth_rxtx.c **** 		queue_init();
 558:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 559:bluetooth_rxtx.c **** 		break;
 560:bluetooth_rxtx.c **** 
 561:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 562:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 563:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 564:bluetooth_rxtx.c **** 		}
 565:bluetooth_rxtx.c **** 		*data_len = 4;
 566:bluetooth_rxtx.c **** 		break;
 567:bluetooth_rxtx.c **** 
 568:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 569:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 570:bluetooth_rxtx.c **** 		le.target_set = 1;
 571:bluetooth_rxtx.c **** 		break;
 572:bluetooth_rxtx.c **** 
 573:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 574:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 575:bluetooth_rxtx.c **** 		break;
 576:bluetooth_rxtx.c **** 
 577:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 578:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 579:bluetooth_rxtx.c **** 		// don't commit here please
 580:bluetooth_rxtx.c **** 		data[0] = 0x13;
 581:bluetooth_rxtx.c **** 		data[1] = 0x37;
 582:bluetooth_rxtx.c **** 		*data_len = 2;
 583:bluetooth_rxtx.c **** 		break;
 584:bluetooth_rxtx.c **** 
 585:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 586:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 587:bluetooth_rxtx.c **** 		*data_len = 1;
 588:bluetooth_rxtx.c **** 		break;
 589:bluetooth_rxtx.c **** 
 590:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 591:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 592:bluetooth_rxtx.c **** 		break;
 593:bluetooth_rxtx.c **** 
 594:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 595:bluetooth_rxtx.c **** 		p = dequeue();
 596:bluetooth_rxtx.c **** 		if (p != NULL) {
 597:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 598:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 599:bluetooth_rxtx.c **** 		} else {
 600:bluetooth_rxtx.c **** 			data[0] = 0;
 601:bluetooth_rxtx.c **** 			*data_len = 1;
 602:bluetooth_rxtx.c **** 		}
 603:bluetooth_rxtx.c **** 		break;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 12


 604:bluetooth_rxtx.c **** 
 605:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 606:bluetooth_rxtx.c **** 		*data_len = 0;
 607:bluetooth_rxtx.c **** 
 608:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 609:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 610:bluetooth_rxtx.c **** 
 611:bluetooth_rxtx.c **** 		queue_init();
 612:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 613:bluetooth_rxtx.c **** 		break;
 614:bluetooth_rxtx.c **** 
 615:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 616:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 617:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 618:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 619:bluetooth_rxtx.c **** 		*data_len = 2;
 620:bluetooth_rxtx.c **** 		break;
 621:bluetooth_rxtx.c **** 
 622:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 623:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 624:bluetooth_rxtx.c **** 		break;
 625:bluetooth_rxtx.c **** 
 626:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTERS:
 627:bluetooth_rxtx.c **** 		for(i=0; i<request_params[0]; i++) {
 628:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 629:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 630:bluetooth_rxtx.c **** 		}
 631:bluetooth_rxtx.c **** 		break;
 632:bluetooth_rxtx.c **** 
 633:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_ALL_REGISTERS:
 634:bluetooth_rxtx.c **** 		#define MAX_READ_REG 0x2d
 635:bluetooth_rxtx.c **** 		for(i=0; i<=MAX_READ_REG; i++) {
 636:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 637:bluetooth_rxtx.c **** 			data[i*3] = i;
 638:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 639:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 640:bluetooth_rxtx.c **** 		}
 641:bluetooth_rxtx.c **** 		*data_len = MAX_READ_REG*3;
 642:bluetooth_rxtx.c **** 		break;
 643:bluetooth_rxtx.c **** 
 644:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_GENERIC_PACKET:
 645:bluetooth_rxtx.c **** 		i = 7 + data[6];
 646:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 647:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 648:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_GENERIC;
 649:bluetooth_rxtx.c **** 		*data_len = 0;
 650:bluetooth_rxtx.c **** 		break;
 651:bluetooth_rxtx.c **** 
 652:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 653:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 654:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 655:bluetooth_rxtx.c **** 		break;
 656:bluetooth_rxtx.c **** 
 657:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_BOSS_SLAVE:
 658:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 659:bluetooth_rxtx.c **** 		requested_mode = MODE_BOSS_SLAVE_LE;
 660:bluetooth_rxtx.c **** 		break;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 13


 661:bluetooth_rxtx.c **** 
 662:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 663:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 664:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 665:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 666:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 667:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 668:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 669:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 670:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 671:bluetooth_rxtx.c **** 		le.target_set = 1;
 672:bluetooth_rxtx.c **** 		break;
 673:bluetooth_rxtx.c **** 
 674:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 675:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 676:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 677:bluetooth_rxtx.c **** 		break;
 678:bluetooth_rxtx.c **** #endif
 679:bluetooth_rxtx.c **** 
 680:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 681:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 682:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 683:bluetooth_rxtx.c **** 			return 0;
 684:bluetooth_rxtx.c **** #endif
 685:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 686:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 687:bluetooth_rxtx.c **** 		break;
 688:bluetooth_rxtx.c **** 
 689:bluetooth_rxtx.c **** 	default:
 690:bluetooth_rxtx.c **** 		return 0;
 691:bluetooth_rxtx.c **** 	}
 692:bluetooth_rxtx.c **** 	return 1;
 693:bluetooth_rxtx.c **** }
 694:bluetooth_rxtx.c **** 
 695:bluetooth_rxtx.c **** /* Update CLKN. */
 696:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 697:bluetooth_rxtx.c **** {
 698:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 699:bluetooth_rxtx.c **** 
 700:bluetooth_rxtx.c **** 		clkn += clkn_offset + 1;
 701:bluetooth_rxtx.c **** 		clkn_offset = 0;
 702:bluetooth_rxtx.c **** 
 703:bluetooth_rxtx.c **** 		uint32_t le_clk = (clkn - le.conn_epoch) & 0x03;
 704:bluetooth_rxtx.c **** 
 705:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 706:bluetooth_rxtx.c **** 
 707:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 708:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 709:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 710:bluetooth_rxtx.c **** 				do_hop = 1;
 711:bluetooth_rxtx.c **** 		}
 712:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 713:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 714:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 715:bluetooth_rxtx.c **** 				do_hop = 1;
 716:bluetooth_rxtx.c **** 		}
 717:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 14


 718:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 719:bluetooth_rxtx.c **** 			// Only hop if connected
 720:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 721:bluetooth_rxtx.c **** 				--le.interval_timer;
 722:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 723:bluetooth_rxtx.c **** 					do_hop = 1;
 724:bluetooth_rxtx.c **** 					++le.conn_count;
 725:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 726:bluetooth_rxtx.c **** 				} else {
 727:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 728:bluetooth_rxtx.c **** 				}
 729:bluetooth_rxtx.c **** 			}
 730:bluetooth_rxtx.c **** 		}
 731:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_AFH) {
 732:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 733:bluetooth_rxtx.c **** 				do_hop = 1;
 734:bluetooth_rxtx.c **** 			}
 735:bluetooth_rxtx.c **** 		}
 736:bluetooth_rxtx.c **** 
 737:bluetooth_rxtx.c **** 		// Fix linear clock drift deviation
 738:bluetooth_rxtx.c **** 		if(clkn_next_drift_fix != 0 && clk100ns_offset == 0) {
 739:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 740:bluetooth_rxtx.c **** 
 741:bluetooth_rxtx.c **** 				// Too fast
 742:bluetooth_rxtx.c **** 				if(clk_drift_ppm >= 0) {
 743:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 744:bluetooth_rxtx.c **** 				}
 745:bluetooth_rxtx.c **** 
 746:bluetooth_rxtx.c **** 				// Too slow
 747:bluetooth_rxtx.c **** 				else {
 748:bluetooth_rxtx.c **** 					clk100ns_offset = 6249;
 749:bluetooth_rxtx.c **** 				}
 750:bluetooth_rxtx.c **** 				clkn_last_drift_fix = clkn;
 751:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 752:bluetooth_rxtx.c **** 			}
 753:bluetooth_rxtx.c **** 		}
 754:bluetooth_rxtx.c **** 
 755:bluetooth_rxtx.c **** 		// Negative clock correction
 756:bluetooth_rxtx.c **** 		if(clk100ns_offset > 3124)
 757:bluetooth_rxtx.c **** 			clkn += 2;
 758:bluetooth_rxtx.c **** 
 759:bluetooth_rxtx.c **** 		T0MR0 = 3124 + clk100ns_offset;
 760:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 761:bluetooth_rxtx.c **** 
 762:bluetooth_rxtx.c **** 		/* Ack interrupt */
 763:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 764:bluetooth_rxtx.c **** 	}
 765:bluetooth_rxtx.c **** }
 766:bluetooth_rxtx.c **** 
 767:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 768:bluetooth_rxtx.c **** #ifndef TC13BADGE
 769:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 770:bluetooth_rxtx.c **** {
 771:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 772:bluetooth_rxtx.c **** 	IO2IntClr   = PIN_GIO6; // clear interrupt
 773:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 774:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 15


 775:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 776:bluetooth_rxtx.c **** 		dma_discard = 0;
 777:bluetooth_rxtx.c **** 
 778:bluetooth_rxtx.c **** }
 779:bluetooth_rxtx.c **** #endif // TC13BADGE
 780:bluetooth_rxtx.c **** 
 781:bluetooth_rxtx.c **** /*
 782:bluetooth_rxtx.c ****  * Sleep (busy wait) for 'millis' milliseconds
 783:bluetooth_rxtx.c ****  * Needs clkn. Be sure to call clkn_init() before using it.
 784:bluetooth_rxtx.c ****  */
 785:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 786:bluetooth_rxtx.c **** {
 787:bluetooth_rxtx.c **** 	uint32_t now = (clkn & 0xffffff);
 788:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 789:bluetooth_rxtx.c **** 
 790:bluetooth_rxtx.c **** 	// handle clkn overflow
 791:bluetooth_rxtx.c **** 	if (stop_at >= ((uint32_t)1<<28)) {
 792:bluetooth_rxtx.c **** 		stop_at -= ((uint32_t)1<<28);
 793:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) >= now || (clkn & 0xffffff) < stop_at);
 794:bluetooth_rxtx.c **** 	} else {
 795:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) < stop_at);
 796:bluetooth_rxtx.c **** 	}
 797:bluetooth_rxtx.c **** }
 798:bluetooth_rxtx.c **** 
 799:bluetooth_rxtx.c **** void DMA_IRQHandler()
 800:bluetooth_rxtx.c **** {
 801:bluetooth_rxtx.c **** 	if ( mode == MODE_RX_SYMBOLS
 802:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 803:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 804:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
 805:bluetooth_rxtx.c **** 	   || mode == MODE_BOSS_SLAVE_LE
 806:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 807:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 808:bluetooth_rxtx.c **** 	   || mode == MODE_BOSS_MASTER_LE
 809:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 810:bluetooth_rxtx.c **** 	{
 811:bluetooth_rxtx.c **** 		/* interrupt on channel 0 */
 812:bluetooth_rxtx.c **** 		if (DMACIntStat & (1 << 0)) {
 813:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 814:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 815:bluetooth_rxtx.c **** 
 816:bluetooth_rxtx.c **** 				if (hop_mode == HOP_BLUETOOTH)
 817:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 818:bluetooth_rxtx.c **** 
 819:bluetooth_rxtx.c **** 				idle_buf_clk100ns  = CLK100NS;
 820:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 821:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 822:bluetooth_rxtx.c **** 
 823:bluetooth_rxtx.c **** 				/* Keep buffer swapping in sync with DMA. */
 824:bluetooth_rxtx.c **** 				volatile uint8_t* tmp = active_rxbuf;
 825:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 826:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 827:bluetooth_rxtx.c **** 
 828:bluetooth_rxtx.c **** 				++rx_tc;
 829:bluetooth_rxtx.c **** 			}
 830:bluetooth_rxtx.c **** 			if (DMACIntErrStat & (1 << 0)) {
 831:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 16


 832:bluetooth_rxtx.c **** 				++rx_err;
 833:bluetooth_rxtx.c **** 			}
 834:bluetooth_rxtx.c **** 		}
 835:bluetooth_rxtx.c **** 	}
 836:bluetooth_rxtx.c **** }
 837:bluetooth_rxtx.c **** 
 838:bluetooth_rxtx.c **** static void cc2400_idle()
 839:bluetooth_rxtx.c **** {
 840:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 841:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 842:bluetooth_rxtx.c **** 
 843:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 844:bluetooth_rxtx.c **** 	PAEN_CLR;
 845:bluetooth_rxtx.c **** 	HGM_CLR;
 846:bluetooth_rxtx.c **** #endif
 847:bluetooth_rxtx.c **** 
 848:bluetooth_rxtx.c **** 	RXLED_CLR;
 849:bluetooth_rxtx.c **** 	TXLED_CLR;
 850:bluetooth_rxtx.c **** 	USRLED_CLR;
 851:bluetooth_rxtx.c **** 
 852:bluetooth_rxtx.c **** 	clkn_stop();
 853:bluetooth_rxtx.c **** 	dio_ssp_stop();
 854:bluetooth_rxtx.c **** 	cs_reset();
 855:bluetooth_rxtx.c **** 	rssi_reset();
 856:bluetooth_rxtx.c **** 
 857:bluetooth_rxtx.c **** 	/* hopping stuff */
 858:bluetooth_rxtx.c **** 	hop_mode = HOP_NONE;
 859:bluetooth_rxtx.c **** 	do_hop = 0;
 860:bluetooth_rxtx.c **** 	channel = 2441;
 861:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 862:bluetooth_rxtx.c **** 	hop_timeout = 158;
 863:bluetooth_rxtx.c **** 	requested_channel = 0;
 864:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 865:bluetooth_rxtx.c **** 
 866:bluetooth_rxtx.c **** 
 867:bluetooth_rxtx.c **** 	/* bulk USB stuff */
 868:bluetooth_rxtx.c **** 	idle_buf_clkn_high = 0;
 869:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 870:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 871:bluetooth_rxtx.c **** 	dma_discard = 0;
 872:bluetooth_rxtx.c **** 	status = 0;
 873:bluetooth_rxtx.c **** 
 874:bluetooth_rxtx.c **** 	/* operation mode */
 875:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 876:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 877:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
 878:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 879:bluetooth_rxtx.c **** 
 880:bluetooth_rxtx.c **** 	modulation = MOD_BT_BASIC_RATE;
 881:bluetooth_rxtx.c **** 
 882:bluetooth_rxtx.c **** 	/* specan stuff */
 883:bluetooth_rxtx.c **** 	low_freq = 2400;
 884:bluetooth_rxtx.c **** 	high_freq = 2483;
 885:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 886:bluetooth_rxtx.c **** 
 887:bluetooth_rxtx.c **** 	target.address = 0;
 888:bluetooth_rxtx.c **** 	target.syncword = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 17


 889:bluetooth_rxtx.c **** }
 890:bluetooth_rxtx.c **** 
 891:bluetooth_rxtx.c **** /* start un-buffered rx */
 892:bluetooth_rxtx.c **** static void cc2400_rx()
 893:bluetooth_rxtx.c **** {
 894:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
 895:bluetooth_rxtx.c **** 
 896:bluetooth_rxtx.c **** 	if((modulation == MOD_BT_BASIC_RATE) || (modulation == MOD_BT_LOW_ENERGY)) {
 897:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 898:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 899:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
 900:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 901:bluetooth_rxtx.c **** 		}
 902:bluetooth_rxtx.c **** 		cc2400_set(MANAND,  0x7fff);
 903:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
 904:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 905:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 906:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
 907:bluetooth_rxtx.c **** 		//      |  | |   |  +--------> CRC off
 908:bluetooth_rxtx.c **** 		//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
 909:bluetooth_rxtx.c **** 		//      |  | +---------------> 2 preamble bytes of 01010101
 910:bluetooth_rxtx.c **** 		//      |  +-----------------> not packet mode
 911:bluetooth_rxtx.c **** 			//      +--------------------> un-buffered mode
 912:bluetooth_rxtx.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 913:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
 914:bluetooth_rxtx.c **** 	}
 915:bluetooth_rxtx.c **** 
 916:bluetooth_rxtx.c **** 	// Set up CS register
 917:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
 918:bluetooth_rxtx.c **** 
 919:bluetooth_rxtx.c **** 	clkn_start();
 920:bluetooth_rxtx.c **** 
 921:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 922:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 923:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 924:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 925:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 926:bluetooth_rxtx.c **** 	PAEN_SET;
 927:bluetooth_rxtx.c **** 	HGM_SET;
 928:bluetooth_rxtx.c **** #endif
 929:bluetooth_rxtx.c **** }
 930:bluetooth_rxtx.c **** 
 931:bluetooth_rxtx.c **** /* start un-buffered rx */
 932:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
 933:bluetooth_rxtx.c **** {
 934:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 935:bluetooth_rxtx.c **** 
 936:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 937:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 938:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 939:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
 940:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
 941:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
 942:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
 943:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
 944:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
 945:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 18


 946:bluetooth_rxtx.c **** 
 947:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 948:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 949:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 950:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
 951:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
 952:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
 953:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
 954:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
 955:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
 956:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
 957:bluetooth_rxtx.c **** 
 958:bluetooth_rxtx.c **** 	} else {
 959:bluetooth_rxtx.c **** 		/* oops */
 960:bluetooth_rxtx.c **** 		return;
 961:bluetooth_rxtx.c **** 	}
 962:bluetooth_rxtx.c **** 
 963:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 964:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 965:bluetooth_rxtx.c **** 
 966:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 967:bluetooth_rxtx.c **** 	// 1      2      4b
 968:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
 969:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
 970:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
 971:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
 972:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
 973:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
 974:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
 975:bluetooth_rxtx.c **** 	//
 976:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
 977:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
 978:bluetooth_rxtx.c **** 
 979:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 980:bluetooth_rxtx.c **** 
 981:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 982:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 983:bluetooth_rxtx.c **** 
 984:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 985:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 986:bluetooth_rxtx.c **** 
 987:bluetooth_rxtx.c **** 	// Set up CS register
 988:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
 989:bluetooth_rxtx.c **** 
 990:bluetooth_rxtx.c **** 	clkn_start();
 991:bluetooth_rxtx.c **** 
 992:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 993:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 994:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 995:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 996:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 997:bluetooth_rxtx.c **** 	PAEN_SET;
 998:bluetooth_rxtx.c **** 	HGM_SET;
 999:bluetooth_rxtx.c **** #endif
1000:bluetooth_rxtx.c **** }
1001:bluetooth_rxtx.c **** 
1002:bluetooth_rxtx.c **** /* start buffered tx */
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 19


1003:bluetooth_rxtx.c **** static void cc2400_tx_sync(uint32_t sync)
1004:bluetooth_rxtx.c **** {
1005:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1006:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1007:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1008:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1009:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1010:bluetooth_rxtx.c **** 
1011:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1012:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1013:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1014:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1015:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1016:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1017:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1018:bluetooth_rxtx.c **** 
1019:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1020:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1021:bluetooth_rxtx.c **** 
1022:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1023:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1024:bluetooth_rxtx.c **** 
1025:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
1026:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
1027:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
1028:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1029:bluetooth_rxtx.c **** 	} else {
1030:bluetooth_rxtx.c **** 		/* oops */
1031:bluetooth_rxtx.c **** 		return;
1032:bluetooth_rxtx.c **** 	}
1033:bluetooth_rxtx.c **** 
1034:bluetooth_rxtx.c **** 	clkn_start();
1035:bluetooth_rxtx.c **** 
1036:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1037:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1038:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1039:bluetooth_rxtx.c **** 
1040:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1041:bluetooth_rxtx.c **** 	PAEN_SET;
1042:bluetooth_rxtx.c **** #endif
1043:bluetooth_rxtx.c **** 
1044:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1045:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1046:bluetooth_rxtx.c **** 
1047:bluetooth_rxtx.c **** #endif
1048:bluetooth_rxtx.c **** }
1049:bluetooth_rxtx.c **** 
1050:bluetooth_rxtx.c **** /*
1051:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1052:bluetooth_rxtx.c ****  *
1053:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1054:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1055:bluetooth_rxtx.c ****  * included in the data length.
1056:bluetooth_rxtx.c ****  */
1057:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1058:bluetooth_rxtx.c **** {
1059:bluetooth_rxtx.c **** 	unsigned i, j;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 20


1060:bluetooth_rxtx.c **** 	int bit;
1061:bluetooth_rxtx.c **** 	u8 txbuf[64];
1062:bluetooth_rxtx.c **** 	u8 tx_len;
1063:bluetooth_rxtx.c **** 	u8 byte;
1064:bluetooth_rxtx.c **** 	u16 gio_save;
1065:bluetooth_rxtx.c **** 
1066:bluetooth_rxtx.c **** 	// first four bytes: AA
1067:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
1068:bluetooth_rxtx.c **** 		byte = aa & 0xff;
1069:bluetooth_rxtx.c **** 		aa >>= 8;
1070:bluetooth_rxtx.c **** 		txbuf[i] = 0;
1071:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
1072:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
1073:bluetooth_rxtx.c **** 			byte >>= 1;
1074:bluetooth_rxtx.c **** 		}
1075:bluetooth_rxtx.c **** 	}
1076:bluetooth_rxtx.c **** 
1077:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1078:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
1079:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
1080:bluetooth_rxtx.c **** 		byte = data[i];
1081:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
1082:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
1083:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
1084:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
1085:bluetooth_rxtx.c **** 			byte >>= 1;
1086:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
1087:bluetooth_rxtx.c **** 		}
1088:bluetooth_rxtx.c **** 	}
1089:bluetooth_rxtx.c **** 
1090:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
1091:bluetooth_rxtx.c **** 
1092:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1093:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1094:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1095:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1096:bluetooth_rxtx.c **** 
1097:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1098:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1099:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1100:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1101:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1102:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1103:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1104:bluetooth_rxtx.c **** 
1105:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1106:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1107:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1108:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
1109:bluetooth_rxtx.c **** 
1110:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1111:bluetooth_rxtx.c **** 	if (aa & 1)
1112:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
1113:bluetooth_rxtx.c **** 	else
1114:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
1115:bluetooth_rxtx.c **** 
1116:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 21


1117:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
1118:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
1119:bluetooth_rxtx.c **** 
1120:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1121:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1122:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1123:bluetooth_rxtx.c **** 	TXLED_SET;
1124:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1125:bluetooth_rxtx.c **** 	PAEN_SET;
1126:bluetooth_rxtx.c **** #endif
1127:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1128:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1129:bluetooth_rxtx.c **** 
1130:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1131:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
1132:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
1133:bluetooth_rxtx.c **** 		tx_len = len - i;
1134:bluetooth_rxtx.c **** 		if (tx_len > 16)
1135:bluetooth_rxtx.c **** 			tx_len = 16;
1136:bluetooth_rxtx.c **** 		cc2400_fifo_write(tx_len, txbuf + i);
1137:bluetooth_rxtx.c **** 	}
1138:bluetooth_rxtx.c **** 
1139:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1140:bluetooth_rxtx.c **** 	TXLED_CLR;
1141:bluetooth_rxtx.c **** 
1142:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1143:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
1144:bluetooth_rxtx.c **** 
1145:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1146:bluetooth_rxtx.c **** 	PAEN_CLR;
1147:bluetooth_rxtx.c **** #endif
1148:bluetooth_rxtx.c **** 
1149:bluetooth_rxtx.c **** 	// reset GIO
1150:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
1151:bluetooth_rxtx.c **** }
1152:bluetooth_rxtx.c **** 
1153:bluetooth_rxtx.c **** void le_jam(void) {
1154:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1155:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1156:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1157:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
1158:bluetooth_rxtx.c **** 
1159:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1160:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1161:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1162:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1163:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1164:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1165:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1166:bluetooth_rxtx.c **** 
1167:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1168:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1169:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1170:bluetooth_rxtx.c **** 
1171:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1172:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1173:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 22


1174:bluetooth_rxtx.c **** 	TXLED_SET;
1175:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1176:bluetooth_rxtx.c **** 	PAEN_SET;
1177:bluetooth_rxtx.c **** #endif
1178:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1179:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1180:bluetooth_rxtx.c **** #endif
1181:bluetooth_rxtx.c **** }
1182:bluetooth_rxtx.c **** 
1183:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1184:bluetooth_rxtx.c ****  * track of this? */
1185:bluetooth_rxtx.c **** void hop(void)
1186:bluetooth_rxtx.c **** {
1187:bluetooth_rxtx.c **** 	do_hop = 0;
1188:bluetooth_rxtx.c **** 	last_hop = clkn;
1189:bluetooth_rxtx.c **** 
1190:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1191:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
1192:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
1193:bluetooth_rxtx.c **** 			return;
1194:bluetooth_rxtx.c **** 	}
1195:bluetooth_rxtx.c **** 	/* Slow sweep (100 hops/sec)
1196:bluetooth_rxtx.c **** 	 * only hop to currently used channels if AFH is enabled
1197:bluetooth_rxtx.c **** 	 */
1198:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
1199:bluetooth_rxtx.c **** 		do {
1200:bluetooth_rxtx.c **** 			channel += 32;
1201:bluetooth_rxtx.c **** 			if (channel > 2480)
1202:bluetooth_rxtx.c **** 				channel -= 79;
1203:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
1204:bluetooth_rxtx.c **** 	}
1205:bluetooth_rxtx.c **** 
1206:bluetooth_rxtx.c **** 	/* AFH detection
1207:bluetooth_rxtx.c **** 	 * only hop to currently unused channesl
1208:bluetooth_rxtx.c **** 	 */
1209:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_AFH) {
1210:bluetooth_rxtx.c **** 		do {
1211:bluetooth_rxtx.c **** 			channel += 32;
1212:bluetooth_rxtx.c **** 			if (channel > 2480)
1213:bluetooth_rxtx.c **** 				channel -= 79;
1214:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
1215:bluetooth_rxtx.c **** 	}
1216:bluetooth_rxtx.c **** 
1217:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
1218:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
1219:bluetooth_rxtx.c **** 	}
1220:bluetooth_rxtx.c **** 
1221:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
1222:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
1223:bluetooth_rxtx.c **** 	}
1224:bluetooth_rxtx.c **** 
1225:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
1226:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
1227:bluetooth_rxtx.c **** 	}
1228:bluetooth_rxtx.c **** 	/* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1229:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1230:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 23


1231:bluetooth_rxtx.c **** 
1232:bluetooth_rxtx.c **** 	/* Retune */
1233:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS)
1234:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
1235:bluetooth_rxtx.c **** 	else
1236:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel - 1);
1237:bluetooth_rxtx.c **** 
1238:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1239:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
1240:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
1241:bluetooth_rxtx.c **** 	}
1242:bluetooth_rxtx.c **** 
1243:bluetooth_rxtx.c **** 	/* Wait for lock */
1244:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1245:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1246:bluetooth_rxtx.c **** 
1247:bluetooth_rxtx.c **** 	dma_discard = 1;
1248:bluetooth_rxtx.c **** 
1249:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS)
1250:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1251:bluetooth_rxtx.c **** 	else
1252:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
1253:bluetooth_rxtx.c **** }
1254:bluetooth_rxtx.c **** 
1255:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1256:bluetooth_rxtx.c **** void bt_stream_rx()
1257:bluetooth_rxtx.c **** {
1258:bluetooth_rxtx.c **** 	int8_t rssi;
1259:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1260:bluetooth_rxtx.c **** 
1261:bluetooth_rxtx.c **** 	RXLED_CLR;
1262:bluetooth_rxtx.c **** 
1263:bluetooth_rxtx.c **** 	queue_init();
1264:bluetooth_rxtx.c **** 	dio_ssp_init();
1265:bluetooth_rxtx.c **** 	dma_init();
1266:bluetooth_rxtx.c **** 	dio_ssp_start();
1267:bluetooth_rxtx.c **** 
1268:bluetooth_rxtx.c **** 	cc2400_rx();
1269:bluetooth_rxtx.c **** 
1270:bluetooth_rxtx.c **** 	cs_trigger_enable();
1271:bluetooth_rxtx.c **** 
1272:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_RX_SYMBOLS || requested_mode == MODE_BT_FOLLOW )
1273:bluetooth_rxtx.c **** 	{
1274:bluetooth_rxtx.c **** 
1275:bluetooth_rxtx.c **** 		RXLED_CLR;
1276:bluetooth_rxtx.c **** 
1277:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1278:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1279:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1280:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1281:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1282:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1283:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1284:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1285:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1286:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1287:bluetooth_rxtx.c **** 		rssi_reset();
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 24


1288:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1289:bluetooth_rxtx.c **** 		while (!rx_tc) {
1290:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1291:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1292:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1293:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1294:bluetooth_rxtx.c **** 			}
1295:bluetooth_rxtx.c **** 			rssi_add(rssi);
1296:bluetooth_rxtx.c **** 
1297:bluetooth_rxtx.c **** 			handle_usb(clkn);
1298:bluetooth_rxtx.c **** 
1299:bluetooth_rxtx.c **** 			/* If timer says time to hop, do it. */
1300:bluetooth_rxtx.c **** 			if (do_hop) {
1301:bluetooth_rxtx.c **** 				hop();
1302:bluetooth_rxtx.c **** 			} else {
1303:bluetooth_rxtx.c **** 				TXLED_CLR;
1304:bluetooth_rxtx.c **** 			}
1305:bluetooth_rxtx.c **** 			/* TODO - set per-channel carrier sense threshold.
1306:bluetooth_rxtx.c **** 			 * Set by firmware or host. */
1307:bluetooth_rxtx.c **** 		}
1308:bluetooth_rxtx.c **** 
1309:bluetooth_rxtx.c **** 		RXLED_SET;
1310:bluetooth_rxtx.c **** 
1311:bluetooth_rxtx.c **** 		if (rx_err) {
1312:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1313:bluetooth_rxtx.c **** 		}
1314:bluetooth_rxtx.c **** 
1315:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1316:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1317:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** 		if (dma_discard) {
1320:bluetooth_rxtx.c **** 			status |= DISCARD;
1321:bluetooth_rxtx.c **** 			dma_discard = 0;
1322:bluetooth_rxtx.c **** 		}
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
1325:bluetooth_rxtx.c **** 
1326:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1327:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1328:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1329:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1330:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
1331:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1332:bluetooth_rxtx.c **** 			cs_trigger = 0;
1333:bluetooth_rxtx.c **** 		}
1334:bluetooth_rxtx.c **** 
1335:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1336:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1337:bluetooth_rxtx.c **** 		}
1338:bluetooth_rxtx.c **** 
1339:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t*)idle_rxbuf);
1340:bluetooth_rxtx.c **** 
1341:bluetooth_rxtx.c **** 		handle_usb(clkn);
1342:bluetooth_rxtx.c **** 		rx_tc = 0;
1343:bluetooth_rxtx.c **** 		rx_err = 0;
1344:bluetooth_rxtx.c **** 	}
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 25


1345:bluetooth_rxtx.c **** 
1346:bluetooth_rxtx.c **** 	/* This call is a nop so far. Since bt_rx_stream() starts the
1347:bluetooth_rxtx.c **** 	 * stream, it makes sense that it would stop it. TODO - how
1348:bluetooth_rxtx.c **** 	 * should setup/teardown be handled? Should every new mode be
1349:bluetooth_rxtx.c **** 	 * starting from scratch? */
1350:bluetooth_rxtx.c **** 	dio_ssp_stop();
1351:bluetooth_rxtx.c **** 	cs_trigger_disable();
1352:bluetooth_rxtx.c **** }
1353:bluetooth_rxtx.c **** 
1354:bluetooth_rxtx.c **** static uint8_t reverse8(uint8_t data)
1355:bluetooth_rxtx.c **** {
  26              		.loc 1 1355 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 10B5     		push	{r4, lr}
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 4, -8
  34              		.cfi_offset 14, -4
  35              	.LVL1:
  36              	.LBB4:
1356:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
1357:bluetooth_rxtx.c **** 
1358:bluetooth_rxtx.c **** 	for(size_t i=0; i<8; i++)
  37              		.loc 1 1358 0
  38 0002 0023     		movs	r3, #0
  39              	.LBE4:
1356:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
  40              		.loc 1 1356 0
  41 0004 1A46     		mov	r2, r3
  42              	.LVL2:
  43              	.L2:
  44              	.LBB5:
1359:bluetooth_rxtx.c **** 	{
1360:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (7-i);
  45              		.loc 1 1360 0 discriminator 3
  46 0006 40FA03F1 		asr	r1, r0, r3
  47 000a C3F10704 		rsb	r4, r3, #7
  48 000e 01F00101 		and	r1, r1, #1
  49 0012 A140     		lsls	r1, r1, r4
1358:bluetooth_rxtx.c **** 	{
  50              		.loc 1 1358 0 discriminator 3
  51 0014 0133     		adds	r3, r3, #1
  52              	.LVL3:
  53              		.loc 1 1360 0 discriminator 3
  54 0016 0A43     		orrs	r2, r2, r1
  55              	.LVL4:
1358:bluetooth_rxtx.c **** 	{
  56              		.loc 1 1358 0 discriminator 3
  57 0018 082B     		cmp	r3, #8
  58              		.loc 1 1360 0 discriminator 3
  59 001a D2B2     		uxtb	r2, r2
  60              	.LVL5:
1358:bluetooth_rxtx.c **** 	{
  61              		.loc 1 1358 0 discriminator 3
  62 001c F3D1     		bne	.L2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 26


  63              	.LBE5:
1361:bluetooth_rxtx.c **** 	}
1362:bluetooth_rxtx.c **** 
1363:bluetooth_rxtx.c **** 	return reversed;
1364:bluetooth_rxtx.c **** }
  64              		.loc 1 1364 0
  65 001e 1046     		mov	r0, r2
  66              	.LVL6:
  67 0020 10BD     		pop	{r4, pc}
  68              		.cfi_endproc
  69              	.LFE15:
  71              		.section	.text.cc2400_rx,"ax",%progbits
  72              		.align	1
  73              		.thumb
  74              		.thumb_func
  76              	cc2400_rx:
  77              	.LFB8:
 893:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
  78              		.loc 1 893 0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 0
  81              		@ frame_needed = 0, uses_anonymous_args = 0
  82 0000 38B5     		push	{r3, r4, r5, lr}
  83              		.cfi_def_cfa_offset 16
  84              		.cfi_offset 3, -16
  85              		.cfi_offset 4, -12
  86              		.cfi_offset 5, -8
  87              		.cfi_offset 14, -4
  88              	.LVL7:
 896:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
  89              		.loc 1 896 0
  90 0002 254B     		ldr	r3, .L20
  91 0004 254C     		ldr	r4, .L20+4
  92 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
  93 0008 12B1     		cbz	r2, .L6
 896:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
  94              		.loc 1 896 0 is_stmt 0 discriminator 1
  95 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
  96 000c 012A     		cmp	r2, #1
  97 000e 27D1     		bne	.L7
  98              	.L6:
 897:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
  99              		.loc 1 897 0 is_stmt 1
 100 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 101 0012 33B1     		cbz	r3, .L11
 899:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 102              		.loc 1 899 0
 103 0014 204B     		ldr	r3, .L20
 104 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 900:bluetooth_rxtx.c **** 		}
 105              		.loc 1 900 0
 106 0018 012B     		cmp	r3, #1
 107 001a 14BF     		ite	ne
 108 001c 0025     		movne	r5, #0
 109 001e 4025     		moveq	r5, #64
 110 0020 00E0     		b	.L8
 111              	.L11:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 27


 898:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
 112              		.loc 1 898 0
 113 0022 2925     		movs	r5, #41
 114              	.L8:
 115              	.LVL8:
 902:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
 116              		.loc 1 902 0
 117 0024 0D20     		movs	r0, #13
 118 0026 47F6FF71 		movw	r1, #32767
 119 002a FFF7FEFF 		bl	cc2400_set
 120              	.LVL9:
 903:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 121              		.loc 1 903 0
 122 002e 1220     		movs	r0, #18
 123 0030 42F62231 		movw	r1, #11042
 124 0034 FFF7FEFF 		bl	cc2400_set
 125              	.LVL10:
 904:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 126              		.loc 1 904 0
 127 0038 1420     		movs	r0, #20
 128 003a 41F24B31 		movw	r1, #4939
 129 003e FFF7FEFF 		bl	cc2400_set
 130              	.LVL11:
 905:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
 131              		.loc 1 905 0
 132 0042 2020     		movs	r0, #32
 133 0044 40F20111 		movw	r1, #257
 134 0048 FFF7FEFF 		bl	cc2400_set
 135              	.LVL12:
 912:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
 136              		.loc 1 912 0
 137 004c 2188     		ldrh	r1, [r4]
 138 004e 0220     		movs	r0, #2
 139 0050 0139     		subs	r1, r1, #1
 140 0052 89B2     		uxth	r1, r1
 141 0054 FFF7FEFF 		bl	cc2400_set
 142              	.LVL13:
 913:bluetooth_rxtx.c **** 	}
 143              		.loc 1 913 0
 144 0058 0320     		movs	r0, #3
 145 005a 2946     		mov	r1, r5
 146 005c FFF7FEFF 		bl	cc2400_set
 147              	.LVL14:
 148              	.L7:
 917:bluetooth_rxtx.c **** 
 149              		.loc 1 917 0
 150 0060 2088     		ldrh	r0, [r4]
 151 0062 80B2     		uxth	r0, r0
 152 0064 FFF7FEFF 		bl	cs_threshold_calc_and_set
 153              	.LVL15:
 919:bluetooth_rxtx.c **** 
 154              		.loc 1 919 0
 155 0068 FFF7FEFF 		bl	clkn_start
 156              	.LVL16:
 157              	.L9:
 921:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 158              		.loc 1 921 0 discriminator 1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 28


 159 006c FFF7FEFF 		bl	cc2400_status
 160              	.LVL17:
 161 0070 4206     		lsls	r2, r0, #25
 162 0072 FBD5     		bpl	.L9
 922:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 163              		.loc 1 922 0
 164 0074 6120     		movs	r0, #97
 165 0076 FFF7FEFF 		bl	cc2400_strobe
 166              	.LVL18:
 167              	.L10:
 923:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 168              		.loc 1 923 0 discriminator 1
 169 007a FFF7FEFF 		bl	cc2400_status
 170              	.LVL19:
 171 007e 4307     		lsls	r3, r0, #29
 172 0080 FBD5     		bpl	.L10
 924:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 173              		.loc 1 924 0
 174 0082 6220     		movs	r0, #98
 175 0084 FFF7FEFF 		bl	cc2400_strobe
 176              	.LVL20:
 926:bluetooth_rxtx.c **** 	HGM_SET;
 177              		.loc 1 926 0
 178 0088 054B     		ldr	r3, .L20+8
 179 008a 8022     		movs	r2, #128
 180 008c 1A60     		str	r2, [r3]
 927:bluetooth_rxtx.c **** #endif
 181              		.loc 1 927 0
 182 008e 4FF48072 		mov	r2, #256
 183 0092 1A60     		str	r2, [r3]
 184 0094 38BD     		pop	{r3, r4, r5, pc}
 185              	.L21:
 186 0096 00BF     		.align	2
 187              	.L20:
 188 0098 00000000 		.word	.LANCHOR0
 189 009c 00000000 		.word	.LANCHOR1
 190 00a0 58C00920 		.word	537509976
 191              		.cfi_endproc
 192              	.LFE8:
 194              		.section	.text.cc2400_rx_sync,"ax",%progbits
 195              		.align	1
 196              		.thumb
 197              		.thumb_func
 199              	cc2400_rx_sync:
 200              	.LFB9:
 933:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 201              		.loc 1 933 0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              	.LVL21:
 206 0000 70B5     		push	{r4, r5, r6, lr}
 207              		.cfi_def_cfa_offset 16
 208              		.cfi_offset 4, -16
 209              		.cfi_offset 5, -12
 210              		.cfi_offset 6, -8
 211              		.cfi_offset 14, -4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 29


 936:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 212              		.loc 1 936 0
 213 0002 274B     		ldr	r3, .L32
 933:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 214              		.loc 1 933 0
 215 0004 0446     		mov	r4, r0
 936:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 216              		.loc 1 936 0
 217 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 218 0008 32B1     		cbz	r2, .L27
 947:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 219              		.loc 1 947 0
 220 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 221 000c 012B     		cmp	r3, #1
 222 000e 46D1     		bne	.L22
 948:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 223              		.loc 1 948 0
 224 0010 4025     		movs	r5, #64
 949:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
 225              		.loc 1 949 0
 226 0012 40F26156 		movw	r6, #1377
 227 0016 02E0     		b	.L23
 228              	.L27:
 938:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
 229              		.loc 1 938 0
 230 0018 40F26146 		movw	r6, #1121
 937:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 231              		.loc 1 937 0
 232 001c 2925     		movs	r5, #41
 233              	.L23:
 234              	.LVL22:
 963:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 235              		.loc 1 963 0
 236 001e 0D20     		movs	r0, #13
 237              	.LVL23:
 238 0020 47F6FF71 		movw	r1, #32767
 239 0024 FFF7FEFF 		bl	cc2400_set
 240              	.LVL24:
 964:bluetooth_rxtx.c **** 
 241              		.loc 1 964 0
 242 0028 1220     		movs	r0, #18
 243 002a 42F62231 		movw	r1, #11042
 244 002e FFF7FEFF 		bl	cc2400_set
 245              	.LVL25:
 966:bluetooth_rxtx.c **** 	// 1      2      4b
 246              		.loc 1 966 0
 247 0032 1420     		movs	r0, #20
 248 0034 41F24B21 		movw	r1, #4683
 249 0038 FFF7FEFF 		bl	cc2400_set
 250              	.LVL26:
 979:bluetooth_rxtx.c **** 
 251              		.loc 1 979 0
 252 003c 2020     		movs	r0, #32
 253 003e 3146     		mov	r1, r6
 254 0040 FFF7FEFF 		bl	cc2400_set
 255              	.LVL27:
 981:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 30


 256              		.loc 1 981 0
 257 0044 A1B2     		uxth	r1, r4
 258 0046 2C20     		movs	r0, #44
 259 0048 FFF7FEFF 		bl	cc2400_set
 260              	.LVL28:
 982:bluetooth_rxtx.c **** 
 261              		.loc 1 982 0
 262 004c 210C     		lsrs	r1, r4, #16
 984:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 263              		.loc 1 984 0
 264 004e 154C     		ldr	r4, .L32+4
 265              	.LVL29:
 982:bluetooth_rxtx.c **** 
 266              		.loc 1 982 0
 267 0050 2D20     		movs	r0, #45
 268 0052 FFF7FEFF 		bl	cc2400_set
 269              	.LVL30:
 984:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 270              		.loc 1 984 0
 271 0056 2188     		ldrh	r1, [r4]
 272 0058 0220     		movs	r0, #2
 273 005a 0139     		subs	r1, r1, #1
 274 005c 89B2     		uxth	r1, r1
 275 005e FFF7FEFF 		bl	cc2400_set
 276              	.LVL31:
 985:bluetooth_rxtx.c **** 
 277              		.loc 1 985 0
 278 0062 0320     		movs	r0, #3
 279 0064 2946     		mov	r1, r5
 280 0066 FFF7FEFF 		bl	cc2400_set
 281              	.LVL32:
 988:bluetooth_rxtx.c **** 
 282              		.loc 1 988 0
 283 006a 2088     		ldrh	r0, [r4]
 284 006c 80B2     		uxth	r0, r0
 285 006e FFF7FEFF 		bl	cs_threshold_calc_and_set
 286              	.LVL33:
 990:bluetooth_rxtx.c **** 
 287              		.loc 1 990 0
 288 0072 FFF7FEFF 		bl	clkn_start
 289              	.LVL34:
 290              	.L25:
 992:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 291              		.loc 1 992 0 discriminator 1
 292 0076 FFF7FEFF 		bl	cc2400_status
 293              	.LVL35:
 294 007a 4206     		lsls	r2, r0, #25
 295 007c FBD5     		bpl	.L25
 993:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 296              		.loc 1 993 0
 297 007e 6120     		movs	r0, #97
 298 0080 FFF7FEFF 		bl	cc2400_strobe
 299              	.LVL36:
 300              	.L26:
 994:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 301              		.loc 1 994 0 discriminator 1
 302 0084 FFF7FEFF 		bl	cc2400_status
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 31


 303              	.LVL37:
 304 0088 4307     		lsls	r3, r0, #29
 305 008a FBD5     		bpl	.L26
 995:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 306              		.loc 1 995 0
 307 008c 6220     		movs	r0, #98
 308 008e FFF7FEFF 		bl	cc2400_strobe
 309              	.LVL38:
 997:bluetooth_rxtx.c **** 	HGM_SET;
 310              		.loc 1 997 0
 311 0092 054B     		ldr	r3, .L32+8
 312 0094 8022     		movs	r2, #128
 313 0096 1A60     		str	r2, [r3]
 998:bluetooth_rxtx.c **** #endif
 314              		.loc 1 998 0
 315 0098 4FF48072 		mov	r2, #256
 316 009c 1A60     		str	r2, [r3]
 317              	.LVL39:
 318              	.L22:
 319 009e 70BD     		pop	{r4, r5, r6, pc}
 320              	.L33:
 321              		.align	2
 322              	.L32:
 323 00a0 00000000 		.word	.LANCHOR0
 324 00a4 00000000 		.word	.LANCHOR1
 325 00a8 58C00920 		.word	537509976
 326              		.cfi_endproc
 327              	.LFE9:
 329              		.section	.text.enqueue,"ax",%progbits
 330              		.align	1
 331              		.thumb
 332              		.thumb_func
 334              	enqueue:
 335              	.LFB0:
 127:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 336              		.loc 1 127 0
 337              		.cfi_startproc
 338              		@ args = 0, pretend = 0, frame = 0
 339              		@ frame_needed = 0, uses_anonymous_args = 0
 340              	.LVL40:
 341 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 342              		.cfi_def_cfa_offset 24
 343              		.cfi_offset 3, -24
 344              		.cfi_offset 4, -20
 345              		.cfi_offset 5, -16
 346              		.cfi_offset 6, -12
 347              		.cfi_offset 7, -8
 348              		.cfi_offset 14, -4
 127:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 349              		.loc 1 127 0
 350 0002 0746     		mov	r7, r0
 351 0004 0E46     		mov	r6, r1
 128:bluetooth_rxtx.c **** 
 352              		.loc 1 128 0
 353 0006 FFF7FEFF 		bl	usb_enqueue
 354              	.LVL41:
 355 000a 1D4D     		ldr	r5, .L39
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 32


 131:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 356              		.loc 1 131 0
 357 000c 0446     		mov	r4, r0
 358 000e 20B9     		cbnz	r0, .L35
 132:bluetooth_rxtx.c **** 		return 0;
 359              		.loc 1 132 0
 360 0010 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 361 0012 43F00403 		orr	r3, r3, #4
 362 0016 6B70     		strb	r3, [r5, #1]
 133:bluetooth_rxtx.c **** 	}
 363              		.loc 1 133 0
 364 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 365              	.LVL42:
 366              	.L35:
 137:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 367              		.loc 1 137 0
 368 001a 042F     		cmp	r7, #4
 136:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 369              		.loc 1 136 0
 370 001c 0770     		strb	r7, [r0]
 137:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 371              		.loc 1 137 0
 372 001e 0ED1     		bne	.L37
 139:bluetooth_rxtx.c **** 	} else {
 373              		.loc 1 139 0
 374 0020 40F63541 		movw	r1, #3125
 138:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 375              		.loc 1 138 0
 376 0024 174A     		ldr	r2, .L39+4
 377 0026 1368     		ldr	r3, [r2]
 378 0028 1B0D     		lsrs	r3, r3, #20
 379 002a C370     		strb	r3, [r0, #3]
 139:bluetooth_rxtx.c **** 	} else {
 380              		.loc 1 139 0
 381 002c 164B     		ldr	r3, .L39+8
 382 002e 1268     		ldr	r2, [r2]
 383 0030 1B68     		ldr	r3, [r3]
 384 0032 C2F31302 		ubfx	r2, r2, #0, #20
 385 0036 01FB0233 		mla	r3, r1, r2, r3
 386 003a 4360     		str	r3, [r0, #4]
 387 003c 14E0     		b	.L38
 388              	.L37:
 141:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 389              		.loc 1 141 0
 390 003e AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 391 0040 C370     		strb	r3, [r0, #3]
 142:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 392              		.loc 1 142 0
 393 0042 6B68     		ldr	r3, [r5, #4]
 394 0044 4360     		str	r3, [r0, #4]
 143:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 395              		.loc 1 143 0
 396 0046 2B89     		ldrh	r3, [r5, #8]
 397 0048 623B     		subs	r3, r3, #98
 398 004a 8370     		strb	r3, [r0, #2]
 144:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 399              		.loc 1 144 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 33


 400 004c 0F4B     		ldr	r3, .L39+12
 401 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 402 0050 4372     		strb	r3, [r0, #9]
 145:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 403              		.loc 1 145 0
 404 0052 0F4B     		ldr	r3, .L39+16
 405 0054 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 406 0056 0372     		strb	r3, [r0, #8]
 146:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 407              		.loc 1 146 0
 408 0058 2889     		ldrh	r0, [r5, #8]
 409              	.LVL43:
 410 005a 80B2     		uxth	r0, r0
 411 005c FFF7FEFF 		bl	rssi_get_avg
 412              	.LVL44:
 147:bluetooth_rxtx.c **** 	}
 413              		.loc 1 147 0
 414 0060 0C4B     		ldr	r3, .L39+20
 146:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 415              		.loc 1 146 0
 416 0062 A072     		strb	r0, [r4, #10]
 147:bluetooth_rxtx.c **** 	}
 417              		.loc 1 147 0
 418 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 419 0066 E372     		strb	r3, [r4, #11]
 420              	.L38:
 150:bluetooth_rxtx.c **** 
 421              		.loc 1 150 0
 422 0068 04F10E00 		add	r0, r4, #14
 423 006c 3146     		mov	r1, r6
 424 006e 3222     		movs	r2, #50
 425 0070 FFF7FEFF 		bl	memcpy
 426              	.LVL45:
 152:bluetooth_rxtx.c **** 	status = 0;
 427              		.loc 1 152 0
 428 0074 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 155:bluetooth_rxtx.c **** }
 429              		.loc 1 155 0
 430 0076 0120     		movs	r0, #1
 152:bluetooth_rxtx.c **** 	status = 0;
 431              		.loc 1 152 0
 432 0078 6370     		strb	r3, [r4, #1]
 153:bluetooth_rxtx.c **** 
 433              		.loc 1 153 0
 434 007a 0023     		movs	r3, #0
 435 007c 6B70     		strb	r3, [r5, #1]
 156:bluetooth_rxtx.c **** 
 436              		.loc 1 156 0
 437 007e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 438              	.LVL46:
 439              	.L40:
 440              		.align	2
 441              	.L39:
 442 0080 00000000 		.word	.LANCHOR0
 443 0084 00000000 		.word	clkn
 444 0088 08400040 		.word	1073758216
 445 008c 00000000 		.word	rssi_min
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 34


 446 0090 00000000 		.word	rssi_max
 447 0094 00000000 		.word	rssi_count
 448              		.cfi_endproc
 449              	.LFE0:
 451              		.section	.text.le_set_access_address,"ax",%progbits
 452              		.align	1
 453              		.thumb
 454              		.thumb_func
 456              	le_set_access_address:
 457              	.LFB18:
1365:bluetooth_rxtx.c **** 
1366:bluetooth_rxtx.c **** static uint16_t reverse16(uint16_t data)
1367:bluetooth_rxtx.c **** {
1368:bluetooth_rxtx.c **** 	uint16_t reversed = 0;
1369:bluetooth_rxtx.c **** 
1370:bluetooth_rxtx.c **** 	for(size_t i=0; i<16; i++)
1371:bluetooth_rxtx.c **** 	{
1372:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (15-i);
1373:bluetooth_rxtx.c **** 	}
1374:bluetooth_rxtx.c **** 
1375:bluetooth_rxtx.c **** 	return reversed;
1376:bluetooth_rxtx.c **** }
1377:bluetooth_rxtx.c **** 
1378:bluetooth_rxtx.c **** /*
1379:bluetooth_rxtx.c ****  * Transmit a BTBR packet with the specified access code.
1380:bluetooth_rxtx.c ****  *
1381:bluetooth_rxtx.c ****  * All modulation parameters are set within this function.
1382:bluetooth_rxtx.c ****  */
1383:bluetooth_rxtx.c **** void br_transmit()
1384:bluetooth_rxtx.c **** {
1385:bluetooth_rxtx.c **** 	uint16_t gio_save;
1386:bluetooth_rxtx.c **** 
1387:bluetooth_rxtx.c **** 	uint32_t clkn_saved = 0;
1388:bluetooth_rxtx.c **** 
1389:bluetooth_rxtx.c **** 	uint16_t preamble = (target.syncword & 1) == 1 ? 0x5555 : 0xaaaa;
1390:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
1391:bluetooth_rxtx.c **** 
1392:bluetooth_rxtx.c **** 	uint8_t data[16] = {
1393:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
1394:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
1395:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
1396:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
1397:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
1398:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
1399:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
1400:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
1401:bluetooth_rxtx.c **** 		reverse8(trailer),
1402:bluetooth_rxtx.c **** 		reverse8(0x77),
1403:bluetooth_rxtx.c **** 		reverse8(0x66),
1404:bluetooth_rxtx.c **** 		reverse8(0x55),
1405:bluetooth_rxtx.c **** 		reverse8(0x44),
1406:bluetooth_rxtx.c **** 		reverse8(0x33),
1407:bluetooth_rxtx.c **** 		reverse8(0x22),
1408:bluetooth_rxtx.c **** 		reverse8(0x11)
1409:bluetooth_rxtx.c **** 	};
1410:bluetooth_rxtx.c **** 
1411:bluetooth_rxtx.c **** 	cc2400_tx_sync(reverse16(preamble));
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 35


1412:bluetooth_rxtx.c **** 
1413:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
1414:bluetooth_rxtx.c **** 
1415:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1416:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
1417:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
1418:bluetooth_rxtx.c **** 
1419:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_TX_SYMBOLS )
1420:bluetooth_rxtx.c **** 	{
1421:bluetooth_rxtx.c **** 
1422:bluetooth_rxtx.c **** 		while ((clkn >> 1) == (clkn_saved >> 1) || T0TC < 2250) {
1423:bluetooth_rxtx.c **** 
1424:bluetooth_rxtx.c **** 			// If timer says time to hop, do it.
1425:bluetooth_rxtx.c **** 			if (do_hop) {
1426:bluetooth_rxtx.c **** 				hop();
1427:bluetooth_rxtx.c **** 			}
1428:bluetooth_rxtx.c **** 		}
1429:bluetooth_rxtx.c **** 
1430:bluetooth_rxtx.c **** 		clkn_saved = clkn;
1431:bluetooth_rxtx.c **** 
1432:bluetooth_rxtx.c **** 		TXLED_SET;
1433:bluetooth_rxtx.c **** 
1434:bluetooth_rxtx.c **** 		cc2400_fifo_write(16, data);
1435:bluetooth_rxtx.c **** 
1436:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1437:bluetooth_rxtx.c **** 		TXLED_CLR;
1438:bluetooth_rxtx.c **** 
1439:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
1440:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
1441:bluetooth_rxtx.c **** 
1442:bluetooth_rxtx.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
1443:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1444:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
1445:bluetooth_rxtx.c **** 
1446:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1447:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1448:bluetooth_rxtx.c **** 
1449:bluetooth_rxtx.c **** 		handle_usb(clkn);
1450:bluetooth_rxtx.c **** 	}
1451:bluetooth_rxtx.c **** 
1452:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1453:bluetooth_rxtx.c **** 	PAEN_CLR;
1454:bluetooth_rxtx.c **** #endif
1455:bluetooth_rxtx.c **** 
1456:bluetooth_rxtx.c **** 	// reset GIO
1457:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
1458:bluetooth_rxtx.c **** }
1459:bluetooth_rxtx.c **** 
1460:bluetooth_rxtx.c **** /* set LE access address */
1461:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 458              		.loc 1 1461 0
 459              		.cfi_startproc
 460              		@ args = 0, pretend = 0, frame = 0
 461              		@ frame_needed = 0, uses_anonymous_args = 0
 462              	.LVL47:
 463 0000 10B5     		push	{r4, lr}
 464              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 36


 465              		.cfi_offset 4, -8
 466              		.cfi_offset 14, -4
1462:bluetooth_rxtx.c **** 	u32 aa_rev;
1463:bluetooth_rxtx.c **** 
1464:bluetooth_rxtx.c **** 	le.access_address = aa;
 467              		.loc 1 1464 0
 468 0002 044C     		ldr	r4, .L42
 469 0004 6060     		str	r0, [r4, #4]
1465:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 470              		.loc 1 1465 0
 471 0006 FFF7FEFF 		bl	rbit
 472              	.LVL48:
1466:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 473              		.loc 1 1466 0
 474 000a 6081     		strh	r0, [r4, #10]	@ movhi
1467:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 475              		.loc 1 1467 0
 476 000c 000C     		lsrs	r0, r0, #16
 477              	.LVL49:
 478 000e 2081     		strh	r0, [r4, #8]	@ movhi
 479 0010 10BD     		pop	{r4, pc}
 480              	.L43:
 481 0012 00BF     		.align	2
 482              	.L42:
 483 0014 00000000 		.word	.LANCHOR1
 484              		.cfi_endproc
 485              	.LFE18:
 487              		.section	.text.cc2400_idle,"ax",%progbits
 488              		.align	1
 489              		.thumb
 490              		.thumb_func
 492              	cc2400_idle:
 493              	.LFB7:
 839:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 494              		.loc 1 839 0
 495              		.cfi_startproc
 496              		@ args = 0, pretend = 0, frame = 0
 497              		@ frame_needed = 0, uses_anonymous_args = 0
 498 0000 10B5     		push	{r4, lr}
 499              		.cfi_def_cfa_offset 8
 500              		.cfi_offset 4, -8
 501              		.cfi_offset 14, -4
 840:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 502              		.loc 1 840 0
 503 0002 6420     		movs	r0, #100
 504 0004 FFF7FEFF 		bl	cc2400_strobe
 505              	.LVL50:
 506              	.L45:
 841:bluetooth_rxtx.c **** 
 507              		.loc 1 841 0 discriminator 1
 508 0008 FFF7FEFF 		bl	cc2400_status
 509              	.LVL51:
 510 000c 00F00400 		and	r0, r0, #4
 511 0010 00F0FF04 		and	r4, r0, #255
 512 0014 0028     		cmp	r0, #0
 513 0016 F7D1     		bne	.L45
 844:bluetooth_rxtx.c **** 	HGM_CLR;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 37


 514              		.loc 1 844 0
 515 0018 214B     		ldr	r3, .L47
 516 001a 8022     		movs	r2, #128
 517 001c 1A60     		str	r2, [r3]
 848:bluetooth_rxtx.c **** 	TXLED_CLR;
 518              		.loc 1 848 0
 519 001e 1021     		movs	r1, #16
 845:bluetooth_rxtx.c **** #endif
 520              		.loc 1 845 0
 521 0020 4FF48072 		mov	r2, #256
 522 0024 1A60     		str	r2, [r3]
 848:bluetooth_rxtx.c **** 	TXLED_CLR;
 523              		.loc 1 848 0
 524 0026 43F8201C 		str	r1, [r3, #-32]
 849:bluetooth_rxtx.c **** 	USRLED_CLR;
 525              		.loc 1 849 0
 526 002a 43F8202C 		str	r2, [r3, #-32]
 850:bluetooth_rxtx.c **** 
 527              		.loc 1 850 0
 528 002e 0222     		movs	r2, #2
 529 0030 43F8202C 		str	r2, [r3, #-32]
 852:bluetooth_rxtx.c **** 	dio_ssp_stop();
 530              		.loc 1 852 0
 531 0034 FFF7FEFF 		bl	clkn_stop
 532              	.LVL52:
 853:bluetooth_rxtx.c **** 	cs_reset();
 533              		.loc 1 853 0
 534 0038 FFF7FEFF 		bl	dio_ssp_stop
 535              	.LVL53:
 854:bluetooth_rxtx.c **** 	rssi_reset();
 536              		.loc 1 854 0
 537 003c FFF7FEFF 		bl	cs_reset
 538              	.LVL54:
 855:bluetooth_rxtx.c **** 
 539              		.loc 1 855 0
 540 0040 FFF7FEFF 		bl	rssi_reset
 541              	.LVL55:
 860:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 542              		.loc 1 860 0
 543 0044 40F68911 		movw	r1, #2441
 858:bluetooth_rxtx.c **** 	do_hop = 0;
 544              		.loc 1 858 0
 545 0048 164B     		ldr	r3, .L47+4
 860:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 546              		.loc 1 860 0
 547 004a 174A     		ldr	r2, .L47+8
 858:bluetooth_rxtx.c **** 	do_hop = 0;
 548              		.loc 1 858 0
 549 004c 9C72     		strb	r4, [r3, #10]
 859:bluetooth_rxtx.c **** 	channel = 2441;
 550              		.loc 1 859 0
 551 004e DC72     		strb	r4, [r3, #11]
 860:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 552              		.loc 1 860 0
 553 0050 1180     		strh	r1, [r2]	@ movhi
 862:bluetooth_rxtx.c **** 	requested_channel = 0;
 554              		.loc 1 862 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 38


 555 0052 9E21     		movs	r1, #158
 861:bluetooth_rxtx.c **** 	hop_timeout = 158;
 556              		.loc 1 861 0
 557 0054 9C81     		strh	r4, [r3, #12]	@ movhi
 862:bluetooth_rxtx.c **** 	requested_channel = 0;
 558              		.loc 1 862 0
 559 0056 A2F84810 		strh	r1, [r2, #72]	@ movhi
 864:bluetooth_rxtx.c **** 
 560              		.loc 1 864 0
 561 005a 40F66211 		movw	r1, #2402
 863:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 562              		.loc 1 863 0
 563 005e DC81     		strh	r4, [r3, #14]	@ movhi
 864:bluetooth_rxtx.c **** 
 564              		.loc 1 864 0
 565 0060 A2F84A10 		strh	r1, [r2, #74]	@ movhi
 868:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 566              		.loc 1 868 0
 567 0064 9C70     		strb	r4, [r3, #2]
 869:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 568              		.loc 1 869 0
 569 0066 5C60     		str	r4, [r3, #4]
 870:bluetooth_rxtx.c **** 	dma_discard = 0;
 570              		.loc 1 870 0
 571 0068 1C81     		strh	r4, [r3, #8]	@ movhi
 871:bluetooth_rxtx.c **** 	status = 0;
 572              		.loc 1 871 0
 573 006a 1C74     		strb	r4, [r3, #16]
 872:bluetooth_rxtx.c **** 
 574              		.loc 1 872 0
 575 006c 5C70     		strb	r4, [r3, #1]
 875:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 576              		.loc 1 875 0
 577 006e 5C74     		strb	r4, [r3, #17]
 876:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
 578              		.loc 1 876 0
 579 0070 9C74     		strb	r4, [r3, #18]
 877:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 580              		.loc 1 877 0
 581 0072 DC74     		strb	r4, [r3, #19]
 878:bluetooth_rxtx.c **** 
 582              		.loc 1 878 0
 583 0074 1C75     		strb	r4, [r3, #20]
 880:bluetooth_rxtx.c **** 
 584              		.loc 1 880 0
 585 0076 1C70     		strb	r4, [r3]
 883:bluetooth_rxtx.c **** 	high_freq = 2483;
 586              		.loc 1 883 0
 587 0078 4FF41663 		mov	r3, #2400
 588 007c A2F84C30 		strh	r3, [r2, #76]	@ movhi
 884:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 589              		.loc 1 884 0
 590 0080 40F6B313 		movw	r3, #2483
 591 0084 A2F84E30 		strh	r3, [r2, #78]	@ movhi
 885:bluetooth_rxtx.c **** 
 592              		.loc 1 885 0
 593 0088 E223     		movs	r3, #226
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 39


 594 008a 82F85030 		strb	r3, [r2, #80]
 887:bluetooth_rxtx.c **** 	target.syncword = 0;
 595              		.loc 1 887 0
 596 008e 074B     		ldr	r3, .L47+12
 597 0090 0020     		movs	r0, #0
 598 0092 0021     		movs	r1, #0
 599 0094 C3E90001 		strd	r0, [r3]
 888:bluetooth_rxtx.c **** }
 600              		.loc 1 888 0
 601 0098 C3E90201 		strd	r0, [r3, #8]
 602 009c 10BD     		pop	{r4, pc}
 603              	.L48:
 604 009e 00BF     		.align	2
 605              	.L47:
 606 00a0 5CC00920 		.word	537509980
 607 00a4 00000000 		.word	.LANCHOR0
 608 00a8 00000000 		.word	.LANCHOR1
 609 00ac 00000000 		.word	target
 610              		.cfi_endproc
 611              	.LFE7:
 613              		.section	.text.cb_follow_le,"ax",%progbits
 614              		.align	1
 615              		.global	cb_follow_le
 616              		.thumb
 617              		.thumb_func
 619              	cb_follow_le:
 620              	.LFB24:
1468:bluetooth_rxtx.c **** }
1469:bluetooth_rxtx.c **** 
1470:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1471:bluetooth_rxtx.c **** void reset_le() {
1472:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
1473:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
1474:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
1475:bluetooth_rxtx.c **** 	le.crc_verify = 0;
1476:bluetooth_rxtx.c **** 	le.last_packet = 0;
1477:bluetooth_rxtx.c **** 
1478:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
1479:bluetooth_rxtx.c **** 
1480:bluetooth_rxtx.c **** 	le.channel_idx = 0;
1481:bluetooth_rxtx.c **** 	le.channel_increment = 0;
1482:bluetooth_rxtx.c **** 
1483:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
1484:bluetooth_rxtx.c **** 	le.interval_timer = 0;
1485:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1486:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1487:bluetooth_rxtx.c **** 	le.conn_count = 0;
1488:bluetooth_rxtx.c **** 
1489:bluetooth_rxtx.c **** 	le.win_size = 0;
1490:bluetooth_rxtx.c **** 	le.win_offset = 0;
1491:bluetooth_rxtx.c **** 
1492:bluetooth_rxtx.c **** 	le.update_pending = 0;
1493:bluetooth_rxtx.c **** 	le.update_instant = 0;
1494:bluetooth_rxtx.c **** 	le.interval_update = 0;
1495:bluetooth_rxtx.c **** 	le.win_size_update = 0;
1496:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
1497:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 40


1498:bluetooth_rxtx.c **** 	do_hop = 0;
1499:bluetooth_rxtx.c **** }
1500:bluetooth_rxtx.c **** 
1501:bluetooth_rxtx.c **** // reset LE Promisc state
1502:bluetooth_rxtx.c **** void reset_le_promisc(void) {
1503:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
1504:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
1505:bluetooth_rxtx.c **** }
1506:bluetooth_rxtx.c **** 
1507:bluetooth_rxtx.c **** /* generic le mode */
1508:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1509:bluetooth_rxtx.c **** {
1510:bluetooth_rxtx.c **** 	u8 hold;
1511:bluetooth_rxtx.c **** 	int i, j;
1512:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1513:bluetooth_rxtx.c **** 
1514:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1515:bluetooth_rxtx.c **** 	mode = active_mode;
1516:bluetooth_rxtx.c **** 
1517:bluetooth_rxtx.c **** 	reset_le();
1518:bluetooth_rxtx.c **** 
1519:bluetooth_rxtx.c **** 	// enable USB interrupts
1520:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1521:bluetooth_rxtx.c **** 
1522:bluetooth_rxtx.c **** 	RXLED_CLR;
1523:bluetooth_rxtx.c **** 
1524:bluetooth_rxtx.c **** 	queue_init();
1525:bluetooth_rxtx.c **** 	dio_ssp_init();
1526:bluetooth_rxtx.c **** 	dma_init();
1527:bluetooth_rxtx.c **** 	dio_ssp_start();
1528:bluetooth_rxtx.c **** 	cc2400_rx();
1529:bluetooth_rxtx.c **** 
1530:bluetooth_rxtx.c **** 	cs_trigger_enable();
1531:bluetooth_rxtx.c **** 
1532:bluetooth_rxtx.c **** 	hold = 0;
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1535:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1536:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1537:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1538:bluetooth_rxtx.c **** 
1539:bluetooth_rxtx.c **** 			/* Retune */
1540:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1541:bluetooth_rxtx.c **** 
1542:bluetooth_rxtx.c **** 			/* Wait for lock */
1543:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1544:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1545:bluetooth_rxtx.c **** 
1546:bluetooth_rxtx.c **** 			/* RX mode */
1547:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1548:bluetooth_rxtx.c **** 
1549:bluetooth_rxtx.c **** 			requested_channel = 0;
1550:bluetooth_rxtx.c **** 		}
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** 		if (do_hop) {
1553:bluetooth_rxtx.c **** 			hop();
1554:bluetooth_rxtx.c **** 		} else {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 41


1555:bluetooth_rxtx.c **** 			TXLED_CLR;
1556:bluetooth_rxtx.c **** 		}
1557:bluetooth_rxtx.c **** 
1558:bluetooth_rxtx.c **** 		RXLED_CLR;
1559:bluetooth_rxtx.c **** 
1560:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1561:bluetooth_rxtx.c **** 		rssi_reset();
1562:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1563:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
1564:bluetooth_rxtx.c **** 		{
1565:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1566:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1567:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1568:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1569:bluetooth_rxtx.c **** 			}
1570:bluetooth_rxtx.c **** 			rssi_add(rssi);
1571:bluetooth_rxtx.c **** 		}
1572:bluetooth_rxtx.c **** 
1573:bluetooth_rxtx.c **** 		if (rx_err) {
1574:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1575:bluetooth_rxtx.c **** 		}
1576:bluetooth_rxtx.c **** 
1577:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1578:bluetooth_rxtx.c **** 		if (!rx_tc)
1579:bluetooth_rxtx.c **** 			goto rx_continue;
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1582:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1583:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1584:bluetooth_rxtx.c **** 
1585:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
1586:bluetooth_rxtx.c **** 
1587:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1588:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1589:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1590:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1591:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
1592:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1593:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1594:bluetooth_rxtx.c **** 			cs_trigger = 0;
1595:bluetooth_rxtx.c **** 		}
1596:bluetooth_rxtx.c **** 
1597:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1598:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1599:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1600:bluetooth_rxtx.c **** 		}
1601:bluetooth_rxtx.c **** 
1602:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1603:bluetooth_rxtx.c **** 		if (hold == 0) {
1604:bluetooth_rxtx.c **** 			goto rx_continue;
1605:bluetooth_rxtx.c **** 		}
1606:bluetooth_rxtx.c **** 		hold--;
1607:bluetooth_rxtx.c **** 
1608:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1609:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
1610:bluetooth_rxtx.c **** 
1611:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 42


1612:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
1613:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1614:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
1615:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
1616:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
1617:bluetooth_rxtx.c **** 			}
1618:bluetooth_rxtx.c **** 		}
1619:bluetooth_rxtx.c **** 
1620:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
1621:bluetooth_rxtx.c **** 		if (!ret) break;
1622:bluetooth_rxtx.c **** 
1623:bluetooth_rxtx.c **** 	rx_continue:
1624:bluetooth_rxtx.c **** 		rx_tc = 0;
1625:bluetooth_rxtx.c **** 		rx_err = 0;
1626:bluetooth_rxtx.c **** 	}
1627:bluetooth_rxtx.c **** 
1628:bluetooth_rxtx.c **** 	// disable USB interrupts
1629:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
1630:bluetooth_rxtx.c **** 
1631:bluetooth_rxtx.c **** 	// reset the radio completely
1632:bluetooth_rxtx.c **** 	cc2400_idle();
1633:bluetooth_rxtx.c **** 	dio_ssp_stop();
1634:bluetooth_rxtx.c **** 	cs_trigger_disable();
1635:bluetooth_rxtx.c **** }
1636:bluetooth_rxtx.c **** 
1637:bluetooth_rxtx.c **** 
1638:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1639:bluetooth_rxtx.c **** {
1640:bluetooth_rxtx.c **** 	int i;
1641:bluetooth_rxtx.c **** 	int8_t rssi;
1642:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1643:bluetooth_rxtx.c **** 
1644:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1645:bluetooth_rxtx.c **** 	mode = active_mode;
1646:bluetooth_rxtx.c **** 
1647:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
1648:bluetooth_rxtx.c **** 
1649:bluetooth_rxtx.c **** 	// enable USB interrupts
1650:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1651:bluetooth_rxtx.c **** 
1652:bluetooth_rxtx.c **** 	RXLED_CLR;
1653:bluetooth_rxtx.c **** 
1654:bluetooth_rxtx.c **** 	queue_init();
1655:bluetooth_rxtx.c **** 	dio_ssp_init();
1656:bluetooth_rxtx.c **** 	dma_init_le();
1657:bluetooth_rxtx.c **** 	dio_ssp_start();
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
1660:bluetooth_rxtx.c **** 
1661:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1662:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1663:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1664:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1665:bluetooth_rxtx.c **** 
1666:bluetooth_rxtx.c **** 			/* Retune */
1667:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1668:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 43


1669:bluetooth_rxtx.c **** 			/* Wait for lock */
1670:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1671:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1672:bluetooth_rxtx.c **** 
1673:bluetooth_rxtx.c **** 			/* RX mode */
1674:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1675:bluetooth_rxtx.c **** 
1676:bluetooth_rxtx.c **** 			requested_channel = 0;
1677:bluetooth_rxtx.c **** 		}
1678:bluetooth_rxtx.c **** 
1679:bluetooth_rxtx.c **** 		RXLED_CLR;
1680:bluetooth_rxtx.c **** 
1681:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1682:bluetooth_rxtx.c **** 		rssi_reset();
1683:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
1684:bluetooth_rxtx.c **** 			;
1685:bluetooth_rxtx.c **** 
1686:bluetooth_rxtx.c **** 		rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1687:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
1688:bluetooth_rxtx.c **** 
1689:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
1690:bluetooth_rxtx.c **** 			goto cleanup;
1691:bluetooth_rxtx.c **** 		}
1692:bluetooth_rxtx.c **** 
1693:bluetooth_rxtx.c **** 		if (rx_err) {
1694:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1695:bluetooth_rxtx.c **** 		}
1696:bluetooth_rxtx.c **** 
1697:bluetooth_rxtx.c **** 		if (do_hop)
1698:bluetooth_rxtx.c **** 			goto rx_flush;
1699:bluetooth_rxtx.c **** 
1700:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1701:bluetooth_rxtx.c **** 		if (!rx_tc)
1702:bluetooth_rxtx.c **** 			continue;
1703:bluetooth_rxtx.c **** 
1704:bluetooth_rxtx.c **** 		/////////////////////
1705:bluetooth_rxtx.c **** 		// process the packet
1706:bluetooth_rxtx.c **** 
1707:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1] = { 0, };
1708:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1709:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1710:bluetooth_rxtx.c **** 
1711:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
1712:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1713:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1714:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1715:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1716:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1717:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1718:bluetooth_rxtx.c **** 		}
1719:bluetooth_rxtx.c **** 
1720:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
1721:bluetooth_rxtx.c **** 		if (len > 39)
1722:bluetooth_rxtx.c **** 			goto rx_flush;
1723:bluetooth_rxtx.c **** 
1724:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1725:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 44


1726:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1727:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
1728:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1729:bluetooth_rxtx.c **** 				;
1730:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1731:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1732:bluetooth_rxtx.c **** 				;
1733:bluetooth_rxtx.c **** 		}
1734:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1735:bluetooth_rxtx.c **** 
1736:bluetooth_rxtx.c **** 		// strobe SFSON to allow the resync to occur while we process the packet
1737:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1738:bluetooth_rxtx.c **** 
1739:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1740:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1741:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1742:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1743:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1744:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1745:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1746:bluetooth_rxtx.c **** 		}
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** 		if (le.crc_verify) {
1749:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1750:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
1751:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
1752:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
1753:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
1754:bluetooth_rxtx.c **** 				goto rx_flush;
1755:bluetooth_rxtx.c **** 		}
1756:bluetooth_rxtx.c **** 
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 		RXLED_SET;
1759:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
1760:bluetooth_rxtx.c **** 
1761:bluetooth_rxtx.c **** 		// disable USB interrupts while we touch USB data structures
1762:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
1763:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
1764:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
1765:bluetooth_rxtx.c **** 
1766:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
1767:bluetooth_rxtx.c **** 
1768:bluetooth_rxtx.c **** 	rx_flush:
1769:bluetooth_rxtx.c **** 		// this might happen twice, but it's safe to do so
1770:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1771:bluetooth_rxtx.c **** 
1772:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1773:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1774:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
1775:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
1776:bluetooth_rxtx.c **** 		}
1777:bluetooth_rxtx.c **** 
1778:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1779:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
1780:bluetooth_rxtx.c **** 		if (now < le.last_packet)
1781:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
1782:bluetooth_rxtx.c **** 		if  ( // timeout
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 45


1783:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
1784:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
1785:bluetooth_rxtx.c **** 			// jam finished
1786:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
1787:bluetooth_rxtx.c **** 			)
1788:bluetooth_rxtx.c **** 		{
1789:bluetooth_rxtx.c **** 			reset_le();
1790:bluetooth_rxtx.c **** 			le_jam_count = 0;
1791:bluetooth_rxtx.c **** 			TXLED_CLR;
1792:bluetooth_rxtx.c **** 
1793:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
1794:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
1795:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
1796:bluetooth_rxtx.c **** 				goto cleanup;
1797:bluetooth_rxtx.c **** 			}
1798:bluetooth_rxtx.c **** 
1799:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
1800:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
1801:bluetooth_rxtx.c **** 				goto cleanup;
1802:bluetooth_rxtx.c **** 
1803:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
1804:bluetooth_rxtx.c **** 
1805:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1806:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
1807:bluetooth_rxtx.c **** 
1808:bluetooth_rxtx.c **** 			/* Retune */
1809:bluetooth_rxtx.c **** 			channel = le_adv_channel != 0 ? le_adv_channel : 2402;
1810:bluetooth_rxtx.c **** 			restart_jamming = 1;
1811:bluetooth_rxtx.c **** 		}
1812:bluetooth_rxtx.c **** 
1813:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
1814:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
1815:bluetooth_rxtx.c **** 
1816:bluetooth_rxtx.c **** 		if (do_hop)
1817:bluetooth_rxtx.c **** 			hop();
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 		//  you can jam but you keep turning off the light 
1820:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
1821:bluetooth_rxtx.c **** 			le_jam();
1822:bluetooth_rxtx.c **** 			--le_jam_count;
1823:bluetooth_rxtx.c **** 		} else {
1824:bluetooth_rxtx.c **** 			/* RX mode */
1825:bluetooth_rxtx.c **** 			dma_init_le();
1826:bluetooth_rxtx.c **** 			dio_ssp_start();
1827:bluetooth_rxtx.c **** 
1828:bluetooth_rxtx.c **** 			if (restart_jamming) {
1829:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
1830:bluetooth_rxtx.c **** 				restart_jamming = 0;
1831:bluetooth_rxtx.c **** 			} else {
1832:bluetooth_rxtx.c **** 				// wait till we're in FSLOCK before strobing RX
1833:bluetooth_rxtx.c **** 				while (!(cc2400_status() & FS_LOCK));
1834:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
1835:bluetooth_rxtx.c **** 			}
1836:bluetooth_rxtx.c **** 		}
1837:bluetooth_rxtx.c **** 
1838:bluetooth_rxtx.c **** 		rx_tc = 0;
1839:bluetooth_rxtx.c **** 		rx_err = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 46


1840:bluetooth_rxtx.c **** 	}
1841:bluetooth_rxtx.c **** 
1842:bluetooth_rxtx.c **** cleanup:
1843:bluetooth_rxtx.c **** 
1844:bluetooth_rxtx.c **** 	// disable USB interrupts
1845:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
1846:bluetooth_rxtx.c **** 
1847:bluetooth_rxtx.c **** 	// reset the radio completely
1848:bluetooth_rxtx.c **** 	cc2400_idle();
1849:bluetooth_rxtx.c **** 	dio_ssp_stop();
1850:bluetooth_rxtx.c **** 	cs_trigger_disable();
1851:bluetooth_rxtx.c **** }
1852:bluetooth_rxtx.c **** 
1853:bluetooth_rxtx.c **** 
1854:bluetooth_rxtx.c **** void bt_le_sync_boss_master(u8 active_mode)
1855:bluetooth_rxtx.c **** {
1856:bluetooth_rxtx.c **** 
1857:bluetooth_rxtx.c **** 	int i;
1858:bluetooth_rxtx.c **** 	int8_t rssi;
1859:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1860:bluetooth_rxtx.c **** 
1861:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1862:bluetooth_rxtx.c **** 	mode = active_mode;
1863:bluetooth_rxtx.c **** 
1864:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
1865:bluetooth_rxtx.c **** 
1866:bluetooth_rxtx.c **** 	// enable USB interrupts
1867:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1868:bluetooth_rxtx.c **** 
1869:bluetooth_rxtx.c **** 	RXLED_CLR;
1870:bluetooth_rxtx.c **** 
1871:bluetooth_rxtx.c **** 	queue_init();
1872:bluetooth_rxtx.c **** 	dio_ssp_init();
1873:bluetooth_rxtx.c **** 	dma_init_le();
1874:bluetooth_rxtx.c **** 	dio_ssp_start();
1875:bluetooth_rxtx.c **** 
1876:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1879:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1880:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1881:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1882:bluetooth_rxtx.c **** 
1883:bluetooth_rxtx.c **** 			/* Retune */
1884:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1885:bluetooth_rxtx.c **** 
1886:bluetooth_rxtx.c **** 			/* Wait for lock */
1887:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1888:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1889:bluetooth_rxtx.c **** 
1890:bluetooth_rxtx.c **** 			/* RX mode */
1891:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c **** 			requested_channel = 0;
1894:bluetooth_rxtx.c **** 		}
1895:bluetooth_rxtx.c **** 
1896:bluetooth_rxtx.c **** 		RXLED_CLR;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 47


1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1899:bluetooth_rxtx.c **** 		rssi_reset();
1900:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
1901:bluetooth_rxtx.c **** 			;
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c **** 		rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1904:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
1905:bluetooth_rxtx.c **** 
1906:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
1907:bluetooth_rxtx.c **** 			goto cleanup;
1908:bluetooth_rxtx.c **** 		}
1909:bluetooth_rxtx.c **** 
1910:bluetooth_rxtx.c **** 		if (rx_err) {
1911:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1912:bluetooth_rxtx.c **** 		}
1913:bluetooth_rxtx.c **** 
1914:bluetooth_rxtx.c **** 		if (do_hop)
1915:bluetooth_rxtx.c **** 			goto rx_flush;
1916:bluetooth_rxtx.c **** 
1917:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1918:bluetooth_rxtx.c **** 		if (!rx_tc)
1919:bluetooth_rxtx.c **** 			continue;
1920:bluetooth_rxtx.c **** 
1921:bluetooth_rxtx.c **** 
1922:bluetooth_rxtx.c **** 		/////////////////////
1923:bluetooth_rxtx.c **** 		// process the packet
1924:bluetooth_rxtx.c **** 
1925:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1] = { 0, };
1926:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1927:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1928:bluetooth_rxtx.c **** 
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
1931:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1932:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1934:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1935:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1936:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1937:bluetooth_rxtx.c **** 		}
1938:bluetooth_rxtx.c **** 
1939:bluetooth_rxtx.c **** 
1940:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
1941:bluetooth_rxtx.c **** 		if (len > 39)
1942:bluetooth_rxtx.c **** 			goto rx_flush;
1943:bluetooth_rxtx.c **** 
1944:bluetooth_rxtx.c **** 
1945:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1946:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1947:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1948:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
1949:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1950:bluetooth_rxtx.c **** 				;
1951:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1952:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1953:bluetooth_rxtx.c **** 				;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 48


1954:bluetooth_rxtx.c **** 		}
1955:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1956:bluetooth_rxtx.c **** 
1957:bluetooth_rxtx.c **** 		// strobe SFSON to allow the resync to occur while we process the packet
1958:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1959:bluetooth_rxtx.c **** 
1960:bluetooth_rxtx.c **** 
1961:bluetooth_rxtx.c **** 
1962:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1963:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1964:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1965:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1966:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1968:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1969:bluetooth_rxtx.c **** 		}
1970:bluetooth_rxtx.c **** 
1971:bluetooth_rxtx.c **** 
1972:bluetooth_rxtx.c **** 		if (le.crc_verify) {
1973:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1974:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
1975:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
1976:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
1977:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
1978:bluetooth_rxtx.c **** 				goto rx_flush;
1979:bluetooth_rxtx.c **** 		}
1980:bluetooth_rxtx.c **** 
1981:bluetooth_rxtx.c **** 
1982:bluetooth_rxtx.c **** 		/**
1983:bluetooth_rxtx.c **** 		 * @author: Ahmed Salem
1984:bluetooth_rxtx.c **** 		 * @Date: 4/5/2017
1985:bluetooth_rxtx.c **** 		 * Filter off all communication but the Master device whose mac address is (le.target)
1986:bluetooth_rxtx.c **** 		 * */
1987:bluetooth_rxtx.c **** 		if( le.target_set &&
1988:bluetooth_rxtx.c **** 			memcmp(le.target, &p[6], 6) != 0
1989:bluetooth_rxtx.c **** 		  ){
1990:bluetooth_rxtx.c **** 			goto rx_flush;
1991:bluetooth_rxtx.c **** 		}
1992:bluetooth_rxtx.c **** 
1993:bluetooth_rxtx.c **** 
1994:bluetooth_rxtx.c **** 		RXLED_SET;
1995:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
1996:bluetooth_rxtx.c **** 
1997:bluetooth_rxtx.c **** 
1998:bluetooth_rxtx.c **** 		// disable USB interrupts while we touch USB data structures
1999:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
2000:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
2001:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
2002:bluetooth_rxtx.c **** 
2003:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
2004:bluetooth_rxtx.c **** 
2005:bluetooth_rxtx.c **** 	rx_flush:
2006:bluetooth_rxtx.c **** 		// this might happen twice, but it's safe to do so
2007:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
2008:bluetooth_rxtx.c **** 
2009:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2010:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 49


2011:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
2012:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
2013:bluetooth_rxtx.c **** 		}
2014:bluetooth_rxtx.c **** 
2015:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2016:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
2017:bluetooth_rxtx.c **** 		if (now < le.last_packet)
2018:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
2019:bluetooth_rxtx.c **** 		if  ( // timeout
2020:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
2021:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
2022:bluetooth_rxtx.c **** 			// jam finished
2023:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
2024:bluetooth_rxtx.c **** 			)
2025:bluetooth_rxtx.c **** 		{
2026:bluetooth_rxtx.c **** 			reset_le();
2027:bluetooth_rxtx.c **** 			le_jam_count = 0;
2028:bluetooth_rxtx.c **** 			TXLED_CLR;
2029:bluetooth_rxtx.c **** 
2030:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
2031:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
2032:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
2033:bluetooth_rxtx.c **** 				goto cleanup;
2034:bluetooth_rxtx.c **** 			}
2035:bluetooth_rxtx.c **** 
2036:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2037:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
2038:bluetooth_rxtx.c **** 				goto cleanup;
2039:bluetooth_rxtx.c **** 
2040:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
2041:bluetooth_rxtx.c **** 
2042:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
2043:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
2044:bluetooth_rxtx.c **** 
2045:bluetooth_rxtx.c **** 			/* Retune */
2046:bluetooth_rxtx.c **** 			channel = le_adv_channel != 0 ? le_adv_channel : 2402;
2047:bluetooth_rxtx.c **** 			restart_jamming = 1;
2048:bluetooth_rxtx.c **** 		}
2049:bluetooth_rxtx.c **** 
2050:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
2051:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
2052:bluetooth_rxtx.c **** 
2053:bluetooth_rxtx.c **** 		if (do_hop)
2054:bluetooth_rxtx.c **** 			hop();
2055:bluetooth_rxtx.c **** 
2056:bluetooth_rxtx.c **** 		//  you can jam but you keep turning off the light 
2057:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
2058:bluetooth_rxtx.c **** 			le_jam();
2059:bluetooth_rxtx.c **** 			--le_jam_count;
2060:bluetooth_rxtx.c **** 		} else {
2061:bluetooth_rxtx.c **** 			/* RX mode */
2062:bluetooth_rxtx.c **** 			dma_init_le();
2063:bluetooth_rxtx.c **** 			dio_ssp_start();
2064:bluetooth_rxtx.c **** 
2065:bluetooth_rxtx.c **** 			if (restart_jamming) {
2066:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
2067:bluetooth_rxtx.c **** 				restart_jamming = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 50


2068:bluetooth_rxtx.c **** 			} else {
2069:bluetooth_rxtx.c **** 				// wait till we're in FSLOCK before strobing RX
2070:bluetooth_rxtx.c **** 				while (!(cc2400_status() & FS_LOCK));
2071:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
2072:bluetooth_rxtx.c **** 			}
2073:bluetooth_rxtx.c **** 		}
2074:bluetooth_rxtx.c **** 
2075:bluetooth_rxtx.c **** 		rx_tc = 0;
2076:bluetooth_rxtx.c **** 		rx_err = 0;
2077:bluetooth_rxtx.c **** 	}
2078:bluetooth_rxtx.c **** 
2079:bluetooth_rxtx.c **** cleanup:
2080:bluetooth_rxtx.c **** 
2081:bluetooth_rxtx.c **** 	// disable USB interrupts
2082:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
2083:bluetooth_rxtx.c **** 
2084:bluetooth_rxtx.c **** 	// reset the radio completely
2085:bluetooth_rxtx.c **** 	cc2400_idle();
2086:bluetooth_rxtx.c **** 	dio_ssp_stop();
2087:bluetooth_rxtx.c **** 	cs_trigger_disable();
2088:bluetooth_rxtx.c **** }
2089:bluetooth_rxtx.c **** 
2090:bluetooth_rxtx.c **** 
2091:bluetooth_rxtx.c **** 
2092:bluetooth_rxtx.c **** /* low energy connection following
2093:bluetooth_rxtx.c ****  * follows a known AA around */
2094:bluetooth_rxtx.c **** int cb_follow_le() {
 621              		.loc 1 2094 0
 622              		.cfi_startproc
 623              		@ args = 0, pretend = 0, frame = 0
 624              		@ frame_needed = 0, uses_anonymous_args = 0
 625 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 626              		.cfi_def_cfa_offset 24
 627              		.cfi_offset 4, -24
 628              		.cfi_offset 5, -20
 629              		.cfi_offset 6, -16
 630              		.cfi_offset 7, -12
 631              		.cfi_offset 8, -8
 632              		.cfi_offset 14, -4
2095:bluetooth_rxtx.c **** 	int i, j, k;
2096:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 633              		.loc 1 2096 0
 634 0004 394D     		ldr	r5, .L65
 635 0006 3A4F     		ldr	r7, .L65+4
 636 0008 2888     		ldrh	r0, [r5]
 637 000a 6238     		subs	r0, r0, #98
 638 000c C0B2     		uxtb	r0, r0
 639 000e FFF7FEFF 		bl	btle_channel_index
 640              	.LVL56:
2097:bluetooth_rxtx.c **** 
2098:bluetooth_rxtx.c **** 	u32 access_address = 0;
 641              		.loc 1 2098 0
 642 0012 0022     		movs	r2, #0
2099:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 643              		.loc 1 2099 0
 644 0014 1346     		mov	r3, r2
2096:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 51


 645              		.loc 1 2096 0
 646 0016 395C     		ldrb	r1, [r7, r0]	@ zero_extendqisi2
 647              	.LVL57:
 648              	.L50:
2100:bluetooth_rxtx.c **** 		access_address >>= 1;
2101:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 649              		.loc 1 2101 0 discriminator 3
 650 0018 364E     		ldr	r6, .L65+8
 651 001a 985D     		ldrb	r0, [r3, r6]	@ zero_extendqisi2
2099:bluetooth_rxtx.c **** 		access_address >>= 1;
 652              		.loc 1 2099 0 discriminator 3
 653 001c 0133     		adds	r3, r3, #1
 654              	.LVL58:
 655              		.loc 1 2101 0 discriminator 3
 656 001e C007     		lsls	r0, r0, #31
2099:bluetooth_rxtx.c **** 		access_address >>= 1;
 657              		.loc 1 2099 0 discriminator 3
 658 0020 1F2B     		cmp	r3, #31
 659              		.loc 1 2101 0 discriminator 3
 660 0022 40EA5202 		orr	r2, r0, r2, lsr #1
 661              	.LVL59:
2099:bluetooth_rxtx.c **** 		access_address >>= 1;
 662              		.loc 1 2099 0 discriminator 3
 663 0026 F7D1     		bne	.L50
2102:bluetooth_rxtx.c **** 	}
2103:bluetooth_rxtx.c **** 
2104:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
2105:bluetooth_rxtx.c **** 		access_address >>= 1;
2106:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
2107:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 664              		.loc 1 2107 0
 665 0028 6C68     		ldr	r4, [r5, #4]
 666              	.L60:
 667              	.LVL60:
2106:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 668              		.loc 1 2106 0
 669 002a F05C     		ldrb	r0, [r6, r3]	@ zero_extendqisi2
 670 002c C007     		lsls	r0, r0, #31
 671 002e 40EA5202 		orr	r2, r0, r2, lsr #1
 672              	.LVL61:
 673              		.loc 1 2107 0
 674 0032 A242     		cmp	r2, r4
 675 0034 53D1     		bne	.L51
 676              	.LVL62:
 677 0036 0020     		movs	r0, #0
 678              	.LVL63:
 679              	.L52:
2099:bluetooth_rxtx.c **** 		access_address >>= 1;
 680              		.loc 1 2099 0
 681 0038 4FF00008 		mov	r8, #0
 682 003c C646     		mov	lr, r8
 683 003e 03EBC00C 		add	ip, r3, r0, lsl #3
 684              	.LVL64:
 685              	.L55:
 686 0042 0EEB0C02 		add	r2, lr, ip
 687 0046 3244     		add	r2, r2, r6
 688              	.LBB6:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 52


 689              	.LBB7:
2108:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
2109:bluetooth_rxtx.c **** 				u8 byte = 0;
2110:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
2111:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
2112:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
2113:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
2114:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 690              		.loc 1 2114 0
 691 0048 0328     		cmp	r0, #3
2113:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 692              		.loc 1 2113 0
 693 004a 12F81F2C 		ldrb	r2, [r2, #-31]	@ zero_extendqisi2
 694              	.LVL65:
 695              		.loc 1 2114 0
 696 004e 0ADD     		ble	.L54
2115:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 697              		.loc 1 2115 0
 698 0050 7C18     		adds	r4, r7, r1
 699 0052 94F82840 		ldrb	r4, [r4, #40]	@ zero_extendqisi2
2116:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 700              		.loc 1 2116 0
 701 0056 0131     		adds	r1, r1, #1
 702              	.LVL66:
2115:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 703              		.loc 1 2115 0
 704 0058 6240     		eors	r2, r2, r4
 705              	.LVL67:
 706              		.loc 1 2116 0
 707 005a 7F24     		movs	r4, #127
 708 005c B1FBF4F4 		udiv	r4, r1, r4
 709 0060 C4EBC414 		rsb	r4, r4, r4, lsl #7
 710 0064 091B     		subs	r1, r1, r4
 711              	.LVL68:
 712              	.L54:
2117:bluetooth_rxtx.c **** 					}
2118:bluetooth_rxtx.c **** 					byte |= bit << k;
 713              		.loc 1 2118 0 discriminator 2
 714 0066 02FA0EF2 		lsl	r2, r2, lr
 715              	.LVL69:
 716              	.LBE7:
2110:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 717              		.loc 1 2110 0 discriminator 2
 718 006a 0EF1010E 		add	lr, lr, #1
 719              	.LVL70:
 720              	.LBB8:
 721              		.loc 1 2118 0 discriminator 2
 722 006e 42EA0802 		orr	r2, r2, r8
 723              	.LBE8:
2110:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 724              		.loc 1 2110 0 discriminator 2
 725 0072 BEF1080F 		cmp	lr, #8
 726              	.LBB9:
 727              		.loc 1 2118 0 discriminator 2
 728 0076 5FFA82F8 		uxtb	r8, r2
 729              	.LVL71:
 730              	.LBE9:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 53


2110:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 731              		.loc 1 2110 0 discriminator 2
 732 007a E2D1     		bne	.L55
2119:bluetooth_rxtx.c **** 				}
2120:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 733              		.loc 1 2120 0
 734 007c 1E4C     		ldr	r4, .L65+12
 735 007e 2268     		ldr	r2, [r4]
 736 0080 02F80080 		strb	r8, [r2, r0]
 737              	.LBE6:
2108:bluetooth_rxtx.c **** 				u8 byte = 0;
 738              		.loc 1 2108 0
 739 0084 0130     		adds	r0, r0, #1
 740              	.LVL72:
 741 0086 2E28     		cmp	r0, #46
 742 0088 D6D1     		bne	.L52
2121:bluetooth_rxtx.c **** 			}
2122:bluetooth_rxtx.c **** 
2123:bluetooth_rxtx.c **** 			// verify CRC
2124:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 743              		.loc 1 2124 0
 744 008a 6B69     		ldr	r3, [r5, #20]
 745              	.LVL73:
 746 008c 5BB9     		cbnz	r3, .L57
 747              	.LVL74:
 748              	.L59:
2125:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
2126:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
2127:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
2128:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
2129:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
2130:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
2131:bluetooth_rxtx.c **** 					break;
2132:bluetooth_rxtx.c **** 			}
2133:bluetooth_rxtx.c **** 
2134:bluetooth_rxtx.c **** 			// send to PC
2135:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
 749              		.loc 1 2135 0
 750 008e 2168     		ldr	r1, [r4]
 751 0090 0120     		movs	r0, #1
 752 0092 FFF7FEFF 		bl	enqueue
 753              	.LVL75:
2136:bluetooth_rxtx.c **** 			RXLED_SET;
 754              		.loc 1 2136 0
 755 0096 194B     		ldr	r3, .L65+16
 756 0098 1022     		movs	r2, #16
 757 009a 1A60     		str	r2, [r3]
2137:bluetooth_rxtx.c **** 
2138:bluetooth_rxtx.c **** 			packet_cb((uint8_t*)idle_rxbuf);
 758              		.loc 1 2138 0
 759 009c 184B     		ldr	r3, .L65+20
 760 009e 2068     		ldr	r0, [r4]
 761 00a0 9B69     		ldr	r3, [r3, #24]
 762 00a2 9847     		blx	r3
 763              	.LVL76:
2139:bluetooth_rxtx.c **** 
2140:bluetooth_rxtx.c **** 			break;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 54


 764              		.loc 1 2140 0
 765 00a4 1FE0     		b	.L58
 766              	.LVL77:
 767              	.L57:
 768              	.LBB10:
2125:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 769              		.loc 1 2125 0
 770 00a6 2368     		ldr	r3, [r4]
 771 00a8 5D79     		ldrb	r5, [r3, #5]	@ zero_extendqisi2
2126:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 772              		.loc 1 2126 0
 773 00aa 104B     		ldr	r3, .L65
 774 00ac 2168     		ldr	r1, [r4]
 775              	.LVL78:
2125:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 776              		.loc 1 2125 0
 777 00ae 05F03F05 		and	r5, r5, #63
 778              	.LVL79:
2126:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 779              		.loc 1 2126 0
 780 00b2 AA1C     		adds	r2, r5, #2
 781              	.LVL80:
 782 00b4 1869     		ldr	r0, [r3, #16]
 783              	.LVL81:
 784 00b6 0431     		adds	r1, r1, #4
 785 00b8 FFF7FEFF 		bl	btle_crcgen_lut
 786              	.LVL82:
2127:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 787              		.loc 1 2127 0
 788 00bc 2268     		ldr	r2, [r4]
 789 00be 05F10803 		add	r3, r5, #8
 790 00c2 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
2128:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 791              		.loc 1 2128 0
 792 00c4 2168     		ldr	r1, [r4]
 793 00c6 EA1D     		adds	r2, r5, #7
 794 00c8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
2129:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 795              		.loc 1 2129 0
 796 00ca 2168     		ldr	r1, [r4]
 797 00cc 0635     		adds	r5, r5, #6
 798              	.LVL83:
 799 00ce 495D     		ldrb	r1, [r1, r5]	@ zero_extendqisi2
 800              	.LVL84:
2128:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 801              		.loc 1 2128 0
 802 00d0 1202     		lsls	r2, r2, #8
 803              	.LVL85:
 804 00d2 42EA0343 		orr	r3, r2, r3, lsl #16
2129:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 805              		.loc 1 2129 0
 806 00d6 0B43     		orrs	r3, r3, r1
2130:bluetooth_rxtx.c **** 					break;
 807              		.loc 1 2130 0
 808 00d8 9842     		cmp	r0, r3
 809 00da 04D1     		bne	.L58
 810 00dc D7E7     		b	.L59
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 55


 811              	.LVL86:
 812              	.L51:
 813              	.LBE10:
2104:bluetooth_rxtx.c **** 		access_address >>= 1;
 814              		.loc 1 2104 0 discriminator 2
 815 00de 0133     		adds	r3, r3, #1
 816              	.LVL87:
 817 00e0 B3F5D87F 		cmp	r3, #432
 818 00e4 A1D1     		bne	.L60
 819              	.LVL88:
 820              	.L58:
2141:bluetooth_rxtx.c **** 		}
2142:bluetooth_rxtx.c **** 	}
2143:bluetooth_rxtx.c **** 
2144:bluetooth_rxtx.c **** 	return 1;
2145:bluetooth_rxtx.c **** }
 821              		.loc 1 2145 0
 822 00e6 0120     		movs	r0, #1
 823 00e8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 824              	.L66:
 825              		.align	2
 826              	.L65:
 827 00ec 00000000 		.word	.LANCHOR1
 828 00f0 00000000 		.word	.LANCHOR2
 829 00f4 00000000 		.word	unpacked
 830 00f8 00000000 		.word	idle_rxbuf
 831 00fc 38C00920 		.word	537509944
 832 0100 00000000 		.word	.LANCHOR0
 833              		.cfi_endproc
 834              	.LFE24:
 836              		.section	.text.connection_follow_cb_boss_master,"ax",%progbits
 837              		.align	1
 838              		.global	connection_follow_cb_boss_master
 839              		.thumb
 840              		.thumb_func
 842              	connection_follow_cb_boss_master:
 843              	.LFB25:
2146:bluetooth_rxtx.c **** 
2147:bluetooth_rxtx.c **** 
2148:bluetooth_rxtx.c **** /**
2149:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2150:bluetooth_rxtx.c ****  */
2151:bluetooth_rxtx.c **** void connection_follow_cb_boss_master(u8 *packet) {
 844              		.loc 1 2151 0
 845              		.cfi_startproc
 846              		@ args = 0, pretend = 0, frame = 0
 847              		@ frame_needed = 0, uses_anonymous_args = 0
 848              	.LVL89:
 849 0000 70B5     		push	{r4, r5, r6, lr}
 850              		.cfi_def_cfa_offset 16
 851              		.cfi_offset 4, -16
 852              		.cfi_offset 5, -12
 853              		.cfi_offset 6, -8
 854              		.cfi_offset 14, -4
 855              	.LVL90:
2152:bluetooth_rxtx.c **** 	int i;
2153:bluetooth_rxtx.c **** 	u32 aa = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 56


2154:bluetooth_rxtx.c **** 
2155:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2156:bluetooth_rxtx.c **** #define HEADER_IDX 4
2157:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2158:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2159:bluetooth_rxtx.c **** 
2160:bluetooth_rxtx.c **** 	// u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
2161:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
2162:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
2163:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
2164:bluetooth_rxtx.c **** 	// u8 *crc = &packet[DATA_START_IDX + *data_len];
2165:bluetooth_rxtx.c **** 
2166:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 856              		.loc 1 2166 0
 857 0002 594B     		ldr	r3, .L84
2151:bluetooth_rxtx.c **** 	int i;
 858              		.loc 1 2151 0
 859 0004 0546     		mov	r5, r0
 860              		.loc 1 2166 0
 861 0006 197E     		ldrb	r1, [r3, #24]	@ zero_extendqisi2
2161:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 862              		.loc 1 2161 0
 863 0008 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 864              	.LVL91:
 865              		.loc 1 2166 0
 866 000a 0229     		cmp	r1, #2
 867 000c 1C46     		mov	r4, r3
 868 000e 13D1     		bne	.L68
2167:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2168:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 869              		.loc 1 2168 0
 870 0010 0322     		movs	r2, #3
 871              	.LVL92:
 872 0012 1A76     		strb	r2, [r3, #24]
 873              	.LVL93:
2169:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 874              		.loc 1 2169 0
 875 0014 554A     		ldr	r2, .L84+4
 876 0016 1268     		ldr	r2, [r2]
 877 0018 DA61     		str	r2, [r3, #28]
2170:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 878              		.loc 1 2170 0
 879 001a 5A8C     		ldrh	r2, [r3, #34]
 880 001c 013A     		subs	r2, r2, #1
 881 001e 92B2     		uxth	r2, r2
 882 0020 1A84     		strh	r2, [r3, #32]	@ movhi
2171:bluetooth_rxtx.c **** 		le.conn_count = 0;
 883              		.loc 1 2171 0
 884 0022 0022     		movs	r2, #0
 885 0024 9A84     		strh	r2, [r3, #36]	@ movhi
2172:bluetooth_rxtx.c **** 		le.update_pending = 0;
 886              		.loc 1 2172 0
 887 0026 DA62     		str	r2, [r3, #44]
2173:bluetooth_rxtx.c **** 
2174:bluetooth_rxtx.c **** 		// hue hue hue
2175:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 888              		.loc 1 2175 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 57


 889 0028 514B     		ldr	r3, .L84+8
 890 002a DA7C     		ldrb	r2, [r3, #19]	@ zero_extendqisi2
 891 002c 002A     		cmp	r2, #0
 892 002e 00F09980 		beq	.L67
2176:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 893              		.loc 1 2176 0
 894 0032 2822     		movs	r2, #40
 895 0034 DA61     		str	r2, [r3, #28]
 896 0036 70BD     		pop	{r4, r5, r6, pc}
 897              	.LVL94:
 898              	.L68:
2177:bluetooth_rxtx.c **** 
2178:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 899              		.loc 1 2178 0
 900 0038 0329     		cmp	r1, #3
 901 003a 3BD1     		bne	.L71
 902              	.LBB11:
2179:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
2180:bluetooth_rxtx.c **** 
2181:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2182:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 903              		.loc 1 2182 0
 904 003c DB6A     		ldr	r3, [r3, #44]
2179:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 905              		.loc 1 2179 0
 906 003e 02F00302 		and	r2, r2, #3
 907              	.LVL95:
 908              		.loc 1 2182 0
 909 0042 A3B1     		cbz	r3, .L72
 910              		.loc 1 2182 0 is_stmt 0 discriminator 1
 911 0044 A38C     		ldrh	r3, [r4, #36]
 912 0046 218E     		ldrh	r1, [r4, #48]
 913 0048 9BB2     		uxth	r3, r3
 914 004a 9942     		cmp	r1, r3
 915 004c 0FD1     		bne	.L72
2183:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2184:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 916              		.loc 1 2184 0 is_stmt 1
 917 004e 474B     		ldr	r3, .L84+4
 918 0050 1B68     		ldr	r3, [r3]
 919 0052 E361     		str	r3, [r4, #28]
 920              	.LVL96:
2185:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 921              		.loc 1 2185 0
 922 0054 638E     		ldrh	r3, [r4, #50]
 923 0056 6384     		strh	r3, [r4, #34]	@ movhi
2186:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 924              		.loc 1 2186 0
 925 0058 013B     		subs	r3, r3, #1
 926 005a 9BB2     		uxth	r3, r3
 927 005c 2384     		strh	r3, [r4, #32]	@ movhi
2187:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 928              		.loc 1 2187 0
 929 005e 94F83430 		ldrb	r3, [r4, #52]	@ zero_extendqisi2
 930 0062 84F82630 		strb	r3, [r4, #38]
2188:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 931              		.loc 1 2188 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 58


 932 0066 E38E     		ldrh	r3, [r4, #54]
 933 0068 2385     		strh	r3, [r4, #40]	@ movhi
2189:bluetooth_rxtx.c **** 			le.update_pending = 0;
 934              		.loc 1 2189 0
 935 006a 0023     		movs	r3, #0
 936 006c E362     		str	r3, [r4, #44]
 937              	.L72:
2190:bluetooth_rxtx.c **** 		}
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 938              		.loc 1 2192 0
 939 006e 032A     		cmp	r2, #3
 940 0070 78D1     		bne	.L67
 941              		.loc 1 2192 0 is_stmt 0 discriminator 1
 942 0072 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 943 0074 002B     		cmp	r3, #0
 944 0076 75D1     		bne	.L67
2193:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2194:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2195:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 945              		.loc 1 2195 0 is_stmt 1
 946 0078 EB79     		ldrb	r3, [r5, #7]	@ zero_extendqisi2
 947 007a 84F83430 		strb	r3, [r4, #52]
2196:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 948              		.loc 1 2196 0
 949 007e 6A7A     		ldrb	r2, [r5, #9]	@ zero_extendqisi2
 950              	.LVL97:
 951 0080 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
 952 0082 03EB0223 		add	r3, r3, r2, lsl #8
 953 0086 E386     		strh	r3, [r4, #54]	@ movhi
2197:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 954              		.loc 1 2197 0
 955 0088 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
 956 008a AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 957 008c 03EB0223 		add	r3, r3, r2, lsl #8
 958 0090 6386     		strh	r3, [r4, #50]	@ movhi
2198:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 959              		.loc 1 2198 0
 960 0092 6A7C     		ldrb	r2, [r5, #17]	@ zero_extendqisi2
 961 0094 2B7C     		ldrb	r3, [r5, #16]	@ zero_extendqisi2
 962 0096 03EB0223 		add	r3, r3, r2, lsl #8
2199:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 963              		.loc 1 2199 0
 964 009a A28C     		ldrh	r2, [r4, #36]
2198:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 965              		.loc 1 2198 0
 966 009c 9BB2     		uxth	r3, r3
 967              		.loc 1 2199 0
 968 009e 92B2     		uxth	r2, r2
2198:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 969              		.loc 1 2198 0
 970 00a0 2386     		strh	r3, [r4, #48]	@ movhi
 971              		.loc 1 2199 0
 972 00a2 9B1A     		subs	r3, r3, r2
 973 00a4 47F6FE72 		movw	r2, #32766
 974 00a8 9342     		cmp	r3, r2
 975 00aa 5BDC     		bgt	.L67
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 59


2200:bluetooth_rxtx.c **** 				le.update_pending = 1;
 976              		.loc 1 2200 0
 977 00ac 2E4B     		ldr	r3, .L84
 978 00ae 0122     		movs	r2, #1
 979 00b0 DA62     		str	r2, [r3, #44]
 980 00b2 70BD     		pop	{r4, r5, r6, pc}
 981              	.LVL98:
 982              	.L71:
 983              	.LBE11:
2201:bluetooth_rxtx.c **** 		}
2202:bluetooth_rxtx.c **** 
2203:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 984              		.loc 1 2203 0
 985 00b4 0129     		cmp	r1, #1
 986 00b6 55D1     		bne	.L67
 987              	.LVL99:
 988              	.LBB12:
2204:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
2205:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 989              		.loc 1 2205 0
 990 00b8 02F00F02 		and	r2, r2, #15
 991              	.LVL100:
 992 00bc 052A     		cmp	r2, #5
 993 00be 51D1     		bne	.L67
 994              	.LBB13:
2206:bluetooth_rxtx.c **** 			uint16_t conn_interval;
2207:bluetooth_rxtx.c **** 
2208:bluetooth_rxtx.c **** 			// ignore packets with incorrect length
2209:bluetooth_rxtx.c **** 			if (*data_len != 34)
 995              		.loc 1 2209 0
 996 00c0 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 997 00c2 222B     		cmp	r3, #34
 998 00c4 4ED1     		bne	.L67
 999              	.LVL101:
2210:bluetooth_rxtx.c **** 				return;
2211:bluetooth_rxtx.c **** 
2212:bluetooth_rxtx.c **** 			// conn interval must be [7.5 ms, 4.0s] in units of 1.25 ms
2213:bluetooth_rxtx.c **** 			conn_interval = (packet[29] << 8) | packet[28];
 1000              		.loc 1 2213 0
 1001 00c6 427F     		ldrb	r2, [r0, #29]	@ zero_extendqisi2
 1002 00c8 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 1003 00ca 43EA0223 		orr	r3, r3, r2, lsl #8
2214:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1004              		.loc 1 2214 0
 1005 00ce 40F67A42 		movw	r2, #3194
 1006 00d2 063B     		subs	r3, r3, #6
 1007 00d4 9BB2     		uxth	r3, r3
 1008 00d6 9342     		cmp	r3, r2
 1009 00d8 44D8     		bhi	.L67
2215:bluetooth_rxtx.c **** 				return;
2216:bluetooth_rxtx.c **** 
2217:bluetooth_rxtx.c **** 			// This is a connect packet
2218:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2219:bluetooth_rxtx.c **** 			if (le.target_set &&
 1010              		.loc 1 2219 0
 1011 00da 236C     		ldr	r3, [r4, #64]
 1012 00dc 3BB9     		cbnz	r3, .L74
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 60


 1013              	.LVL102:
 1014              	.L76:
2220:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
2221:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
2222:bluetooth_rxtx.c **** 				return;
2223:bluetooth_rxtx.c **** 			}
2224:bluetooth_rxtx.c **** 
2225:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 1015              		.loc 1 2225 0
 1016 00de 0223     		movs	r3, #2
2226:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1017              		.loc 1 2226 0
 1018 00e0 0020     		movs	r0, #0
2225:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1019              		.loc 1 2225 0
 1020 00e2 2376     		strb	r3, [r4, #24]
 1021              		.loc 1 2226 0
 1022 00e4 6061     		str	r0, [r4, #20]
 1023              	.LVL103:
 1024 00e6 05F11101 		add	r1, r5, #17
2227:bluetooth_rxtx.c **** 
2228:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 1025              		.loc 1 2228 0
 1026 00ea 0346     		mov	r3, r0
 1027 00ec 11E0     		b	.L75
 1028              	.LVL104:
 1029              	.L74:
2220:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1030              		.loc 1 2220 0 discriminator 1
 1031 00ee 04F13800 		add	r0, r4, #56
 1032              	.LVL105:
 1033 00f2 A91D     		adds	r1, r5, #6
 1034 00f4 0622     		movs	r2, #6
 1035 00f6 FFF7FEFF 		bl	memcmp
 1036              	.LVL106:
2219:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 1037              		.loc 1 2219 0 discriminator 1
 1038 00fa 0028     		cmp	r0, #0
 1039 00fc EFD0     		beq	.L76
2221:bluetooth_rxtx.c **** 				return;
 1040              		.loc 1 2221 0
 1041 00fe 04F13800 		add	r0, r4, #56
 1042 0102 05F10C01 		add	r1, r5, #12
 1043 0106 0622     		movs	r2, #6
 1044 0108 FFF7FEFF 		bl	memcmp
 1045              	.LVL107:
2220:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1046              		.loc 1 2220 0
 1047 010c 0028     		cmp	r0, #0
 1048 010e E6D0     		beq	.L76
 1049 0110 70BD     		pop	{r4, r5, r6, pc}
 1050              	.LVL108:
 1051              	.L75:
2229:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1052              		.loc 1 2229 0 discriminator 3
 1053 0112 11F8012F 		ldrb	r2, [r1, #1]!	@ zero_extendqisi2
 1054 0116 DE00     		lsls	r6, r3, #3
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 61


2228:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1055              		.loc 1 2228 0 discriminator 3
 1056 0118 0133     		adds	r3, r3, #1
 1057              	.LVL109:
 1058              		.loc 1 2229 0 discriminator 3
 1059 011a B240     		lsls	r2, r2, r6
2228:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1060              		.loc 1 2228 0 discriminator 3
 1061 011c 042B     		cmp	r3, #4
 1062              		.loc 1 2229 0 discriminator 3
 1063 011e 40EA0200 		orr	r0, r0, r2
 1064              	.LVL110:
2228:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1065              		.loc 1 2228 0 discriminator 3
 1066 0122 F6D1     		bne	.L75
2230:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1067              		.loc 1 2230 0
 1068 0124 FFF7FEFF 		bl	le_set_access_address
 1069              	.LVL111:
2231:bluetooth_rxtx.c **** 
2232:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2233:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
2234:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1070              		.loc 1 2234 0
 1071 0128 EB7D     		ldrb	r3, [r5, #23]	@ zero_extendqisi2
2233:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1072              		.loc 1 2233 0
 1073 012a 287E     		ldrb	r0, [r5, #24]	@ zero_extendqisi2
 1074              		.loc 1 2234 0
 1075 012c 1B02     		lsls	r3, r3, #8
 1076 012e 43EA0043 		orr	r3, r3, r0, lsl #16
2235:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 1077              		.loc 1 2235 0
 1078 0132 A87D     		ldrb	r0, [r5, #22]	@ zero_extendqisi2
 1079 0134 1843     		orrs	r0, r0, r3
2233:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1080              		.loc 1 2233 0
 1081 0136 E060     		str	r0, [r4, #12]
2236:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1082              		.loc 1 2236 0
 1083 0138 FFF7FEFF 		bl	rbit
 1084              	.LVL112:
2237:bluetooth_rxtx.c **** 
2238:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2239:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 1085              		.loc 1 2239 0
 1086 013c 6B7E     		ldrb	r3, [r5, #25]	@ zero_extendqisi2
2236:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1087              		.loc 1 2236 0
 1088 013e 2061     		str	r0, [r4, #16]
 1089              		.loc 1 2239 0
 1090 0140 84F82630 		strb	r3, [r4, #38]
2240:bluetooth_rxtx.c **** 
2241:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2242:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 1091              		.loc 1 2242 0
 1092 0144 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 62


 1093 0146 2385     		strh	r3, [r4, #40]	@ movhi
2243:bluetooth_rxtx.c **** 
2244:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2245:bluetooth_rxtx.c **** 			le.conn_interval = (packet[CONN_INTERVAL+1] << 8)
 1094              		.loc 1 2245 0
 1095 0148 6A7F     		ldrb	r2, [r5, #29]	@ zero_extendqisi2
 1096 014a 2B7F     		ldrb	r3, [r5, #28]	@ zero_extendqisi2
 1097 014c 43EA0223 		orr	r3, r3, r2, lsl #8
 1098 0150 6384     		strh	r3, [r4, #34]	@ movhi
2246:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
2247:bluetooth_rxtx.c **** 
2248:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2249:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 1099              		.loc 1 2249 0
 1100 0152 95F82730 		ldrb	r3, [r5, #39]	@ zero_extendqisi2
2250:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
2251:bluetooth_rxtx.c **** 
2252:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2253:bluetooth_rxtx.c **** 			do_hop = 1;
 1101              		.loc 1 2253 0
 1102 0156 0122     		movs	r2, #1
2249:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1103              		.loc 1 2249 0
 1104 0158 03F01F03 		and	r3, r3, #31
 1105 015c A376     		strb	r3, [r4, #26]
2250:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1106              		.loc 1 2250 0
 1107 015e 6376     		strb	r3, [r4, #25]
 1108              		.loc 1 2253 0
 1109 0160 034B     		ldr	r3, .L84+8
 1110 0162 DA72     		strb	r2, [r3, #11]
 1111              	.L67:
 1112 0164 70BD     		pop	{r4, r5, r6, pc}
 1113              	.LVL113:
 1114              	.L85:
 1115 0166 00BF     		.align	2
 1116              	.L84:
 1117 0168 00000000 		.word	.LANCHOR1
 1118 016c 00000000 		.word	clkn
 1119 0170 00000000 		.word	.LANCHOR0
 1120              	.LBE13:
 1121              	.LBE12:
 1122              		.cfi_endproc
 1123              	.LFE25:
 1125              		.section	.text.connection_follow_cb,"ax",%progbits
 1126              		.align	1
 1127              		.global	connection_follow_cb
 1128              		.thumb
 1129              		.thumb_func
 1131              	connection_follow_cb:
 1132              	.LFB26:
2254:bluetooth_rxtx.c **** 		}
2255:bluetooth_rxtx.c **** 	}
2256:bluetooth_rxtx.c **** }
2257:bluetooth_rxtx.c **** 
2258:bluetooth_rxtx.c **** 
2259:bluetooth_rxtx.c **** /**
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 63


2260:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2261:bluetooth_rxtx.c ****  */
2262:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 1133              		.loc 1 2262 0
 1134              		.cfi_startproc
 1135              		@ args = 0, pretend = 0, frame = 0
 1136              		@ frame_needed = 0, uses_anonymous_args = 0
 1137              	.LVL114:
 1138 0000 70B5     		push	{r4, r5, r6, lr}
 1139              		.cfi_def_cfa_offset 16
 1140              		.cfi_offset 4, -16
 1141              		.cfi_offset 5, -12
 1142              		.cfi_offset 6, -8
 1143              		.cfi_offset 14, -4
 1144              	.LVL115:
2263:bluetooth_rxtx.c **** 	int i;
2264:bluetooth_rxtx.c **** 	u32 aa = 0;
2265:bluetooth_rxtx.c **** 
2266:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2267:bluetooth_rxtx.c **** #define HEADER_IDX 4
2268:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2269:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2270:bluetooth_rxtx.c **** 
2271:bluetooth_rxtx.c **** 	// u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
2272:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
2273:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
2274:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
2275:bluetooth_rxtx.c **** 	// u8 *crc = &packet[DATA_START_IDX + *data_len];
2276:bluetooth_rxtx.c **** 
2277:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 1145              		.loc 1 2277 0
 1146 0002 594B     		ldr	r3, .L103
2262:bluetooth_rxtx.c **** 	int i;
 1147              		.loc 1 2262 0
 1148 0004 0546     		mov	r5, r0
 1149              		.loc 1 2277 0
 1150 0006 197E     		ldrb	r1, [r3, #24]	@ zero_extendqisi2
2272:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 1151              		.loc 1 2272 0
 1152 0008 0279     		ldrb	r2, [r0, #4]	@ zero_extendqisi2
 1153              	.LVL116:
 1154              		.loc 1 2277 0
 1155 000a 0229     		cmp	r1, #2
 1156 000c 1C46     		mov	r4, r3
 1157 000e 13D1     		bne	.L87
2278:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2279:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 1158              		.loc 1 2279 0
 1159 0010 0322     		movs	r2, #3
 1160              	.LVL117:
 1161 0012 1A76     		strb	r2, [r3, #24]
 1162              	.LVL118:
2280:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 1163              		.loc 1 2280 0
 1164 0014 554A     		ldr	r2, .L103+4
 1165 0016 1268     		ldr	r2, [r2]
 1166 0018 DA61     		str	r2, [r3, #28]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 64


2281:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 1167              		.loc 1 2281 0
 1168 001a 5A8C     		ldrh	r2, [r3, #34]
 1169 001c 013A     		subs	r2, r2, #1
 1170 001e 92B2     		uxth	r2, r2
 1171 0020 1A84     		strh	r2, [r3, #32]	@ movhi
2282:bluetooth_rxtx.c **** 		le.conn_count = 0;
 1172              		.loc 1 2282 0
 1173 0022 0022     		movs	r2, #0
 1174 0024 9A84     		strh	r2, [r3, #36]	@ movhi
2283:bluetooth_rxtx.c **** 		le.update_pending = 0;
 1175              		.loc 1 2283 0
 1176 0026 DA62     		str	r2, [r3, #44]
2284:bluetooth_rxtx.c **** 
2285:bluetooth_rxtx.c **** 		// hue hue hue
2286:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 1177              		.loc 1 2286 0
 1178 0028 514B     		ldr	r3, .L103+8
 1179 002a DA7C     		ldrb	r2, [r3, #19]	@ zero_extendqisi2
 1180 002c 002A     		cmp	r2, #0
 1181 002e 00F09980 		beq	.L86
2287:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 1182              		.loc 1 2287 0
 1183 0032 2822     		movs	r2, #40
 1184 0034 DA61     		str	r2, [r3, #28]
 1185 0036 70BD     		pop	{r4, r5, r6, pc}
 1186              	.LVL119:
 1187              	.L87:
2288:bluetooth_rxtx.c **** 
2289:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 1188              		.loc 1 2289 0
 1189 0038 0329     		cmp	r1, #3
 1190 003a 3BD1     		bne	.L90
 1191              	.LBB14:
2290:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
2291:bluetooth_rxtx.c **** 
2292:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2293:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 1192              		.loc 1 2293 0
 1193 003c DB6A     		ldr	r3, [r3, #44]
2290:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 1194              		.loc 1 2290 0
 1195 003e 02F00302 		and	r2, r2, #3
 1196              	.LVL120:
 1197              		.loc 1 2293 0
 1198 0042 A3B1     		cbz	r3, .L91
 1199              		.loc 1 2293 0 is_stmt 0 discriminator 1
 1200 0044 A38C     		ldrh	r3, [r4, #36]
 1201 0046 218E     		ldrh	r1, [r4, #48]
 1202 0048 9BB2     		uxth	r3, r3
 1203 004a 9942     		cmp	r1, r3
 1204 004c 0FD1     		bne	.L91
2294:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2295:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 1205              		.loc 1 2295 0 is_stmt 1
 1206 004e 474B     		ldr	r3, .L103+4
 1207 0050 1B68     		ldr	r3, [r3]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 65


 1208 0052 E361     		str	r3, [r4, #28]
 1209              	.LVL121:
2296:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 1210              		.loc 1 2296 0
 1211 0054 638E     		ldrh	r3, [r4, #50]
 1212 0056 6384     		strh	r3, [r4, #34]	@ movhi
2297:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 1213              		.loc 1 2297 0
 1214 0058 013B     		subs	r3, r3, #1
 1215 005a 9BB2     		uxth	r3, r3
 1216 005c 2384     		strh	r3, [r4, #32]	@ movhi
2298:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 1217              		.loc 1 2298 0
 1218 005e 94F83430 		ldrb	r3, [r4, #52]	@ zero_extendqisi2
 1219 0062 84F82630 		strb	r3, [r4, #38]
2299:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 1220              		.loc 1 2299 0
 1221 0066 E38E     		ldrh	r3, [r4, #54]
 1222 0068 2385     		strh	r3, [r4, #40]	@ movhi
2300:bluetooth_rxtx.c **** 			le.update_pending = 0;
 1223              		.loc 1 2300 0
 1224 006a 0023     		movs	r3, #0
 1225 006c E362     		str	r3, [r4, #44]
 1226              	.L91:
2301:bluetooth_rxtx.c **** 		}
2302:bluetooth_rxtx.c **** 
2303:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 1227              		.loc 1 2303 0
 1228 006e 032A     		cmp	r2, #3
 1229 0070 78D1     		bne	.L86
 1230              		.loc 1 2303 0 is_stmt 0 discriminator 1
 1231 0072 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
 1232 0074 002B     		cmp	r3, #0
 1233 0076 75D1     		bne	.L86
2304:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2305:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2306:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 1234              		.loc 1 2306 0 is_stmt 1
 1235 0078 EB79     		ldrb	r3, [r5, #7]	@ zero_extendqisi2
 1236 007a 84F83430 		strb	r3, [r4, #52]
2307:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 1237              		.loc 1 2307 0
 1238 007e 6A7A     		ldrb	r2, [r5, #9]	@ zero_extendqisi2
 1239              	.LVL122:
 1240 0080 2B7A     		ldrb	r3, [r5, #8]	@ zero_extendqisi2
 1241 0082 03EB0223 		add	r3, r3, r2, lsl #8
 1242 0086 E386     		strh	r3, [r4, #54]	@ movhi
2308:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 1243              		.loc 1 2308 0
 1244 0088 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
 1245 008a AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 1246 008c 03EB0223 		add	r3, r3, r2, lsl #8
 1247 0090 6386     		strh	r3, [r4, #50]	@ movhi
2309:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1248              		.loc 1 2309 0
 1249 0092 6A7C     		ldrb	r2, [r5, #17]	@ zero_extendqisi2
 1250 0094 2B7C     		ldrb	r3, [r5, #16]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 66


 1251 0096 03EB0223 		add	r3, r3, r2, lsl #8
2310:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 1252              		.loc 1 2310 0
 1253 009a A28C     		ldrh	r2, [r4, #36]
2309:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1254              		.loc 1 2309 0
 1255 009c 9BB2     		uxth	r3, r3
 1256              		.loc 1 2310 0
 1257 009e 92B2     		uxth	r2, r2
2309:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 1258              		.loc 1 2309 0
 1259 00a0 2386     		strh	r3, [r4, #48]	@ movhi
 1260              		.loc 1 2310 0
 1261 00a2 9B1A     		subs	r3, r3, r2
 1262 00a4 47F6FE72 		movw	r2, #32766
 1263 00a8 9342     		cmp	r3, r2
 1264 00aa 5BDC     		bgt	.L86
2311:bluetooth_rxtx.c **** 				le.update_pending = 1;
 1265              		.loc 1 2311 0
 1266 00ac 2E4B     		ldr	r3, .L103
 1267 00ae 0122     		movs	r2, #1
 1268 00b0 DA62     		str	r2, [r3, #44]
 1269 00b2 70BD     		pop	{r4, r5, r6, pc}
 1270              	.LVL123:
 1271              	.L90:
 1272              	.LBE14:
2312:bluetooth_rxtx.c **** 		}
2313:bluetooth_rxtx.c **** 
2314:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 1273              		.loc 1 2314 0
 1274 00b4 0129     		cmp	r1, #1
 1275 00b6 55D1     		bne	.L86
 1276              	.LVL124:
 1277              	.LBB15:
2315:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
2316:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 1278              		.loc 1 2316 0
 1279 00b8 02F00F02 		and	r2, r2, #15
 1280              	.LVL125:
 1281 00bc 052A     		cmp	r2, #5
 1282 00be 51D1     		bne	.L86
 1283              	.LBB16:
2317:bluetooth_rxtx.c **** 			uint16_t conn_interval;
2318:bluetooth_rxtx.c **** 
2319:bluetooth_rxtx.c **** 			// ignore packets with incorrect length
2320:bluetooth_rxtx.c **** 			if (*data_len != 34)
 1284              		.loc 1 2320 0
 1285 00c0 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 1286 00c2 222B     		cmp	r3, #34
 1287 00c4 4ED1     		bne	.L86
 1288              	.LVL126:
2321:bluetooth_rxtx.c **** 				return;
2322:bluetooth_rxtx.c **** 
2323:bluetooth_rxtx.c **** 			// conn interval must be [7.5 ms, 4.0s] in units of 1.25 ms
2324:bluetooth_rxtx.c **** 			conn_interval = (packet[29] << 8) | packet[28];
 1289              		.loc 1 2324 0
 1290 00c6 427F     		ldrb	r2, [r0, #29]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 67


 1291 00c8 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 1292 00ca 43EA0223 		orr	r3, r3, r2, lsl #8
2325:bluetooth_rxtx.c **** 			if (conn_interval < 6 || conn_interval > 3200)
 1293              		.loc 1 2325 0
 1294 00ce 40F67A42 		movw	r2, #3194
 1295 00d2 063B     		subs	r3, r3, #6
 1296 00d4 9BB2     		uxth	r3, r3
 1297 00d6 9342     		cmp	r3, r2
 1298 00d8 44D8     		bhi	.L86
2326:bluetooth_rxtx.c **** 				return;
2327:bluetooth_rxtx.c **** 
2328:bluetooth_rxtx.c **** 			// This is a connect packet
2329:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2330:bluetooth_rxtx.c **** 			if (le.target_set &&
 1299              		.loc 1 2330 0
 1300 00da 236C     		ldr	r3, [r4, #64]
 1301 00dc 3BB9     		cbnz	r3, .L93
 1302              	.LVL127:
 1303              	.L95:
2331:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
2332:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
2333:bluetooth_rxtx.c **** 				return;
2334:bluetooth_rxtx.c **** 			}
2335:bluetooth_rxtx.c **** 
2336:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 1304              		.loc 1 2336 0
 1305 00de 0223     		movs	r3, #2
2337:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1306              		.loc 1 2337 0
 1307 00e0 0020     		movs	r0, #0
2336:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 1308              		.loc 1 2336 0
 1309 00e2 2376     		strb	r3, [r4, #24]
 1310              		.loc 1 2337 0
 1311 00e4 6061     		str	r0, [r4, #20]
 1312              	.LVL128:
 1313 00e6 05F11101 		add	r1, r5, #17
2338:bluetooth_rxtx.c **** 
2339:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 1314              		.loc 1 2339 0
 1315 00ea 0346     		mov	r3, r0
 1316 00ec 11E0     		b	.L94
 1317              	.LVL129:
 1318              	.L93:
2331:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1319              		.loc 1 2331 0 discriminator 1
 1320 00ee 04F13800 		add	r0, r4, #56
 1321              	.LVL130:
 1322 00f2 A91D     		adds	r1, r5, #6
 1323 00f4 0622     		movs	r2, #6
 1324 00f6 FFF7FEFF 		bl	memcmp
 1325              	.LVL131:
2330:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 1326              		.loc 1 2330 0 discriminator 1
 1327 00fa 0028     		cmp	r0, #0
 1328 00fc EFD0     		beq	.L95
2332:bluetooth_rxtx.c **** 				return;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 68


 1329              		.loc 1 2332 0
 1330 00fe 04F13800 		add	r0, r4, #56
 1331 0102 05F10C01 		add	r1, r5, #12
 1332 0106 0622     		movs	r2, #6
 1333 0108 FFF7FEFF 		bl	memcmp
 1334              	.LVL132:
2331:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 1335              		.loc 1 2331 0
 1336 010c 0028     		cmp	r0, #0
 1337 010e E6D0     		beq	.L95
 1338 0110 70BD     		pop	{r4, r5, r6, pc}
 1339              	.LVL133:
 1340              	.L94:
2340:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1341              		.loc 1 2340 0 discriminator 3
 1342 0112 11F8012F 		ldrb	r2, [r1, #1]!	@ zero_extendqisi2
 1343 0116 DE00     		lsls	r6, r3, #3
2339:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1344              		.loc 1 2339 0 discriminator 3
 1345 0118 0133     		adds	r3, r3, #1
 1346              	.LVL134:
 1347              		.loc 1 2340 0 discriminator 3
 1348 011a B240     		lsls	r2, r2, r6
2339:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1349              		.loc 1 2339 0 discriminator 3
 1350 011c 042B     		cmp	r3, #4
 1351              		.loc 1 2340 0 discriminator 3
 1352 011e 40EA0200 		orr	r0, r0, r2
 1353              	.LVL135:
2339:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 1354              		.loc 1 2339 0 discriminator 3
 1355 0122 F6D1     		bne	.L94
2341:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 1356              		.loc 1 2341 0
 1357 0124 FFF7FEFF 		bl	le_set_access_address
 1358              	.LVL136:
2342:bluetooth_rxtx.c **** 
2343:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2344:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
2345:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1359              		.loc 1 2345 0
 1360 0128 EB7D     		ldrb	r3, [r5, #23]	@ zero_extendqisi2
2344:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1361              		.loc 1 2344 0
 1362 012a 287E     		ldrb	r0, [r5, #24]	@ zero_extendqisi2
 1363              		.loc 1 2345 0
 1364 012c 1B02     		lsls	r3, r3, #8
 1365 012e 43EA0043 		orr	r3, r3, r0, lsl #16
2346:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 1366              		.loc 1 2346 0
 1367 0132 A87D     		ldrb	r0, [r5, #22]	@ zero_extendqisi2
 1368 0134 1843     		orrs	r0, r0, r3
2344:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 1369              		.loc 1 2344 0
 1370 0136 E060     		str	r0, [r4, #12]
2347:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1371              		.loc 1 2347 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 69


 1372 0138 FFF7FEFF 		bl	rbit
 1373              	.LVL137:
2348:bluetooth_rxtx.c **** 
2349:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2350:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 1374              		.loc 1 2350 0
 1375 013c 6B7E     		ldrb	r3, [r5, #25]	@ zero_extendqisi2
2347:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 1376              		.loc 1 2347 0
 1377 013e 2061     		str	r0, [r4, #16]
 1378              		.loc 1 2350 0
 1379 0140 84F82630 		strb	r3, [r4, #38]
2351:bluetooth_rxtx.c **** 
2352:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2353:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 1380              		.loc 1 2353 0
 1381 0144 AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
 1382 0146 2385     		strh	r3, [r4, #40]	@ movhi
2354:bluetooth_rxtx.c **** 
2355:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2356:bluetooth_rxtx.c **** 			le.conn_interval = (packet[CONN_INTERVAL+1] << 8)
 1383              		.loc 1 2356 0
 1384 0148 6A7F     		ldrb	r2, [r5, #29]	@ zero_extendqisi2
 1385 014a 2B7F     		ldrb	r3, [r5, #28]	@ zero_extendqisi2
 1386 014c 43EA0223 		orr	r3, r3, r2, lsl #8
 1387 0150 6384     		strh	r3, [r4, #34]	@ movhi
2357:bluetooth_rxtx.c **** 							 |  packet[CONN_INTERVAL+0];
2358:bluetooth_rxtx.c **** 
2359:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2360:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 1388              		.loc 1 2360 0
 1389 0152 95F82730 		ldrb	r3, [r5, #39]	@ zero_extendqisi2
2361:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
2362:bluetooth_rxtx.c **** 
2363:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2364:bluetooth_rxtx.c **** 			do_hop = 1;
 1390              		.loc 1 2364 0
 1391 0156 0122     		movs	r2, #1
2360:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1392              		.loc 1 2360 0
 1393 0158 03F01F03 		and	r3, r3, #31
 1394 015c A376     		strb	r3, [r4, #26]
2361:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 1395              		.loc 1 2361 0
 1396 015e 6376     		strb	r3, [r4, #25]
 1397              		.loc 1 2364 0
 1398 0160 034B     		ldr	r3, .L103+8
 1399 0162 DA72     		strb	r2, [r3, #11]
 1400              	.L86:
 1401 0164 70BD     		pop	{r4, r5, r6, pc}
 1402              	.LVL138:
 1403              	.L104:
 1404 0166 00BF     		.align	2
 1405              	.L103:
 1406 0168 00000000 		.word	.LANCHOR1
 1407 016c 00000000 		.word	clkn
 1408 0170 00000000 		.word	.LANCHOR0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 70


 1409              	.LBE16:
 1410              	.LBE15:
 1411              		.cfi_endproc
 1412              	.LFE26:
 1414              		.global	__aeabi_llsl
 1415              		.section	.text.vendor_request_handler,"ax",%progbits
 1416              		.align	1
 1417              		.thumb
 1418              		.thumb_func
 1420              	vendor_request_handler:
 1421              	.LFB2:
 186:bluetooth_rxtx.c **** 	uint32_t clock;
 1422              		.loc 1 186 0
 1423              		.cfi_startproc
 1424              		@ args = 0, pretend = 0, frame = 0
 1425              		@ frame_needed = 0, uses_anonymous_args = 0
 1426              	.LVL139:
 1427 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1428              		.cfi_def_cfa_offset 24
 1429              		.cfi_offset 3, -24
 1430              		.cfi_offset 4, -20
 1431              		.cfi_offset 5, -16
 1432              		.cfi_offset 6, -12
 1433              		.cfi_offset 7, -8
 1434              		.cfi_offset 14, -4
 1435              	.LVL140:
 186:bluetooth_rxtx.c **** 	uint32_t clock;
 1436              		.loc 1 186 0
 1437 0002 0E46     		mov	r6, r1
 1438 0004 1546     		mov	r5, r2
 1439 0006 1C46     		mov	r4, r3
 193:bluetooth_rxtx.c **** 
 1440              		.loc 1 193 0
 1441 0008 4728     		cmp	r0, #71
 1442 000a 00F22483 		bhi	.L211
 1443 000e DFE810F0 		tbh	[pc, r0, lsl #1]
 1444              	.LVL141:
 1445              	.L108:
 1446 0012 0301     		.2byte	(.L238-.L108)/2
 1447 0014 4800     		.2byte	(.L109-.L108)/2
 1448 0016 4D00     		.2byte	(.L110-.L108)/2
 1449 0018 5100     		.2byte	(.L111-.L108)/2
 1450 001a 5600     		.2byte	(.L112-.L108)/2
 1451 001c 5900     		.2byte	(.L113-.L108)/2
 1452 001e 5E00     		.2byte	(.L114-.L108)/2
 1453 0020 6100     		.2byte	(.L115-.L108)/2
 1454 0022 6300     		.2byte	(.L116-.L108)/2
 1455 0024 6700     		.2byte	(.L117-.L108)/2
 1456 0026 6C00     		.2byte	(.L118-.L108)/2
 1457 0028 C000     		.2byte	(.L119-.L108)/2
 1458 002a C700     		.2byte	(.L120-.L108)/2
 1459 002c 0901     		.2byte	(.L248-.L108)/2
 1460 002e 7A00     		.2byte	(.L122-.L108)/2
 1461 0030 7500     		.2byte	(.L123-.L108)/2
 1462 0032 7F00     		.2byte	(.L124-.L108)/2
 1463 0034 8400     		.2byte	(.L125-.L108)/2
 1464 0036 8700     		.2byte	(.L126-.L108)/2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 71


 1465 0038 8C00     		.2byte	(.L127-.L108)/2
 1466 003a 9400     		.2byte	(.L128-.L108)/2
 1467 003c B800     		.2byte	(.L129-.L108)/2
 1468 003e BA00     		.2byte	(.L130-.L108)/2
 1469 0040 BC00     		.2byte	(.L131-.L108)/2
 1470 0042 0101     		.2byte	(.L132-.L108)/2
 1471 0044 0601     		.2byte	(.L133-.L108)/2
 1472 0046 2203     		.2byte	(.L211-.L108)/2
 1473 0048 0B01     		.2byte	(.L134-.L108)/2
 1474 004a 9800     		.2byte	(.L135-.L108)/2
 1475 004c 9F00     		.2byte	(.L136-.L108)/2
 1476 004e A900     		.2byte	(.L137-.L108)/2
 1477 0050 A700     		.2byte	(.L138-.L108)/2
 1478 0052 AB00     		.2byte	(.L139-.L108)/2
 1479 0054 3401     		.2byte	(.L140-.L108)/2
 1480 0056 2701     		.2byte	(.L141-.L108)/2
 1481 0058 5101     		.2byte	(.L142-.L108)/2
 1482 005a 5401     		.2byte	(.L143-.L108)/2
 1483 005c 5801     		.2byte	(.L144-.L108)/2
 1484 005e 5C01     		.2byte	(.L145-.L108)/2
 1485 0060 A501     		.2byte	(.L146-.L108)/2
 1486 0062 DD01     		.2byte	(.L147-.L108)/2
 1487 0064 0002     		.2byte	(.L148-.L108)/2
 1488 0066 4002     		.2byte	(.L149-.L108)/2
 1489 0068 5002     		.2byte	(.L201-.L108)/2
 1490 006a 5A02     		.2byte	(.L151-.L108)/2
 1491 006c 2003     		.2byte	(.L224-.L108)/2
 1492 006e 6902     		.2byte	(.L153-.L108)/2
 1493 0070 6E02     		.2byte	(.L154-.L108)/2
 1494 0072 7402     		.2byte	(.L155-.L108)/2
 1495 0074 7B02     		.2byte	(.L156-.L108)/2
 1496 0076 8902     		.2byte	(.L157-.L108)/2
 1497 0078 EA01     		.2byte	(.L202-.L108)/2
 1498 007a F601     		.2byte	(.L203-.L108)/2
 1499 007c 9702     		.2byte	(.L160-.L108)/2
 1500 007e D102     		.2byte	(.L161-.L108)/2
 1501 0080 4301     		.2byte	(.L162-.L108)/2
 1502 0082 E402     		.2byte	(.L163-.L108)/2
 1503 0084 2203     		.2byte	(.L211-.L108)/2
 1504 0086 9F02     		.2byte	(.L164-.L108)/2
 1505 0088 FA02     		.2byte	(.L165-.L108)/2
 1506 008a 1B03     		.2byte	(.L166-.L108)/2
 1507 008c C701     		.2byte	(.L167-.L108)/2
 1508 008e D901     		.2byte	(.L168-.L108)/2
 1509 0090 0C02     		.2byte	(.L169-.L108)/2
 1510 0092 2203     		.2byte	(.L211-.L108)/2
 1511 0094 A402     		.2byte	(.L204-.L108)/2
 1512 0096 B602     		.2byte	(.L171-.L108)/2
 1513 0098 2501     		.2byte	(.L172-.L108)/2
 1514 009a C602     		.2byte	(.L173-.L108)/2
 1515 009c 1302     		.2byte	(.L174-.L108)/2
 1516 009e DA02     		.2byte	(.L175-.L108)/2
 1517 00a0 4802     		.2byte	(.L176-.L108)/2
 1518              		.p2align 1
 1519              	.L109:
 200:bluetooth_rxtx.c **** 		*data_len = 0;
 1520              		.loc 1 200 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 72


 1521 00a2 9F4B     		ldr	r3, .L257
 1522 00a4 0120     		movs	r0, #1
 1523              	.LVL142:
 1524 00a6 9874     		strb	r0, [r3, #18]
 201:bluetooth_rxtx.c **** 		break;
 1525              		.loc 1 201 0
 1526 00a8 0023     		movs	r3, #0
 1527 00aa A6E1     		b	.L228
 1528              	.LVL143:
 1529              	.L110:
 205:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 1530              		.loc 1 205 0
 1531 00ac 9C4B     		ldr	r3, .L257
 1532 00ae 0222     		movs	r2, #2
 1533              	.LVL144:
 1534 00b0 9A72     		strb	r2, [r3, #10]
 1535 00b2 7DE2     		b	.L249
 1536              	.LVL145:
 1537              	.L111:
 211:bluetooth_rxtx.c **** 		*data_len = 1;
 1538              		.loc 1 211 0
 1539 00b4 9B4B     		ldr	r3, .L257+4
 1540 00b6 1B68     		ldr	r3, [r3]
 1541 00b8 C3F34003 		ubfx	r3, r3, #1, #1
 1542 00bc 03E1     		b	.L230
 1543              	.L112:
 216:bluetooth_rxtx.c **** 			USRLED_SET;
 1544              		.loc 1 216 0
 1545 00be 0A88     		ldrh	r2, [r1]
 1546              	.LVL146:
 1547 00c0 0223     		movs	r3, #2
 1548 00c2 15E0     		b	.L244
 1549              	.LVL147:
 1550              	.L113:
 223:bluetooth_rxtx.c **** 		*data_len = 1;
 1551              		.loc 1 223 0
 1552 00c4 974B     		ldr	r3, .L257+4
 1553 00c6 1B68     		ldr	r3, [r3]
 1554 00c8 C3F30013 		ubfx	r3, r3, #4, #1
 1555 00cc FBE0     		b	.L230
 1556              	.L114:
 228:bluetooth_rxtx.c **** 			RXLED_SET;
 1557              		.loc 1 228 0
 1558 00ce 0A88     		ldrh	r2, [r1]
 1559              	.LVL148:
 1560 00d0 1023     		movs	r3, #16
 1561 00d2 0DE0     		b	.L244
 1562              	.LVL149:
 1563              	.L115:
 235:bluetooth_rxtx.c **** 		*data_len = 1;
 1564              		.loc 1 235 0
 1565 00d4 934B     		ldr	r3, .L257+4
 1566 00d6 24E0     		b	.L252
 1567              	.L116:
 240:bluetooth_rxtx.c **** 			TXLED_SET;
 1568              		.loc 1 240 0
 1569 00d8 0A88     		ldrh	r2, [r1]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 73


 1570              	.LVL150:
 1571 00da 4FF48073 		mov	r3, #256
 1572 00de 07E0     		b	.L244
 1573              	.LVL151:
 1574              	.L117:
 247:bluetooth_rxtx.c **** 		*data_len = 1;
 1575              		.loc 1 247 0
 1576 00e0 904B     		ldr	r3, .L257+4
 1577 00e2 1B68     		ldr	r3, [r3]
 1578 00e4 C3F34023 		ubfx	r3, r3, #9, #1
 1579 00e8 EDE0     		b	.L230
 1580              	.L118:
 252:bluetooth_rxtx.c **** 			CC1V8_SET;
 1581              		.loc 1 252 0
 1582 00ea 0A88     		ldrh	r2, [r1]
 1583              	.LVL152:
 1584 00ec 4FF40073 		mov	r3, #512
 1585              	.L244:
 1586 00f0 0AB1     		cbz	r2, .L180
 253:bluetooth_rxtx.c **** 		else
 1587              		.loc 1 253 0
 1588 00f2 8D4A     		ldr	r2, .L257+8
 1589 00f4 00E0     		b	.L232
 1590              	.L180:
 255:bluetooth_rxtx.c **** 		break;
 1591              		.loc 1 255 0
 1592 00f6 8D4A     		ldr	r2, .L257+12
 1593              	.L232:
 1594 00f8 1360     		str	r3, [r2]
 1595 00fa AAE2     		b	.L224
 1596              	.LVL153:
 1597              	.L123:
 259:bluetooth_rxtx.c **** 		break;
 1598              		.loc 1 259 0
 1599 00fc 1046     		mov	r0, r2
 1600              	.LVL154:
 1601 00fe 2146     		mov	r1, r4
 1602              	.LVL155:
 1603 0100 FFF7FEFF 		bl	get_part_num
 1604              	.LVL156:
 1605 0104 A5E2     		b	.L224
 1606              	.LVL157:
 1607              	.L122:
 267:bluetooth_rxtx.c **** 		break;
 1608              		.loc 1 267 0
 1609 0106 1046     		mov	r0, r2
 1610              	.LVL158:
 1611 0108 2146     		mov	r1, r4
 1612              	.LVL159:
 1613 010a FFF7FEFF 		bl	get_device_serial
 1614              	.LVL160:
 1615 010e A0E2     		b	.L224
 1616              	.LVL161:
 1617              	.L124:
 272:bluetooth_rxtx.c **** 		*data_len = 1;
 1618              		.loc 1 272 0
 1619 0110 874B     		ldr	r3, .L257+16
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 74


 1620 0112 1B68     		ldr	r3, [r3]
 1621 0114 C3F3C013 		ubfx	r3, r3, #7, #1
 1622 0118 D5E0     		b	.L230
 1623              	.L125:
 277:bluetooth_rxtx.c **** 			PAEN_SET;
 1624              		.loc 1 277 0
 1625 011a 0A88     		ldrh	r2, [r1]
 1626              	.LVL162:
 1627 011c 8023     		movs	r3, #128
 1628 011e 07E0     		b	.L247
 1629              	.LVL163:
 1630              	.L126:
 284:bluetooth_rxtx.c **** 		*data_len = 1;
 1631              		.loc 1 284 0
 1632 0120 834B     		ldr	r3, .L257+16
 1633              	.L252:
 1634 0122 1B68     		ldr	r3, [r3]
 1635 0124 C3F30023 		ubfx	r3, r3, #8, #1
 1636 0128 CDE0     		b	.L230
 1637              	.L127:
 289:bluetooth_rxtx.c **** 			HGM_SET;
 1638              		.loc 1 289 0
 1639 012a 0A88     		ldrh	r2, [r1]
 1640              	.LVL164:
 1641 012c 4FF48073 		mov	r3, #256
 1642              	.L247:
 1643 0130 0AB1     		cbz	r2, .L182
 290:bluetooth_rxtx.c **** 		else
 1644              		.loc 1 290 0
 1645 0132 804A     		ldr	r2, .L257+20
 1646 0134 E0E7     		b	.L232
 1647              	.L182:
 292:bluetooth_rxtx.c **** 		break;
 1648              		.loc 1 292 0
 1649 0136 804A     		ldr	r2, .L257+24
 1650 0138 DEE7     		b	.L232
 1651              	.LVL165:
 1652              	.L128:
 298:bluetooth_rxtx.c **** 		break;
 1653              		.loc 1 298 0
 1654 013a 0322     		movs	r2, #3
 1655              	.LVL166:
 1656              	.L233:
 1657 013c 784B     		ldr	r3, .L257
 1658 013e 9A74     		strb	r2, [r3, #18]
 1659 0140 87E2     		b	.L224
 1660              	.LVL167:
 1661              	.L135:
 302:bluetooth_rxtx.c **** 		*data_len = 1;
 1662              		.loc 1 302 0
 1663 0142 0520     		movs	r0, #5
 1664              	.LVL168:
 1665 0144 FFF7FEFF 		bl	cc2400_get
 1666              	.LVL169:
 1667 0148 00F00700 		and	r0, r0, #7
 1668 014c 2870     		strb	r0, [r5]
 1669 014e E6E1     		b	.L225
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 75


 1670              	.LVL170:
 1671              	.L136:
 307:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 1672              		.loc 1 307 0
 1673 0150 0988     		ldrh	r1, [r1]
 1674              	.LVL171:
 1675 0152 0729     		cmp	r1, #7
 1676 0154 00F27F82 		bhi	.L211
 308:bluetooth_rxtx.c **** 		} else {
 1677              		.loc 1 308 0
 1678 0158 0520     		movs	r0, #5
 1679              	.LVL172:
 1680 015a 41F00801 		orr	r1, r1, #8
 1681 015e F9E1     		b	.L236
 1682              	.LVL173:
 1683              	.L138:
 315:bluetooth_rxtx.c **** 		break;
 1684              		.loc 1 315 0
 1685 0160 0522     		movs	r2, #5
 1686              	.LVL174:
 1687 0162 EBE7     		b	.L233
 1688              	.LVL175:
 1689              	.L137:
 319:bluetooth_rxtx.c **** 		break;
 1690              		.loc 1 319 0
 1691 0164 0622     		movs	r2, #6
 1692              	.LVL176:
 1693 0166 E9E7     		b	.L233
 1694              	.LVL177:
 1695              	.L139:
 324:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 1696              		.loc 1 324 0
 1697 0168 744B     		ldr	r3, .L257+28
 1698 016a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1699              	.LVL178:
 1700 016c 2A70     		strb	r2, [r5]
 325:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 1701              		.loc 1 325 0
 1702 016e 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1703 0170 6A70     		strb	r2, [r5, #1]
 326:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 1704              		.loc 1 326 0
 1705 0172 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 1706 0174 AA70     		strb	r2, [r5, #2]
 327:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 1707              		.loc 1 327 0
 1708 0176 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1709 0178 EA70     		strb	r2, [r5, #3]
 328:bluetooth_rxtx.c **** 		*data_len = 5;
 1710              		.loc 1 328 0
 1711 017a 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1712 017c 2B71     		strb	r3, [r5, #4]
 329:bluetooth_rxtx.c **** 		break;
 1713              		.loc 1 329 0
 1714 017e 0523     		movs	r3, #5
 1715 0180 4BE0     		b	.L235
 1716              	.LVL179:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 76


 1717              	.L129:
 333:bluetooth_rxtx.c **** 		break;
 1718              		.loc 1 333 0
 1719 0182 0022     		movs	r2, #0
 1720              	.LVL180:
 1721 0184 DAE7     		b	.L233
 1722              	.LVL181:
 1723              	.L130:
 337:bluetooth_rxtx.c **** 		*data_len = 1;
 1724              		.loc 1 337 0
 1725 0186 664B     		ldr	r3, .L257
 1726 0188 9CE0     		b	.L229
 1727              	.L131:
 342:bluetooth_rxtx.c **** 		break;
 1728              		.loc 1 342 0
 1729 018a 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1730              	.LVL182:
 1731 018c 644B     		ldr	r3, .L257
 1732 018e 1A70     		strb	r2, [r3]
 1733 0190 5FE2     		b	.L224
 1734              	.LVL183:
 1735              	.L119:
 346:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 1736              		.loc 1 346 0
 1737 0192 6B4B     		ldr	r3, .L257+32
 1738 0194 1A88     		ldrh	r2, [r3]
 1739              	.LVL184:
 1740 0196 2A70     		strb	r2, [r5]
 347:bluetooth_rxtx.c **** 		*data_len = 2;
 1741              		.loc 1 347 0
 1742 0198 1B88     		ldrh	r3, [r3]
 1743 019a C3F30723 		ubfx	r3, r3, #8, #8
 1744 019e A4E1     		b	.L254
 1745              	.LVL185:
 1746              	.L120:
 352:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1747              		.loc 1 352 0
 1748 01a0 0A88     		ldrh	r2, [r1]
 1749              	.LVL186:
 354:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1750              		.loc 1 354 0
 1751 01a2 40F6EA21 		movw	r1, #2794
 1752              	.LVL187:
 352:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1753              		.loc 1 352 0
 1754 01a6 5E4B     		ldr	r3, .L257
 1755 01a8 DA81     		strh	r2, [r3, #14]	@ movhi
 354:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1756              		.loc 1 354 0
 1757 01aa DA89     		ldrh	r2, [r3, #14]
 1758 01ac 92B2     		uxth	r2, r2
 1759 01ae 8A42     		cmp	r2, r1
 1760 01b0 04D9     		bls	.L183
 355:bluetooth_rxtx.c **** 			requested_channel = 2402;
 1761              		.loc 1 355 0
 1762 01b2 0122     		movs	r2, #1
 1763 01b4 9A72     		strb	r2, [r3, #10]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 77


 356:bluetooth_rxtx.c **** 		}
 1764              		.loc 1 356 0
 1765 01b6 40F66212 		movw	r2, #2402
 1766 01ba 15E0     		b	.L186
 1767              	.L183:
 360:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 1768              		.loc 1 360 0
 1769 01bc 0022     		movs	r2, #0
 1770 01be 9A72     		strb	r2, [r3, #10]
 361:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1771              		.loc 1 361 0
 1772 01c0 40F6DC02 		movw	r2, #2268
 1773 01c4 D989     		ldrh	r1, [r3, #14]
 1774 01c6 89B2     		uxth	r1, r1
 1775 01c8 9142     		cmp	r1, r2
 362:bluetooth_rxtx.c **** 		}
 1776              		.loc 1 362 0
 1777 01ca 40F6E921 		movw	r1, #2793
 361:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1778              		.loc 1 361 0
 1779 01ce 84BF     		itt	hi
 1780 01d0 DA89     		ldrhhi	r2, [r3, #14]
 1781 01d2 92B2     		uxthhi	r2, r2
 1782 01d4 DA81     		strh	r2, [r3, #14]	@ movhi
 362:bluetooth_rxtx.c **** 		}
 1783              		.loc 1 362 0
 1784 01d6 DA89     		ldrh	r2, [r3, #14]
 1785 01d8 92B2     		uxth	r2, r2
 1786 01da 8A42     		cmp	r2, r1
 1787 01dc 8FBF     		iteee	hi
 1788 01de 40F6EA22 		movwhi	r2, #2794
 1789 01e2 4F4A     		ldrls	r2, .L257
 1790 01e4 D289     		ldrhls	r2, [r2, #14]
 1791 01e6 92B2     		uxthls	r2, r2
 1792              	.L186:
 362:bluetooth_rxtx.c **** 		}
 1793              		.loc 1 362 0 is_stmt 0 discriminator 4
 1794 01e8 DA81     		strh	r2, [r3, #14]	@ movhi
 365:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE && mode != MODE_BOSS_MASTER_LE) {
 1795              		.loc 1 365 0 is_stmt 1 discriminator 4
 1796 01ea D889     		ldrh	r0, [r3, #14]
 1797              	.LVL188:
 1798 01ec 544A     		ldr	r2, .L257+32
 1799 01ee 80B2     		uxth	r0, r0
 1800 01f0 A2F84A00 		strh	r0, [r2, #74]	@ movhi
 366:bluetooth_rxtx.c **** 			channel = requested_channel;
 1801              		.loc 1 366 0 discriminator 4
 1802 01f4 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 365:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE && mode != MODE_BOSS_MASTER_LE) {
 1803              		.loc 1 365 0 discriminator 4
 1804 01f6 4A49     		ldr	r1, .L257
 366:bluetooth_rxtx.c **** 			channel = requested_channel;
 1805              		.loc 1 366 0 discriminator 4
 1806 01f8 092B     		cmp	r3, #9
 1807 01fa 00F02A82 		beq	.L224
 366:bluetooth_rxtx.c **** 			channel = requested_channel;
 1808              		.loc 1 366 0 is_stmt 0 discriminator 1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 78


 1809 01fe 4B7C     		ldrb	r3, [r1, #17]	@ zero_extendqisi2
 1810 0200 122B     		cmp	r3, #18
 1811 0202 00F02682 		beq	.L224
 367:bluetooth_rxtx.c **** 			requested_channel = 0;
 1812              		.loc 1 367 0 is_stmt 1
 1813 0206 CB89     		ldrh	r3, [r1, #14]
 1814 0208 9BB2     		uxth	r3, r3
 1815 020a 1380     		strh	r3, [r2]	@ movhi
 368:bluetooth_rxtx.c **** 
 1816              		.loc 1 368 0
 1817 020c 0023     		movs	r3, #0
 1818 020e CB81     		strh	r3, [r1, #14]	@ movhi
 372:bluetooth_rxtx.c **** 		}
 1819              		.loc 1 372 0
 1820 0210 1088     		ldrh	r0, [r2]
 1821 0212 91E1     		b	.L241
 1822              	.LVL189:
 1823              	.L132:
 377:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 1824              		.loc 1 377 0
 1825 0214 FFF7FEFF 		bl	set_isp
 1826              	.LVL190:
 1827              	.L238:
 378:bluetooth_rxtx.c **** 		break;
 1828              		.loc 1 378 0
 1829 0218 0023     		movs	r3, #0
 1830              	.LVL191:
 1831              	.L235:
 1832 021a 2360     		str	r3, [r4]
 1833 021c 19E2     		b	.L224
 1834              	.LVL192:
 1835              	.L133:
 382:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 1836              		.loc 1 382 0
 1837 021e 494A     		ldr	r2, .L257+36
 1838              	.LVL193:
 1839 0220 494B     		ldr	r3, .L257+40
 1840 0222 1A60     		str	r2, [r3]
 1841              	.L248:
 383:bluetooth_rxtx.c **** 		break;
 1842              		.loc 1 383 0
 1843 0224 0B22     		movs	r2, #11
 1844 0226 89E7     		b	.L233
 1845              	.LVL194:
 1846              	.L134:
 387:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1847              		.loc 1 387 0
 1848 0228 0A88     		ldrh	r2, [r1]
 1849              	.LVL195:
 1850 022a 6FF40060 		mvn	r0, #2048
 1851              	.LVL196:
 1852 022e 1318     		adds	r3, r2, r0
 1853 0230 B3F5806F 		cmp	r3, #1024
 1854 0234 80F00F82 		bcs	.L211
 388:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1855              		.loc 1 388 0 discriminator 1
 1856 0238 4B88     		ldrh	r3, [r1, #2]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 79


 387:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1857              		.loc 1 387 0 discriminator 1
 1858 023a 6FF40061 		mvn	r1, #2048
 1859              	.LVL197:
 1860 023e 5918     		adds	r1, r3, r1
 1861 0240 B1F5806F 		cmp	r1, #1024
 1862 0244 80F00782 		bcs	.L211
 388:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1863              		.loc 1 388 0 discriminator 1
 1864 0248 9342     		cmp	r3, r2
 1865 024a C0F00482 		bcc	.L211
 391:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 1866              		.loc 1 391 0
 1867 024e 3C49     		ldr	r1, .L257+32
 1868 0250 A1F84C20 		strh	r2, [r1, #76]	@ movhi
 392:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 1869              		.loc 1 392 0
 1870 0254 A1F84E30 		strh	r3, [r1, #78]	@ movhi
 393:bluetooth_rxtx.c **** 		*data_len = 0;
 1871              		.loc 1 393 0
 1872 0258 0422     		movs	r2, #4
 1873 025a A8E1     		b	.L250
 1874              	.LVL198:
 1875              	.L172:
 398:bluetooth_rxtx.c **** 		*data_len = 0;
 1876              		.loc 1 398 0
 1877 025c 0F22     		movs	r2, #15
 1878              	.LVL199:
 1879 025e A6E1     		b	.L250
 1880              	.LVL200:
 1881              	.L141:
 403:bluetooth_rxtx.c **** 			return 0;
 1882              		.loc 1 403 0
 1883 0260 0B88     		ldrh	r3, [r1]
 1884 0262 B3F5807F 		cmp	r3, #256
 1885 0266 00F2F681 		bhi	.L211
 405:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 1886              		.loc 1 405 0
 1887 026a 354A     		ldr	r2, .L257+32
 1888              	.LVL201:
 1889 026c C3F13603 		rsb	r3, r3, #54
 1890 0270 DBB2     		uxtb	r3, r3
 1891 0272 82F85030 		strb	r3, [r2, #80]
 406:bluetooth_rxtx.c **** 		*data_len = 0;
 1892              		.loc 1 406 0
 1893 0276 0722     		movs	r2, #7
 1894 0278 99E1     		b	.L250
 1895              	.LVL202:
 1896              	.L140:
 411:bluetooth_rxtx.c **** 		data[1] = 0x00;
 1897              		.loc 1 411 0
 1898 027a 0023     		movs	r3, #0
 1899 027c 1370     		strb	r3, [r2]
 412:bluetooth_rxtx.c **** 
 1900              		.loc 1 412 0
 1901 027e 5370     		strb	r3, [r2, #1]
 414:bluetooth_rxtx.c **** 		data[2] = length;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 80


 1902              		.loc 1 414 0
 1903 0280 3248     		ldr	r0, .L257+44
 1904              	.LVL203:
 1905 0282 FFF7FEFF 		bl	strlen
 1906              	.LVL204:
 1907 0286 C6B2     		uxtb	r6, r0
 1908              	.LVL205:
 415:bluetooth_rxtx.c **** 
 1909              		.loc 1 415 0
 1910 0288 AE70     		strb	r6, [r5, #2]
 417:bluetooth_rxtx.c **** 
 1911              		.loc 1 417 0
 1912 028a 3246     		mov	r2, r6
 1913 028c E81C     		adds	r0, r5, #3
 1914 028e 2F49     		ldr	r1, .L257+44
 1915 0290 FFF7FEFF 		bl	memcpy
 1916              	.LVL206:
 419:bluetooth_rxtx.c **** 		break;
 1917              		.loc 1 419 0
 1918 0294 0336     		adds	r6, r6, #3
 1919              	.LVL207:
 1920 0296 0BE0     		b	.L242
 1921              	.LVL208:
 1922              	.L162:
 423:bluetooth_rxtx.c **** 		data[0] = length;
 1923              		.loc 1 423 0
 1924 0298 2D48     		ldr	r0, .L257+48
 1925              	.LVL209:
 1926 029a FFF7FEFF 		bl	strlen
 1927              	.LVL210:
 1928 029e C6B2     		uxtb	r6, r0
 1929              	.LVL211:
 424:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 1930              		.loc 1 424 0
 1931 02a0 2846     		mov	r0, r5
 425:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 1932              		.loc 1 425 0
 1933 02a2 3246     		mov	r2, r6
 424:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 1934              		.loc 1 424 0
 1935 02a4 00F8016B 		strb	r6, [r0], #1
 425:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 1936              		.loc 1 425 0
 1937 02a8 2949     		ldr	r1, .L257+48
 1938 02aa FFF7FEFF 		bl	memcpy
 1939              	.LVL212:
 426:bluetooth_rxtx.c **** 		break;
 1940              		.loc 1 426 0
 1941 02ae 0136     		adds	r6, r6, #1
 1942              	.LVL213:
 1943              	.L242:
 1944 02b0 2660     		str	r6, [r4]
 1945 02b2 CEE1     		b	.L224
 1946              	.LVL214:
 1947              	.L142:
 430:bluetooth_rxtx.c **** 		*data_len = 1;
 1948              		.loc 1 430 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 81


 1949 02b4 0120     		movs	r0, #1
 1950              	.LVL215:
 1951 02b6 1070     		strb	r0, [r2]
 1952 02b8 32E1     		b	.L226
 1953              	.LVL216:
 1954              	.L143:
 435:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 1955              		.loc 1 435 0
 1956 02ba 0A88     		ldrh	r2, [r1]
 1957              	.LVL217:
 1958 02bc 254B     		ldr	r3, .L257+52
 1959 02be 1A70     		strb	r2, [r3]
 1960 02c0 38E1     		b	.L240
 1961              	.LVL218:
 1962              	.L144:
 440:bluetooth_rxtx.c **** 		*data_len = 1;
 1963              		.loc 1 440 0
 1964 02c2 244B     		ldr	r3, .L257+52
 1965              	.L229:
 1966 02c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1967              	.L230:
 1968 02c6 2B70     		strb	r3, [r5]
 1969 02c8 29E1     		b	.L225
 1970              	.L145:
 445:bluetooth_rxtx.c **** 		target.syncword = 0;
 1971              		.loc 1 445 0
 1972 02ca 234C     		ldr	r4, .L257+56
 1973              	.LVL219:
 1974 02cc 0022     		movs	r2, #0
 1975              	.LVL220:
 1976 02ce 0023     		movs	r3, #0
 1977 02d0 C4E90023 		strd	r2, [r4]
 446:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 1978              		.loc 1 446 0
 1979 02d4 C4E90223 		strd	r2, [r4, #8]
 1980              	.LVL221:
 1981              	.LBB17:
 447:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 1982              		.loc 1 447 0
 1983 02d8 0026     		movs	r6, #0
 1984              	.LVL222:
 1985              	.L189:
 448:bluetooth_rxtx.c **** 		}
 1986              		.loc 1 448 0 discriminator 3
 1987 02da A85D     		ldrb	r0, [r5, r6]	@ zero_extendqisi2
 1988 02dc F200     		lsls	r2, r6, #3
 1989 02de 0021     		movs	r1, #0
 1990 02e0 FFF7FEFF 		bl	__aeabi_llsl
 1991              	.LVL223:
 1992 02e4 D4E90023 		ldrd	r2, [r4]
 447:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 1993              		.loc 1 447 0 discriminator 3
 1994 02e8 0136     		adds	r6, r6, #1
 1995              	.LVL224:
 448:bluetooth_rxtx.c **** 		}
 1996              		.loc 1 448 0 discriminator 3
 1997 02ea 1043     		orrs	r0, r0, r2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 82


 1998 02ec 1943     		orrs	r1, r1, r3
 447:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 1999              		.loc 1 447 0 discriminator 3
 2000 02ee 082E     		cmp	r6, #8
 448:bluetooth_rxtx.c **** 		}
 2001              		.loc 1 448 0 discriminator 3
 2002 02f0 C4E90001 		strd	r0, [r4]
 447:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2003              		.loc 1 447 0 discriminator 3
 2004 02f4 F1D1     		bne	.L189
 2005 02f6 0735     		adds	r5, r5, #7
 2006              	.LVL225:
 447:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2007              		.loc 1 447 0 is_stmt 0
 2008 02f8 0026     		movs	r6, #0
 2009              	.LVL226:
 2010              	.L190:
 2011              	.LBE17:
 2012              	.LBB18:
 451:bluetooth_rxtx.c **** 		}
 2013              		.loc 1 451 0 is_stmt 1 discriminator 3
 2014 02fa F200     		lsls	r2, r6, #3
 2015 02fc 15F8010F 		ldrb	r0, [r5, #1]!	@ zero_extendqisi2
 2016 0300 0021     		movs	r1, #0
 2017 0302 FFF7FEFF 		bl	__aeabi_llsl
 2018              	.LVL227:
 2019 0306 D4E90223 		ldrd	r2, [r4, #8]
 450:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2020              		.loc 1 450 0 discriminator 3
 2021 030a 0136     		adds	r6, r6, #1
 2022              	.LVL228:
 451:bluetooth_rxtx.c **** 		}
 2023              		.loc 1 451 0 discriminator 3
 2024 030c 1043     		orrs	r0, r0, r2
 2025 030e 1943     		orrs	r1, r1, r3
 450:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2026              		.loc 1 450 0 discriminator 3
 2027 0310 082E     		cmp	r6, #8
 451:bluetooth_rxtx.c **** 		}
 2028              		.loc 1 451 0 discriminator 3
 2029 0312 C4E90201 		strd	r0, [r4, #8]
 450:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 2030              		.loc 1 450 0 discriminator 3
 2031 0316 F0D1     		bne	.L190
 2032              	.LBE18:
 453:bluetooth_rxtx.c **** 		break;
 2033              		.loc 1 453 0
 2034 0318 FFF7FEFF 		bl	precalc
 2035              	.LVL229:
 2036 031c 99E1     		b	.L224
 2037              	.L258:
 2038 031e 00BF     		.align	2
 2039              	.L257:
 2040 0320 00000000 		.word	.LANCHOR0
 2041 0324 34C00920 		.word	537509940
 2042 0328 38C00920 		.word	537509944
 2043 032c 3CC00920 		.word	537509948
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 83


 2044 0330 54C00920 		.word	537509972
 2045 0334 58C00920 		.word	537509976
 2046 0338 5CC00920 		.word	537509980
 2047 033c 00000000 		.word	rr
 2048 0340 00000000 		.word	.LANCHOR1
 2049 0344 21BB0543 		.word	1124449057
 2050 0348 00000000 		.word	bootloader_ctrl
 2051 034c 00000000 		.word	.LC3
 2052 0350 A7000000 		.word	.LANCHOR2+167
 2053 0354 00000000 		.word	cs_threshold_req
 2054 0358 00000000 		.word	target
 2055              	.LVL230:
 2056              	.L146:
 457:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2057              		.loc 1 457 0
 2058 035c AC4B     		ldr	r3, .L259
 2059 035e 0022     		movs	r2, #0
 2060              	.LVL231:
 2061 0360 1A60     		str	r2, [r3]
 2062              	.LVL232:
 2063 0362 E81C     		adds	r0, r5, #3
 2064              	.LVL233:
 2065 0364 6A1E     		subs	r2, r5, #1
 2066              	.LVL234:
 2067              	.L191:
 2068              	.LBB19:
 459:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 2069              		.loc 1 459 0 discriminator 3
 2070 0366 1968     		ldr	r1, [r3]
 2071 0368 0902     		lsls	r1, r1, #8
 2072 036a 1960     		str	r1, [r3]
 460:bluetooth_rxtx.c **** 		}
 2073              		.loc 1 460 0 discriminator 3
 2074 036c 12F8014F 		ldrb	r4, [r2, #1]!	@ zero_extendqisi2
 2075 0370 1968     		ldr	r1, [r3]
 458:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2076              		.loc 1 458 0 discriminator 3
 2077 0372 8242     		cmp	r2, r0
 460:bluetooth_rxtx.c **** 		}
 2078              		.loc 1 460 0 discriminator 3
 2079 0374 41EA0401 		orr	r1, r1, r4
 2080 0378 1960     		str	r1, [r3]
 458:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2081              		.loc 1 458 0 discriminator 3
 2082 037a F4D1     		bne	.L191
 2083              	.LBE19:
 462:bluetooth_rxtx.c **** 		dma_discard = 1;
 2084              		.loc 1 462 0
 2085 037c A54B     		ldr	r3, .L259+4
 2086 037e 0222     		movs	r2, #2
 2087 0380 9A72     		strb	r2, [r3, #10]
 464:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2088              		.loc 1 464 0
 2089 0382 A54A     		ldr	r2, .L259+8
 463:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2090              		.loc 1 463 0
 2091 0384 0120     		movs	r0, #1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 84


 464:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2092              		.loc 1 464 0
 2093 0386 4FF08051 		mov	r1, #268435456
 463:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2094              		.loc 1 463 0
 2095 038a 1874     		strb	r0, [r3, #16]
 464:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 2096              		.loc 1 464 0
 2097 038c 1160     		str	r1, [r2]
 465:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2098              		.loc 1 465 0
 2099 038e 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 2100 0390 6A79     		ldrb	r2, [r5, #5]	@ zero_extendqisi2
 2101 0392 42EA0122 		orr	r2, r2, r1, lsl #8
 2102 0396 A149     		ldr	r1, .L259+12
 2103 0398 0A80     		strh	r2, [r1]	@ movhi
 466:bluetooth_rxtx.c **** 		break;
 2104              		.loc 1 466 0
 2105 039a 0822     		movs	r2, #8
 2106 039c 9A74     		strb	r2, [r3, #18]
 467:bluetooth_rxtx.c **** 
 2107              		.loc 1 467 0
 2108 039e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2109              	.LVL235:
 2110              	.L167:
 470:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 2111              		.loc 1 470 0
 2112 03a0 9C4B     		ldr	r3, .L259+4
 2113 03a2 0522     		movs	r2, #5
 2114              	.LVL236:
 2115 03a4 9A72     		strb	r2, [r3, #10]
 471:bluetooth_rxtx.c **** 
 2116              		.loc 1 471 0
 2117 03a6 0E22     		movs	r2, #14
 2118 03a8 9A74     		strb	r2, [r3, #18]
 2119              	.LVL237:
 2120              	.LBB20:
 473:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2121              		.loc 1 473 0
 2122 03aa 0023     		movs	r3, #0
 2123              	.LVL238:
 2124              	.L192:
 474:bluetooth_rxtx.c **** 		}
 2125              		.loc 1 474 0 discriminator 3
 2126 03ac 9C49     		ldr	r1, .L259+16
 2127 03ae 0022     		movs	r2, #0
 2128 03b0 5A54     		strb	r2, [r3, r1]
 473:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2129              		.loc 1 473 0 discriminator 3
 2130 03b2 0133     		adds	r3, r3, #1
 2131              	.LVL239:
 2132 03b4 0A2B     		cmp	r3, #10
 2133 03b6 F9D1     		bne	.L192
 2134              	.LBE20:
 476:bluetooth_rxtx.c **** 		afh_enabled = 1;
 2135              		.loc 1 476 0
 2136 03b8 9A4B     		ldr	r3, .L259+20
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 85


 2137              	.LVL240:
 477:bluetooth_rxtx.c **** 		break;
 2138              		.loc 1 477 0
 2139 03ba 0120     		movs	r0, #1
 2140              	.LVL241:
 476:bluetooth_rxtx.c **** 		afh_enabled = 1;
 2141              		.loc 1 476 0
 2142 03bc 1A70     		strb	r2, [r3]
 477:bluetooth_rxtx.c **** 		break;
 2143              		.loc 1 477 0
 2144 03be 9A4B     		ldr	r3, .L259+24
 2145 03c0 1870     		strb	r0, [r3]
 478:bluetooth_rxtx.c **** 
 2146              		.loc 1 478 0
 2147 03c2 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2148              	.LVL242:
 2149              	.L168:
 481:bluetooth_rxtx.c **** 		break;
 2150              		.loc 1 481 0
 2151 03c4 934B     		ldr	r3, .L259+4
 2152 03c6 0120     		movs	r0, #1
 2153              	.LVL243:
 2154 03c8 D872     		strb	r0, [r3, #11]
 482:bluetooth_rxtx.c **** 
 2155              		.loc 1 482 0
 2156 03ca F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2157              	.LVL244:
 2158              	.L147:
 485:bluetooth_rxtx.c **** 		clkn = clock;
 2159              		.loc 1 485 0
 2160 03cc AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
 2161 03ce 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2162              	.LVL245:
 2163 03d0 1B04     		lsls	r3, r3, #16
 2164 03d2 43EA0223 		orr	r3, r3, r2, lsl #8
 2165 03d6 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 2166 03d8 1343     		orrs	r3, r3, r2
 2167 03da EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
 2168 03dc 43EA0263 		orr	r3, r3, r2, lsl #24
 2169              	.LVL246:
 486:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2170              		.loc 1 486 0
 2171 03e0 924A     		ldr	r2, .L259+28
 2172 03e2 1360     		str	r3, [r2]
 2173 03e4 A6E0     		b	.L240
 2174              	.LVL247:
 2175              	.L202:
 193:bluetooth_rxtx.c **** 
 2176              		.loc 1 193 0
 2177 03e6 0023     		movs	r3, #0
 2178              	.LVL248:
 2179              	.L158:
 2180              	.LBB21:
 492:bluetooth_rxtx.c **** 		}
 2181              		.loc 1 492 0 discriminator 3
 2182 03e8 E95C     		ldrb	r1, [r5, r3]	@ zero_extendqisi2
 2183 03ea 8D4A     		ldr	r2, .L259+16
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 86


 2184 03ec 9954     		strb	r1, [r3, r2]
 491:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 2185              		.loc 1 491 0 discriminator 3
 2186 03ee 0133     		adds	r3, r3, #1
 2187              	.LVL249:
 2188 03f0 0A2B     		cmp	r3, #10
 2189 03f2 F9D1     		bne	.L158
 2190              	.LBE21:
 494:bluetooth_rxtx.c **** 		*data_len = 10;
 2191              		.loc 1 494 0
 2192 03f4 8C4A     		ldr	r2, .L259+24
 2193 03f6 0120     		movs	r0, #1
 2194              	.LVL250:
 2195 03f8 1070     		strb	r0, [r2]
 2196              	.LVL251:
 2197              	.L228:
 495:bluetooth_rxtx.c **** 		break;
 2198              		.loc 1 495 0
 2199 03fa 2360     		str	r3, [r4]
 496:bluetooth_rxtx.c **** 
 2200              		.loc 1 496 0
 2201 03fc F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2202              	.LVL252:
 2203              	.L203:
 193:bluetooth_rxtx.c **** 
 2204              		.loc 1 193 0
 2205 03fe 0023     		movs	r3, #0
 2206              	.LVL253:
 2207              	.L159:
 2208              	.LBB22:
 500:bluetooth_rxtx.c **** 		}
 2209              		.loc 1 500 0 discriminator 3
 2210 0400 8749     		ldr	r1, .L259+16
 2211 0402 0022     		movs	r2, #0
 2212 0404 5A54     		strb	r2, [r3, r1]
 499:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 2213              		.loc 1 499 0 discriminator 3
 2214 0406 0133     		adds	r3, r3, #1
 2215              	.LVL254:
 2216 0408 0A2B     		cmp	r3, #10
 2217 040a F9D1     		bne	.L159
 2218              	.LBE22:
 502:bluetooth_rxtx.c **** 		*data_len = 10;
 2219              		.loc 1 502 0
 2220 040c 8649     		ldr	r1, .L259+24
 2221 040e 0A70     		strb	r2, [r1]
 2222 0410 03E7     		b	.L235
 2223              	.LVL255:
 2224              	.L148:
 507:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2225              		.loc 1 507 0
 2226 0412 864B     		ldr	r3, .L259+28
 2227 0414 1968     		ldr	r1, [r3]
 2228              	.LVL256:
 2229              	.LBB23:
 508:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2230              		.loc 1 508 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 87


 2231 0416 0023     		movs	r3, #0
 2232              	.LVL257:
 2233              	.L193:
 2234 0418 DA00     		lsls	r2, r3, #3
 509:bluetooth_rxtx.c **** 		}
 2235              		.loc 1 509 0 discriminator 3
 2236 041a 21FA02F2 		lsr	r2, r1, r2
 2237 041e EA54     		strb	r2, [r5, r3]
 508:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 2238              		.loc 1 508 0 discriminator 3
 2239 0420 0133     		adds	r3, r3, #1
 2240              	.LVL258:
 2241 0422 042B     		cmp	r3, #4
 2242 0424 F8D1     		bne	.L193
 2243              	.LVL259:
 2244              	.L196:
 2245              	.LBE23:
 511:bluetooth_rxtx.c **** 		break;
 2246              		.loc 1 511 0
 2247 0426 0423     		movs	r3, #4
 2248 0428 F7E6     		b	.L235
 2249              	.LVL260:
 2250              	.L169:
 515:bluetooth_rxtx.c **** 		break;
 2251              		.loc 1 515 0
 2252 042a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2253              	.LVL261:
 2254 042c 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 2255 042e 43EA0223 		orr	r3, r3, r2, lsl #8
 2256 0432 7A4A     		ldr	r2, .L259+12
 2257 0434 1380     		strh	r3, [r2]	@ movhi
 2258 0436 0CE1     		b	.L224
 2259              	.LVL262:
 2260              	.L174:
 519:bluetooth_rxtx.c **** 
 2261              		.loc 1 519 0
 2262 0438 7D4B     		ldr	r3, .L259+32
 2263 043a 1078     		ldrb	r0, [r2]	@ zero_extendqisi2
 2264              	.LVL263:
 2265 043c 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2266              	.LVL264:
 2267 043e 1988     		ldrh	r1, [r3]
 2268              	.LVL265:
 2269 0440 42EA0022 		orr	r2, r2, r0, lsl #8
 2270 0444 0A44     		add	r2, r2, r1
 2271 0446 92B2     		uxth	r2, r2
 2272 0448 1A80     		strh	r2, [r3]	@ movhi
 522:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 2273              		.loc 1 522 0
 2274 044a 1A88     		ldrh	r2, [r3]
 2275 044c 7948     		ldr	r0, .L259+36
 2276 044e 12B2     		sxth	r2, r2
 2277 0450 002A     		cmp	r2, #0
 2278 0452 794A     		ldr	r2, .L259+40
 2279 0454 07DA     		bge	.L194
 523:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2280              		.loc 1 523 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 88


 2281 0456 1B88     		ldrh	r3, [r3]
 2282 0458 4FF4A071 		mov	r1, #320
 2283 045c 5B42     		negs	r3, r3
 2284 045e 9BB2     		uxth	r3, r3
 2285 0460 91FBF3F3 		sdiv	r3, r1, r3
 2286 0464 0AE0     		b	.L253
 2287              	.L194:
 527:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 2288              		.loc 1 527 0
 2289 0466 1988     		ldrh	r1, [r3]
 2290 0468 09B2     		sxth	r1, r1
 2291 046a 0029     		cmp	r1, #0
 2292 046c 0DDD     		ble	.L195
 528:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2293              		.loc 1 528 0
 2294 046e 1B88     		ldrh	r3, [r3]
 2295 0470 4FF4A071 		mov	r1, #320
 2296 0474 1BB2     		sxth	r3, r3
 2297 0476 91FBF3F3 		sdiv	r3, r1, r3
 2298 047a 9BB2     		uxth	r3, r3
 2299              	.L253:
 2300 047c 1380     		strh	r3, [r2]	@ movhi
 529:bluetooth_rxtx.c **** 		}
 2301              		.loc 1 529 0
 2302 047e 6F4B     		ldr	r3, .L259+44
 2303 0480 1968     		ldr	r1, [r3]
 2304 0482 1388     		ldrh	r3, [r2]
 2305 0484 9BB2     		uxth	r3, r3
 2306 0486 0B44     		add	r3, r3, r1
 2307 0488 01E0     		b	.L234
 2308              	.L195:
 533:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 2309              		.loc 1 533 0
 2310 048a 0023     		movs	r3, #0
 2311 048c 1380     		strh	r3, [r2]	@ movhi
 2312              	.L234:
 534:bluetooth_rxtx.c **** 		}
 2313              		.loc 1 534 0
 2314 048e 0360     		str	r3, [r0]
 2315 0490 DFE0     		b	.L224
 2316              	.LVL266:
 2317              	.L149:
 542:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2318              		.loc 1 542 0
 2319 0492 604B     		ldr	r3, .L259+4
 540:bluetooth_rxtx.c **** 
 2320              		.loc 1 540 0
 2321 0494 0022     		movs	r2, #0
 2322              	.LVL267:
 2323 0496 2260     		str	r2, [r4]
 542:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2324              		.loc 1 542 0
 2325 0498 DA72     		strb	r2, [r3, #11]
 543:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 2326              		.loc 1 543 0
 2327 049a 0322     		movs	r2, #3
 2328 049c 9A72     		strb	r2, [r3, #10]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 89


 544:bluetooth_rxtx.c **** 
 2329              		.loc 1 544 0
 2330 049e 0922     		movs	r2, #9
 2331 04a0 45E0     		b	.L239
 2332              	.LVL268:
 2333              	.L176:
 553:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2334              		.loc 1 553 0
 2335 04a2 5C4B     		ldr	r3, .L259+4
 551:bluetooth_rxtx.c **** 
 2336              		.loc 1 551 0
 2337 04a4 0022     		movs	r2, #0
 2338              	.LVL269:
 2339 04a6 2260     		str	r2, [r4]
 553:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 2340              		.loc 1 553 0
 2341 04a8 DA72     		strb	r2, [r3, #11]
 554:bluetooth_rxtx.c **** 		requested_mode = MODE_BOSS_MASTER_LE;
 2342              		.loc 1 554 0
 2343 04aa 0322     		movs	r2, #3
 2344 04ac 9A72     		strb	r2, [r3, #10]
 555:bluetooth_rxtx.c **** 
 2345              		.loc 1 555 0
 2346 04ae 1222     		movs	r2, #18
 2347 04b0 3DE0     		b	.L239
 2348              	.LVL270:
 2349              	.L201:
 193:bluetooth_rxtx.c **** 
 2350              		.loc 1 193 0
 2351 04b2 0023     		movs	r3, #0
 2352              	.LVL271:
 2353              	.L150:
 2354              	.LBB24:
 563:bluetooth_rxtx.c **** 		}
 2355              		.loc 1 563 0 discriminator 3
 2356 04b4 624A     		ldr	r2, .L259+48
 2357 04b6 D900     		lsls	r1, r3, #3
 2358 04b8 5268     		ldr	r2, [r2, #4]
 2359 04ba CA40     		lsrs	r2, r2, r1
 2360 04bc EA54     		strb	r2, [r5, r3]
 562:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 2361              		.loc 1 562 0 discriminator 3
 2362 04be 0133     		adds	r3, r3, #1
 2363              	.LVL272:
 2364 04c0 042B     		cmp	r3, #4
 2365 04c2 F7D1     		bne	.L150
 2366 04c4 AFE7     		b	.L196
 2367              	.LVL273:
 2368              	.L151:
 2369              	.LBE24:
 569:bluetooth_rxtx.c **** 		le.target_set = 1;
 2370              		.loc 1 569 0
 2371 04c6 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 2372 04c8 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 2373              	.LVL274:
 2374 04ca 1B04     		lsls	r3, r3, #16
 2375 04cc 43EA0023 		orr	r3, r3, r0, lsl #8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 90


 2376 04d0 1078     		ldrb	r0, [r2]	@ zero_extendqisi2
 2377 04d2 0343     		orrs	r3, r3, r0
 2378 04d4 D078     		ldrb	r0, [r2, #3]	@ zero_extendqisi2
 2379 04d6 43EA0060 		orr	r0, r3, r0, lsl #24
 2380 04da FFF7FEFF 		bl	le_set_access_address
 2381              	.LVL275:
 570:bluetooth_rxtx.c **** 		break;
 2382              		.loc 1 570 0
 2383 04de 0120     		movs	r0, #1
 2384 04e0 574B     		ldr	r3, .L259+48
 2385 04e2 8EE0     		b	.L227
 2386              	.LVL276:
 2387              	.L153:
 580:bluetooth_rxtx.c **** 		data[1] = 0x37;
 2388              		.loc 1 580 0
 2389 04e4 1323     		movs	r3, #19
 2390 04e6 1370     		strb	r3, [r2]
 581:bluetooth_rxtx.c **** 		*data_len = 2;
 2391              		.loc 1 581 0
 2392 04e8 3723     		movs	r3, #55
 2393              	.LVL277:
 2394              	.L254:
 2395 04ea 6B70     		strb	r3, [r5, #1]
 2396 04ec 2EE0     		b	.L251
 2397              	.LVL278:
 2398              	.L154:
 586:bluetooth_rxtx.c **** 		*data_len = 1;
 2399              		.loc 1 586 0
 2400 04ee 544B     		ldr	r3, .L259+48
 2401 04f0 5B69     		ldr	r3, [r3, #20]
 2402 04f2 0033     		adds	r3, r3, #0
 2403 04f4 18BF     		it	ne
 2404 04f6 0123     		movne	r3, #1
 2405 04f8 E5E6     		b	.L230
 2406              	.L155:
 591:bluetooth_rxtx.c **** 		break;
 2407              		.loc 1 591 0
 2408 04fa 0B88     		ldrh	r3, [r1]
 2409 04fc 504A     		ldr	r2, .L259+48
 2410              	.LVL279:
 2411 04fe 0033     		adds	r3, r3, #0
 2412 0500 18BF     		it	ne
 2413 0502 0123     		movne	r3, #1
 2414 0504 5361     		str	r3, [r2, #20]
 2415 0506 A4E0     		b	.L224
 2416              	.LVL280:
 2417              	.L156:
 595:bluetooth_rxtx.c **** 		if (p != NULL) {
 2418              		.loc 1 595 0
 2419 0508 FFF7FEFF 		bl	dequeue
 2420              	.LVL281:
 596:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 2421              		.loc 1 596 0
 2422 050c 0146     		mov	r1, r0
 2423 050e 28B1     		cbz	r0, .L197
 597:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 2424              		.loc 1 597 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 91


 2425 0510 2846     		mov	r0, r5
 2426              	.LVL282:
 2427 0512 4022     		movs	r2, #64
 2428 0514 FFF7FEFF 		bl	memcpy
 2429              	.LVL283:
 598:bluetooth_rxtx.c **** 		} else {
 2430              		.loc 1 598 0
 2431 0518 4023     		movs	r3, #64
 2432 051a 7EE6     		b	.L235
 2433              	.LVL284:
 2434              	.L197:
 600:bluetooth_rxtx.c **** 			*data_len = 1;
 2435              		.loc 1 600 0
 2436 051c 2870     		strb	r0, [r5]
 2437              	.LVL285:
 2438              	.L225:
 601:bluetooth_rxtx.c **** 		}
 2439              		.loc 1 601 0
 2440 051e 0120     		movs	r0, #1
 2441              	.L226:
 2442 0520 2060     		str	r0, [r4]
 2443 0522 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2444              	.LVL286:
 2445              	.L157:
 608:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2446              		.loc 1 608 0
 2447 0524 3B4B     		ldr	r3, .L259+4
 606:bluetooth_rxtx.c **** 
 2448              		.loc 1 606 0
 2449 0526 0022     		movs	r2, #0
 2450              	.LVL287:
 2451 0528 2260     		str	r2, [r4]
 608:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2452              		.loc 1 608 0
 2453 052a 9A72     		strb	r2, [r3, #10]
 609:bluetooth_rxtx.c **** 
 2454              		.loc 1 609 0
 2455 052c 0A22     		movs	r2, #10
 2456              	.L239:
 2457 052e 9A74     		strb	r2, [r3, #18]
 611:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2458              		.loc 1 611 0
 2459 0530 FFF7FEFF 		bl	queue_init
 2460              	.LVL288:
 2461              	.L240:
 612:bluetooth_rxtx.c **** 		break;
 2462              		.loc 1 612 0
 2463 0534 424B     		ldr	r3, .L259+48
 2464 0536 1888     		ldrh	r0, [r3]
 2465              	.L241:
 2466 0538 80B2     		uxth	r0, r0
 2467 053a FFF7FEFF 		bl	cs_threshold_calc_and_set
 2468              	.LVL289:
 2469 053e 88E0     		b	.L224
 2470              	.LVL290:
 2471              	.L160:
 616:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 92


 2472              		.loc 1 616 0
 2473 0540 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 2474              	.LVL291:
 2475 0542 FFF7FEFF 		bl	cc2400_get
 2476              	.LVL292:
 617:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 2477              		.loc 1 617 0
 2478 0546 030A     		lsrs	r3, r0, #8
 2479 0548 2B70     		strb	r3, [r5]
 618:bluetooth_rxtx.c **** 		*data_len = 2;
 2480              		.loc 1 618 0
 2481 054a 6870     		strb	r0, [r5, #1]
 2482              	.LVL293:
 2483              	.L251:
 619:bluetooth_rxtx.c **** 		break;
 2484              		.loc 1 619 0
 2485 054c 0223     		movs	r3, #2
 2486 054e 64E6     		b	.L235
 2487              	.LVL294:
 2488              	.L164:
 623:bluetooth_rxtx.c **** 		break;
 2489              		.loc 1 623 0
 2490 0550 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 2491              	.LVL295:
 2492 0552 4988     		ldrh	r1, [r1, #2]
 2493              	.LVL296:
 2494              	.L236:
 2495 0554 FFF7FEFF 		bl	cc2400_set
 2496              	.LVL297:
 2497 0558 7BE0     		b	.L224
 2498              	.LVL298:
 2499              	.L204:
 193:bluetooth_rxtx.c **** 
 2500              		.loc 1 193 0
 2501 055a 0023     		movs	r3, #0
 2502              	.LVL299:
 2503              	.L170:
 627:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 2504              		.loc 1 627 0 discriminator 1
 2505 055c 3288     		ldrh	r2, [r6]
 2506 055e 5C1C     		adds	r4, r3, #1
 2507 0560 DBB2     		uxtb	r3, r3
 2508 0562 9342     		cmp	r3, r2
 2509 0564 75D2     		bcs	.L224
 628:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 2510              		.loc 1 628 0 discriminator 3
 2511 0566 03EB4303 		add	r3, r3, r3, lsl #1
 2512              	.LVL300:
 2513 056a EA18     		adds	r2, r5, r3
 2514              	.LVL301:
 2515 056c 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 2516 056e 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2517              	.LVL302:
 629:bluetooth_rxtx.c **** 		}
 2518              		.loc 1 629 0 discriminator 3
 2519 0570 E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
 2520 0572 42EA0121 		orr	r1, r2, r1, lsl #8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 93


 2521 0576 FFF7FEFF 		bl	cc2400_set
 2522              	.LVL303:
 2523 057a 2346     		mov	r3, r4
 2524 057c EEE7     		b	.L170
 2525              	.LVL304:
 2526              	.L171:
 193:bluetooth_rxtx.c **** 
 2527              		.loc 1 193 0
 2528 057e 0026     		movs	r6, #0
 2529              	.LVL305:
 2530              	.L199:
 2531 0580 F7B2     		uxtb	r7, r6
 2532              	.LVL306:
 636:bluetooth_rxtx.c **** 			data[i*3] = i;
 2533              		.loc 1 636 0 discriminator 3
 2534 0582 3846     		mov	r0, r7
 2535 0584 FFF7FEFF 		bl	cc2400_get
 2536              	.LVL307:
 2537 0588 0136     		adds	r6, r6, #1
 638:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2538              		.loc 1 638 0 discriminator 3
 2539 058a 030A     		lsrs	r3, r0, #8
 635:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2540              		.loc 1 635 0 discriminator 3
 2541 058c 2E2E     		cmp	r6, #46
 637:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 2542              		.loc 1 637 0 discriminator 3
 2543 058e 2F70     		strb	r7, [r5]
 638:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2544              		.loc 1 638 0 discriminator 3
 2545 0590 6B70     		strb	r3, [r5, #1]
 639:bluetooth_rxtx.c **** 		}
 2546              		.loc 1 639 0 discriminator 3
 2547 0592 A870     		strb	r0, [r5, #2]
 2548              	.LVL308:
 2549 0594 05F10305 		add	r5, r5, #3
 635:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2550              		.loc 1 635 0 discriminator 3
 2551 0598 F2D1     		bne	.L199
 641:bluetooth_rxtx.c **** 		break;
 2552              		.loc 1 641 0
 2553 059a 8723     		movs	r3, #135
 2554 059c 3DE6     		b	.L235
 2555              	.LVL309:
 2556              	.L173:
 645:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2557              		.loc 1 645 0
 2558 059e 9279     		ldrb	r2, [r2, #6]	@ zero_extendqisi2
 2559              	.LVL310:
 646:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2560              		.loc 1 646 0
 2561 05a0 2848     		ldr	r0, .L259+52
 2562              	.LVL311:
 645:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2563              		.loc 1 645 0
 2564 05a2 0732     		adds	r2, r2, #7
 646:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 94


 2565              		.loc 1 646 0
 2566 05a4 D2B2     		uxtb	r2, r2
 2567 05a6 2946     		mov	r1, r5
 2568              	.LVL312:
 2569 05a8 FFF7FEFF 		bl	memcpy
 2570              	.LVL313:
 648:bluetooth_rxtx.c **** 		*data_len = 0;
 2571              		.loc 1 648 0
 2572 05ac 1022     		movs	r2, #16
 2573              	.L250:
 2574 05ae 194B     		ldr	r3, .L259+4
 2575              	.L249:
 2576 05b0 9A74     		strb	r2, [r3, #18]
 2577 05b2 31E6     		b	.L238
 2578              	.LVL314:
 2579              	.L161:
 653:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 2580              		.loc 1 653 0
 2581 05b4 174C     		ldr	r4, .L259+4
 2582              	.LVL315:
 2583 05b6 1146     		mov	r1, r2
 2584              	.LVL316:
 2585 05b8 04F12000 		add	r0, r4, #32
 2586              	.LVL317:
 2587 05bc 0622     		movs	r2, #6
 2588              	.LVL318:
 2589 05be FFF7FEFF 		bl	memcpy
 2590              	.LVL319:
 654:bluetooth_rxtx.c **** 		break;
 2591              		.loc 1 654 0
 2592 05c2 0C23     		movs	r3, #12
 2593 05c4 07E0     		b	.L237
 2594              	.LVL320:
 2595              	.L175:
 658:bluetooth_rxtx.c **** 		requested_mode = MODE_BOSS_SLAVE_LE;
 2596              		.loc 1 658 0
 2597 05c6 134C     		ldr	r4, .L259+4
 2598              	.LVL321:
 2599 05c8 1146     		mov	r1, r2
 2600              	.LVL322:
 2601 05ca 04F12000 		add	r0, r4, #32
 2602              	.LVL323:
 2603 05ce 0622     		movs	r2, #6
 2604              	.LVL324:
 2605 05d0 FFF7FEFF 		bl	memcpy
 2606              	.LVL325:
 659:bluetooth_rxtx.c **** 		break;
 2607              		.loc 1 659 0
 2608 05d4 1123     		movs	r3, #17
 2609              	.L237:
 2610 05d6 A374     		strb	r3, [r4, #18]
 2611 05d8 3BE0     		b	.L224
 2612              	.LVL326:
 2613              	.L163:
 665:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 2614              		.loc 1 665 0
 2615 05da 5279     		ldrb	r2, [r2, #5]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 95


 2616              	.LVL327:
 2617 05dc 184B     		ldr	r3, .L259+48
 671:bluetooth_rxtx.c **** 		break;
 2618              		.loc 1 671 0
 2619 05de 0120     		movs	r0, #1
 2620              	.LVL328:
 665:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 2621              		.loc 1 665 0
 2622 05e0 83F83820 		strb	r2, [r3, #56]
 666:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 2623              		.loc 1 666 0
 2624 05e4 2A79     		ldrb	r2, [r5, #4]	@ zero_extendqisi2
 2625 05e6 83F83920 		strb	r2, [r3, #57]
 667:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 2626              		.loc 1 667 0
 2627 05ea EA78     		ldrb	r2, [r5, #3]	@ zero_extendqisi2
 2628 05ec 83F83A20 		strb	r2, [r3, #58]
 668:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 2629              		.loc 1 668 0
 2630 05f0 AA78     		ldrb	r2, [r5, #2]	@ zero_extendqisi2
 2631 05f2 83F83B20 		strb	r2, [r3, #59]
 669:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 2632              		.loc 1 669 0
 2633 05f6 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 2634 05f8 83F83C20 		strb	r2, [r3, #60]
 670:bluetooth_rxtx.c **** 		le.target_set = 1;
 2635              		.loc 1 670 0
 2636 05fc 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 2637 05fe 83F83D20 		strb	r2, [r3, #61]
 2638              	.LVL329:
 2639              	.L227:
 671:bluetooth_rxtx.c **** 		break;
 2640              		.loc 1 671 0
 2641 0602 1864     		str	r0, [r3, #64]
 672:bluetooth_rxtx.c **** 
 2642              		.loc 1 672 0
 2643 0604 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2644              	.LVL330:
 2645              	.L165:
 676:bluetooth_rxtx.c **** 		break;
 2646              		.loc 1 676 0
 2647 0606 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 2648              	.LVL331:
 2649 0608 024B     		ldr	r3, .L259+4
 2650 060a DA74     		strb	r2, [r3, #19]
 2651 060c 21E0     		b	.L224
 2652              	.L260:
 2653 060e 00BF     		.align	2
 2654              	.L259:
 2655 0610 00000000 		.word	clkn_offset
 2656 0614 00000000 		.word	.LANCHOR0
 2657 0618 98C00920 		.word	537510040
 2658 061c 00000000 		.word	clk100ns_offset
 2659 0620 00000000 		.word	afh_map
 2660 0624 00000000 		.word	used_channels
 2661 0628 00000000 		.word	afh_enabled
 2662 062c 00000000 		.word	clkn
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 96


 2663 0630 00000000 		.word	clk_drift_ppm
 2664 0634 00000000 		.word	clkn_next_drift_fix
 2665 0638 00000000 		.word	clk_drift_correction
 2666 063c 00000000 		.word	clkn_last_drift_fix
 2667 0640 00000000 		.word	.LANCHOR1
 2668 0644 00000000 		.word	tx_pkt
 2669              	.LVL332:
 2670              	.L166:
 685:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 2671              		.loc 1 685 0
 2672 0648 044B     		ldr	r3, .L261
 2673 064a 0D22     		movs	r2, #13
 2674              	.LVL333:
 2675 064c 9A74     		strb	r2, [r3, #18]
 686:bluetooth_rxtx.c **** 		break;
 2676              		.loc 1 686 0
 2677 064e 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 2678 0650 1A75     		strb	r2, [r3, #20]
 2679              	.LVL334:
 2680              	.L224:
 692:bluetooth_rxtx.c **** }
 2681              		.loc 1 692 0
 2682 0652 0120     		movs	r0, #1
 687:bluetooth_rxtx.c **** 
 2683              		.loc 1 687 0
 2684 0654 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2685              	.LVL335:
 2686              	.L211:
 310:bluetooth_rxtx.c **** 		}
 2687              		.loc 1 310 0
 2688 0656 0020     		movs	r0, #0
 693:bluetooth_rxtx.c **** 
 2689              		.loc 1 693 0
 2690 0658 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2691              	.LVL336:
 2692              	.L262:
 2693 065a 00BF     		.align	2
 2694              	.L261:
 2695 065c 00000000 		.word	.LANCHOR0
 2696              		.cfi_endproc
 2697              	.LFE2:
 2699              		.section	.text.msleep.constprop.3,"ax",%progbits
 2700              		.align	1
 2701              		.thumb
 2702              		.thumb_func
 2704              	msleep.constprop.3:
 2705              	.LFB48:
 785:bluetooth_rxtx.c **** {
 2706              		.loc 1 785 0
 2707              		.cfi_startproc
 2708              		@ args = 0, pretend = 0, frame = 0
 2709              		@ frame_needed = 0, uses_anonymous_args = 0
 2710              		@ link register save eliminated.
 2711              	.LVL337:
 787:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 2712              		.loc 1 787 0
 2713 0000 054A     		ldr	r2, .L266
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 97


 2714 0002 1368     		ldr	r3, [r2]
 2715              	.LVL338:
 2716 0004 23F07F43 		bic	r3, r3, #-16777216
 2717              	.LVL339:
 788:bluetooth_rxtx.c **** 
 2718              		.loc 1 788 0
 2719 0008 03F5A073 		add	r3, r3, #320
 2720              	.LVL340:
 2721              	.L264:
 795:bluetooth_rxtx.c **** 	}
 2722              		.loc 1 795 0
 2723 000c 1168     		ldr	r1, [r2]
 2724 000e 21F07F41 		bic	r1, r1, #-16777216
 2725 0012 9942     		cmp	r1, r3
 2726 0014 FAD3     		bcc	.L264
 797:bluetooth_rxtx.c **** 
 2727              		.loc 1 797 0
 2728 0016 7047     		bx	lr
 2729              	.L267:
 2730              		.align	2
 2731              	.L266:
 2732 0018 00000000 		.word	clkn
 2733              		.cfi_endproc
 2734              	.LFE48:
 2736              		.section	.text.enqueue_with_ts,"ax",%progbits
 2737              		.align	1
 2738              		.global	enqueue_with_ts
 2739              		.thumb
 2740              		.thumb_func
 2742              	enqueue_with_ts:
 2743              	.LFB1:
 159:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 2744              		.loc 1 159 0
 2745              		.cfi_startproc
 2746              		@ args = 0, pretend = 0, frame = 0
 2747              		@ frame_needed = 0, uses_anonymous_args = 0
 2748              	.LVL341:
 2749 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2750              		.cfi_def_cfa_offset 24
 2751              		.cfi_offset 4, -24
 2752              		.cfi_offset 5, -20
 2753              		.cfi_offset 6, -16
 2754              		.cfi_offset 7, -12
 2755              		.cfi_offset 8, -8
 2756              		.cfi_offset 14, -4
 159:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 2757              		.loc 1 159 0
 2758 0004 0646     		mov	r6, r0
 2759 0006 0F46     		mov	r7, r1
 2760 0008 9046     		mov	r8, r2
 160:bluetooth_rxtx.c **** 
 2761              		.loc 1 160 0
 2762 000a FFF7FEFF 		bl	usb_enqueue
 2763              	.LVL342:
 2764 000e 0F4D     		ldr	r5, .L271
 163:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2765              		.loc 1 163 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 98


 2766 0010 0446     		mov	r4, r0
 2767 0012 28B9     		cbnz	r0, .L269
 164:bluetooth_rxtx.c **** 		return 0;
 2768              		.loc 1 164 0
 2769 0014 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 2770 0016 43F00403 		orr	r3, r3, #4
 2771 001a 6B70     		strb	r3, [r5, #1]
 165:bluetooth_rxtx.c **** 	}
 2772              		.loc 1 165 0
 2773 001c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2774              	.LVL343:
 2775              	.L269:
 173:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2776              		.loc 1 173 0
 2777 0020 0B4B     		ldr	r3, .L271+4
 168:bluetooth_rxtx.c **** 
 2778              		.loc 1 168 0
 2779 0022 0670     		strb	r6, [r0]
 173:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2780              		.loc 1 173 0
 2781 0024 1B88     		ldrh	r3, [r3]
 170:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2782              		.loc 1 170 0
 2783 0026 0026     		movs	r6, #0
 173:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2784              		.loc 1 173 0
 2785 0028 623B     		subs	r3, r3, #98
 170:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2786              		.loc 1 170 0
 2787 002a C670     		strb	r6, [r0, #3]
 171:bluetooth_rxtx.c **** 
 2788              		.loc 1 171 0
 2789 002c C0F80480 		str	r8, [r0, #4]
 173:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2790              		.loc 1 173 0
 2791 0030 8370     		strb	r3, [r0, #2]
 174:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 2792              		.loc 1 174 0
 2793 0032 8672     		strb	r6, [r0, #10]
 175:bluetooth_rxtx.c **** 
 2794              		.loc 1 175 0
 2795 0034 C672     		strb	r6, [r0, #11]
 177:bluetooth_rxtx.c **** 
 2796              		.loc 1 177 0
 2797 0036 3946     		mov	r1, r7
 2798 0038 3222     		movs	r2, #50
 2799 003a 0E30     		adds	r0, r0, #14
 2800              	.LVL344:
 2801 003c FFF7FEFF 		bl	memcpy
 2802              	.LVL345:
 179:bluetooth_rxtx.c **** 	status = 0;
 2803              		.loc 1 179 0
 2804 0040 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 180:bluetooth_rxtx.c **** 
 2805              		.loc 1 180 0
 2806 0042 6E70     		strb	r6, [r5, #1]
 179:bluetooth_rxtx.c **** 	status = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 99


 2807              		.loc 1 179 0
 2808 0044 6370     		strb	r3, [r4, #1]
 182:bluetooth_rxtx.c **** }
 2809              		.loc 1 182 0
 2810 0046 0120     		movs	r0, #1
 183:bluetooth_rxtx.c **** 
 2811              		.loc 1 183 0
 2812 0048 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2813              	.LVL346:
 2814              	.L272:
 2815              		.align	2
 2816              	.L271:
 2817 004c 00000000 		.word	.LANCHOR0
 2818 0050 00000000 		.word	.LANCHOR1
 2819              		.cfi_endproc
 2820              	.LFE1:
 2822              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 2823              		.align	1
 2824              		.global	TIMER0_IRQHandler
 2825              		.thumb
 2826              		.thumb_func
 2828              	TIMER0_IRQHandler:
 2829              	.LFB3:
 697:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 2830              		.loc 1 697 0
 2831              		.cfi_startproc
 2832              		@ args = 0, pretend = 0, frame = 0
 2833              		@ frame_needed = 0, uses_anonymous_args = 0
 2834 0000 70B5     		push	{r4, r5, r6, lr}
 2835              		.cfi_def_cfa_offset 16
 2836              		.cfi_offset 4, -16
 2837              		.cfi_offset 5, -12
 2838              		.cfi_offset 6, -8
 2839              		.cfi_offset 14, -4
 698:bluetooth_rxtx.c **** 
 2840              		.loc 1 698 0
 2841 0002 4FF04023 		mov	r3, #1073758208
 2842 0006 1B68     		ldr	r3, [r3]
 2843 0008 DB07     		lsls	r3, r3, #31
 2844 000a 7DD5     		bpl	.L273
 2845              	.LBB25:
 700:bluetooth_rxtx.c **** 		clkn_offset = 0;
 2846              		.loc 1 700 0
 2847 000c 3F49     		ldr	r1, .L296
 2848 000e 404B     		ldr	r3, .L296+4
 2849 0010 0868     		ldr	r0, [r1]
 2850 0012 1A68     		ldr	r2, [r3]
 2851 0014 0244     		add	r2, r2, r0
 2852 0016 0132     		adds	r2, r2, #1
 2853 0018 1A60     		str	r2, [r3]
 701:bluetooth_rxtx.c **** 
 2854              		.loc 1 701 0
 2855 001a 0022     		movs	r2, #0
 2856 001c 0A60     		str	r2, [r1]
 708:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2857              		.loc 1 708 0
 2858 001e 3D49     		ldr	r1, .L296+8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 100


 703:bluetooth_rxtx.c **** 
 2859              		.loc 1 703 0
 2860 0020 1868     		ldr	r0, [r3]
 2861 0022 3D4A     		ldr	r2, .L296+12
 708:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2862              		.loc 1 708 0
 2863 0024 8E7A     		ldrb	r6, [r1, #10]	@ zero_extendqisi2
 703:bluetooth_rxtx.c **** 
 2864              		.loc 1 703 0
 2865 0026 D469     		ldr	r4, [r2, #28]
 2866              	.LVL347:
 2867 0028 0D46     		mov	r5, r1
 708:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2868              		.loc 1 708 0
 2869 002a 16B1     		cbz	r6, .L275
 708:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2870              		.loc 1 708 0 is_stmt 0 discriminator 1
 2871 002c 8E7A     		ldrb	r6, [r1, #10]	@ zero_extendqisi2
 2872 002e 012E     		cmp	r6, #1
 2873 0030 05D1     		bne	.L276
 2874              	.L275:
 709:bluetooth_rxtx.c **** 				do_hop = 1;
 2875              		.loc 1 709 0 is_stmt 1
 2876 0032 1A68     		ldr	r2, [r3]
 2877 0034 5606     		lsls	r6, r2, #25
 2878 0036 35D1     		bne	.L277
 710:bluetooth_rxtx.c **** 		}
 2879              		.loc 1 710 0
 2880 0038 0122     		movs	r2, #1
 2881 003a EA72     		strb	r2, [r5, #11]
 2882 003c 32E0     		b	.L277
 2883              	.L276:
 713:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 2884              		.loc 1 713 0
 2885 003e 8D7A     		ldrb	r5, [r1, #10]	@ zero_extendqisi2
 2886 0040 022D     		cmp	r5, #2
 2887 0042 03D1     		bne	.L278
 714:bluetooth_rxtx.c **** 				do_hop = 1;
 2888              		.loc 1 714 0
 2889 0044 1A68     		ldr	r2, [r3]
 2890 0046 D407     		lsls	r4, r2, #31
 2891              	.LVL348:
 2892 0048 2CD4     		bmi	.L277
 2893 004a 29E0     		b	.L294
 2894              	.LVL349:
 2895              	.L278:
 718:bluetooth_rxtx.c **** 			// Only hop if connected
 2896              		.loc 1 718 0
 2897 004c 8D7A     		ldrb	r5, [r1, #10]	@ zero_extendqisi2
 2898 004e 032D     		cmp	r5, #3
 2899 0050 1AD1     		bne	.L279
 720:bluetooth_rxtx.c **** 				--le.interval_timer;
 2900              		.loc 1 720 0
 2901 0052 157E     		ldrb	r5, [r2, #24]	@ zero_extendqisi2
 2902 0054 032D     		cmp	r5, #3
 2903 0056 25D1     		bne	.L277
 703:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 101


 2904              		.loc 1 703 0 discriminator 1
 2905 0058 001B     		subs	r0, r0, r4
 2906              	.LVL350:
 720:bluetooth_rxtx.c **** 				--le.interval_timer;
 2907              		.loc 1 720 0 discriminator 1
 2908 005a 8007     		lsls	r0, r0, #30
 2909 005c 22D1     		bne	.L277
 721:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 2910              		.loc 1 721 0
 2911 005e 108C     		ldrh	r0, [r2, #32]
 2912 0060 0138     		subs	r0, r0, #1
 2913 0062 80B2     		uxth	r0, r0
 2914 0064 1084     		strh	r0, [r2, #32]	@ movhi
 722:bluetooth_rxtx.c **** 					do_hop = 1;
 2915              		.loc 1 722 0
 2916 0066 108C     		ldrh	r0, [r2, #32]
 2917 0068 80B2     		uxth	r0, r0
 2918 006a 40B9     		cbnz	r0, .L280
 723:bluetooth_rxtx.c **** 					++le.conn_count;
 2919              		.loc 1 723 0
 2920 006c 0120     		movs	r0, #1
 2921 006e C872     		strb	r0, [r1, #11]
 724:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 2922              		.loc 1 724 0
 2923 0070 918C     		ldrh	r1, [r2, #36]
 2924 0072 0144     		add	r1, r1, r0
 2925 0074 89B2     		uxth	r1, r1
 2926 0076 9184     		strh	r1, [r2, #36]	@ movhi
 725:bluetooth_rxtx.c **** 				} else {
 2927              		.loc 1 725 0
 2928 0078 518C     		ldrh	r1, [r2, #34]
 2929 007a 1184     		strh	r1, [r2, #32]	@ movhi
 2930 007c 12E0     		b	.L277
 2931              	.L280:
 727:bluetooth_rxtx.c **** 				}
 2932              		.loc 1 727 0
 2933 007e 274A     		ldr	r2, .L296+16
 2934 0080 4FF48071 		mov	r1, #256
 2935 0084 1160     		str	r1, [r2]
 2936 0086 0DE0     		b	.L277
 2937              	.LVL351:
 2938              	.L279:
 731:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 2939              		.loc 1 731 0
 2940 0088 887A     		ldrb	r0, [r1, #10]	@ zero_extendqisi2
 2941              	.LVL352:
 2942 008a 0528     		cmp	r0, #5
 2943 008c 0AD1     		bne	.L277
 732:bluetooth_rxtx.c **** 				do_hop = 1;
 2944              		.loc 1 732 0
 2945 008e 2448     		ldr	r0, .L296+20
 2946 0090 0068     		ldr	r0, [r0]
 2947 0092 B2F84820 		ldrh	r2, [r2, #72]
 2948 0096 1C68     		ldr	r4, [r3]
 2949 0098 92B2     		uxth	r2, r2
 2950 009a 0244     		add	r2, r2, r0
 2951 009c A242     		cmp	r2, r4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 102


 2952 009e 01D1     		bne	.L277
 2953              	.L294:
 733:bluetooth_rxtx.c **** 			}
 2954              		.loc 1 733 0
 2955 00a0 0122     		movs	r2, #1
 2956 00a2 CA72     		strb	r2, [r1, #11]
 2957              	.L277:
 738:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 2958              		.loc 1 738 0
 2959 00a4 1F49     		ldr	r1, .L296+24
 2960 00a6 204A     		ldr	r2, .L296+28
 2961 00a8 0868     		ldr	r0, [r1]
 2962 00aa C0B1     		cbz	r0, .L281
 738:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 2963              		.loc 1 738 0 is_stmt 0 discriminator 1
 2964 00ac 1088     		ldrh	r0, [r2]
 2965 00ae 80B2     		uxth	r0, r0
 2966 00b0 A8B9     		cbnz	r0, .L281
 739:bluetooth_rxtx.c **** 
 2967              		.loc 1 739 0 is_stmt 1
 2968 00b2 1C68     		ldr	r4, [r3]
 2969 00b4 0868     		ldr	r0, [r1]
 2970 00b6 8442     		cmp	r4, r0
 2971 00b8 11D3     		bcc	.L281
 742:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 2972              		.loc 1 742 0
 2973 00ba 1C48     		ldr	r0, .L296+32
 2974 00bc 0088     		ldrh	r0, [r0]
 2975 00be 00B2     		sxth	r0, r0
 2976 00c0 0028     		cmp	r0, #0
 748:bluetooth_rxtx.c **** 				}
 2977              		.loc 1 748 0
 2978 00c2 B4BF     		ite	lt
 2979 00c4 41F66900 		movwlt	r0, #6249
 743:bluetooth_rxtx.c **** 				}
 2980              		.loc 1 743 0
 2981 00c8 0120     		movge	r0, #1
 748:bluetooth_rxtx.c **** 				}
 2982              		.loc 1 748 0
 2983 00ca 1080     		strh	r0, [r2]	@ movhi
 750:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 2984              		.loc 1 750 0
 2985 00cc 1C68     		ldr	r4, [r3]
 2986 00ce 1848     		ldr	r0, .L296+36
 2987 00d0 0460     		str	r4, [r0]
 751:bluetooth_rxtx.c **** 			}
 2988              		.loc 1 751 0
 2989 00d2 0468     		ldr	r4, [r0]
 2990 00d4 1748     		ldr	r0, .L296+40
 2991 00d6 0088     		ldrh	r0, [r0]
 2992 00d8 80B2     		uxth	r0, r0
 2993 00da 2044     		add	r0, r0, r4
 2994 00dc 0860     		str	r0, [r1]
 2995              	.L281:
 756:bluetooth_rxtx.c **** 			clkn += 2;
 2996              		.loc 1 756 0
 2997 00de 40F63440 		movw	r0, #3124
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 103


 2998 00e2 1188     		ldrh	r1, [r2]
 2999 00e4 89B2     		uxth	r1, r1
 3000 00e6 8142     		cmp	r1, r0
 757:bluetooth_rxtx.c **** 
 3001              		.loc 1 757 0
 3002 00e8 82BF     		ittt	hi
 3003 00ea 1968     		ldrhi	r1, [r3]
 3004 00ec 0231     		addhi	r1, r1, #2
 3005 00ee 1960     		strhi	r1, [r3]
 759:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3006              		.loc 1 759 0
 3007 00f0 1388     		ldrh	r3, [r2]
 3008 00f2 1149     		ldr	r1, .L296+44
 3009 00f4 9BB2     		uxth	r3, r3
 3010 00f6 03F63443 		addw	r3, r3, #3124
 3011 00fa 0B60     		str	r3, [r1]
 760:bluetooth_rxtx.c **** 
 3012              		.loc 1 760 0
 3013 00fc 0023     		movs	r3, #0
 3014 00fe 1380     		strh	r3, [r2]	@ movhi
 763:bluetooth_rxtx.c **** 	}
 3015              		.loc 1 763 0
 3016 0100 0122     		movs	r2, #1
 3017 0102 4FF04023 		mov	r3, #1073758208
 3018 0106 1A60     		str	r2, [r3]
 3019              	.L273:
 3020 0108 70BD     		pop	{r4, r5, r6, pc}
 3021              	.L297:
 3022 010a 00BF     		.align	2
 3023              	.L296:
 3024 010c 00000000 		.word	clkn_offset
 3025 0110 00000000 		.word	clkn
 3026 0114 00000000 		.word	.LANCHOR0
 3027 0118 00000000 		.word	.LANCHOR1
 3028 011c 3CC00920 		.word	537509948
 3029 0120 00000000 		.word	last_hop
 3030 0124 00000000 		.word	clkn_next_drift_fix
 3031 0128 00000000 		.word	clk100ns_offset
 3032 012c 00000000 		.word	clk_drift_ppm
 3033 0130 00000000 		.word	clkn_last_drift_fix
 3034 0134 00000000 		.word	clk_drift_correction
 3035 0138 18400040 		.word	1073758232
 3036              	.LBE25:
 3037              		.cfi_endproc
 3038              	.LFE3:
 3040              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3041              		.align	1
 3042              		.global	EINT3_IRQHandler
 3043              		.thumb
 3044              		.thumb_func
 3046              	EINT3_IRQHandler:
 3047              	.LFB4:
 770:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 3048              		.loc 1 770 0
 3049              		.cfi_startproc
 3050              		@ args = 0, pretend = 0, frame = 0
 3051              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 104


 3052              		@ link register save eliminated.
 772:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 3053              		.loc 1 772 0
 3054 0000 084B     		ldr	r3, .L300
 3055 0002 0422     		movs	r2, #4
 3056 0004 1A60     		str	r2, [r3]
 773:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 3057              		.loc 1 773 0
 3058 0006 084B     		ldr	r3, .L300+4
 3059 0008 4FF08052 		mov	r2, #268435456
 3060 000c 1A60     		str	r2, [r3]
 774:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 3061              		.loc 1 774 0
 3062 000e 074B     		ldr	r3, .L300+8
 3063 0010 0122     		movs	r2, #1
 3064 0012 1A70     		strb	r2, [r3]
 775:bluetooth_rxtx.c **** 		dma_discard = 0;
 3065              		.loc 1 775 0
 3066 0014 064B     		ldr	r3, .L300+12
 3067 0016 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 3068 0018 022A     		cmp	r2, #2
 776:bluetooth_rxtx.c **** 
 3069              		.loc 1 776 0
 3070 001a 04BF     		itt	eq
 3071 001c 0022     		moveq	r2, #0
 3072 001e 1A74     		strbeq	r2, [r3, #16]
 3073 0020 7047     		bx	lr
 3074              	.L301:
 3075 0022 00BF     		.align	2
 3076              	.L300:
 3077 0024 AC800240 		.word	1073905836
 3078 0028 9CC00920 		.word	537510044
 3079 002c 00000000 		.word	cs_trigger
 3080 0030 00000000 		.word	.LANCHOR0
 3081              		.cfi_endproc
 3082              	.LFE4:
 3084              		.section	.text.DMA_IRQHandler,"ax",%progbits
 3085              		.align	1
 3086              		.global	DMA_IRQHandler
 3087              		.thumb
 3088              		.thumb_func
 3090              	DMA_IRQHandler:
 3091              	.LFB6:
 800:bluetooth_rxtx.c **** 	if ( mode == MODE_RX_SYMBOLS
 3092              		.loc 1 800 0
 3093              		.cfi_startproc
 3094              		@ args = 0, pretend = 0, frame = 0
 3095              		@ frame_needed = 0, uses_anonymous_args = 0
 3096 0000 10B5     		push	{r4, lr}
 3097              		.cfi_def_cfa_offset 8
 3098              		.cfi_offset 4, -8
 3099              		.cfi_offset 14, -4
 801:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 3100              		.loc 1 801 0
 3101 0002 2B4B     		ldr	r3, .L344
 3102 0004 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3103 0006 012A     		cmp	r2, #1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 105


 3104 0008 17D0     		beq	.L303
 802:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 3105              		.loc 1 802 0
 3106 000a 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3107 000c 082A     		cmp	r2, #8
 3108 000e 14D0     		beq	.L303
 803:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
 3109              		.loc 1 803 0
 3110 0010 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3111 0012 042A     		cmp	r2, #4
 3112 0014 11D0     		beq	.L303
 804:bluetooth_rxtx.c **** 	   || mode == MODE_BOSS_SLAVE_LE
 3113              		.loc 1 804 0
 3114 0016 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3115 0018 092A     		cmp	r2, #9
 3116 001a 0ED0     		beq	.L303
 805:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 3117              		.loc 1 805 0
 3118 001c 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3119 001e 112A     		cmp	r2, #17
 3120 0020 0BD0     		beq	.L303
 806:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 3121              		.loc 1 806 0
 3122 0022 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3123 0024 0A2A     		cmp	r2, #10
 3124 0026 08D0     		beq	.L303
 807:bluetooth_rxtx.c **** 	   || mode == MODE_BOSS_MASTER_LE
 3125              		.loc 1 807 0
 3126 0028 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3127 002a 0C2A     		cmp	r2, #12
 3128 002c 05D0     		beq	.L303
 808:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 3129              		.loc 1 808 0
 3130 002e 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3131 0030 122A     		cmp	r2, #18
 3132 0032 02D0     		beq	.L303
 809:bluetooth_rxtx.c **** 	{
 3133              		.loc 1 809 0
 3134 0034 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 3135 0036 0F2A     		cmp	r2, #15
 3136 0038 39D1     		bne	.L302
 3137              	.L303:
 812:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 3138              		.loc 1 812 0
 3139 003a 1E4A     		ldr	r2, .L344+4
 3140 003c 1268     		ldr	r2, [r2]
 3141 003e D107     		lsls	r1, r2, #31
 3142 0040 35D5     		bpl	.L302
 813:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 3143              		.loc 1 813 0
 3144 0042 1D4A     		ldr	r2, .L344+8
 3145 0044 1268     		ldr	r2, [r2]
 3146 0046 D207     		lsls	r2, r2, #31
 3147 0048 26D5     		bpl	.L306
 3148              	.LBB26:
 819:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3149              		.loc 1 819 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 106


 3150 004a 40F63544 		movw	r4, #3125
 814:bluetooth_rxtx.c **** 
 3151              		.loc 1 814 0
 3152 004e 1B4A     		ldr	r2, .L344+12
 3153 0050 0121     		movs	r1, #1
 3154 0052 1160     		str	r1, [r2]
 816:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 3155              		.loc 1 816 0
 3156 0054 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 819:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3157              		.loc 1 819 0
 3158 0056 1A48     		ldr	r0, .L344+16
 816:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 3159              		.loc 1 816 0
 3160 0058 022A     		cmp	r2, #2
 817:bluetooth_rxtx.c **** 
 3161              		.loc 1 817 0
 3162 005a 02BF     		ittt	eq
 3163 005c 194A     		ldreq	r2, .L344+20
 3164 005e 4FF08051 		moveq	r1, #268435456
 3165 0062 1160     		streq	r1, [r2]
 819:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 3166              		.loc 1 819 0
 3167 0064 184A     		ldr	r2, .L344+24
 3168 0066 0168     		ldr	r1, [r0]
 3169 0068 1268     		ldr	r2, [r2]
 3170 006a C1F31301 		ubfx	r1, r1, #0, #20
 3171 006e 04FB0122 		mla	r2, r4, r1, r2
 3172 0072 5A60     		str	r2, [r3, #4]
 820:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 3173              		.loc 1 820 0
 3174 0074 0268     		ldr	r2, [r0]
 3175 0076 C2F30752 		ubfx	r2, r2, #20, #8
 3176 007a 9A70     		strb	r2, [r3, #2]
 821:bluetooth_rxtx.c **** 
 3177              		.loc 1 821 0
 3178 007c 134A     		ldr	r2, .L344+28
 3179 007e 1288     		ldrh	r2, [r2]
 3180 0080 92B2     		uxth	r2, r2
 3181 0082 1A81     		strh	r2, [r3, #8]	@ movhi
 824:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 3182              		.loc 1 824 0
 3183 0084 124A     		ldr	r2, .L344+32
 825:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 3184              		.loc 1 825 0
 3185 0086 134B     		ldr	r3, .L344+36
 824:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 3186              		.loc 1 824 0
 3187 0088 1168     		ldr	r1, [r2]
 3188              	.LVL353:
 825:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 3189              		.loc 1 825 0
 3190 008a 1868     		ldr	r0, [r3]
 3191 008c 1060     		str	r0, [r2]
 828:bluetooth_rxtx.c **** 			}
 3192              		.loc 1 828 0
 3193 008e 124A     		ldr	r2, .L344+40
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 107


 826:bluetooth_rxtx.c **** 
 3194              		.loc 1 826 0
 3195 0090 1960     		str	r1, [r3]
 828:bluetooth_rxtx.c **** 			}
 3196              		.loc 1 828 0
 3197 0092 1368     		ldr	r3, [r2]
 3198 0094 0133     		adds	r3, r3, #1
 3199 0096 1360     		str	r3, [r2]
 3200              	.LVL354:
 3201              	.L306:
 3202              	.LBE26:
 830:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 3203              		.loc 1 830 0
 3204 0098 104B     		ldr	r3, .L344+44
 3205 009a 1B68     		ldr	r3, [r3]
 3206 009c DB07     		lsls	r3, r3, #31
 3207 009e 06D5     		bpl	.L302
 831:bluetooth_rxtx.c **** 				++rx_err;
 3208              		.loc 1 831 0
 3209 00a0 0F4B     		ldr	r3, .L344+48
 3210 00a2 0122     		movs	r2, #1
 3211 00a4 1A60     		str	r2, [r3]
 832:bluetooth_rxtx.c **** 			}
 3212              		.loc 1 832 0
 3213 00a6 0F4A     		ldr	r2, .L344+52
 3214 00a8 1368     		ldr	r3, [r2]
 3215 00aa 0133     		adds	r3, r3, #1
 3216 00ac 1360     		str	r3, [r2]
 3217              	.L302:
 3218 00ae 10BD     		pop	{r4, pc}
 3219              	.L345:
 3220              		.align	2
 3221              	.L344:
 3222 00b0 00000000 		.word	.LANCHOR0
 3223 00b4 00400050 		.word	1342193664
 3224 00b8 04400050 		.word	1342193668
 3225 00bc 08400050 		.word	1342193672
 3226 00c0 00000000 		.word	clkn
 3227 00c4 98C00920 		.word	537510040
 3228 00c8 08400040 		.word	1073758216
 3229 00cc 00000000 		.word	.LANCHOR1
 3230 00d0 00000000 		.word	active_rxbuf
 3231 00d4 00000000 		.word	idle_rxbuf
 3232 00d8 00000000 		.word	rx_tc
 3233 00dc 0C400050 		.word	1342193676
 3234 00e0 10400050 		.word	1342193680
 3235 00e4 00000000 		.word	rx_err
 3236              		.cfi_endproc
 3237              	.LFE6:
 3239              		.section	.text.le_transmit,"ax",%progbits
 3240              		.align	1
 3241              		.global	le_transmit
 3242              		.thumb
 3243              		.thumb_func
 3245              	le_transmit:
 3246              	.LFB11:
1058:bluetooth_rxtx.c **** 	unsigned i, j;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 108


 3247              		.loc 1 1058 0
 3248              		.cfi_startproc
 3249              		@ args = 0, pretend = 0, frame = 64
 3250              		@ frame_needed = 0, uses_anonymous_args = 0
 3251              	.LVL355:
 3252 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3253              		.cfi_def_cfa_offset 32
 3254              		.cfi_offset 4, -32
 3255              		.cfi_offset 5, -28
 3256              		.cfi_offset 6, -24
 3257              		.cfi_offset 7, -20
 3258              		.cfi_offset 8, -16
 3259              		.cfi_offset 9, -12
 3260              		.cfi_offset 10, -8
 3261              		.cfi_offset 14, -4
 3262 0004 90B0     		sub	sp, sp, #64
 3263              		.cfi_def_cfa_offset 96
1058:bluetooth_rxtx.c **** 	unsigned i, j;
 3264              		.loc 1 1058 0
 3265 0006 0546     		mov	r5, r0
 3266 0008 0C46     		mov	r4, r1
 3267              	.LVL356:
 3268 000a 9146     		mov	r9, r2
 3269 000c 0DF10307 		add	r7, sp, #3
 3270 0010 0DF1FF32 		add	r2, sp, #-1
 3271              	.LVL357:
 3272              	.L348:
1068:bluetooth_rxtx.c **** 		aa >>= 8;
 3273              		.loc 1 1068 0
 3274 0014 E8B2     		uxtb	r0, r5
 3275              	.LVL358:
 3276 0016 0132     		adds	r2, r2, #1
 3277              	.LVL359:
1069:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 3278              		.loc 1 1069 0
 3279 0018 2D0A     		lsrs	r5, r5, #8
 3280              	.LVL360:
 3281 001a 0721     		movs	r1, #7
 3282 001c 0023     		movs	r3, #0
 3283              	.LVL361:
 3284              	.L347:
1072:bluetooth_rxtx.c **** 			byte >>= 1;
 3285              		.loc 1 1072 0 discriminator 3
 3286 001e 00F00106 		and	r6, r0, #1
 3287 0022 8E40     		lsls	r6, r6, r1
 3288 0024 3343     		orrs	r3, r3, r6
1071:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 3289              		.loc 1 1071 0 discriminator 3
 3290 0026 11F1FF31 		adds	r1, r1, #-1
 3291              	.LVL362:
1072:bluetooth_rxtx.c **** 			byte >>= 1;
 3292              		.loc 1 1072 0 discriminator 3
 3293 002a DBB2     		uxtb	r3, r3
1073:bluetooth_rxtx.c **** 		}
 3294              		.loc 1 1073 0 discriminator 3
 3295 002c 4FEA5000 		lsr	r0, r0, #1
 3296              	.LVL363:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 109


1071:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 3297              		.loc 1 1071 0 discriminator 3
 3298 0030 F5D2     		bcs	.L347
1067:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 3299              		.loc 1 1067 0 discriminator 2
 3300 0032 BA42     		cmp	r2, r7
 3301 0034 1370     		strb	r3, [r2]
 3302              	.LVL364:
 3303 0036 EDD1     		bne	.L348
1078:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3304              		.loc 1 1078 0
 3305 0038 5A4E     		ldr	r6, .L376
 3306 003a 5B4F     		ldr	r7, .L376+4
 3307 003c 3088     		ldrh	r0, [r6]
 3308              	.LVL365:
 3309 003e 0DF1040A 		add	r10, sp, #4
 3310 0042 6238     		subs	r0, r0, #98
 3311 0044 C0B2     		uxtb	r0, r0
 3312 0046 FFF7FEFF 		bl	btle_channel_index
 3313              	.LVL366:
1079:bluetooth_rxtx.c **** 		byte = data[i];
 3314              		.loc 1 1079 0
 3315 004a CC46     		mov	ip, r9
1078:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3316              		.loc 1 1078 0
 3317 004c 3B5C     		ldrb	r3, [r7, r0]	@ zero_extendqisi2
 3318              	.LVL367:
 3319              	.L349:
 3320 004e C9EB0C02 		rsb	r2, r9, ip
1079:bluetooth_rxtx.c **** 		byte = data[i];
 3321              		.loc 1 1079 0 discriminator 1
 3322 0052 A242     		cmp	r2, r4
 3323 0054 21D2     		bcs	.L375
1080:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 3324              		.loc 1 1080 0
 3325 0056 1CF8012B 		ldrb	r2, [ip], #1	@ zero_extendqisi2
 3326              	.LVL368:
 3327 005a 4FF0070E 		mov	lr, #7
 3328 005e 4FF00008 		mov	r8, #0
 3329              	.LVL369:
 3330              	.L350:
1083:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 3331              		.loc 1 1083 0 discriminator 3
 3332 0062 F818     		adds	r0, r7, r3
 3333 0064 90F82800 		ldrb	r0, [r0, #40]	@ zero_extendqisi2
 3334 0068 02F00101 		and	r1, r2, #1
 3335 006c 4140     		eors	r1, r1, r0
 3336              	.LVL370:
1084:bluetooth_rxtx.c **** 			byte >>= 1;
 3337              		.loc 1 1084 0 discriminator 3
 3338 006e 0133     		adds	r3, r3, #1
 3339              	.LVL371:
 3340 0070 7F20     		movs	r0, #127
 3341 0072 B3FBF0F0 		udiv	r0, r3, r0
1086:bluetooth_rxtx.c **** 		}
 3342              		.loc 1 1086 0 discriminator 3
 3343 0076 01FA0EF1 		lsl	r1, r1, lr
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 110


 3344              	.LVL372:
1084:bluetooth_rxtx.c **** 			byte >>= 1;
 3345              		.loc 1 1084 0 discriminator 3
 3346 007a C0EBC010 		rsb	r0, r0, r0, lsl #7
1086:bluetooth_rxtx.c **** 		}
 3347              		.loc 1 1086 0 discriminator 3
 3348 007e 41EA0808 		orr	r8, r1, r8
1082:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 3349              		.loc 1 1082 0 discriminator 3
 3350 0082 1EF1FF3E 		adds	lr, lr, #-1
 3351              	.LVL373:
1084:bluetooth_rxtx.c **** 			byte >>= 1;
 3352              		.loc 1 1084 0 discriminator 3
 3353 0086 A3EB0003 		sub	r3, r3, r0
 3354              	.LVL374:
1085:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 3355              		.loc 1 1085 0 discriminator 3
 3356 008a 4FEA5202 		lsr	r2, r2, #1
 3357              	.LVL375:
1086:bluetooth_rxtx.c **** 		}
 3358              		.loc 1 1086 0 discriminator 3
 3359 008e 5FFA88F8 		uxtb	r8, r8
 3360              	.LVL376:
1082:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 3361              		.loc 1 1082 0 discriminator 3
 3362 0092 E6D2     		bcs	.L350
 3363 0094 0AF8018B 		strb	r8, [r10], #1
 3364 0098 D9E7     		b	.L349
 3365              	.LVL377:
 3366              	.L375:
1093:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 3367              		.loc 1 1093 0
 3368 009a 0D20     		movs	r0, #13
 3369 009c 47F6FF71 		movw	r1, #32767
 3370 00a0 FFF7FEFF 		bl	cc2400_set
 3371              	.LVL378:
1094:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 3372              		.loc 1 1094 0
 3373 00a4 1220     		movs	r0, #18
 3374 00a6 42F62231 		movw	r1, #11042
 3375 00aa FFF7FEFF 		bl	cc2400_set
 3376              	.LVL379:
1095:bluetooth_rxtx.c **** 
 3377              		.loc 1 1095 0
 3378 00ae 1420     		movs	r0, #20
 3379 00b0 41F24B31 		movw	r1, #4939
 3380 00b4 FFF7FEFF 		bl	cc2400_set
 3381              	.LVL380:
1097:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 3382              		.loc 1 1097 0
 3383 00b8 2020     		movs	r0, #32
 3384 00ba 40F60141 		movw	r1, #3073
 3385 00be FFF7FEFF 		bl	cc2400_set
 3386              	.LVL381:
1105:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 3387              		.loc 1 1105 0
 3388 00c2 3188     		ldrh	r1, [r6]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 111


 3389 00c4 0220     		movs	r0, #2
 3390 00c6 89B2     		uxth	r1, r1
 3391 00c8 FFF7FEFF 		bl	cc2400_set
 3392              	.LVL382:
1106:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 3393              		.loc 1 1106 0
 3394 00cc 0520     		movs	r0, #5
 3395 00ce 0B21     		movs	r1, #11
 3396 00d0 FFF7FEFF 		bl	cc2400_set
 3397              	.LVL383:
1107:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
 3398              		.loc 1 1107 0
 3399 00d4 0320     		movs	r0, #3
 3400 00d6 4021     		movs	r1, #64
 3401 00d8 FFF7FEFF 		bl	cc2400_set
 3402              	.LVL384:
1108:bluetooth_rxtx.c **** 
 3403              		.loc 1 1108 0
 3404 00dc 1421     		movs	r1, #20
 3405 00de 2320     		movs	r0, #35
 3406 00e0 FFF7FEFF 		bl	cc2400_set
 3407              	.LVL385:
1111:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 3408              		.loc 1 1111 0
 3409 00e4 ED07     		lsls	r5, r5, #31
 3410              	.LVL386:
1112:bluetooth_rxtx.c **** 	else
 3411              		.loc 1 1112 0
 3412 00e6 4CBF     		ite	mi
 3413 00e8 4AF6AA21 		movwmi	r1, #43690
1114:bluetooth_rxtx.c **** 
 3414              		.loc 1 1114 0
 3415 00ec 45F25551 		movwpl	r1, #21845
1112:bluetooth_rxtx.c **** 	else
 3416              		.loc 1 1112 0
 3417 00f0 2D20     		movs	r0, #45
1114:bluetooth_rxtx.c **** 
 3418              		.loc 1 1114 0
 3419 00f2 FFF7FEFF 		bl	cc2400_set
 3420              	.LVL387:
1117:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 3421              		.loc 1 1117 0
 3422 00f6 0820     		movs	r0, #8
 3423 00f8 FFF7FEFF 		bl	cc2400_get
 3424              	.LVL388:
1118:bluetooth_rxtx.c **** 
 3425              		.loc 1 1118 0
 3426 00fc C0F30801 		ubfx	r1, r0, #0, #9
1090:bluetooth_rxtx.c **** 
 3427              		.loc 1 1090 0
 3428 0100 0434     		adds	r4, r4, #4
1117:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 3429              		.loc 1 1117 0
 3430 0102 0646     		mov	r6, r0
1118:bluetooth_rxtx.c **** 
 3431              		.loc 1 1118 0
 3432 0104 41F49C41 		orr	r1, r1, #19968
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 112


 3433 0108 0820     		movs	r0, #8
1090:bluetooth_rxtx.c **** 
 3434              		.loc 1 1090 0
 3435 010a E4B2     		uxtb	r4, r4
 3436              	.LVL389:
1118:bluetooth_rxtx.c **** 
 3437              		.loc 1 1118 0
 3438 010c FFF7FEFF 		bl	cc2400_set
 3439              	.LVL390:
 3440              	.L354:
1120:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 3441              		.loc 1 1120 0 discriminator 1
 3442 0110 FFF7FEFF 		bl	cc2400_status
 3443              	.LVL391:
 3444 0114 4006     		lsls	r0, r0, #25
 3445 0116 FBD5     		bpl	.L354
1121:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3446              		.loc 1 1121 0
 3447 0118 6120     		movs	r0, #97
 3448 011a FFF7FEFF 		bl	cc2400_strobe
 3449              	.LVL392:
 3450              	.L355:
1122:bluetooth_rxtx.c **** 	TXLED_SET;
 3451              		.loc 1 1122 0 discriminator 1
 3452 011e FFF7FEFF 		bl	cc2400_status
 3453              	.LVL393:
 3454 0122 4107     		lsls	r1, r0, #29
 3455 0124 FBD5     		bpl	.L355
1123:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 3456              		.loc 1 1123 0
 3457 0126 214B     		ldr	r3, .L376+8
 3458 0128 4FF48072 		mov	r2, #256
 3459 012c 1A60     		str	r2, [r3]
1125:bluetooth_rxtx.c **** #endif
 3460              		.loc 1 1125 0
 3461 012e 8022     		movs	r2, #128
 3462 0130 1A62     		str	r2, [r3, #32]
 3463              	.L356:
1127:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 3464              		.loc 1 1127 0 discriminator 1
 3465 0132 0E20     		movs	r0, #14
 3466 0134 FFF7FEFF 		bl	cc2400_get
 3467              	.LVL394:
 3468 0138 00F01F00 		and	r0, r0, #31
 3469 013c 0F28     		cmp	r0, #15
 3470 013e F8D1     		bne	.L356
1128:bluetooth_rxtx.c **** 
 3471              		.loc 1 1128 0
 3472 0140 6320     		movs	r0, #99
 3473 0142 FFF7FEFF 		bl	cc2400_strobe
 3474              	.LVL395:
1131:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 3475              		.loc 1 1131 0
 3476 0146 0025     		movs	r5, #0
 3477              	.LVL396:
 3478              	.L357:
1131:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 113


 3479              		.loc 1 1131 0 is_stmt 0 discriminator 1
 3480 0148 A542     		cmp	r5, r4
 3481 014a 0ED2     		bcs	.L363
 3482              	.L364:
1132:bluetooth_rxtx.c **** 		tx_len = len - i;
 3483              		.loc 1 1132 0 is_stmt 1 discriminator 1
 3484 014c 184B     		ldr	r3, .L376+12
 3485 014e 1B68     		ldr	r3, [r3]
 3486 0150 5A07     		lsls	r2, r3, #29
 3487 0152 FBD4     		bmi	.L364
 3488              	.LVL397:
 3489 0154 601B     		subs	r0, r4, r5
 3490 0156 C0B2     		uxtb	r0, r0
 3491              	.LVL398:
1136:bluetooth_rxtx.c **** 	}
 3492              		.loc 1 1136 0
 3493 0158 1028     		cmp	r0, #16
 3494 015a 0DEB0501 		add	r1, sp, r5
 3495 015e 28BF     		it	cs
 3496 0160 1020     		movcs	r0, #16
 3497              	.LVL399:
 3498 0162 FFF7FEFF 		bl	cc2400_fifo_write
 3499              	.LVL400:
1131:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 3500              		.loc 1 1131 0
 3501 0166 1035     		adds	r5, r5, #16
 3502              	.LVL401:
 3503 0168 EEE7     		b	.L357
 3504              	.LVL402:
 3505              	.L363:
1139:bluetooth_rxtx.c **** 	TXLED_CLR;
 3506              		.loc 1 1139 0 discriminator 1
 3507 016a 0E20     		movs	r0, #14
 3508 016c FFF7FEFF 		bl	cc2400_get
 3509              	.LVL403:
 3510 0170 00F01F00 		and	r0, r0, #31
 3511 0174 0F28     		cmp	r0, #15
 3512 0176 F8D1     		bne	.L363
1140:bluetooth_rxtx.c **** 
 3513              		.loc 1 1140 0
 3514 0178 0E4B     		ldr	r3, .L376+16
 3515 017a 4FF48072 		mov	r2, #256
 3516 017e 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 3517              		.loc 1 1142 0
 3518 0180 6420     		movs	r0, #100
 3519 0182 FFF7FEFF 		bl	cc2400_strobe
 3520              	.LVL404:
 3521              	.L360:
1143:bluetooth_rxtx.c **** 
 3522              		.loc 1 1143 0 discriminator 1
 3523 0186 FFF7FEFF 		bl	cc2400_status
 3524              	.LVL405:
 3525 018a 4307     		lsls	r3, r0, #29
 3526 018c FBD4     		bmi	.L360
1146:bluetooth_rxtx.c **** #endif
 3527              		.loc 1 1146 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 114


 3528 018e 0A4B     		ldr	r3, .L376+20
 3529 0190 8022     		movs	r2, #128
 3530 0192 1A60     		str	r2, [r3]
1150:bluetooth_rxtx.c **** }
 3531              		.loc 1 1150 0
 3532 0194 0820     		movs	r0, #8
 3533 0196 3146     		mov	r1, r6
 3534 0198 FFF7FEFF 		bl	cc2400_set
 3535              	.LVL406:
1151:bluetooth_rxtx.c **** 
 3536              		.loc 1 1151 0
 3537 019c 10B0     		add	sp, sp, #64
 3538              		.cfi_def_cfa_offset 32
 3539              		@ sp needed
 3540 019e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3541              	.LVL407:
 3542              	.L377:
 3543 01a2 00BF     		.align	2
 3544              	.L376:
 3545 01a4 00000000 		.word	.LANCHOR1
 3546 01a8 00000000 		.word	.LANCHOR2
 3547 01ac 38C00920 		.word	537509944
 3548 01b0 54C00920 		.word	537509972
 3549 01b4 3CC00920 		.word	537509948
 3550 01b8 5CC00920 		.word	537509980
 3551              		.cfi_endproc
 3552              	.LFE11:
 3554              		.section	.text.le_jam,"ax",%progbits
 3555              		.align	1
 3556              		.global	le_jam
 3557              		.thumb
 3558              		.thumb_func
 3560              	le_jam:
 3561              	.LFB12:
1153:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 3562              		.loc 1 1153 0
 3563              		.cfi_startproc
 3564              		@ args = 0, pretend = 0, frame = 0
 3565              		@ frame_needed = 0, uses_anonymous_args = 0
 3566 0000 08B5     		push	{r3, lr}
 3567              		.cfi_def_cfa_offset 8
 3568              		.cfi_offset 3, -8
 3569              		.cfi_offset 14, -4
1155:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 3570              		.loc 1 1155 0
 3571 0002 0D20     		movs	r0, #13
 3572 0004 47F6FF71 		movw	r1, #32767
 3573 0008 FFF7FEFF 		bl	cc2400_set
 3574              	.LVL408:
1156:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 3575              		.loc 1 1156 0
 3576 000c 1220     		movs	r0, #18
 3577 000e 42F62231 		movw	r1, #11042
 3578 0012 FFF7FEFF 		bl	cc2400_set
 3579              	.LVL409:
1157:bluetooth_rxtx.c **** 
 3580              		.loc 1 1157 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 115


 3581 0016 1420     		movs	r0, #20
 3582 0018 42F24B31 		movw	r1, #9035
 3583 001c FFF7FEFF 		bl	cc2400_set
 3584              	.LVL410:
1159:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 3585              		.loc 1 1159 0
 3586 0020 2020     		movs	r0, #32
 3587 0022 40F60141 		movw	r1, #3073
 3588 0026 FFF7FEFF 		bl	cc2400_set
 3589              	.LVL411:
1168:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 3590              		.loc 1 1168 0
 3591 002a 0520     		movs	r0, #5
 3592 002c 0B21     		movs	r1, #11
 3593 002e FFF7FEFF 		bl	cc2400_set
 3594              	.LVL412:
1169:bluetooth_rxtx.c **** 
 3595              		.loc 1 1169 0
 3596 0032 0320     		movs	r0, #3
 3597 0034 4021     		movs	r1, #64
 3598 0036 FFF7FEFF 		bl	cc2400_set
 3599              	.LVL413:
 3600              	.L379:
1171:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 3601              		.loc 1 1171 0 discriminator 1
 3602 003a FFF7FEFF 		bl	cc2400_status
 3603              	.LVL414:
 3604 003e 4206     		lsls	r2, r0, #25
 3605 0040 FBD5     		bpl	.L379
1172:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3606              		.loc 1 1172 0
 3607 0042 6120     		movs	r0, #97
 3608 0044 FFF7FEFF 		bl	cc2400_strobe
 3609              	.LVL415:
 3610              	.L380:
1173:bluetooth_rxtx.c **** 	TXLED_SET;
 3611              		.loc 1 1173 0 discriminator 1
 3612 0048 FFF7FEFF 		bl	cc2400_status
 3613              	.LVL416:
 3614 004c 4307     		lsls	r3, r0, #29
 3615 004e FBD5     		bpl	.L380
1174:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 3616              		.loc 1 1174 0
 3617 0050 084B     		ldr	r3, .L387
 3618 0052 4FF48072 		mov	r2, #256
 3619 0056 1A60     		str	r2, [r3]
1176:bluetooth_rxtx.c **** #endif
 3620              		.loc 1 1176 0
 3621 0058 8022     		movs	r2, #128
 3622 005a 1A62     		str	r2, [r3, #32]
 3623              	.L381:
1178:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 3624              		.loc 1 1178 0 discriminator 1
 3625 005c 0E20     		movs	r0, #14
 3626 005e FFF7FEFF 		bl	cc2400_get
 3627              	.LVL417:
 3628 0062 00F01F00 		and	r0, r0, #31
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 116


 3629 0066 0F28     		cmp	r0, #15
 3630 0068 F8D1     		bne	.L381
1179:bluetooth_rxtx.c **** #endif
 3631              		.loc 1 1179 0
 3632 006a 6320     		movs	r0, #99
1181:bluetooth_rxtx.c **** 
 3633              		.loc 1 1181 0
 3634 006c BDE80840 		pop	{r3, lr}
 3635              		.cfi_restore 14
 3636              		.cfi_restore 3
 3637              		.cfi_def_cfa_offset 0
1179:bluetooth_rxtx.c **** #endif
 3638              		.loc 1 1179 0
 3639 0070 FFF7FEBF 		b	cc2400_strobe
 3640              	.LVL418:
 3641              	.L388:
 3642              		.align	2
 3643              	.L387:
 3644 0074 38C00920 		.word	537509944
 3645              		.cfi_endproc
 3646              	.LFE12:
 3648              		.section	.text.hop,"ax",%progbits
 3649              		.align	1
 3650              		.global	hop
 3651              		.thumb
 3652              		.thumb_func
 3654              	hop:
 3655              	.LFB13:
1186:bluetooth_rxtx.c **** 	do_hop = 0;
 3656              		.loc 1 1186 0
 3657              		.cfi_startproc
 3658              		@ args = 0, pretend = 0, frame = 0
 3659              		@ frame_needed = 0, uses_anonymous_args = 0
 3660 0000 38B5     		push	{r3, r4, r5, lr}
 3661              		.cfi_def_cfa_offset 16
 3662              		.cfi_offset 3, -16
 3663              		.cfi_offset 4, -12
 3664              		.cfi_offset 5, -8
 3665              		.cfi_offset 14, -4
1187:bluetooth_rxtx.c **** 	last_hop = clkn;
 3666              		.loc 1 1187 0
 3667 0002 5D4C     		ldr	r4, .L430
 3668 0004 0023     		movs	r3, #0
 3669 0006 E372     		strb	r3, [r4, #11]
1188:bluetooth_rxtx.c **** 
 3670              		.loc 1 1188 0
 3671 0008 5C4B     		ldr	r3, .L430+4
 3672 000a 5D4A     		ldr	r2, .L430+8
 3673 000c 1968     		ldr	r1, [r3]
 3674 000e 1160     		str	r1, [r2]
1191:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 3675              		.loc 1 1191 0
 3676 0010 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3677 0012 4AB9     		cbnz	r2, .L390
1192:bluetooth_rxtx.c **** 			return;
 3678              		.loc 1 1192 0
 3679 0014 0220     		movs	r0, #2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 117


 3680 0016 FFF7FEFF 		bl	cc2400_get
 3681              	.LVL419:
 3682 001a 5A4B     		ldr	r3, .L430+12
 3683 001c 1B88     		ldrh	r3, [r3]
 3684 001e 9BB2     		uxth	r3, r3
 3685 0020 013B     		subs	r3, r3, #1
 3686 0022 9842     		cmp	r0, r3
 3687 0024 7DD1     		bne	.L392
 3688 0026 38BD     		pop	{r3, r4, r5, pc}
 3689              	.L390:
1198:bluetooth_rxtx.c **** 		do {
 3690              		.loc 1 1198 0
 3691 0028 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3692 002a 012A     		cmp	r2, #1
 3693 002c 30D1     		bne	.L393
1203:bluetooth_rxtx.c **** 	}
 3694              		.loc 1 1203 0
 3695 002e 564B     		ldr	r3, .L430+16
 3696 0030 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3697 0032 564B     		ldr	r3, .L430+20
 3698 0034 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 3699              	.L396:
1200:bluetooth_rxtx.c **** 			if (channel > 2480)
 3700              		.loc 1 1200 0
 3701 0036 534A     		ldr	r2, .L430+12
 3702 0038 1388     		ldrh	r3, [r2]
 3703 003a 2033     		adds	r3, r3, #32
 3704 003c 9BB2     		uxth	r3, r3
 3705 003e 1380     		strh	r3, [r2]	@ movhi
1201:bluetooth_rxtx.c **** 				channel -= 79;
 3706              		.loc 1 1201 0
 3707 0040 1388     		ldrh	r3, [r2]
 3708 0042 9BB2     		uxth	r3, r3
 3709 0044 B3F51B6F 		cmp	r3, #2480
1202:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
 3710              		.loc 1 1202 0
 3711 0048 81BF     		itttt	hi
 3712 004a 1388     		ldrhhi	r3, [r2]
 3713 004c 4F3B     		subhi	r3, r3, #79
 3714 004e 9BB2     		uxthhi	r3, r3
 3715 0050 1380     		strhhi	r3, [r2]	@ movhi
1203:bluetooth_rxtx.c **** 	}
 3716              		.loc 1 1203 0
 3717 0052 0029     		cmp	r1, #0
 3718 0054 65D0     		beq	.L392
1203:bluetooth_rxtx.c **** 	}
 3719              		.loc 1 1203 0 is_stmt 0 discriminator 1
 3720 0056 0028     		cmp	r0, #0
 3721 0058 63D0     		beq	.L392
1203:bluetooth_rxtx.c **** 	}
 3722              		.loc 1 1203 0 discriminator 2
 3723 005a 1388     		ldrh	r3, [r2]
 3724 005c 0825     		movs	r5, #8
 3725 005e 9BB2     		uxth	r3, r3
 3726 0060 A3F66213 		subw	r3, r3, #2402
 3727 0064 93FBF5F3 		sdiv	r3, r3, r5
 3728 0068 1288     		ldrh	r2, [r2]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 118


 3729 006a 494D     		ldr	r5, .L430+24
 3730 006c 92B2     		uxth	r2, r2
 3731 006e ED5C     		ldrb	r5, [r5, r3]	@ zero_extendqisi2
 3732 0070 484B     		ldr	r3, .L430+28
 3733 0072 A2F66212 		subw	r2, r2, #2402
 3734 0076 1340     		ands	r3, r3, r2
 3735 0078 002B     		cmp	r3, #0
 3736 007a BEBF     		ittt	lt
 3737 007c 03F1FF33 		addlt	r3, r3, #-1
 3738 0080 63F00703 		ornlt	r3, r3, #7
 3739 0084 0133     		addlt	r3, r3, #1
 3740 0086 45FA03F3 		asr	r3, r5, r3
 3741 008a DD07     		lsls	r5, r3, #31
 3742 008c D3D5     		bpl	.L396
 3743 008e 48E0     		b	.L392
 3744              	.L393:
1209:bluetooth_rxtx.c **** 		do {
 3745              		.loc 1 1209 0 is_stmt 1
 3746 0090 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3747 0092 052A     		cmp	r2, #5
 3748 0094 2CD1     		bne	.L398
1214:bluetooth_rxtx.c **** 	}
 3749              		.loc 1 1214 0
 3750 0096 3C4B     		ldr	r3, .L430+16
 3751 0098 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3752              	.L400:
1211:bluetooth_rxtx.c **** 			if (channel > 2480)
 3753              		.loc 1 1211 0
 3754 009a 3A4A     		ldr	r2, .L430+12
 3755 009c 1388     		ldrh	r3, [r2]
 3756 009e 2033     		adds	r3, r3, #32
 3757 00a0 9BB2     		uxth	r3, r3
 3758 00a2 1380     		strh	r3, [r2]	@ movhi
1212:bluetooth_rxtx.c **** 				channel -= 79;
 3759              		.loc 1 1212 0
 3760 00a4 1388     		ldrh	r3, [r2]
 3761 00a6 9BB2     		uxth	r3, r3
 3762 00a8 B3F51B6F 		cmp	r3, #2480
1213:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
 3763              		.loc 1 1213 0
 3764 00ac 81BF     		itttt	hi
 3765 00ae 1388     		ldrhhi	r3, [r2]
 3766 00b0 4F3B     		subhi	r3, r3, #79
 3767 00b2 9BB2     		uxthhi	r3, r3
 3768 00b4 1380     		strhhi	r3, [r2]	@ movhi
1214:bluetooth_rxtx.c **** 	}
 3769              		.loc 1 1214 0
 3770 00b6 4F29     		cmp	r1, #79
 3771 00b8 33D0     		beq	.L392
1214:bluetooth_rxtx.c **** 	}
 3772              		.loc 1 1214 0 is_stmt 0 discriminator 1
 3773 00ba 1388     		ldrh	r3, [r2]
 3774 00bc 0820     		movs	r0, #8
 3775 00be 9BB2     		uxth	r3, r3
 3776 00c0 A3F66213 		subw	r3, r3, #2402
 3777 00c4 93FBF0F3 		sdiv	r3, r3, r0
 3778 00c8 1288     		ldrh	r2, [r2]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 119


 3779 00ca 3148     		ldr	r0, .L430+24
 3780 00cc 92B2     		uxth	r2, r2
 3781 00ce C05C     		ldrb	r0, [r0, r3]	@ zero_extendqisi2
 3782 00d0 304B     		ldr	r3, .L430+28
 3783 00d2 A2F66212 		subw	r2, r2, #2402
 3784 00d6 1340     		ands	r3, r3, r2
 3785 00d8 002B     		cmp	r3, #0
 3786 00da BEBF     		ittt	lt
 3787 00dc 03F1FF33 		addlt	r3, r3, #-1
 3788 00e0 63F00703 		ornlt	r3, r3, #7
 3789 00e4 0133     		addlt	r3, r3, #1
 3790 00e6 40FA03F3 		asr	r3, r0, r3
 3791 00ea D807     		lsls	r0, r3, #31
 3792 00ec D5D4     		bmi	.L400
 3793 00ee 18E0     		b	.L392
 3794              	.L398:
1217:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 3795              		.loc 1 1217 0 is_stmt 1
 3796 00f0 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3797 00f2 022A     		cmp	r2, #2
 3798 00f4 05D1     		bne	.L402
1218:bluetooth_rxtx.c **** 	}
 3799              		.loc 1 1218 0
 3800 00f6 1868     		ldr	r0, [r3]
 3801 00f8 FFF7FEFF 		bl	next_hop
 3802              	.LVL420:
 3803 00fc 214B     		ldr	r3, .L430+12
 3804 00fe 1880     		strh	r0, [r3]	@ movhi
 3805 0100 0FE0     		b	.L392
 3806              	.L402:
1221:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 3807              		.loc 1 1221 0
 3808 0102 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3809 0104 032B     		cmp	r3, #3
 3810 0106 05D1     		bne	.L403
1222:bluetooth_rxtx.c **** 	}
 3811              		.loc 1 1222 0
 3812 0108 1E4D     		ldr	r5, .L430+12
 3813 010a 281D     		adds	r0, r5, #4
 3814 010c FFF7FEFF 		bl	btle_next_hop
 3815              	.LVL421:
 3816 0110 2880     		strh	r0, [r5]	@ movhi
 3817 0112 06E0     		b	.L392
 3818              	.L403:
1225:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 3819              		.loc 1 1225 0
 3820 0114 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3821 0116 042B     		cmp	r3, #4
1226:bluetooth_rxtx.c **** 	}
 3822              		.loc 1 1226 0
 3823 0118 01BF     		itttt	eq
 3824 011a A389     		ldrheq	r3, [r4, #12]
 3825 011c 194A     		ldreq	r2, .L430+12
 3826 011e 9BB2     		uxtheq	r3, r3
 3827 0120 1380     		strheq	r3, [r2]	@ movhi
 3828              	.L392:
1229:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 120


 3829              		.loc 1 1229 0
 3830 0122 6420     		movs	r0, #100
 3831 0124 FFF7FEFF 		bl	cc2400_strobe
 3832              	.LVL422:
 3833              	.L404:
1230:bluetooth_rxtx.c **** 
 3834              		.loc 1 1230 0 discriminator 1
 3835 0128 FFF7FEFF 		bl	cc2400_status
 3836              	.LVL423:
 3837 012c 4207     		lsls	r2, r0, #29
 3838 012e FBD4     		bmi	.L404
1233:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 3839              		.loc 1 1233 0
 3840 0130 607C     		ldrb	r0, [r4, #17]	@ zero_extendqisi2
 3841 0132 144D     		ldr	r5, .L430+12
 3842 0134 C0B2     		uxtb	r0, r0
1234:bluetooth_rxtx.c **** 	else
 3843              		.loc 1 1234 0
 3844 0136 2988     		ldrh	r1, [r5]
1233:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 3845              		.loc 1 1233 0
 3846 0138 0228     		cmp	r0, #2
1236:bluetooth_rxtx.c **** 
 3847              		.loc 1 1236 0
 3848 013a 1CBF     		itt	ne
 3849 013c 01F1FF31 		addne	r1, r1, #-1
 3850 0140 0220     		movne	r0, #2
 3851 0142 89B2     		uxth	r1, r1
 3852 0144 FFF7FEFF 		bl	cc2400_set
 3853              	.LVL424:
1239:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 3854              		.loc 1 1239 0
 3855 0148 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3856 014a 1BB1     		cbz	r3, .L407
1240:bluetooth_rxtx.c **** 	}
 3857              		.loc 1 1240 0
 3858 014c 2888     		ldrh	r0, [r5]
 3859 014e 80B2     		uxth	r0, r0
 3860 0150 FFF7FEFF 		bl	cs_threshold_calc_and_set
 3861              	.LVL425:
 3862              	.L407:
1244:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3863              		.loc 1 1244 0
 3864 0154 6120     		movs	r0, #97
 3865 0156 FFF7FEFF 		bl	cc2400_strobe
 3866              	.LVL426:
 3867              	.L408:
1245:bluetooth_rxtx.c **** 
 3868              		.loc 1 1245 0 discriminator 1
 3869 015a FFF7FEFF 		bl	cc2400_status
 3870              	.LVL427:
 3871 015e 4307     		lsls	r3, r0, #29
 3872 0160 FBD5     		bpl	.L408
1247:bluetooth_rxtx.c **** 
 3873              		.loc 1 1247 0
 3874 0162 0123     		movs	r3, #1
 3875 0164 2374     		strb	r3, [r4, #16]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 121


1249:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 3876              		.loc 1 1249 0
 3877 0166 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 3878 0168 022B     		cmp	r3, #2
1250:bluetooth_rxtx.c **** 	else
 3879              		.loc 1 1250 0
 3880 016a 0CBF     		ite	eq
 3881 016c 6320     		moveq	r0, #99
1252:bluetooth_rxtx.c **** }
 3882              		.loc 1 1252 0
 3883 016e 6220     		movne	r0, #98
1253:bluetooth_rxtx.c **** 
 3884              		.loc 1 1253 0
 3885 0170 BDE83840 		pop	{r3, r4, r5, lr}
 3886              		.cfi_restore 14
 3887              		.cfi_restore 5
 3888              		.cfi_restore 4
 3889              		.cfi_restore 3
 3890              		.cfi_def_cfa_offset 0
1252:bluetooth_rxtx.c **** }
 3891              		.loc 1 1252 0
 3892 0174 FFF7FEBF 		b	cc2400_strobe
 3893              	.LVL428:
 3894              	.L431:
 3895              		.align	2
 3896              	.L430:
 3897 0178 00000000 		.word	.LANCHOR0
 3898 017c 00000000 		.word	clkn
 3899 0180 00000000 		.word	last_hop
 3900 0184 00000000 		.word	.LANCHOR1
 3901 0188 00000000 		.word	used_channels
 3902 018c 00000000 		.word	afh_enabled
 3903 0190 00000000 		.word	afh_map
 3904 0194 07000080 		.word	-2147483641
 3905              		.cfi_endproc
 3906              	.LFE13:
 3908              		.section	.text.bt_stream_rx,"ax",%progbits
 3909              		.align	1
 3910              		.global	bt_stream_rx
 3911              		.thumb
 3912              		.thumb_func
 3914              	bt_stream_rx:
 3915              	.LFB14:
1257:bluetooth_rxtx.c **** 	int8_t rssi;
 3916              		.loc 1 1257 0
 3917              		.cfi_startproc
 3918              		@ args = 0, pretend = 0, frame = 0
 3919              		@ frame_needed = 0, uses_anonymous_args = 0
 3920 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3921              		.cfi_def_cfa_offset 32
 3922              		.cfi_offset 4, -32
 3923              		.cfi_offset 5, -28
 3924              		.cfi_offset 6, -24
 3925              		.cfi_offset 7, -20
 3926              		.cfi_offset 8, -16
 3927              		.cfi_offset 9, -12
 3928              		.cfi_offset 10, -8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 122


 3929              		.cfi_offset 14, -4
1261:bluetooth_rxtx.c **** 
 3930              		.loc 1 1261 0
 3931 0004 4A4E     		ldr	r6, .L466
 3932 0006 1023     		movs	r3, #16
 3933 0008 3360     		str	r3, [r6]
1263:bluetooth_rxtx.c **** 	dio_ssp_init();
 3934              		.loc 1 1263 0
 3935 000a FFF7FEFF 		bl	queue_init
 3936              	.LVL429:
1264:bluetooth_rxtx.c **** 	dma_init();
 3937              		.loc 1 1264 0
 3938 000e FFF7FEFF 		bl	dio_ssp_init
 3939              	.LVL430:
1265:bluetooth_rxtx.c **** 	dio_ssp_start();
 3940              		.loc 1 1265 0
 3941 0012 FFF7FEFF 		bl	dma_init
 3942              	.LVL431:
1266:bluetooth_rxtx.c **** 
 3943              		.loc 1 1266 0
 3944 0016 FFF7FEFF 		bl	dio_ssp_start
 3945              	.LVL432:
1268:bluetooth_rxtx.c **** 
 3946              		.loc 1 1268 0
 3947 001a FFF7FEFF 		bl	cc2400_rx
 3948              	.LVL433:
1270:bluetooth_rxtx.c **** 
 3949              		.loc 1 1270 0
 3950 001e FFF7FEFF 		bl	cs_trigger_enable
 3951              	.LVL434:
 3952              	.L433:
1272:bluetooth_rxtx.c **** 	{
 3953              		.loc 1 1272 0
 3954 0022 444C     		ldr	r4, .L466+4
 3955 0024 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 3956 0026 A046     		mov	r8, r4
 3957 0028 012B     		cmp	r3, #1
 3958 002a 78D1     		bne	.L464
 3959              	.L445:
1275:bluetooth_rxtx.c **** 
 3960              		.loc 1 1275 0
 3961 002c 1023     		movs	r3, #16
 3962 002e 3360     		str	r3, [r6]
1287:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 3963              		.loc 1 1287 0
 3964 0030 FFF7FEFF 		bl	rssi_reset
 3965              	.LVL435:
1288:bluetooth_rxtx.c **** 		while (!rx_tc) {
 3966              		.loc 1 1288 0
 3967 0034 8025     		movs	r5, #128
 3968              	.LVL436:
 3969              	.L434:
1289:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 3970              		.loc 1 1289 0
 3971 0036 404B     		ldr	r3, .L466+8
 3972 0038 DFF820A1 		ldr	r10, .L466+44
 3973 003c 1A68     		ldr	r2, [r3]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 123


 3974 003e 3F4F     		ldr	r7, .L466+12
 3975 0040 9946     		mov	r9, r3
 3976 0042 1ABB     		cbnz	r2, .L465
1290:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 3977              		.loc 1 1290 0
 3978 0044 0620     		movs	r0, #6
 3979 0046 FFF7FEFF 		bl	cc2400_get
 3980              	.LVL437:
1291:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3981              		.loc 1 1291 0
 3982 004a 9AF80030 		ldrb	r3, [r10]	@ zero_extendqisi2
1290:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 3983              		.loc 1 1290 0
 3984 004e C0F30720 		ubfx	r0, r0, #8, #8
 3985              	.LVL438:
1291:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3986              		.loc 1 1291 0
 3987 0052 5BB1     		cbz	r3, .L435
1291:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3988              		.loc 1 1291 0 is_stmt 0 discriminator 1
 3989 0054 802D     		cmp	r5, #128
 3990 0056 09D1     		bne	.L435
1292:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 3991              		.loc 1 1292 0 is_stmt 1
 3992 0058 394B     		ldr	r3, .L466+16
 3993 005a 40B2     		sxtb	r0, r0
 3994 005c 93F90050 		ldrsb	r5, [r3]
 3995              	.LVL439:
 3996 0060 3635     		adds	r5, r5, #54
 3997 0062 A842     		cmp	r0, r5
 3998 0064 B8BF     		it	lt
 3999 0066 2846     		movlt	r0, r5
 4000              	.LVL440:
 4001 0068 C5B2     		uxtb	r5, r0
1293:bluetooth_rxtx.c **** 			}
 4002              		.loc 1 1293 0
 4003 006a 2846     		mov	r0, r5
 4004              	.L435:
 4005              	.LVL441:
1295:bluetooth_rxtx.c **** 
 4006              		.loc 1 1295 0
 4007 006c 40B2     		sxtb	r0, r0
 4008 006e FFF7FEFF 		bl	rssi_add
 4009              	.LVL442:
1297:bluetooth_rxtx.c **** 
 4010              		.loc 1 1297 0
 4011 0072 3868     		ldr	r0, [r7]
 4012 0074 FFF7FEFF 		bl	handle_usb
 4013              	.LVL443:
1300:bluetooth_rxtx.c **** 				hop();
 4014              		.loc 1 1300 0
 4015 0078 98F80B30 		ldrb	r3, [r8, #11]	@ zero_extendqisi2
 4016 007c 13B1     		cbz	r3, .L436
1301:bluetooth_rxtx.c **** 			} else {
 4017              		.loc 1 1301 0
 4018 007e FFF7FEFF 		bl	hop
 4019              	.LVL444:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 124


 4020 0082 D8E7     		b	.L434
 4021              	.L436:
1303:bluetooth_rxtx.c **** 			}
 4022              		.loc 1 1303 0
 4023 0084 4FF48073 		mov	r3, #256
 4024 0088 3360     		str	r3, [r6]
 4025 008a D4E7     		b	.L434
 4026              	.L465:
1309:bluetooth_rxtx.c **** 
 4027              		.loc 1 1309 0
 4028 008c 2D4B     		ldr	r3, .L466+20
 4029 008e 1022     		movs	r2, #16
1311:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4030              		.loc 1 1311 0
 4031 0090 2D4D     		ldr	r5, .L466+24
 4032              	.LVL445:
1309:bluetooth_rxtx.c **** 
 4033              		.loc 1 1309 0
 4034 0092 1A60     		str	r2, [r3]
1311:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4035              		.loc 1 1311 0
 4036 0094 2B68     		ldr	r3, [r5]
 4037 0096 1BB1     		cbz	r3, .L439
1312:bluetooth_rxtx.c **** 		}
 4038              		.loc 1 1312 0
 4039 0098 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4040 009a 43F00203 		orr	r3, r3, #2
 4041 009e 6370     		strb	r3, [r4, #1]
 4042              	.L439:
1316:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4043              		.loc 1 1316 0
 4044 00a0 D9F80030 		ldr	r3, [r9]
 4045 00a4 012B     		cmp	r3, #1
1317:bluetooth_rxtx.c **** 
 4046              		.loc 1 1317 0
 4047 00a6 82BF     		ittt	hi
 4048 00a8 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 4049 00aa 43F00103 		orrhi	r3, r3, #1
 4050 00ae 6370     		strbhi	r3, [r4, #1]
1319:bluetooth_rxtx.c **** 			status |= DISCARD;
 4051              		.loc 1 1319 0
 4052 00b0 227C     		ldrb	r2, [r4, #16]	@ zero_extendqisi2
 4053 00b2 204B     		ldr	r3, .L466+4
 4054 00b4 2AB1     		cbz	r2, .L441
1320:bluetooth_rxtx.c **** 			dma_discard = 0;
 4055              		.loc 1 1320 0
 4056 00b6 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 4057 00b8 42F02002 		orr	r2, r2, #32
 4058 00bc 5A70     		strb	r2, [r3, #1]
1321:bluetooth_rxtx.c **** 		}
 4059              		.loc 1 1321 0
 4060 00be 0022     		movs	r2, #0
 4061 00c0 1A74     		strb	r2, [r3, #16]
 4062              	.L441:
1324:bluetooth_rxtx.c **** 
 4063              		.loc 1 1324 0
 4064 00c2 224B     		ldr	r3, .L466+28
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 125


 4065 00c4 1888     		ldrh	r0, [r3]
 4066 00c6 80B2     		uxth	r0, r0
 4067 00c8 FFF7FEFF 		bl	rssi_iir_update
 4068              	.LVL446:
1330:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4069              		.loc 1 1330 0
 4070 00cc 9AF80030 		ldrb	r3, [r10]	@ zero_extendqisi2
 4071 00d0 13B9     		cbnz	r3, .L442
1330:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4072              		.loc 1 1330 0 is_stmt 0 discriminator 1
 4073 00d2 1F4B     		ldr	r3, .L466+32
 4074 00d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4075 00d6 33B1     		cbz	r3, .L443
 4076              	.L442:
1331:bluetooth_rxtx.c **** 			cs_trigger = 0;
 4077              		.loc 1 1331 0 is_stmt 1
 4078 00d8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4079 00da 43F00803 		orr	r3, r3, #8
 4080 00de 6370     		strb	r3, [r4, #1]
1332:bluetooth_rxtx.c **** 		}
 4081              		.loc 1 1332 0
 4082 00e0 0023     		movs	r3, #0
 4083 00e2 8AF80030 		strb	r3, [r10]
 4084              	.L443:
1335:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4085              		.loc 1 1335 0
 4086 00e6 164B     		ldr	r3, .L466+16
 4087 00e8 1A4A     		ldr	r2, .L466+36
 4088 00ea 93F90030 		ldrsb	r3, [r3]
 4089 00ee 92F90020 		ldrsb	r2, [r2]
 4090 00f2 3533     		adds	r3, r3, #53
 4091 00f4 9342     		cmp	r3, r2
1336:bluetooth_rxtx.c **** 		}
 4092              		.loc 1 1336 0
 4093 00f6 B8BF     		it	lt
 4094 00f8 6378     		ldrblt	r3, [r4, #1]	@ zero_extendqisi2
1339:bluetooth_rxtx.c **** 
 4095              		.loc 1 1339 0
 4096 00fa 4FF00000 		mov	r0, #0
1336:bluetooth_rxtx.c **** 		}
 4097              		.loc 1 1336 0
 4098 00fe BCBF     		itt	lt
 4099 0100 43F01003 		orrlt	r3, r3, #16
 4100 0104 6370     		strblt	r3, [r4, #1]
1339:bluetooth_rxtx.c **** 
 4101              		.loc 1 1339 0
 4102 0106 144B     		ldr	r3, .L466+40
 4103 0108 1968     		ldr	r1, [r3]
 4104 010a FFF7FEFF 		bl	enqueue
 4105              	.LVL447:
1341:bluetooth_rxtx.c **** 		rx_tc = 0;
 4106              		.loc 1 1341 0
 4107 010e 3868     		ldr	r0, [r7]
 4108 0110 FFF7FEFF 		bl	handle_usb
 4109              	.LVL448:
1342:bluetooth_rxtx.c **** 		rx_err = 0;
 4110              		.loc 1 1342 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 126


 4111 0114 0023     		movs	r3, #0
 4112 0116 C9F80030 		str	r3, [r9]
1343:bluetooth_rxtx.c **** 	}
 4113              		.loc 1 1343 0
 4114 011a 2B60     		str	r3, [r5]
 4115 011c 81E7     		b	.L433
 4116              	.L464:
1272:bluetooth_rxtx.c **** 	{
 4117              		.loc 1 1272 0 discriminator 1
 4118 011e A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 4119 0120 082B     		cmp	r3, #8
 4120 0122 83D0     		beq	.L445
1350:bluetooth_rxtx.c **** 	cs_trigger_disable();
 4121              		.loc 1 1350 0
 4122 0124 FFF7FEFF 		bl	dio_ssp_stop
 4123              	.LVL449:
1352:bluetooth_rxtx.c **** 
 4124              		.loc 1 1352 0
 4125 0128 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 4126              		.cfi_restore 14
 4127              		.cfi_restore 10
 4128              		.cfi_restore 9
 4129              		.cfi_restore 8
 4130              		.cfi_restore 7
 4131              		.cfi_restore 6
 4132              		.cfi_restore 5
 4133              		.cfi_restore 4
 4134              		.cfi_def_cfa_offset 0
1351:bluetooth_rxtx.c **** }
 4135              		.loc 1 1351 0
 4136 012c FFF7FEBF 		b	cs_trigger_disable
 4137              	.LVL450:
 4138              	.L467:
 4139              		.align	2
 4140              	.L466:
 4141 0130 3CC00920 		.word	537509948
 4142 0134 00000000 		.word	.LANCHOR0
 4143 0138 00000000 		.word	rx_tc
 4144 013c 00000000 		.word	clkn
 4145 0140 00000000 		.word	cs_threshold_cur
 4146 0144 38C00920 		.word	537509944
 4147 0148 00000000 		.word	rx_err
 4148 014c 00000000 		.word	.LANCHOR1
 4149 0150 00000000 		.word	cs_no_squelch
 4150 0154 00000000 		.word	rssi_max
 4151 0158 00000000 		.word	idle_rxbuf
 4152 015c 00000000 		.word	cs_trigger
 4153              		.cfi_endproc
 4154              	.LFE14:
 4156              		.section	.text.br_transmit,"ax",%progbits
 4157              		.align	1
 4158              		.global	br_transmit
 4159              		.thumb
 4160              		.thumb_func
 4162              	br_transmit:
 4163              	.LFB17:
1384:bluetooth_rxtx.c **** 	uint16_t gio_save;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 127


 4164              		.loc 1 1384 0
 4165              		.cfi_startproc
 4166              		@ args = 0, pretend = 0, frame = 16
 4167              		@ frame_needed = 0, uses_anonymous_args = 0
 4168 0000 2DE9FF41 		push	{r0, r1, r2, r3, r4, r5, r6, r7, r8, lr}
 4169              		.cfi_def_cfa_offset 40
 4170              		.cfi_offset 4, -24
 4171              		.cfi_offset 5, -20
 4172              		.cfi_offset 6, -16
 4173              		.cfi_offset 7, -12
 4174              		.cfi_offset 8, -8
 4175              		.cfi_offset 14, -4
 4176              	.LVL451:
1389:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 4177              		.loc 1 1389 0
 4178 0004 934B     		ldr	r3, .L508
1390:bluetooth_rxtx.c **** 
 4179              		.loc 1 1390 0
 4180 0006 0027     		movs	r7, #0
1389:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 4181              		.loc 1 1389 0
 4182 0008 D3E90245 		ldrd	r4, [r3, #8]
 4183 000c 0023     		movs	r3, #0
 4184 000e 04F00102 		and	r2, r4, #1
 4185 0012 1343     		orrs	r3, r2, r3
 4186 0014 4AF6AA23 		movw	r3, #43690
1390:bluetooth_rxtx.c **** 
 4187              		.loc 1 1390 0
 4188 0018 4FEAD576 		lsr	r6, r5, #31
1389:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 4189              		.loc 1 1389 0
 4190 001c 45F25558 		movw	r8, #21845
 4191 0020 08BF     		it	eq
 4192 0022 9846     		moveq	r8, r3
 4193              	.LVL452:
1390:bluetooth_rxtx.c **** 
 4194              		.loc 1 1390 0
 4195 0024 002F     		cmp	r7, #0
 4196 0026 08BF     		it	eq
 4197 0028 012E     		cmpeq	r6, #1
1393:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 4198              		.loc 1 1393 0
 4199 002a E0B2     		uxtb	r0, r4
1390:bluetooth_rxtx.c **** 
 4200              		.loc 1 1390 0
 4201 002c 0CBF     		ite	eq
 4202 002e AA26     		moveq	r6, #170
 4203 0030 5526     		movne	r6, #85
 4204              	.LVL453:
1393:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 4205              		.loc 1 1393 0
 4206 0032 FFF7FEFF 		bl	reverse8
 4207              	.LVL454:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4208              		.loc 1 1392 0
 4209 0036 8DF80000 		strb	r0, [sp]
1394:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 128


 4210              		.loc 1 1394 0
 4211 003a C4F30720 		ubfx	r0, r4, #8, #8
 4212 003e FFF7FEFF 		bl	reverse8
 4213              	.LVL455:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4214              		.loc 1 1392 0
 4215 0042 8DF80100 		strb	r0, [sp, #1]
1395:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
 4216              		.loc 1 1395 0
 4217 0046 C4F30740 		ubfx	r0, r4, #16, #8
 4218 004a FFF7FEFF 		bl	reverse8
 4219              	.LVL456:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4220              		.loc 1 1392 0
 4221 004e 8DF80200 		strb	r0, [sp, #2]
1396:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
 4222              		.loc 1 1396 0
 4223 0052 200E     		lsrs	r0, r4, #24
 4224 0054 FFF7FEFF 		bl	reverse8
 4225              	.LVL457:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4226              		.loc 1 1392 0
 4227 0058 8DF80300 		strb	r0, [sp, #3]
1397:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
 4228              		.loc 1 1397 0
 4229 005c E8B2     		uxtb	r0, r5
 4230 005e FFF7FEFF 		bl	reverse8
 4231              	.LVL458:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4232              		.loc 1 1392 0
 4233 0062 8DF80400 		strb	r0, [sp, #4]
1398:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
 4234              		.loc 1 1398 0
 4235 0066 C5F30720 		ubfx	r0, r5, #8, #8
 4236 006a FFF7FEFF 		bl	reverse8
 4237              	.LVL459:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4238              		.loc 1 1392 0
 4239 006e 8DF80500 		strb	r0, [sp, #5]
1399:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
 4240              		.loc 1 1399 0
 4241 0072 C5F30740 		ubfx	r0, r5, #16, #8
 4242 0076 FFF7FEFF 		bl	reverse8
 4243              	.LVL460:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4244              		.loc 1 1392 0
 4245 007a 8DF80600 		strb	r0, [sp, #6]
1400:bluetooth_rxtx.c **** 		reverse8(trailer),
 4246              		.loc 1 1400 0
 4247 007e 280E     		lsrs	r0, r5, #24
 4248 0080 FFF7FEFF 		bl	reverse8
 4249              	.LVL461:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4250              		.loc 1 1392 0
 4251 0084 8DF80700 		strb	r0, [sp, #7]
1401:bluetooth_rxtx.c **** 		reverse8(0x77),
 4252              		.loc 1 1401 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 129


 4253 0088 3046     		mov	r0, r6
 4254 008a FFF7FEFF 		bl	reverse8
 4255              	.LVL462:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4256              		.loc 1 1392 0
 4257 008e 8DF80800 		strb	r0, [sp, #8]
1402:bluetooth_rxtx.c **** 		reverse8(0x66),
 4258              		.loc 1 1402 0
 4259 0092 7720     		movs	r0, #119
 4260 0094 FFF7FEFF 		bl	reverse8
 4261              	.LVL463:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4262              		.loc 1 1392 0
 4263 0098 8DF80900 		strb	r0, [sp, #9]
1403:bluetooth_rxtx.c **** 		reverse8(0x55),
 4264              		.loc 1 1403 0
 4265 009c 6620     		movs	r0, #102
 4266 009e FFF7FEFF 		bl	reverse8
 4267              	.LVL464:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4268              		.loc 1 1392 0
 4269 00a2 8DF80A00 		strb	r0, [sp, #10]
1404:bluetooth_rxtx.c **** 		reverse8(0x44),
 4270              		.loc 1 1404 0
 4271 00a6 5520     		movs	r0, #85
 4272 00a8 FFF7FEFF 		bl	reverse8
 4273              	.LVL465:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4274              		.loc 1 1392 0
 4275 00ac 8DF80B00 		strb	r0, [sp, #11]
1405:bluetooth_rxtx.c **** 		reverse8(0x33),
 4276              		.loc 1 1405 0
 4277 00b0 4420     		movs	r0, #68
 4278 00b2 FFF7FEFF 		bl	reverse8
 4279              	.LVL466:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4280              		.loc 1 1392 0
 4281 00b6 8DF80C00 		strb	r0, [sp, #12]
1406:bluetooth_rxtx.c **** 		reverse8(0x22),
 4282              		.loc 1 1406 0
 4283 00ba 3320     		movs	r0, #51
 4284 00bc FFF7FEFF 		bl	reverse8
 4285              	.LVL467:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4286              		.loc 1 1392 0
 4287 00c0 8DF80D00 		strb	r0, [sp, #13]
1407:bluetooth_rxtx.c **** 		reverse8(0x11)
 4288              		.loc 1 1407 0
 4289 00c4 2220     		movs	r0, #34
 4290 00c6 FFF7FEFF 		bl	reverse8
 4291              	.LVL468:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4292              		.loc 1 1392 0
 4293 00ca 8DF80E00 		strb	r0, [sp, #14]
1408:bluetooth_rxtx.c **** 	};
 4294              		.loc 1 1408 0
 4295 00ce 1120     		movs	r0, #17
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 130


 4296 00d0 FFF7FEFF 		bl	reverse8
 4297              	.LVL469:
 4298              	.LBB32:
 4299              	.LBB33:
1368:bluetooth_rxtx.c **** 
 4300              		.loc 1 1368 0
 4301 00d4 3C46     		mov	r4, r7
 4302              	.LBB34:
1370:bluetooth_rxtx.c **** 	{
 4303              		.loc 1 1370 0
 4304 00d6 3B46     		mov	r3, r7
 4305              	.LBE34:
 4306              	.LBE33:
 4307              	.LBE32:
1392:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4308              		.loc 1 1392 0
 4309 00d8 8DF80F00 		strb	r0, [sp, #15]
 4310              	.LVL470:
 4311              	.L471:
 4312              	.LBB37:
 4313              	.LBB36:
 4314              	.LBB35:
1372:bluetooth_rxtx.c **** 	}
 4315              		.loc 1 1372 0
 4316 00dc 48FA03F2 		asr	r2, r8, r3
 4317 00e0 C3F10F01 		rsb	r1, r3, #15
 4318 00e4 02F00102 		and	r2, r2, #1
 4319 00e8 8A40     		lsls	r2, r2, r1
1370:bluetooth_rxtx.c **** 	{
 4320              		.loc 1 1370 0
 4321 00ea 0133     		adds	r3, r3, #1
 4322              	.LVL471:
1372:bluetooth_rxtx.c **** 	}
 4323              		.loc 1 1372 0
 4324 00ec 1443     		orrs	r4, r4, r2
 4325              	.LVL472:
1370:bluetooth_rxtx.c **** 	{
 4326              		.loc 1 1370 0
 4327 00ee 102B     		cmp	r3, #16
1372:bluetooth_rxtx.c **** 	}
 4328              		.loc 1 1372 0
 4329 00f0 A4B2     		uxth	r4, r4
 4330              	.LVL473:
1370:bluetooth_rxtx.c **** 	{
 4331              		.loc 1 1370 0
 4332 00f2 F3D1     		bne	.L471
 4333              	.LVL474:
 4334              	.LBE35:
 4335              	.LBE36:
 4336              	.LBE37:
 4337              	.LBB38:
 4338              	.LBB39:
1007:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4339              		.loc 1 1007 0
 4340 00f4 0D20     		movs	r0, #13
 4341 00f6 47F6FF71 		movw	r1, #32767
 4342 00fa FFF7FEFF 		bl	cc2400_set
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 131


 4343              	.LVL475:
1008:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 4344              		.loc 1 1008 0
 4345 00fe 1220     		movs	r0, #18
 4346 0100 42F62231 		movw	r1, #11042
 4347 0104 FFF7FEFF 		bl	cc2400_set
 4348              	.LVL476:
1009:bluetooth_rxtx.c **** 
 4349              		.loc 1 1009 0
 4350 0108 1420     		movs	r0, #20
 4351 010a 41F24B31 		movw	r1, #4939
 4352 010e FFF7FEFF 		bl	cc2400_set
 4353              	.LVL477:
1011:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 4354              		.loc 1 1011 0
 4355 0112 2020     		movs	r0, #32
 4356 0114 40F60141 		movw	r1, #3073
 4357 0118 FFF7FEFF 		bl	cc2400_set
 4358              	.LVL478:
1019:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 4359              		.loc 1 1019 0
 4360 011c 2146     		mov	r1, r4
 4361 011e 2C20     		movs	r0, #44
 4362 0120 FFF7FEFF 		bl	cc2400_set
 4363              	.LVL479:
1020:bluetooth_rxtx.c **** 
 4364              		.loc 1 1020 0
 4365 0124 2D20     		movs	r0, #45
 4366 0126 0021     		movs	r1, #0
 4367 0128 FFF7FEFF 		bl	cc2400_set
 4368              	.LVL480:
1022:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 4369              		.loc 1 1022 0
 4370 012c 4A4B     		ldr	r3, .L508+4
 4371 012e 0220     		movs	r0, #2
 4372 0130 1988     		ldrh	r1, [r3]
1025:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 4373              		.loc 1 1025 0
 4374 0132 4A4C     		ldr	r4, .L508+8
 4375              	.LVL481:
1022:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 4376              		.loc 1 1022 0
 4377 0134 89B2     		uxth	r1, r1
 4378 0136 FFF7FEFF 		bl	cc2400_set
 4379              	.LVL482:
1023:bluetooth_rxtx.c **** 
 4380              		.loc 1 1023 0
 4381 013a 0520     		movs	r0, #5
 4382 013c 0B21     		movs	r1, #11
 4383 013e FFF7FEFF 		bl	cc2400_set
 4384              	.LVL483:
1025:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 4385              		.loc 1 1025 0
 4386 0142 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4387 0144 13B9     		cbnz	r3, .L472
1026:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4388              		.loc 1 1026 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 132


 4389 0146 0320     		movs	r0, #3
 4390 0148 2921     		movs	r1, #41
 4391 014a 04E0     		b	.L506
 4392              	.L472:
1027:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 4393              		.loc 1 1027 0
 4394 014c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4395 014e 012B     		cmp	r3, #1
 4396 0150 1DD1     		bne	.L474
1028:bluetooth_rxtx.c **** 	} else {
 4397              		.loc 1 1028 0
 4398 0152 0320     		movs	r0, #3
 4399 0154 4021     		movs	r1, #64
 4400              	.L506:
 4401 0156 FFF7FEFF 		bl	cc2400_set
 4402              	.LVL484:
1034:bluetooth_rxtx.c **** 
 4403              		.loc 1 1034 0
 4404 015a FFF7FEFF 		bl	clkn_start
 4405              	.LVL485:
 4406              	.L475:
1036:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4407              		.loc 1 1036 0
 4408 015e FFF7FEFF 		bl	cc2400_status
 4409              	.LVL486:
 4410 0162 4506     		lsls	r5, r0, #25
 4411 0164 FBD5     		bpl	.L475
1037:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4412              		.loc 1 1037 0
 4413 0166 6120     		movs	r0, #97
 4414 0168 FFF7FEFF 		bl	cc2400_strobe
 4415              	.LVL487:
 4416              	.L476:
1038:bluetooth_rxtx.c **** 
 4417              		.loc 1 1038 0
 4418 016c FFF7FEFF 		bl	cc2400_status
 4419              	.LVL488:
 4420 0170 4007     		lsls	r0, r0, #29
 4421 0172 FBD5     		bpl	.L476
1041:bluetooth_rxtx.c **** #endif
 4422              		.loc 1 1041 0
 4423 0174 3A4B     		ldr	r3, .L508+12
 4424 0176 8022     		movs	r2, #128
 4425 0178 1A60     		str	r2, [r3]
 4426              	.L477:
1044:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4427              		.loc 1 1044 0
 4428 017a 0E20     		movs	r0, #14
 4429 017c FFF7FEFF 		bl	cc2400_get
 4430              	.LVL489:
 4431 0180 00F01F00 		and	r0, r0, #31
 4432 0184 0F28     		cmp	r0, #15
 4433 0186 F8D1     		bne	.L477
1045:bluetooth_rxtx.c **** 
 4434              		.loc 1 1045 0
 4435 0188 6320     		movs	r0, #99
 4436 018a FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 133


 4437              	.LVL490:
 4438              	.L474:
 4439              	.LBE39:
 4440              	.LBE38:
1413:bluetooth_rxtx.c **** 
 4441              		.loc 1 1413 0 discriminator 4
 4442 018e 1421     		movs	r1, #20
 4443 0190 2320     		movs	r0, #35
 4444 0192 FFF7FEFF 		bl	cc2400_set
 4445              	.LVL491:
1416:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 4446              		.loc 1 1416 0 discriminator 4
 4447 0196 0820     		movs	r0, #8
 4448 0198 FFF7FEFF 		bl	cc2400_get
 4449              	.LVL492:
1417:bluetooth_rxtx.c **** 
 4450              		.loc 1 1417 0 discriminator 4
 4451 019c C0F30801 		ubfx	r1, r0, #0, #9
1416:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 4452              		.loc 1 1416 0 discriminator 4
 4453 01a0 0746     		mov	r7, r0
 4454              	.LVL493:
1417:bluetooth_rxtx.c **** 
 4455              		.loc 1 1417 0 discriminator 4
 4456 01a2 41F49C41 		orr	r1, r1, #19968
 4457 01a6 0820     		movs	r0, #8
 4458              	.LVL494:
 4459 01a8 FFF7FEFF 		bl	cc2400_set
 4460              	.LVL495:
1387:bluetooth_rxtx.c **** 
 4461              		.loc 1 1387 0 discriminator 4
 4462 01ac 0026     		movs	r6, #0
 4463              	.LVL496:
 4464              	.L478:
1419:bluetooth_rxtx.c **** 	{
 4465              		.loc 1 1419 0
 4466 01ae A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 4467 01b0 022B     		cmp	r3, #2
 4468 01b2 45D1     		bne	.L486
1422:bluetooth_rxtx.c **** 
 4469              		.loc 1 1422 0
 4470 01b4 7608     		lsrs	r6, r6, #1
 4471              	.LVL497:
 4472              	.L479:
 4473 01b6 2B4D     		ldr	r5, .L508+16
 4474 01b8 2B68     		ldr	r3, [r5]
 4475 01ba B6EB530F 		cmp	r6, r3, lsr #1
 4476 01be 05D1     		bne	.L507
 4477              	.L480:
1425:bluetooth_rxtx.c **** 				hop();
 4478              		.loc 1 1425 0
 4479 01c0 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 4480 01c2 002B     		cmp	r3, #0
 4481 01c4 F7D0     		beq	.L479
1426:bluetooth_rxtx.c **** 			}
 4482              		.loc 1 1426 0
 4483 01c6 FFF7FEFF 		bl	hop
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 134


 4484              	.LVL498:
 4485 01ca F4E7     		b	.L479
 4486              	.L507:
1422:bluetooth_rxtx.c **** 
 4487              		.loc 1 1422 0 discriminator 1
 4488 01cc 264B     		ldr	r3, .L508+20
 4489 01ce 1A68     		ldr	r2, [r3]
 4490 01d0 40F6C903 		movw	r3, #2249
 4491 01d4 9A42     		cmp	r2, r3
 4492 01d6 F3D9     		bls	.L480
1432:bluetooth_rxtx.c **** 
 4493              		.loc 1 1432 0
 4494 01d8 244B     		ldr	r3, .L508+24
 4495 01da 4FF48072 		mov	r2, #256
1430:bluetooth_rxtx.c **** 
 4496              		.loc 1 1430 0
 4497 01de 2E68     		ldr	r6, [r5]
 4498              	.LVL499:
1434:bluetooth_rxtx.c **** 
 4499              		.loc 1 1434 0
 4500 01e0 1020     		movs	r0, #16
1432:bluetooth_rxtx.c **** 
 4501              		.loc 1 1432 0
 4502 01e2 1A60     		str	r2, [r3]
1434:bluetooth_rxtx.c **** 
 4503              		.loc 1 1434 0
 4504 01e4 6946     		mov	r1, sp
 4505 01e6 FFF7FEFF 		bl	cc2400_fifo_write
 4506              	.LVL500:
 4507              	.L481:
1436:bluetooth_rxtx.c **** 		TXLED_CLR;
 4508              		.loc 1 1436 0 discriminator 1
 4509 01ea 0E20     		movs	r0, #14
 4510 01ec FFF7FEFF 		bl	cc2400_get
 4511              	.LVL501:
 4512 01f0 00F01F00 		and	r0, r0, #31
 4513 01f4 0F28     		cmp	r0, #15
 4514 01f6 F8D1     		bne	.L481
1437:bluetooth_rxtx.c **** 
 4515              		.loc 1 1437 0
 4516 01f8 1D4B     		ldr	r3, .L508+28
 4517 01fa 4FF48072 		mov	r2, #256
 4518 01fe 1A60     		str	r2, [r3]
1439:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 4519              		.loc 1 1439 0
 4520 0200 6420     		movs	r0, #100
 4521 0202 FFF7FEFF 		bl	cc2400_strobe
 4522              	.LVL502:
 4523              	.L482:
1440:bluetooth_rxtx.c **** 
 4524              		.loc 1 1440 0 discriminator 1
 4525 0206 FFF7FEFF 		bl	cc2400_status
 4526              	.LVL503:
 4527 020a 4107     		lsls	r1, r0, #29
 4528 020c FBD4     		bmi	.L482
 4529              	.L483:
1442:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 135


 4530              		.loc 1 1442 0 discriminator 1
 4531 020e FFF7FEFF 		bl	cc2400_status
 4532              	.LVL504:
 4533 0212 4206     		lsls	r2, r0, #25
 4534 0214 FBD5     		bpl	.L483
1443:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 4535              		.loc 1 1443 0
 4536 0216 6120     		movs	r0, #97
 4537 0218 FFF7FEFF 		bl	cc2400_strobe
 4538              	.LVL505:
 4539              	.L484:
1444:bluetooth_rxtx.c **** 
 4540              		.loc 1 1444 0 discriminator 1
 4541 021c FFF7FEFF 		bl	cc2400_status
 4542              	.LVL506:
 4543 0220 4307     		lsls	r3, r0, #29
 4544 0222 FBD5     		bpl	.L484
 4545              	.L495:
1446:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 4546              		.loc 1 1446 0 discriminator 1
 4547 0224 0E20     		movs	r0, #14
 4548 0226 FFF7FEFF 		bl	cc2400_get
 4549              	.LVL507:
 4550 022a 00F01F00 		and	r0, r0, #31
 4551 022e 0F28     		cmp	r0, #15
 4552 0230 F8D1     		bne	.L495
1447:bluetooth_rxtx.c **** 
 4553              		.loc 1 1447 0
 4554 0232 6320     		movs	r0, #99
 4555 0234 FFF7FEFF 		bl	cc2400_strobe
 4556              	.LVL508:
1449:bluetooth_rxtx.c **** 	}
 4557              		.loc 1 1449 0
 4558 0238 2868     		ldr	r0, [r5]
 4559 023a FFF7FEFF 		bl	handle_usb
 4560              	.LVL509:
 4561 023e B6E7     		b	.L478
 4562              	.L486:
1453:bluetooth_rxtx.c **** #endif
 4563              		.loc 1 1453 0
 4564 0240 0C4B     		ldr	r3, .L508+32
 4565 0242 8022     		movs	r2, #128
 4566 0244 1A60     		str	r2, [r3]
1457:bluetooth_rxtx.c **** }
 4567              		.loc 1 1457 0
 4568 0246 0820     		movs	r0, #8
 4569 0248 3946     		mov	r1, r7
 4570 024a FFF7FEFF 		bl	cc2400_set
 4571              	.LVL510:
1458:bluetooth_rxtx.c **** 
 4572              		.loc 1 1458 0
 4573 024e 04B0     		add	sp, sp, #16
 4574              		.cfi_def_cfa_offset 24
 4575              		@ sp needed
 4576 0250 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4577              	.LVL511:
 4578              	.L509:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 136


 4579              		.align	2
 4580              	.L508:
 4581 0254 00000000 		.word	target
 4582 0258 00000000 		.word	.LANCHOR1
 4583 025c 00000000 		.word	.LANCHOR0
 4584 0260 58C00920 		.word	537509976
 4585 0264 00000000 		.word	clkn
 4586 0268 08400040 		.word	1073758216
 4587 026c 38C00920 		.word	537509944
 4588 0270 3CC00920 		.word	537509948
 4589 0274 5CC00920 		.word	537509980
 4590              		.cfi_endproc
 4591              	.LFE17:
 4593              		.section	.text.reset_le,"ax",%progbits
 4594              		.align	1
 4595              		.global	reset_le
 4596              		.thumb
 4597              		.thumb_func
 4599              	reset_le:
 4600              	.LFB19:
1471:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 4601              		.loc 1 1471 0
 4602              		.cfi_startproc
 4603              		@ args = 0, pretend = 0, frame = 0
 4604              		@ frame_needed = 0, uses_anonymous_args = 0
 4605 0000 08B5     		push	{r3, lr}
 4606              		.cfi_def_cfa_offset 8
 4607              		.cfi_offset 3, -8
 4608              		.cfi_offset 14, -4
1472:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
 4609              		.loc 1 1472 0
 4610 0002 0F48     		ldr	r0, .L511
 4611 0004 FFF7FEFF 		bl	le_set_access_address
 4612              	.LVL512:
1473:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 4613              		.loc 1 1473 0
 4614 0008 0E4B     		ldr	r3, .L511+4
 4615 000a 0F4A     		ldr	r2, .L511+8
 4616 000c DA60     		str	r2, [r3, #12]
1474:bluetooth_rxtx.c **** 	le.crc_verify = 0;
 4617              		.loc 1 1474 0
 4618 000e 0F4A     		ldr	r2, .L511+12
 4619 0010 1A61     		str	r2, [r3, #16]
1475:bluetooth_rxtx.c **** 	le.last_packet = 0;
 4620              		.loc 1 1475 0
 4621 0012 0022     		movs	r2, #0
1484:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 4622              		.loc 1 1484 0
 4623 0014 1A84     		strh	r2, [r3, #32]	@ movhi
1475:bluetooth_rxtx.c **** 	le.last_packet = 0;
 4624              		.loc 1 1475 0
 4625 0016 5A61     		str	r2, [r3, #20]
1487:bluetooth_rxtx.c **** 
 4626              		.loc 1 1487 0
 4627 0018 9A84     		strh	r2, [r3, #36]	@ movhi
1476:bluetooth_rxtx.c **** 
 4628              		.loc 1 1476 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 137


 4629 001a 5A64     		str	r2, [r3, #68]
1478:bluetooth_rxtx.c **** 
 4630              		.loc 1 1478 0
 4631 001c 1A76     		strb	r2, [r3, #24]
1480:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 4632              		.loc 1 1480 0
 4633 001e 5A76     		strb	r2, [r3, #25]
1481:bluetooth_rxtx.c **** 
 4634              		.loc 1 1481 0
 4635 0020 9A76     		strb	r2, [r3, #26]
1483:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 4636              		.loc 1 1483 0
 4637 0022 DA61     		str	r2, [r3, #28]
1485:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 4638              		.loc 1 1485 0
 4639 0024 5A84     		strh	r2, [r3, #34]	@ movhi
1489:bluetooth_rxtx.c **** 	le.win_offset = 0;
 4640              		.loc 1 1489 0
 4641 0026 83F82620 		strb	r2, [r3, #38]
1490:bluetooth_rxtx.c **** 
 4642              		.loc 1 1490 0
 4643 002a 1A85     		strh	r2, [r3, #40]	@ movhi
1492:bluetooth_rxtx.c **** 	le.update_instant = 0;
 4644              		.loc 1 1492 0
 4645 002c DA62     		str	r2, [r3, #44]
1493:bluetooth_rxtx.c **** 	le.interval_update = 0;
 4646              		.loc 1 1493 0
 4647 002e 1A86     		strh	r2, [r3, #48]	@ movhi
1494:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 4648              		.loc 1 1494 0
 4649 0030 5A86     		strh	r2, [r3, #50]	@ movhi
1495:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
 4650              		.loc 1 1495 0
 4651 0032 83F83420 		strb	r2, [r3, #52]
1496:bluetooth_rxtx.c **** 
 4652              		.loc 1 1496 0
 4653 0036 DA86     		strh	r2, [r3, #54]	@ movhi
1498:bluetooth_rxtx.c **** }
 4654              		.loc 1 1498 0
 4655 0038 054B     		ldr	r3, .L511+16
 4656 003a DA72     		strb	r2, [r3, #11]
 4657 003c 08BD     		pop	{r3, pc}
 4658              	.L512:
 4659 003e 00BF     		.align	2
 4660              	.L511:
 4661 0040 D6BE898E 		.word	-1903575338
 4662 0044 00000000 		.word	.LANCHOR1
 4663 0048 55555500 		.word	5592405
 4664 004c AAAAAA00 		.word	11184810
 4665 0050 00000000 		.word	.LANCHOR0
 4666              		.cfi_endproc
 4667              	.LFE19:
 4669              		.section	.text.reset_le_promisc,"ax",%progbits
 4670              		.align	1
 4671              		.global	reset_le_promisc
 4672              		.thumb
 4673              		.thumb_func
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 138


 4675              	reset_le_promisc:
 4676              	.LFB20:
1502:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 4677              		.loc 1 1502 0
 4678              		.cfi_startproc
 4679              		@ args = 0, pretend = 0, frame = 0
 4680              		@ frame_needed = 0, uses_anonymous_args = 0
 4681 0000 10B5     		push	{r4, lr}
 4682              		.cfi_def_cfa_offset 8
 4683              		.cfi_offset 4, -8
 4684              		.cfi_offset 14, -4
1503:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 4685              		.loc 1 1503 0
 4686 0002 064C     		ldr	r4, .L514
 4687 0004 0021     		movs	r1, #0
 4688 0006 2046     		mov	r0, r4
 4689 0008 4FF48472 		mov	r2, #264
 4690 000c FFF7FEFF 		bl	memset
 4691              	.LVL513:
1504:bluetooth_rxtx.c **** }
 4692              		.loc 1 1504 0
 4693 0010 4FF0FF33 		mov	r3, #-1
 4694 0014 C4F80031 		str	r3, [r4, #256]
 4695 0018 10BD     		pop	{r4, pc}
 4696              	.L515:
 4697 001a 00BF     		.align	2
 4698              	.L514:
 4699 001c 00000000 		.word	le_promisc
 4700              		.cfi_endproc
 4701              	.LFE20:
 4703              		.section	.text.bt_generic_le,"ax",%progbits
 4704              		.align	1
 4705              		.global	bt_generic_le
 4706              		.thumb
 4707              		.thumb_func
 4709              	bt_generic_le:
 4710              	.LFB21:
1509:bluetooth_rxtx.c **** 	u8 hold;
 4711              		.loc 1 1509 0
 4712              		.cfi_startproc
 4713              		@ args = 0, pretend = 0, frame = 0
 4714              		@ frame_needed = 0, uses_anonymous_args = 0
 4715              	.LVL514:
 4716 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 4717              		.cfi_def_cfa_offset 32
 4718              		.cfi_offset 4, -32
 4719              		.cfi_offset 5, -28
 4720              		.cfi_offset 6, -24
 4721              		.cfi_offset 7, -20
 4722              		.cfi_offset 8, -16
 4723              		.cfi_offset 9, -12
 4724              		.cfi_offset 10, -8
 4725              		.cfi_offset 14, -4
1514:bluetooth_rxtx.c **** 	mode = active_mode;
 4726              		.loc 1 1514 0
 4727 0004 6A4C     		ldr	r4, .L561
 4728 0006 0123     		movs	r3, #1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 139


1509:bluetooth_rxtx.c **** 	u8 hold;
 4729              		.loc 1 1509 0
 4730 0008 8246     		mov	r10, r0
1514:bluetooth_rxtx.c **** 	mode = active_mode;
 4731              		.loc 1 1514 0
 4732 000a 2370     		strb	r3, [r4]
1515:bluetooth_rxtx.c **** 
 4733              		.loc 1 1515 0
 4734 000c 6074     		strb	r0, [r4, #17]
1517:bluetooth_rxtx.c **** 
 4735              		.loc 1 1517 0
 4736 000e FFF7FEFF 		bl	reset_le
 4737              	.LVL515:
1520:bluetooth_rxtx.c **** 
 4738              		.loc 1 1520 0
 4739 0012 684B     		ldr	r3, .L561+4
 4740 0014 4FF08072 		mov	r2, #16777216
1522:bluetooth_rxtx.c **** 
 4741              		.loc 1 1522 0
 4742 0018 674F     		ldr	r7, .L561+8
1520:bluetooth_rxtx.c **** 
 4743              		.loc 1 1520 0
 4744 001a 1A60     		str	r2, [r3]
1522:bluetooth_rxtx.c **** 
 4745              		.loc 1 1522 0
 4746 001c 1023     		movs	r3, #16
 4747 001e 3B60     		str	r3, [r7]
1524:bluetooth_rxtx.c **** 	dio_ssp_init();
 4748              		.loc 1 1524 0
 4749 0020 FFF7FEFF 		bl	queue_init
 4750              	.LVL516:
1525:bluetooth_rxtx.c **** 	dma_init();
 4751              		.loc 1 1525 0
 4752 0024 FFF7FEFF 		bl	dio_ssp_init
 4753              	.LVL517:
1526:bluetooth_rxtx.c **** 	dio_ssp_start();
 4754              		.loc 1 1526 0
 4755 0028 FFF7FEFF 		bl	dma_init
 4756              	.LVL518:
1527:bluetooth_rxtx.c **** 	cc2400_rx();
 4757              		.loc 1 1527 0
 4758 002c FFF7FEFF 		bl	dio_ssp_start
 4759              	.LVL519:
1528:bluetooth_rxtx.c **** 
 4760              		.loc 1 1528 0
 4761 0030 FFF7FEFF 		bl	cc2400_rx
 4762              	.LVL520:
1530:bluetooth_rxtx.c **** 
 4763              		.loc 1 1530 0
 4764 0034 FFF7FEFF 		bl	cs_trigger_enable
 4765              	.LVL521:
1532:bluetooth_rxtx.c **** 
 4766              		.loc 1 1532 0
 4767 0038 0026     		movs	r6, #0
 4768              	.LVL522:
 4769              	.L517:
1534:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 140


 4770              		.loc 1 1534 0
 4771 003a A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 4772 003c 5345     		cmp	r3, r10
 4773 003e 40F0A580 		bne	.L538
 4774              	.LBB40:
1535:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 4775              		.loc 1 1535 0
 4776 0042 5B4B     		ldr	r3, .L561
 4777 0044 DB89     		ldrh	r3, [r3, #14]
 4778 0046 9BB2     		uxth	r3, r3
 4779 0048 CBB1     		cbz	r3, .L518
1536:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4780              		.loc 1 1536 0
 4781 004a 6420     		movs	r0, #100
 4782 004c FFF7FEFF 		bl	cc2400_strobe
 4783              	.LVL523:
 4784              	.L519:
1537:bluetooth_rxtx.c **** 
 4785              		.loc 1 1537 0 discriminator 1
 4786 0050 FFF7FEFF 		bl	cc2400_status
 4787              	.LVL524:
 4788 0054 4207     		lsls	r2, r0, #29
 4789 0056 FBD4     		bmi	.L519
1540:bluetooth_rxtx.c **** 
 4790              		.loc 1 1540 0
 4791 0058 584B     		ldr	r3, .L561+12
 4792 005a 0220     		movs	r0, #2
 4793 005c 1988     		ldrh	r1, [r3]
 4794 005e 0139     		subs	r1, r1, #1
 4795 0060 89B2     		uxth	r1, r1
 4796 0062 FFF7FEFF 		bl	cc2400_set
 4797              	.LVL525:
1543:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 4798              		.loc 1 1543 0
 4799 0066 6120     		movs	r0, #97
 4800 0068 FFF7FEFF 		bl	cc2400_strobe
 4801              	.LVL526:
 4802              	.L520:
1544:bluetooth_rxtx.c **** 
 4803              		.loc 1 1544 0 discriminator 1
 4804 006c FFF7FEFF 		bl	cc2400_status
 4805              	.LVL527:
 4806 0070 4307     		lsls	r3, r0, #29
 4807 0072 FBD5     		bpl	.L520
1547:bluetooth_rxtx.c **** 
 4808              		.loc 1 1547 0
 4809 0074 6220     		movs	r0, #98
 4810 0076 FFF7FEFF 		bl	cc2400_strobe
 4811              	.LVL528:
1549:bluetooth_rxtx.c **** 		}
 4812              		.loc 1 1549 0
 4813 007a 0023     		movs	r3, #0
 4814 007c E381     		strh	r3, [r4, #14]	@ movhi
 4815              	.L518:
1552:bluetooth_rxtx.c **** 			hop();
 4816              		.loc 1 1552 0
 4817 007e E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 141


 4818 0080 13B1     		cbz	r3, .L521
1553:bluetooth_rxtx.c **** 		} else {
 4819              		.loc 1 1553 0
 4820 0082 FFF7FEFF 		bl	hop
 4821              	.LVL529:
 4822 0086 02E0     		b	.L522
 4823              	.L521:
1555:bluetooth_rxtx.c **** 		}
 4824              		.loc 1 1555 0
 4825 0088 4FF48073 		mov	r3, #256
 4826 008c 3B60     		str	r3, [r7]
 4827              	.L522:
1558:bluetooth_rxtx.c **** 
 4828              		.loc 1 1558 0
 4829 008e 1023     		movs	r3, #16
 4830 0090 3B60     		str	r3, [r7]
1561:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 4831              		.loc 1 1561 0
 4832 0092 FFF7FEFF 		bl	rssi_reset
 4833              	.LVL530:
1562:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 4834              		.loc 1 1562 0
 4835 0096 8025     		movs	r5, #128
 4836              	.LVL531:
 4837              	.L523:
1563:bluetooth_rxtx.c **** 		{
 4838              		.loc 1 1563 0
 4839 0098 494B     		ldr	r3, .L561+16
 4840 009a DFF84491 		ldr	r9, .L561+48
 4841 009e 1A68     		ldr	r2, [r3]
 4842 00a0 9846     		mov	r8, r3
 4843 00a2 D2B9     		cbnz	r2, .L525
1563:bluetooth_rxtx.c **** 		{
 4844              		.loc 1 1563 0 is_stmt 0 discriminator 1
 4845 00a4 D9F80030 		ldr	r3, [r9]
 4846 00a8 BBB9     		cbnz	r3, .L525
1565:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 4847              		.loc 1 1565 0 is_stmt 1
 4848 00aa 0620     		movs	r0, #6
 4849 00ac FFF7FEFF 		bl	cc2400_get
 4850              	.LVL532:
1566:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4851              		.loc 1 1566 0
 4852 00b0 444B     		ldr	r3, .L561+20
1565:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 4853              		.loc 1 1565 0
 4854 00b2 C0F30720 		ubfx	r0, r0, #8, #8
 4855              	.LVL533:
1566:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4856              		.loc 1 1566 0
 4857 00b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4858 00b8 5BB1     		cbz	r3, .L524
1566:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4859              		.loc 1 1566 0 is_stmt 0 discriminator 1
 4860 00ba 802D     		cmp	r5, #128
 4861 00bc 09D1     		bne	.L524
1567:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 142


 4862              		.loc 1 1567 0 is_stmt 1
 4863 00be 424B     		ldr	r3, .L561+24
 4864 00c0 40B2     		sxtb	r0, r0
 4865 00c2 93F90050 		ldrsb	r5, [r3]
 4866              	.LVL534:
 4867 00c6 3635     		adds	r5, r5, #54
 4868 00c8 A842     		cmp	r0, r5
 4869 00ca B8BF     		it	lt
 4870 00cc 2846     		movlt	r0, r5
 4871              	.LVL535:
 4872 00ce C5B2     		uxtb	r5, r0
1568:bluetooth_rxtx.c **** 			}
 4873              		.loc 1 1568 0
 4874 00d0 2846     		mov	r0, r5
 4875              	.L524:
 4876              	.LVL536:
1570:bluetooth_rxtx.c **** 		}
 4877              		.loc 1 1570 0
 4878 00d2 40B2     		sxtb	r0, r0
 4879 00d4 FFF7FEFF 		bl	rssi_add
 4880              	.LVL537:
 4881 00d8 DEE7     		b	.L523
 4882              	.L525:
1573:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4883              		.loc 1 1573 0
 4884 00da D9F80030 		ldr	r3, [r9]
 4885 00de 1BB1     		cbz	r3, .L527
1574:bluetooth_rxtx.c **** 		}
 4886              		.loc 1 1574 0
 4887 00e0 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4888 00e2 43F00203 		orr	r3, r3, #2
 4889 00e6 6370     		strb	r3, [r4, #1]
 4890              	.L527:
1578:bluetooth_rxtx.c **** 			goto rx_continue;
 4891              		.loc 1 1578 0
 4892 00e8 D8F80030 		ldr	r3, [r8]
 4893 00ec 002B     		cmp	r3, #0
 4894 00ee 59D0     		beq	.L528
1582:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4895              		.loc 1 1582 0
 4896 00f0 334B     		ldr	r3, .L561+16
 4897 00f2 1B68     		ldr	r3, [r3]
 4898 00f4 012B     		cmp	r3, #1
1583:bluetooth_rxtx.c **** 
 4899              		.loc 1 1583 0
 4900 00f6 82BF     		ittt	hi
 4901 00f8 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 4902 00fa 43F00103 		orrhi	r3, r3, #1
 4903 00fe 6370     		strbhi	r3, [r4, #1]
1585:bluetooth_rxtx.c **** 
 4904              		.loc 1 1585 0
 4905 0100 2E4B     		ldr	r3, .L561+12
 4906 0102 1888     		ldrh	r0, [r3]
 4907 0104 80B2     		uxth	r0, r0
 4908 0106 FFF7FEFF 		bl	rssi_iir_update
 4909              	.LVL538:
1591:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 143


 4910              		.loc 1 1591 0
 4911 010a 2E4A     		ldr	r2, .L561+20
 4912 010c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4913 010e 13B9     		cbnz	r3, .L530
1591:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4914              		.loc 1 1591 0 is_stmt 0 discriminator 1
 4915 0110 2E4B     		ldr	r3, .L561+28
 4916 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4917 0114 33B1     		cbz	r3, .L531
 4918              	.L530:
1592:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4919              		.loc 1 1592 0 is_stmt 1
 4920 0116 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1593:bluetooth_rxtx.c **** 			cs_trigger = 0;
 4921              		.loc 1 1593 0
 4922 0118 0226     		movs	r6, #2
 4923              	.LVL539:
1592:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4924              		.loc 1 1592 0
 4925 011a 43F00803 		orr	r3, r3, #8
 4926 011e 6370     		strb	r3, [r4, #1]
 4927              	.LVL540:
1594:bluetooth_rxtx.c **** 		}
 4928              		.loc 1 1594 0
 4929 0120 0023     		movs	r3, #0
 4930 0122 1370     		strb	r3, [r2]
 4931              	.LVL541:
 4932              	.L531:
1597:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4933              		.loc 1 1597 0
 4934 0124 284B     		ldr	r3, .L561+24
 4935 0126 2A4A     		ldr	r2, .L561+32
 4936 0128 93F90030 		ldrsb	r3, [r3]
 4937 012c 92F90020 		ldrsb	r2, [r2]
 4938 0130 3533     		adds	r3, r3, #53
 4939 0132 9342     		cmp	r3, r2
 4940 0134 05DA     		bge	.L532
1598:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4941              		.loc 1 1598 0
 4942 0136 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1599:bluetooth_rxtx.c **** 		}
 4943              		.loc 1 1599 0
 4944 0138 0226     		movs	r6, #2
 4945              	.LVL542:
1598:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4946              		.loc 1 1598 0
 4947 013a 43F01003 		orr	r3, r3, #16
 4948 013e 6370     		strb	r3, [r4, #1]
 4949              	.LVL543:
 4950 0140 00E0     		b	.L533
 4951              	.LVL544:
 4952              	.L532:
1603:bluetooth_rxtx.c **** 			goto rx_continue;
 4953              		.loc 1 1603 0
 4954 0142 7EB3     		cbz	r6, .L528
 4955              	.LVL545:
 4956              	.L533:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 144


1609:bluetooth_rxtx.c **** 
 4957              		.loc 1 1609 0
 4958 0144 2348     		ldr	r0, .L561+36
 4959 0146 4FF4C872 		mov	r2, #400
1606:bluetooth_rxtx.c **** 
 4960              		.loc 1 1606 0
 4961 014a 013E     		subs	r6, r6, #1
 4962              	.LVL546:
1609:bluetooth_rxtx.c **** 
 4963              		.loc 1 1609 0
 4964 014c 00F5C871 		add	r1, r0, #400
 4965 0150 FFF7FEFF 		bl	memcpy
 4966              	.LVL547:
1606:bluetooth_rxtx.c **** 
 4967              		.loc 1 1606 0
 4968 0154 F6B2     		uxtb	r6, r6
 4969              	.LVL548:
1612:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 4970              		.loc 1 1612 0
 4971 0156 0022     		movs	r2, #0
 4972              	.LVL549:
 4973              	.L534:
 4974 0158 1E4B     		ldr	r3, .L561+36
 4975 015a 02F13200 		add	r0, r2, #50
 4976 015e 03EBC000 		add	r0, r3, r0, lsl #3
1599:bluetooth_rxtx.c **** 		}
 4977              		.loc 1 1599 0
 4978 0162 0021     		movs	r1, #0
 4979              	.LVL550:
 4980              	.L535:
1615:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 4981              		.loc 1 1615 0 discriminator 3
 4982 0164 1C4D     		ldr	r5, .L561+40
 4983 0166 2B68     		ldr	r3, [r5]
 4984 0168 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
1616:bluetooth_rxtx.c **** 			}
 4985              		.loc 1 1616 0 discriminator 3
 4986 016a 2D68     		ldr	r5, [r5]
1615:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 4987              		.loc 1 1615 0 discriminator 3
 4988 016c DB09     		lsrs	r3, r3, #7
 4989 016e 4354     		strb	r3, [r0, r1]
1616:bluetooth_rxtx.c **** 			}
 4990              		.loc 1 1616 0 discriminator 3
 4991 0170 AB5C     		ldrb	r3, [r5, r2]	@ zero_extendqisi2
1614:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 4992              		.loc 1 1614 0 discriminator 3
 4993 0172 0131     		adds	r1, r1, #1
 4994              	.LVL551:
1616:bluetooth_rxtx.c **** 			}
 4995              		.loc 1 1616 0 discriminator 3
 4996 0174 5B00     		lsls	r3, r3, #1
 4997 0176 DBB2     		uxtb	r3, r3
1614:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 4998              		.loc 1 1614 0 discriminator 3
 4999 0178 0829     		cmp	r1, #8
1616:bluetooth_rxtx.c **** 			}
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 145


 5000              		.loc 1 1616 0 discriminator 3
 5001 017a AB54     		strb	r3, [r5, r2]
1614:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 5002              		.loc 1 1614 0 discriminator 3
 5003 017c F2D1     		bne	.L535
1612:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 5004              		.loc 1 1612 0 discriminator 2
 5005 017e 0132     		adds	r2, r2, #1
 5006              	.LVL552:
 5007 0180 322A     		cmp	r2, #50
 5008 0182 E9D1     		bne	.L534
1620:bluetooth_rxtx.c **** 		if (!ret) break;
 5009              		.loc 1 1620 0
 5010 0184 A36A     		ldr	r3, [r4, #40]
 5011 0186 1348     		ldr	r0, .L561+36
 5012 0188 9847     		blx	r3
 5013              	.LVL553:
1621:bluetooth_rxtx.c **** 
 5014              		.loc 1 1621 0
 5015 018a 58B9     		cbnz	r0, .L528
 5016              	.LVL554:
 5017              	.L538:
 5018              	.LBE40:
1629:bluetooth_rxtx.c **** 
 5019              		.loc 1 1629 0
 5020 018c 134B     		ldr	r3, .L561+44
 5021 018e 4FF08072 		mov	r2, #16777216
 5022 0192 1A60     		str	r2, [r3]
1632:bluetooth_rxtx.c **** 	dio_ssp_stop();
 5023              		.loc 1 1632 0
 5024 0194 FFF7FEFF 		bl	cc2400_idle
 5025              	.LVL555:
1633:bluetooth_rxtx.c **** 	cs_trigger_disable();
 5026              		.loc 1 1633 0
 5027 0198 FFF7FEFF 		bl	dio_ssp_stop
 5028              	.LVL556:
1635:bluetooth_rxtx.c **** 
 5029              		.loc 1 1635 0
 5030 019c BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 5031              		.cfi_remember_state
 5032              		.cfi_restore 14
 5033              		.cfi_restore 10
 5034              		.cfi_restore 9
 5035              		.cfi_restore 8
 5036              		.cfi_restore 7
 5037              		.cfi_restore 6
 5038              		.cfi_restore 5
 5039              		.cfi_restore 4
 5040              		.cfi_def_cfa_offset 0
 5041              	.LVL557:
1634:bluetooth_rxtx.c **** }
 5042              		.loc 1 1634 0
 5043 01a0 FFF7FEBF 		b	cs_trigger_disable
 5044              	.LVL558:
 5045              	.L528:
 5046              		.cfi_restore_state
 5047              	.LBB41:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 146


1624:bluetooth_rxtx.c **** 		rx_err = 0;
 5048              		.loc 1 1624 0
 5049 01a4 0023     		movs	r3, #0
 5050 01a6 C8F80030 		str	r3, [r8]
1625:bluetooth_rxtx.c **** 	}
 5051              		.loc 1 1625 0
 5052 01aa C9F80030 		str	r3, [r9]
 5053 01ae 44E7     		b	.L517
 5054              	.L562:
 5055              		.align	2
 5056              	.L561:
 5057 01b0 00000000 		.word	.LANCHOR0
 5058 01b4 00E100E0 		.word	-536813312
 5059 01b8 3CC00920 		.word	537509948
 5060 01bc 00000000 		.word	.LANCHOR1
 5061 01c0 00000000 		.word	rx_tc
 5062 01c4 00000000 		.word	cs_trigger
 5063 01c8 00000000 		.word	cs_threshold_cur
 5064 01cc 00000000 		.word	cs_no_squelch
 5065 01d0 00000000 		.word	rssi_max
 5066 01d4 00000000 		.word	unpacked
 5067 01d8 00000000 		.word	idle_rxbuf
 5068 01dc 80E100E0 		.word	-536813184
 5069 01e0 00000000 		.word	rx_err
 5070              	.LBE41:
 5071              		.cfi_endproc
 5072              	.LFE21:
 5074              		.section	.text.bt_le_sync,"ax",%progbits
 5075              		.align	1
 5076              		.global	bt_le_sync
 5077              		.thumb
 5078              		.thumb_func
 5080              	bt_le_sync:
 5081              	.LFB22:
1639:bluetooth_rxtx.c **** 	int i;
 5082              		.loc 1 1639 0
 5083              		.cfi_startproc
 5084              		@ args = 0, pretend = 0, frame = 72
 5085              		@ frame_needed = 0, uses_anonymous_args = 0
 5086              	.LVL559:
 5087 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5088              		.cfi_def_cfa_offset 36
 5089              		.cfi_offset 4, -36
 5090              		.cfi_offset 5, -32
 5091              		.cfi_offset 6, -28
 5092              		.cfi_offset 7, -24
 5093              		.cfi_offset 8, -20
 5094              		.cfi_offset 9, -16
 5095              		.cfi_offset 10, -12
 5096              		.cfi_offset 11, -8
 5097              		.cfi_offset 14, -4
 5098 0004 93B0     		sub	sp, sp, #76
 5099              		.cfi_def_cfa_offset 112
1644:bluetooth_rxtx.c **** 	mode = active_mode;
 5100              		.loc 1 1644 0
 5101 0006 A74D     		ldr	r5, .L633
1647:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 147


 5102              		.loc 1 1647 0
 5103 0008 A74C     		ldr	r4, .L633+4
1644:bluetooth_rxtx.c **** 	mode = active_mode;
 5104              		.loc 1 1644 0
 5105 000a 0123     		movs	r3, #1
 5106 000c 2B70     		strb	r3, [r5]
1647:bluetooth_rxtx.c **** 
 5107              		.loc 1 1647 0
 5108 000e 2376     		strb	r3, [r4, #24]
1650:bluetooth_rxtx.c **** 
 5109              		.loc 1 1650 0
 5110 0010 A64B     		ldr	r3, .L633+8
 5111 0012 4FF08072 		mov	r2, #16777216
1652:bluetooth_rxtx.c **** 
 5112              		.loc 1 1652 0
 5113 0016 A64E     		ldr	r6, .L633+12
1645:bluetooth_rxtx.c **** 
 5114              		.loc 1 1645 0
 5115 0018 6874     		strb	r0, [r5, #17]
1650:bluetooth_rxtx.c **** 
 5116              		.loc 1 1650 0
 5117 001a 1A60     		str	r2, [r3]
1652:bluetooth_rxtx.c **** 
 5118              		.loc 1 1652 0
 5119 001c 1023     		movs	r3, #16
 5120 001e 3360     		str	r3, [r6]
1639:bluetooth_rxtx.c **** 	int i;
 5121              		.loc 1 1639 0
 5122 0020 8046     		mov	r8, r0
1654:bluetooth_rxtx.c **** 	dio_ssp_init();
 5123              		.loc 1 1654 0
 5124 0022 FFF7FEFF 		bl	queue_init
 5125              	.LVL560:
1655:bluetooth_rxtx.c **** 	dma_init_le();
 5126              		.loc 1 1655 0
 5127 0026 FFF7FEFF 		bl	dio_ssp_init
 5128              	.LVL561:
1656:bluetooth_rxtx.c **** 	dio_ssp_start();
 5129              		.loc 1 1656 0
 5130 002a FFF7FEFF 		bl	dma_init_le
 5131              	.LVL562:
1657:bluetooth_rxtx.c **** 
 5132              		.loc 1 1657 0
 5133 002e FFF7FEFF 		bl	dio_ssp_start
 5134              	.LVL563:
1659:bluetooth_rxtx.c **** 
 5135              		.loc 1 1659 0
 5136 0032 6068     		ldr	r0, [r4, #4]
 5137 0034 FFF7FEFF 		bl	rbit
 5138              	.LVL564:
 5139 0038 FFF7FEFF 		bl	cc2400_rx_sync
 5140              	.LVL565:
 5141 003c B146     		mov	r9, r6
 5142              	.L564:
1661:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5143              		.loc 1 1661 0
 5144 003e AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 148


 5145 0040 4345     		cmp	r3, r8
 5146 0042 40F0A281 		bne	.L597
 5147              	.LBB42:
1662:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5148              		.loc 1 1662 0
 5149 0046 974B     		ldr	r3, .L633
 5150 0048 DB89     		ldrh	r3, [r3, #14]
 5151 004a 9BB2     		uxth	r3, r3
 5152 004c C3B1     		cbz	r3, .L565
1663:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5153              		.loc 1 1663 0
 5154 004e 6420     		movs	r0, #100
 5155 0050 FFF7FEFF 		bl	cc2400_strobe
 5156              	.LVL566:
 5157              	.L566:
1664:bluetooth_rxtx.c **** 
 5158              		.loc 1 1664 0 discriminator 1
 5159 0054 FFF7FEFF 		bl	cc2400_status
 5160              	.LVL567:
 5161 0058 4707     		lsls	r7, r0, #29
 5162 005a FBD4     		bmi	.L566
1667:bluetooth_rxtx.c **** 
 5163              		.loc 1 1667 0
 5164 005c 2188     		ldrh	r1, [r4]
 5165 005e 0220     		movs	r0, #2
 5166 0060 0139     		subs	r1, r1, #1
 5167 0062 89B2     		uxth	r1, r1
 5168 0064 FFF7FEFF 		bl	cc2400_set
 5169              	.LVL568:
1670:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 5170              		.loc 1 1670 0
 5171 0068 6120     		movs	r0, #97
 5172 006a FFF7FEFF 		bl	cc2400_strobe
 5173              	.LVL569:
 5174              	.L567:
1671:bluetooth_rxtx.c **** 
 5175              		.loc 1 1671 0 discriminator 1
 5176 006e FFF7FEFF 		bl	cc2400_status
 5177              	.LVL570:
 5178 0072 4607     		lsls	r6, r0, #29
 5179 0074 FBD5     		bpl	.L567
1674:bluetooth_rxtx.c **** 
 5180              		.loc 1 1674 0
 5181 0076 6220     		movs	r0, #98
 5182 0078 FFF7FEFF 		bl	cc2400_strobe
 5183              	.LVL571:
1676:bluetooth_rxtx.c **** 		}
 5184              		.loc 1 1676 0
 5185 007c 0023     		movs	r3, #0
 5186 007e EB81     		strh	r3, [r5, #14]	@ movhi
 5187              	.L565:
1679:bluetooth_rxtx.c **** 
 5188              		.loc 1 1679 0
 5189 0080 1023     		movs	r3, #16
 5190 0082 C9F80030 		str	r3, [r9]
1682:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 5191              		.loc 1 1682 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 149


 5192 0086 FFF7FEFF 		bl	rssi_reset
 5193              	.LVL572:
 5194              	.L569:
1683:bluetooth_rxtx.c **** 			;
 5195              		.loc 1 1683 0 discriminator 4
 5196 008a 8A4B     		ldr	r3, .L633+16
 5197 008c 1A68     		ldr	r2, [r3]
 5198 008e 9A46     		mov	r10, r3
 5199 0090 42B9     		cbnz	r2, .L568
1683:bluetooth_rxtx.c **** 			;
 5200              		.loc 1 1683 0 is_stmt 0 discriminator 1
 5201 0092 894B     		ldr	r3, .L633+20
 5202 0094 1B68     		ldr	r3, [r3]
 5203 0096 2BB9     		cbnz	r3, .L568
1683:bluetooth_rxtx.c **** 			;
 5204              		.loc 1 1683 0 discriminator 2
 5205 0098 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5206 009a 1BB9     		cbnz	r3, .L568
1683:bluetooth_rxtx.c **** 			;
 5207              		.loc 1 1683 0 discriminator 3
 5208 009c 814B     		ldr	r3, .L633
 5209 009e 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 5210 00a0 4345     		cmp	r3, r8
 5211 00a2 F2D0     		beq	.L569
 5212              	.L568:
1686:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5213              		.loc 1 1686 0 is_stmt 1
 5214 00a4 0620     		movs	r0, #6
 5215 00a6 FFF7FEFF 		bl	cc2400_get
 5216              	.LVL573:
1687:bluetooth_rxtx.c **** 
 5217              		.loc 1 1687 0
 5218 00aa 844B     		ldr	r3, .L633+24
1686:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5219              		.loc 1 1686 0
 5220 00ac C0F30720 		ubfx	r0, r0, #8, #8
 5221              	.LVL574:
1687:bluetooth_rxtx.c **** 
 5222              		.loc 1 1687 0
 5223 00b0 1870     		strb	r0, [r3]
 5224 00b2 834B     		ldr	r3, .L633+28
1689:bluetooth_rxtx.c **** 			goto cleanup;
 5225              		.loc 1 1689 0
 5226 00b4 7B4A     		ldr	r2, .L633
1687:bluetooth_rxtx.c **** 
 5227              		.loc 1 1687 0
 5228 00b6 1870     		strb	r0, [r3]
1689:bluetooth_rxtx.c **** 			goto cleanup;
 5229              		.loc 1 1689 0
 5230 00b8 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 5231 00ba 4345     		cmp	r3, r8
 5232 00bc 40F06581 		bne	.L597
1693:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5233              		.loc 1 1693 0
 5234 00c0 DFF8F4B1 		ldr	fp, .L633+20
 5235 00c4 DBF80030 		ldr	r3, [fp]
 5236 00c8 DC46     		mov	ip, fp
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 150


 5237 00ca 1BB1     		cbz	r3, .L571
1694:bluetooth_rxtx.c **** 		}
 5238              		.loc 1 1694 0
 5239 00cc 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 5240 00ce 43F00203 		orr	r3, r3, #2
 5241 00d2 5370     		strb	r3, [r2, #1]
 5242              	.L571:
1697:bluetooth_rxtx.c **** 			goto rx_flush;
 5243              		.loc 1 1697 0
 5244 00d4 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5245 00d6 03F0FF01 		and	r1, r3, #255
 5246 00da 002B     		cmp	r3, #0
 5247 00dc 40F0A680 		bne	.L573
1701:bluetooth_rxtx.c **** 			continue;
 5248              		.loc 1 1701 0
 5249 00e0 DAF80030 		ldr	r3, [r10]
 5250 00e4 002B     		cmp	r3, #0
 5251 00e6 AAD0     		beq	.L564
1707:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 5252              		.loc 1 1707 0
 5253 00e8 3422     		movs	r2, #52
 5254 00ea 05A8     		add	r0, sp, #20
 5255              	.LVL575:
 5256 00ec CDF80CC0 		str	ip, [sp, #12]
 5257 00f0 FFF7FEFF 		bl	memset
 5258              	.LVL576:
1711:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5259              		.loc 1 1711 0
 5260 00f4 2088     		ldrh	r0, [r4]
1709:bluetooth_rxtx.c **** 
 5261              		.loc 1 1709 0
 5262 00f6 6368     		ldr	r3, [r4, #4]
1711:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5263              		.loc 1 1711 0
 5264 00f8 6238     		subs	r0, r0, #98
 5265 00fa C0B2     		uxtb	r0, r0
1709:bluetooth_rxtx.c **** 
 5266              		.loc 1 1709 0
 5267 00fc 0593     		str	r3, [sp, #20]
1711:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5268              		.loc 1 1711 0
 5269 00fe FFF7FEFF 		bl	btle_channel_index
 5270              	.LVL577:
 5271 0102 3026     		movs	r6, #48
 5272 0104 4643     		muls	r6, r0, r6
 5273 0106 6F4F     		ldr	r7, .L633+32
 5274 0108 BB19     		adds	r3, r7, r6
 5275 010a 0193     		str	r3, [sp, #4]
 5276              	.LVL578:
 5277              	.LBB43:
1713:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5278              		.loc 1 1713 0
 5279 010c 6E4B     		ldr	r3, .L633+36
 5280              	.LVL579:
 5281 010e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
1714:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5282              		.loc 1 1714 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 151


 5283 0110 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
1715:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 5284              		.loc 1 1715 0
 5285 0112 93F802E0 		ldrb	lr, [r3, #2]	@ zero_extendqisi2
1714:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5286              		.loc 1 1714 0
 5287 0116 1204     		lsls	r2, r2, #16
1716:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5288              		.loc 1 1716 0
 5289 0118 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 5290              	.LVL580:
1714:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5291              		.loc 1 1714 0
 5292 011a 42EA0060 		orr	r0, r2, r0, lsl #24
 5293 011e 0843     		orrs	r0, r0, r1
1717:bluetooth_rxtx.c **** 		}
 5294              		.loc 1 1717 0
 5295 0120 40EA0E20 		orr	r0, r0, lr, lsl #8
1716:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5296              		.loc 1 1716 0
 5297 0124 0293     		str	r3, [sp, #8]
1717:bluetooth_rxtx.c **** 		}
 5298              		.loc 1 1717 0
 5299 0126 FFF7FEFF 		bl	rbit
 5300              	.LVL581:
 5301 012a BE59     		ldr	r6, [r7, r6]
 5302              	.LBE43:
1721:bluetooth_rxtx.c **** 			goto rx_flush;
 5303              		.loc 1 1721 0
 5304 012c 029B     		ldr	r3, [sp, #8]
 5305              	.LBB44:
1717:bluetooth_rxtx.c **** 		}
 5306              		.loc 1 1717 0
 5307 012e 7040     		eors	r0, r0, r6
 5308              	.LBE44:
1720:bluetooth_rxtx.c **** 		if (len > 39)
 5309              		.loc 1 1720 0
 5310 0130 C0F30526 		ubfx	r6, r0, #8, #6
 5311 0134 B71C     		adds	r7, r6, #2
1721:bluetooth_rxtx.c **** 			goto rx_flush;
 5312              		.loc 1 1721 0
 5313 0136 272F     		cmp	r7, #39
 5314              	.LBB45:
1717:bluetooth_rxtx.c **** 		}
 5315              		.loc 1 1717 0
 5316 0138 0690     		str	r0, [sp, #24]
 5317              	.LVL582:
 5318              	.LBE45:
1721:bluetooth_rxtx.c **** 			goto rx_flush;
 5319              		.loc 1 1721 0
 5320 013a DDF80CC0 		ldr	ip, [sp, #12]
 5321 013e 75DC     		bgt	.L573
1726:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 5322              		.loc 1 1726 0
 5323 0140 0836     		adds	r6, r6, #8
 5324 0142 B208     		lsrs	r2, r6, #2
 5325              	.LVL583:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 152


1727:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 5326              		.loc 1 1727 0
 5327 0144 0B2A     		cmp	r2, #11
 5328 0146 0DD0     		beq	.L577
1728:bluetooth_rxtx.c **** 				;
 5329              		.loc 1 1728 0
 5330 0148 03EB8203 		add	r3, r3, r2, lsl #2
 5331              	.LVL584:
 5332              	.L579:
1728:bluetooth_rxtx.c **** 				;
 5333              		.loc 1 1728 0 is_stmt 0 discriminator 2
 5334 014c 5F4A     		ldr	r2, .L633+40
 5335 014e 1268     		ldr	r2, [r2]
 5336 0150 9A42     		cmp	r2, r3
 5337 0152 0BD2     		bcs	.L578
1728:bluetooth_rxtx.c **** 				;
 5338              		.loc 1 1728 0 discriminator 1
 5339 0154 DCF80020 		ldr	r2, [ip]
 5340 0158 002A     		cmp	r2, #0
 5341 015a F7D0     		beq	.L579
 5342 015c 06E0     		b	.L578
 5343              	.LVL585:
 5344              	.L631:
1731:bluetooth_rxtx.c **** 				;
 5345              		.loc 1 1731 0 is_stmt 1 discriminator 1
 5346 015e DCF80030 		ldr	r3, [ip]
 5347 0162 1BB9     		cbnz	r3, .L578
 5348              	.L577:
1731:bluetooth_rxtx.c **** 				;
 5349              		.loc 1 1731 0 is_stmt 0 discriminator 2
 5350 0164 5A4B     		ldr	r3, .L633+44
 5351 0166 1B68     		ldr	r3, [r3]
 5352 0168 D807     		lsls	r0, r3, #31
 5353 016a F8D4     		bmi	.L631
 5354              	.LVL586:
 5355              	.L578:
1734:bluetooth_rxtx.c **** 
 5356              		.loc 1 1734 0 is_stmt 1
 5357 016c 594A     		ldr	r2, .L633+48
1737:bluetooth_rxtx.c **** 
 5358              		.loc 1 1737 0
 5359 016e 6120     		movs	r0, #97
1734:bluetooth_rxtx.c **** 
 5360              		.loc 1 1734 0
 5361 0170 1368     		ldr	r3, [r2]
 5362 0172 23F00103 		bic	r3, r3, #1
 5363 0176 1360     		str	r3, [r2]
1737:bluetooth_rxtx.c **** 
 5364              		.loc 1 1737 0
 5365 0178 FFF7FEFF 		bl	cc2400_strobe
 5366              	.LVL587:
1740:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5367              		.loc 1 1740 0
 5368 017c 0423     		movs	r3, #4
 5369              	.LVL588:
 5370              	.L580:
 5371              	.LBB46:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 153


1741:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5372              		.loc 1 1741 0 discriminator 3
 5373 017e 5249     		ldr	r1, .L633+36
 5374 0180 581C     		adds	r0, r3, #1
 5375 0182 CA5C     		ldrb	r2, [r1, r3]	@ zero_extendqisi2
 5376 0184 03F1030E 		add	lr, r3, #3
1742:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5377              		.loc 1 1742 0 discriminator 3
 5378 0188 11F800C0 		ldrb	ip, [r1, r0]	@ zero_extendqisi2
 5379 018c 981C     		adds	r0, r3, #2
1743:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 5380              		.loc 1 1743 0 discriminator 3
 5381 018e 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
1744:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5382              		.loc 1 1744 0 discriminator 3
 5383 0190 11F80EE0 		ldrb	lr, [r1, lr]	@ zero_extendqisi2
 5384              	.LVL589:
1745:bluetooth_rxtx.c **** 		}
 5385              		.loc 1 1745 0 discriminator 3
 5386 0194 9910     		asrs	r1, r3, #2
 5387 0196 4EEA0262 		orr	r2, lr, r2, lsl #24
 5388              	.LVL590:
 5389 019a 42EA0C42 		orr	r2, r2, ip, lsl #16
 5390 019e 42EA0020 		orr	r0, r2, r0, lsl #8
 5391 01a2 0393     		str	r3, [sp, #12]
 5392 01a4 0291     		str	r1, [sp, #8]
 5393 01a6 FFF7FEFF 		bl	rbit
 5394              	.LVL591:
 5395 01aa 0299     		ldr	r1, [sp, #8]
 5396 01ac 12AB     		add	r3, sp, #72
 5397 01ae 03EB810E 		add	lr, r3, r1, lsl #2
 5398 01b2 019B     		ldr	r3, [sp, #4]
 5399 01b4 53F82120 		ldr	r2, [r3, r1, lsl #2]
 5400              	.LBE46:
1740:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5401              		.loc 1 1740 0 discriminator 3
 5402 01b8 039B     		ldr	r3, [sp, #12]
 5403              	.LBB47:
1745:bluetooth_rxtx.c **** 		}
 5404              		.loc 1 1745 0 discriminator 3
 5405 01ba 5040     		eors	r0, r0, r2
 5406              	.LBE47:
1740:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5407              		.loc 1 1740 0 discriminator 3
 5408 01bc 0433     		adds	r3, r3, #4
 5409              	.LVL592:
 5410 01be 2C2B     		cmp	r3, #44
 5411              	.LBB48:
1745:bluetooth_rxtx.c **** 		}
 5412              		.loc 1 1745 0 discriminator 3
 5413 01c0 4EF8300C 		str	r0, [lr, #-48]
 5414              	.LBE48:
1740:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5415              		.loc 1 1740 0 discriminator 3
 5416 01c4 DBD1     		bne	.L580
1748:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 5417              		.loc 1 1748 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 154


 5418 01c6 6369     		ldr	r3, [r4, #20]
 5419              	.LVL593:
 5420 01c8 DBB9     		cbnz	r3, .L581
 5421              	.LVL594:
 5422              	.L582:
1758:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 5423              		.loc 1 1758 0
 5424 01ca 434B     		ldr	r3, .L633+52
 5425 01cc 1022     		movs	r2, #16
 5426 01ce 1A60     		str	r2, [r3]
1759:bluetooth_rxtx.c **** 
 5427              		.loc 1 1759 0
 5428 01d0 05A8     		add	r0, sp, #20
 5429              	.LVL595:
 5430 01d2 AB69     		ldr	r3, [r5, #24]
 5431 01d4 9847     		blx	r3
 5432              	.LVL596:
1762:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 5433              		.loc 1 1762 0
 5434 01d6 414B     		ldr	r3, .L633+56
 5435 01d8 4FF08076 		mov	r6, #16777216
 5436 01dc 1E60     		str	r6, [r3]
1763:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 5437              		.loc 1 1763 0
 5438 01de 05A9     		add	r1, sp, #20
 5439              	.LVL597:
 5440 01e0 0120     		movs	r0, #1
 5441 01e2 FFF7FEFF 		bl	enqueue
 5442              	.LVL598:
1766:bluetooth_rxtx.c **** 
 5443              		.loc 1 1766 0
 5444 01e6 40F63541 		movw	r1, #3125
1764:bluetooth_rxtx.c **** 
 5445              		.loc 1 1764 0
 5446 01ea 304B     		ldr	r3, .L633+8
 5447 01ec 1E60     		str	r6, [r3]
1766:bluetooth_rxtx.c **** 
 5448              		.loc 1 1766 0
 5449 01ee 3C4B     		ldr	r3, .L633+60
 5450 01f0 1A68     		ldr	r2, [r3]
 5451 01f2 3C4B     		ldr	r3, .L633+64
 5452 01f4 C2F31302 		ubfx	r2, r2, #0, #20
 5453 01f8 1B68     		ldr	r3, [r3]
 5454 01fa 01FB0233 		mla	r3, r1, r2, r3
 5455 01fe 6364     		str	r3, [r4, #68]
 5456 0200 14E0     		b	.L573
 5457              	.LVL599:
 5458              	.L581:
 5459              	.LBB49:
1749:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 5460              		.loc 1 1749 0
 5461 0202 294B     		ldr	r3, .L633+4
 5462 0204 3A46     		mov	r2, r7
 5463 0206 1869     		ldr	r0, [r3, #16]
 5464 0208 06A9     		add	r1, sp, #24
 5465 020a FFF7FEFF 		bl	btle_crcgen_lut
 5466              	.LVL600:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 155


1750:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5467              		.loc 1 1750 0
 5468 020e 12AB     		add	r3, sp, #72
1751:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5469              		.loc 1 1751 0
 5470 0210 1F44     		add	r7, r7, r3
 5471              	.LVL601:
1750:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5472              		.loc 1 1750 0
 5473 0212 1E44     		add	r6, r6, r3
 5474              	.LVL602:
1751:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5475              		.loc 1 1751 0
 5476 0214 17F82F3C 		ldrb	r3, [r7, #-47]	@ zero_extendqisi2
1750:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5477              		.loc 1 1750 0
 5478 0218 16F8342C 		ldrb	r2, [r6, #-52]	@ zero_extendqisi2
1751:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5479              		.loc 1 1751 0
 5480 021c 1B02     		lsls	r3, r3, #8
 5481 021e 43EA0243 		orr	r3, r3, r2, lsl #16
1752:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 5482              		.loc 1 1752 0
 5483 0222 17F8302C 		ldrb	r2, [r7, #-48]	@ zero_extendqisi2
 5484 0226 1343     		orrs	r3, r3, r2
1753:bluetooth_rxtx.c **** 				goto rx_flush;
 5485              		.loc 1 1753 0
 5486 0228 9842     		cmp	r0, r3
 5487 022a CED0     		beq	.L582
 5488              	.LVL603:
 5489              	.L573:
 5490              	.LBE49:
1770:bluetooth_rxtx.c **** 
 5491              		.loc 1 1770 0
 5492 022c 6120     		movs	r0, #97
 5493 022e FFF7FEFF 		bl	cc2400_strobe
 5494              	.LVL604:
1773:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 5495              		.loc 1 1773 0
 5496 0232 284A     		ldr	r2, .L633+48
 5497 0234 1368     		ldr	r3, [r2]
 5498 0236 23F00103 		bic	r3, r3, #1
 5499 023a 1360     		str	r3, [r2]
 5500              	.L583:
1774:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 5501              		.loc 1 1774 0
 5502 023c 2A4B     		ldr	r3, .L633+68
 5503 023e 1B68     		ldr	r3, [r3]
 5504 0240 5907     		lsls	r1, r3, #29
 5505 0242 02D5     		bpl	.L632
 5506              	.LBB50:
1775:bluetooth_rxtx.c **** 		}
 5507              		.loc 1 1775 0
 5508 0244 294B     		ldr	r3, .L633+72
 5509 0246 1B68     		ldr	r3, [r3]
 5510 0248 F8E7     		b	.L583
 5511              	.L632:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 156


 5512              	.LBE50:
1779:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 5513              		.loc 1 1779 0
 5514 024a 40F63541 		movw	r1, #3125
 5515 024e 244B     		ldr	r3, .L633+60
 5516 0250 1A68     		ldr	r2, [r3]
 5517 0252 244B     		ldr	r3, .L633+64
 5518 0254 C2F31302 		ubfx	r2, r2, #0, #20
 5519 0258 1B68     		ldr	r3, [r3]
 5520 025a 01FB0233 		mla	r3, r1, r2, r3
 5521              	.LVL605:
1780:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 5522              		.loc 1 1780 0
 5523 025e 616C     		ldr	r1, [r4, #68]
1783:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 5524              		.loc 1 1783 0
 5525 0260 227E     		ldrb	r2, [r4, #24]	@ zero_extendqisi2
1780:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 5526              		.loc 1 1780 0
 5527 0262 8B42     		cmp	r3, r1
1781:bluetooth_rxtx.c **** 		if  ( // timeout
 5528              		.loc 1 1781 0
 5529 0264 38BF     		it	cc
 5530 0266 03F14343 		addcc	r3, r3, #-1023410176
 5531              	.LVL606:
1782:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 5532              		.loc 1 1782 0
 5533 026a A2F10202 		sub	r2, r2, #2
1781:bluetooth_rxtx.c **** 		if  ( // timeout
 5534              		.loc 1 1781 0
 5535 026e 38BF     		it	cc
 5536 0270 03F5A003 		addcc	r3, r3, #5242880
 5537              	.LVL607:
1782:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 5538              		.loc 1 1782 0
 5539 0274 012A     		cmp	r2, #1
 5540 0276 03D8     		bhi	.L586
1784:bluetooth_rxtx.c **** 			// jam finished
 5541              		.loc 1 1784 0
 5542 0278 1D4A     		ldr	r2, .L633+76
 5543 027a 5B1A     		subs	r3, r3, r1
 5544              	.LVL608:
 5545 027c 9342     		cmp	r3, r2
 5546 027e 02D8     		bhi	.L587
 5547              	.L586:
1786:bluetooth_rxtx.c **** 			)
 5548              		.loc 1 1786 0
 5549 0280 EB69     		ldr	r3, [r5, #28]
 5550 0282 012B     		cmp	r3, #1
 5551 0284 50D1     		bne	.L588
 5552              	.L587:
1789:bluetooth_rxtx.c **** 			le_jam_count = 0;
 5553              		.loc 1 1789 0
 5554 0286 FFF7FEFF 		bl	reset_le
 5555              	.LVL609:
1791:bluetooth_rxtx.c **** 
 5556              		.loc 1 1791 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 157


 5557 028a 4FF48071 		mov	r1, #256
1790:bluetooth_rxtx.c **** 			TXLED_CLR;
 5558              		.loc 1 1790 0
 5559 028e 0023     		movs	r3, #0
 5560 0290 EB61     		str	r3, [r5, #28]
1791:bluetooth_rxtx.c **** 
 5561              		.loc 1 1791 0
 5562 0292 C9F80010 		str	r1, [r9]
1793:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 5563              		.loc 1 1793 0
 5564 0296 E97C     		ldrb	r1, [r5, #19]	@ zero_extendqisi2
1790:bluetooth_rxtx.c **** 			TXLED_CLR;
 5565              		.loc 1 1790 0
 5566 0298 024A     		ldr	r2, .L633
1793:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 5567              		.loc 1 1793 0
 5568 029a 0129     		cmp	r1, #1
 5569 029c 2AD1     		bne	.L589
1794:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 5570              		.loc 1 1794 0
 5571 029e D374     		strb	r3, [r2, #19]
1795:bluetooth_rxtx.c **** 				goto cleanup;
 5572              		.loc 1 1795 0
 5573 02a0 9374     		strb	r3, [r2, #18]
1796:bluetooth_rxtx.c **** 			}
 5574              		.loc 1 1796 0
 5575 02a2 72E0     		b	.L597
 5576              	.L634:
 5577              		.align	2
 5578              	.L633:
 5579 02a4 00000000 		.word	.LANCHOR0
 5580 02a8 00000000 		.word	.LANCHOR1
 5581 02ac 00E100E0 		.word	-536813312
 5582 02b0 3CC00920 		.word	537509948
 5583 02b4 00000000 		.word	rx_tc
 5584 02b8 00000000 		.word	rx_err
 5585 02bc 00000000 		.word	rssi_max
 5586 02c0 00000000 		.word	rssi_min
 5587 02c4 F0000000 		.word	.LANCHOR2+240
 5588 02c8 00000000 		.word	rxbuf1
 5589 02cc 04410050 		.word	1342193924
 5590 02d0 10410050 		.word	1342193936
 5591 02d4 24000340 		.word	1073938468
 5592 02d8 38C00920 		.word	537509944
 5593 02dc 80E100E0 		.word	-536813184
 5594 02e0 00000000 		.word	clkn
 5595 02e4 08400040 		.word	1073758216
 5596 02e8 0C000340 		.word	1073938444
 5597 02ec 08000340 		.word	1073938440
 5598 02f0 80F0FA02 		.word	50000000
 5599              	.L589:
1800:bluetooth_rxtx.c **** 				goto cleanup;
 5600              		.loc 1 1800 0
 5601 02f4 B8F10A0F 		cmp	r8, #10
 5602 02f8 47D0     		beq	.L597
1803:bluetooth_rxtx.c **** 
 5603              		.loc 1 1803 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 158


 5604 02fa 0123     		movs	r3, #1
1805:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 5605              		.loc 1 1805 0
 5606 02fc 6420     		movs	r0, #100
1803:bluetooth_rxtx.c **** 
 5607              		.loc 1 1803 0
 5608 02fe 2376     		strb	r3, [r4, #24]
1805:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 5609              		.loc 1 1805 0
 5610 0300 FFF7FEFF 		bl	cc2400_strobe
 5611              	.LVL610:
 5612              	.L591:
1806:bluetooth_rxtx.c **** 
 5613              		.loc 1 1806 0 discriminator 1
 5614 0304 FFF7FEFF 		bl	cc2400_status
 5615              	.LVL611:
 5616 0308 4207     		lsls	r2, r0, #29
 5617 030a FBD4     		bmi	.L591
1809:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5618              		.loc 1 1809 0
 5619 030c B4F84A30 		ldrh	r3, [r4, #74]
 5620 0310 9BB2     		uxth	r3, r3
 5621 0312 23B1     		cbz	r3, .L599
1809:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5622              		.loc 1 1809 0 is_stmt 0 discriminator 1
 5623 0314 234B     		ldr	r3, .L635
 5624 0316 B3F84A30 		ldrh	r3, [r3, #74]
 5625 031a 9BB2     		uxth	r3, r3
 5626 031c 01E0     		b	.L592
 5627              	.L599:
1809:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5628              		.loc 1 1809 0
 5629 031e 40F66213 		movw	r3, #2402
 5630              	.L592:
1809:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5631              		.loc 1 1809 0 discriminator 4
 5632 0322 2380     		strh	r3, [r4]	@ movhi
1810:bluetooth_rxtx.c **** 		}
 5633              		.loc 1 1810 0 is_stmt 1 discriminator 4
 5634 0324 0123     		movs	r3, #1
 5635 0326 EB62     		str	r3, [r5, #44]
 5636              	.L588:
1813:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 5637              		.loc 1 1813 0
 5638 0328 2C20     		movs	r0, #44
 5639 032a 6189     		ldrh	r1, [r4, #10]
 5640 032c FFF7FEFF 		bl	cc2400_set
 5641              	.LVL612:
1814:bluetooth_rxtx.c **** 
 5642              		.loc 1 1814 0
 5643 0330 2D20     		movs	r0, #45
 5644 0332 2189     		ldrh	r1, [r4, #8]
 5645 0334 FFF7FEFF 		bl	cc2400_set
 5646              	.LVL613:
1816:bluetooth_rxtx.c **** 			hop();
 5647              		.loc 1 1816 0
 5648 0338 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 159


 5649 033a 0BB1     		cbz	r3, .L593
1817:bluetooth_rxtx.c **** 
 5650              		.loc 1 1817 0
 5651 033c FFF7FEFF 		bl	hop
 5652              	.LVL614:
 5653              	.L593:
1820:bluetooth_rxtx.c **** 			le_jam();
 5654              		.loc 1 1820 0
 5655 0340 EB69     		ldr	r3, [r5, #28]
 5656 0342 194E     		ldr	r6, .L635+4
 5657 0344 002B     		cmp	r3, #0
 5658 0346 05DD     		ble	.L594
1821:bluetooth_rxtx.c **** 			--le_jam_count;
 5659              		.loc 1 1821 0
 5660 0348 FFF7FEFF 		bl	le_jam
 5661              	.LVL615:
1822:bluetooth_rxtx.c **** 		} else {
 5662              		.loc 1 1822 0
 5663 034c F369     		ldr	r3, [r6, #28]
 5664 034e 013B     		subs	r3, r3, #1
 5665 0350 F361     		str	r3, [r6, #28]
 5666 0352 14E0     		b	.L595
 5667              	.L594:
1825:bluetooth_rxtx.c **** 			dio_ssp_start();
 5668              		.loc 1 1825 0
 5669 0354 FFF7FEFF 		bl	dma_init_le
 5670              	.LVL616:
1826:bluetooth_rxtx.c **** 
 5671              		.loc 1 1826 0
 5672 0358 FFF7FEFF 		bl	dio_ssp_start
 5673              	.LVL617:
1828:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 5674              		.loc 1 1828 0
 5675 035c F36A     		ldr	r3, [r6, #44]
 5676 035e 3BB1     		cbz	r3, .L596
1829:bluetooth_rxtx.c **** 				restart_jamming = 0;
 5677              		.loc 1 1829 0
 5678 0360 6068     		ldr	r0, [r4, #4]
 5679 0362 FFF7FEFF 		bl	rbit
 5680              	.LVL618:
 5681 0366 FFF7FEFF 		bl	cc2400_rx_sync
 5682              	.LVL619:
1830:bluetooth_rxtx.c **** 			} else {
 5683              		.loc 1 1830 0
 5684 036a 0023     		movs	r3, #0
 5685 036c F362     		str	r3, [r6, #44]
 5686 036e 06E0     		b	.L595
 5687              	.L596:
1833:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 5688              		.loc 1 1833 0 discriminator 1
 5689 0370 FFF7FEFF 		bl	cc2400_status
 5690              	.LVL620:
 5691 0374 4307     		lsls	r3, r0, #29
 5692 0376 FBD5     		bpl	.L596
1834:bluetooth_rxtx.c **** 			}
 5693              		.loc 1 1834 0
 5694 0378 6220     		movs	r0, #98
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 160


 5695 037a FFF7FEFF 		bl	cc2400_strobe
 5696              	.LVL621:
 5697              	.L595:
1838:bluetooth_rxtx.c **** 		rx_err = 0;
 5698              		.loc 1 1838 0
 5699 037e 0023     		movs	r3, #0
 5700 0380 CAF80030 		str	r3, [r10]
1839:bluetooth_rxtx.c **** 	}
 5701              		.loc 1 1839 0
 5702 0384 CBF80030 		str	r3, [fp]
 5703 0388 59E6     		b	.L564
 5704              	.L597:
 5705              	.LBE42:
1845:bluetooth_rxtx.c **** 
 5706              		.loc 1 1845 0
 5707 038a 084B     		ldr	r3, .L635+8
 5708 038c 4FF08072 		mov	r2, #16777216
 5709 0390 1A60     		str	r2, [r3]
1848:bluetooth_rxtx.c **** 	dio_ssp_stop();
 5710              		.loc 1 1848 0
 5711 0392 FFF7FEFF 		bl	cc2400_idle
 5712              	.LVL622:
1849:bluetooth_rxtx.c **** 	cs_trigger_disable();
 5713              		.loc 1 1849 0
 5714 0396 FFF7FEFF 		bl	dio_ssp_stop
 5715              	.LVL623:
1850:bluetooth_rxtx.c **** }
 5716              		.loc 1 1850 0
 5717 039a FFF7FEFF 		bl	cs_trigger_disable
 5718              	.LVL624:
1851:bluetooth_rxtx.c **** 
 5719              		.loc 1 1851 0
 5720 039e 13B0     		add	sp, sp, #76
 5721              		.cfi_def_cfa_offset 36
 5722              		@ sp needed
 5723 03a0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5724              	.L636:
 5725              		.align	2
 5726              	.L635:
 5727 03a4 00000000 		.word	.LANCHOR1
 5728 03a8 00000000 		.word	.LANCHOR0
 5729 03ac 80E100E0 		.word	-536813184
 5730              		.cfi_endproc
 5731              	.LFE22:
 5733              		.section	.text.bt_le_sync_boss_master,"ax",%progbits
 5734              		.align	1
 5735              		.global	bt_le_sync_boss_master
 5736              		.thumb
 5737              		.thumb_func
 5739              	bt_le_sync_boss_master:
 5740              	.LFB23:
1855:bluetooth_rxtx.c **** 
 5741              		.loc 1 1855 0
 5742              		.cfi_startproc
 5743              		@ args = 0, pretend = 0, frame = 72
 5744              		@ frame_needed = 0, uses_anonymous_args = 0
 5745              	.LVL625:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 161


 5746 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5747              		.cfi_def_cfa_offset 36
 5748              		.cfi_offset 4, -36
 5749              		.cfi_offset 5, -32
 5750              		.cfi_offset 6, -28
 5751              		.cfi_offset 7, -24
 5752              		.cfi_offset 8, -20
 5753              		.cfi_offset 9, -16
 5754              		.cfi_offset 10, -12
 5755              		.cfi_offset 11, -8
 5756              		.cfi_offset 14, -4
 5757 0004 93B0     		sub	sp, sp, #76
 5758              		.cfi_def_cfa_offset 112
1861:bluetooth_rxtx.c **** 	mode = active_mode;
 5759              		.loc 1 1861 0
 5760 0006 AC4D     		ldr	r5, .L709
1864:bluetooth_rxtx.c **** 
 5761              		.loc 1 1864 0
 5762 0008 AC4C     		ldr	r4, .L709+4
1861:bluetooth_rxtx.c **** 	mode = active_mode;
 5763              		.loc 1 1861 0
 5764 000a 0123     		movs	r3, #1
 5765 000c 2B70     		strb	r3, [r5]
1864:bluetooth_rxtx.c **** 
 5766              		.loc 1 1864 0
 5767 000e 2376     		strb	r3, [r4, #24]
1867:bluetooth_rxtx.c **** 
 5768              		.loc 1 1867 0
 5769 0010 AB4B     		ldr	r3, .L709+8
 5770 0012 4FF08072 		mov	r2, #16777216
1869:bluetooth_rxtx.c **** 
 5771              		.loc 1 1869 0
 5772 0016 AB4E     		ldr	r6, .L709+12
1862:bluetooth_rxtx.c **** 
 5773              		.loc 1 1862 0
 5774 0018 6874     		strb	r0, [r5, #17]
1867:bluetooth_rxtx.c **** 
 5775              		.loc 1 1867 0
 5776 001a 1A60     		str	r2, [r3]
1869:bluetooth_rxtx.c **** 
 5777              		.loc 1 1869 0
 5778 001c 1023     		movs	r3, #16
 5779 001e 3360     		str	r3, [r6]
1855:bluetooth_rxtx.c **** 
 5780              		.loc 1 1855 0
 5781 0020 8046     		mov	r8, r0
1871:bluetooth_rxtx.c **** 	dio_ssp_init();
 5782              		.loc 1 1871 0
 5783 0022 FFF7FEFF 		bl	queue_init
 5784              	.LVL626:
1872:bluetooth_rxtx.c **** 	dma_init_le();
 5785              		.loc 1 1872 0
 5786 0026 FFF7FEFF 		bl	dio_ssp_init
 5787              	.LVL627:
1873:bluetooth_rxtx.c **** 	dio_ssp_start();
 5788              		.loc 1 1873 0
 5789 002a FFF7FEFF 		bl	dma_init_le
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 162


 5790              	.LVL628:
1874:bluetooth_rxtx.c **** 
 5791              		.loc 1 1874 0
 5792 002e FFF7FEFF 		bl	dio_ssp_start
 5793              	.LVL629:
1876:bluetooth_rxtx.c **** 
 5794              		.loc 1 1876 0
 5795 0032 6068     		ldr	r0, [r4, #4]
 5796 0034 FFF7FEFF 		bl	rbit
 5797              	.LVL630:
 5798 0038 FFF7FEFF 		bl	cc2400_rx_sync
 5799              	.LVL631:
 5800 003c B146     		mov	r9, r6
 5801              	.L638:
1878:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5802              		.loc 1 1878 0
 5803 003e AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 5804 0040 4345     		cmp	r3, r8
 5805 0042 40F0AE81 		bne	.L673
 5806              	.LBB51:
1879:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5807              		.loc 1 1879 0
 5808 0046 9C4B     		ldr	r3, .L709
 5809 0048 DB89     		ldrh	r3, [r3, #14]
 5810 004a 9BB2     		uxth	r3, r3
 5811 004c C3B1     		cbz	r3, .L639
1880:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5812              		.loc 1 1880 0
 5813 004e 6420     		movs	r0, #100
 5814 0050 FFF7FEFF 		bl	cc2400_strobe
 5815              	.LVL632:
 5816              	.L640:
1881:bluetooth_rxtx.c **** 
 5817              		.loc 1 1881 0 discriminator 1
 5818 0054 FFF7FEFF 		bl	cc2400_status
 5819              	.LVL633:
 5820 0058 4707     		lsls	r7, r0, #29
 5821 005a FBD4     		bmi	.L640
1884:bluetooth_rxtx.c **** 
 5822              		.loc 1 1884 0
 5823 005c 2188     		ldrh	r1, [r4]
 5824 005e 0220     		movs	r0, #2
 5825 0060 0139     		subs	r1, r1, #1
 5826 0062 89B2     		uxth	r1, r1
 5827 0064 FFF7FEFF 		bl	cc2400_set
 5828              	.LVL634:
1887:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 5829              		.loc 1 1887 0
 5830 0068 6120     		movs	r0, #97
 5831 006a FFF7FEFF 		bl	cc2400_strobe
 5832              	.LVL635:
 5833              	.L641:
1888:bluetooth_rxtx.c **** 
 5834              		.loc 1 1888 0 discriminator 1
 5835 006e FFF7FEFF 		bl	cc2400_status
 5836              	.LVL636:
 5837 0072 4607     		lsls	r6, r0, #29
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 163


 5838 0074 FBD5     		bpl	.L641
1891:bluetooth_rxtx.c **** 
 5839              		.loc 1 1891 0
 5840 0076 6220     		movs	r0, #98
 5841 0078 FFF7FEFF 		bl	cc2400_strobe
 5842              	.LVL637:
1893:bluetooth_rxtx.c **** 		}
 5843              		.loc 1 1893 0
 5844 007c 0023     		movs	r3, #0
 5845 007e EB81     		strh	r3, [r5, #14]	@ movhi
 5846              	.L639:
1896:bluetooth_rxtx.c **** 
 5847              		.loc 1 1896 0
 5848 0080 1023     		movs	r3, #16
 5849 0082 C9F80030 		str	r3, [r9]
1899:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 5850              		.loc 1 1899 0
 5851 0086 FFF7FEFF 		bl	rssi_reset
 5852              	.LVL638:
 5853              	.L643:
1900:bluetooth_rxtx.c **** 			;
 5854              		.loc 1 1900 0 discriminator 4
 5855 008a 8F4B     		ldr	r3, .L709+16
 5856 008c 1A68     		ldr	r2, [r3]
 5857 008e 9A46     		mov	r10, r3
 5858 0090 42B9     		cbnz	r2, .L642
1900:bluetooth_rxtx.c **** 			;
 5859              		.loc 1 1900 0 is_stmt 0 discriminator 1
 5860 0092 8E4B     		ldr	r3, .L709+20
 5861 0094 1B68     		ldr	r3, [r3]
 5862 0096 2BB9     		cbnz	r3, .L642
1900:bluetooth_rxtx.c **** 			;
 5863              		.loc 1 1900 0 discriminator 2
 5864 0098 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5865 009a 1BB9     		cbnz	r3, .L642
1900:bluetooth_rxtx.c **** 			;
 5866              		.loc 1 1900 0 discriminator 3
 5867 009c 864B     		ldr	r3, .L709
 5868 009e 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 5869 00a0 4345     		cmp	r3, r8
 5870 00a2 F2D0     		beq	.L643
 5871              	.L642:
1903:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5872              		.loc 1 1903 0 is_stmt 1
 5873 00a4 0620     		movs	r0, #6
 5874 00a6 FFF7FEFF 		bl	cc2400_get
 5875              	.LVL639:
1904:bluetooth_rxtx.c **** 
 5876              		.loc 1 1904 0
 5877 00aa 894B     		ldr	r3, .L709+24
1903:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5878              		.loc 1 1903 0
 5879 00ac C0F30720 		ubfx	r0, r0, #8, #8
 5880              	.LVL640:
1904:bluetooth_rxtx.c **** 
 5881              		.loc 1 1904 0
 5882 00b0 1870     		strb	r0, [r3]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 164


 5883 00b2 884B     		ldr	r3, .L709+28
1906:bluetooth_rxtx.c **** 			goto cleanup;
 5884              		.loc 1 1906 0
 5885 00b4 804A     		ldr	r2, .L709
1904:bluetooth_rxtx.c **** 
 5886              		.loc 1 1904 0
 5887 00b6 1870     		strb	r0, [r3]
1906:bluetooth_rxtx.c **** 			goto cleanup;
 5888              		.loc 1 1906 0
 5889 00b8 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 5890 00ba 4345     		cmp	r3, r8
 5891 00bc 40F07181 		bne	.L673
1910:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5892              		.loc 1 1910 0
 5893 00c0 DFF808B2 		ldr	fp, .L709+20
 5894 00c4 DBF80030 		ldr	r3, [fp]
 5895 00c8 DC46     		mov	ip, fp
 5896 00ca 1BB1     		cbz	r3, .L645
1911:bluetooth_rxtx.c **** 		}
 5897              		.loc 1 1911 0
 5898 00cc 5378     		ldrb	r3, [r2, #1]	@ zero_extendqisi2
 5899 00ce 43F00203 		orr	r3, r3, #2
 5900 00d2 5370     		strb	r3, [r2, #1]
 5901              	.L645:
1914:bluetooth_rxtx.c **** 			goto rx_flush;
 5902              		.loc 1 1914 0
 5903 00d4 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5904 00d6 03F0FF01 		and	r1, r3, #255
 5905 00da 002B     		cmp	r3, #0
 5906 00dc 40F0B080 		bne	.L647
1918:bluetooth_rxtx.c **** 			continue;
 5907              		.loc 1 1918 0
 5908 00e0 DAF80030 		ldr	r3, [r10]
 5909 00e4 002B     		cmp	r3, #0
 5910 00e6 AAD0     		beq	.L638
1925:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 5911              		.loc 1 1925 0
 5912 00e8 3422     		movs	r2, #52
 5913 00ea 05A8     		add	r0, sp, #20
 5914              	.LVL641:
 5915 00ec CDF80CC0 		str	ip, [sp, #12]
 5916 00f0 FFF7FEFF 		bl	memset
 5917              	.LVL642:
1930:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5918              		.loc 1 1930 0
 5919 00f4 2088     		ldrh	r0, [r4]
1927:bluetooth_rxtx.c **** 
 5920              		.loc 1 1927 0
 5921 00f6 6368     		ldr	r3, [r4, #4]
1930:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5922              		.loc 1 1930 0
 5923 00f8 6238     		subs	r0, r0, #98
 5924 00fa C0B2     		uxtb	r0, r0
1927:bluetooth_rxtx.c **** 
 5925              		.loc 1 1927 0
 5926 00fc 0593     		str	r3, [sp, #20]
1930:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 165


 5927              		.loc 1 1930 0
 5928 00fe FFF7FEFF 		bl	btle_channel_index
 5929              	.LVL643:
 5930 0102 3026     		movs	r6, #48
 5931 0104 4643     		muls	r6, r0, r6
 5932 0106 744F     		ldr	r7, .L709+32
 5933 0108 BB19     		adds	r3, r7, r6
 5934 010a 0193     		str	r3, [sp, #4]
 5935              	.LVL644:
 5936              	.LBB52:
1932:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5937              		.loc 1 1932 0
 5938 010c 734B     		ldr	r3, .L709+36
 5939              	.LVL645:
 5940 010e 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5941              		.loc 1 1933 0
 5942 0110 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
1934:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 5943              		.loc 1 1934 0
 5944 0112 93F802E0 		ldrb	lr, [r3, #2]	@ zero_extendqisi2
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5945              		.loc 1 1933 0
 5946 0116 1204     		lsls	r2, r2, #16
1935:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5947              		.loc 1 1935 0
 5948 0118 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 5949              	.LVL646:
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5950              		.loc 1 1933 0
 5951 011a 42EA0060 		orr	r0, r2, r0, lsl #24
 5952 011e 0843     		orrs	r0, r0, r1
1936:bluetooth_rxtx.c **** 		}
 5953              		.loc 1 1936 0
 5954 0120 40EA0E20 		orr	r0, r0, lr, lsl #8
1935:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5955              		.loc 1 1935 0
 5956 0124 0293     		str	r3, [sp, #8]
1936:bluetooth_rxtx.c **** 		}
 5957              		.loc 1 1936 0
 5958 0126 FFF7FEFF 		bl	rbit
 5959              	.LVL647:
 5960 012a BE59     		ldr	r6, [r7, r6]
 5961              	.LBE52:
1941:bluetooth_rxtx.c **** 			goto rx_flush;
 5962              		.loc 1 1941 0
 5963 012c 029B     		ldr	r3, [sp, #8]
 5964              	.LBB53:
1936:bluetooth_rxtx.c **** 		}
 5965              		.loc 1 1936 0
 5966 012e 7040     		eors	r0, r0, r6
 5967              	.LBE53:
1940:bluetooth_rxtx.c **** 		if (len > 39)
 5968              		.loc 1 1940 0
 5969 0130 C0F30526 		ubfx	r6, r0, #8, #6
 5970 0134 B71C     		adds	r7, r6, #2
1941:bluetooth_rxtx.c **** 			goto rx_flush;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 166


 5971              		.loc 1 1941 0
 5972 0136 272F     		cmp	r7, #39
 5973              	.LBB54:
1936:bluetooth_rxtx.c **** 		}
 5974              		.loc 1 1936 0
 5975 0138 0690     		str	r0, [sp, #24]
 5976              	.LVL648:
 5977              	.LBE54:
1941:bluetooth_rxtx.c **** 			goto rx_flush;
 5978              		.loc 1 1941 0
 5979 013a DDF80CC0 		ldr	ip, [sp, #12]
 5980 013e 7FDC     		bgt	.L647
1947:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 5981              		.loc 1 1947 0
 5982 0140 0836     		adds	r6, r6, #8
 5983 0142 B208     		lsrs	r2, r6, #2
 5984              	.LVL649:
1948:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 5985              		.loc 1 1948 0
 5986 0144 0B2A     		cmp	r2, #11
 5987 0146 0DD0     		beq	.L651
1949:bluetooth_rxtx.c **** 				;
 5988              		.loc 1 1949 0
 5989 0148 03EB8203 		add	r3, r3, r2, lsl #2
 5990              	.LVL650:
 5991              	.L653:
1949:bluetooth_rxtx.c **** 				;
 5992              		.loc 1 1949 0 is_stmt 0 discriminator 2
 5993 014c 644A     		ldr	r2, .L709+40
 5994 014e 1268     		ldr	r2, [r2]
 5995 0150 9A42     		cmp	r2, r3
 5996 0152 0BD2     		bcs	.L652
1949:bluetooth_rxtx.c **** 				;
 5997              		.loc 1 1949 0 discriminator 1
 5998 0154 DCF80020 		ldr	r2, [ip]
 5999 0158 002A     		cmp	r2, #0
 6000 015a F7D0     		beq	.L653
 6001 015c 06E0     		b	.L652
 6002              	.LVL651:
 6003              	.L707:
1952:bluetooth_rxtx.c **** 				;
 6004              		.loc 1 1952 0 is_stmt 1 discriminator 1
 6005 015e DCF80030 		ldr	r3, [ip]
 6006 0162 1BB9     		cbnz	r3, .L652
 6007              	.L651:
1952:bluetooth_rxtx.c **** 				;
 6008              		.loc 1 1952 0 is_stmt 0 discriminator 2
 6009 0164 5F4B     		ldr	r3, .L709+44
 6010 0166 1B68     		ldr	r3, [r3]
 6011 0168 D807     		lsls	r0, r3, #31
 6012 016a F8D4     		bmi	.L707
 6013              	.LVL652:
 6014              	.L652:
1955:bluetooth_rxtx.c **** 
 6015              		.loc 1 1955 0 is_stmt 1
 6016 016c 5E4A     		ldr	r2, .L709+48
1958:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 167


 6017              		.loc 1 1958 0
 6018 016e 6120     		movs	r0, #97
1955:bluetooth_rxtx.c **** 
 6019              		.loc 1 1955 0
 6020 0170 1368     		ldr	r3, [r2]
 6021 0172 23F00103 		bic	r3, r3, #1
 6022 0176 1360     		str	r3, [r2]
1958:bluetooth_rxtx.c **** 
 6023              		.loc 1 1958 0
 6024 0178 FFF7FEFF 		bl	cc2400_strobe
 6025              	.LVL653:
1963:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6026              		.loc 1 1963 0
 6027 017c 0423     		movs	r3, #4
 6028              	.LVL654:
 6029              	.L654:
 6030              	.LBB55:
1964:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6031              		.loc 1 1964 0 discriminator 3
 6032 017e 5749     		ldr	r1, .L709+36
 6033 0180 581C     		adds	r0, r3, #1
 6034 0182 CA5C     		ldrb	r2, [r1, r3]	@ zero_extendqisi2
 6035 0184 03F1030E 		add	lr, r3, #3
1965:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6036              		.loc 1 1965 0 discriminator 3
 6037 0188 11F800C0 		ldrb	ip, [r1, r0]	@ zero_extendqisi2
 6038 018c 981C     		adds	r0, r3, #2
1966:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 6039              		.loc 1 1966 0 discriminator 3
 6040 018e 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
1967:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6041              		.loc 1 1967 0 discriminator 3
 6042 0190 11F80EE0 		ldrb	lr, [r1, lr]	@ zero_extendqisi2
 6043              	.LVL655:
1968:bluetooth_rxtx.c **** 		}
 6044              		.loc 1 1968 0 discriminator 3
 6045 0194 9910     		asrs	r1, r3, #2
 6046 0196 4EEA0262 		orr	r2, lr, r2, lsl #24
 6047              	.LVL656:
 6048 019a 42EA0C42 		orr	r2, r2, ip, lsl #16
 6049 019e 42EA0020 		orr	r0, r2, r0, lsl #8
 6050 01a2 0393     		str	r3, [sp, #12]
 6051 01a4 0291     		str	r1, [sp, #8]
 6052 01a6 FFF7FEFF 		bl	rbit
 6053              	.LVL657:
 6054 01aa 0299     		ldr	r1, [sp, #8]
 6055 01ac 12AB     		add	r3, sp, #72
 6056 01ae 03EB810E 		add	lr, r3, r1, lsl #2
 6057 01b2 019B     		ldr	r3, [sp, #4]
 6058 01b4 53F82120 		ldr	r2, [r3, r1, lsl #2]
 6059              	.LBE55:
1963:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6060              		.loc 1 1963 0 discriminator 3
 6061 01b8 039B     		ldr	r3, [sp, #12]
 6062              	.LBB56:
1968:bluetooth_rxtx.c **** 		}
 6063              		.loc 1 1968 0 discriminator 3
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 168


 6064 01ba 5040     		eors	r0, r0, r2
 6065              	.LBE56:
1963:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6066              		.loc 1 1963 0 discriminator 3
 6067 01bc 0433     		adds	r3, r3, #4
 6068              	.LVL658:
 6069 01be 2C2B     		cmp	r3, #44
 6070              	.LBB57:
1968:bluetooth_rxtx.c **** 		}
 6071              		.loc 1 1968 0 discriminator 3
 6072 01c0 4EF8300C 		str	r0, [lr, #-48]
 6073              	.LBE57:
1963:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6074              		.loc 1 1963 0 discriminator 3
 6075 01c4 DBD1     		bne	.L654
1972:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6076              		.loc 1 1972 0
 6077 01c6 6369     		ldr	r3, [r4, #20]
 6078              	.LVL659:
 6079 01c8 13B9     		cbnz	r3, .L655
 6080              	.LVL660:
 6081              	.L658:
1987:bluetooth_rxtx.c **** 			memcmp(le.target, &p[6], 6) != 0
 6082              		.loc 1 1987 0
 6083 01ca 236C     		ldr	r3, [r4, #64]
 6084 01cc B3B9     		cbnz	r3, .L656
 6085 01ce 1CE0     		b	.L657
 6086              	.LVL661:
 6087              	.L655:
 6088              	.LBB58:
1973:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 6089              		.loc 1 1973 0
 6090 01d0 3A4B     		ldr	r3, .L709+4
 6091 01d2 3A46     		mov	r2, r7
 6092 01d4 1869     		ldr	r0, [r3, #16]
 6093 01d6 06A9     		add	r1, sp, #24
 6094 01d8 FFF7FEFF 		bl	btle_crcgen_lut
 6095              	.LVL662:
1974:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6096              		.loc 1 1974 0
 6097 01dc 12AB     		add	r3, sp, #72
1975:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6098              		.loc 1 1975 0
 6099 01de 1F44     		add	r7, r7, r3
 6100              	.LVL663:
1974:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6101              		.loc 1 1974 0
 6102 01e0 1E44     		add	r6, r6, r3
 6103              	.LVL664:
1975:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6104              		.loc 1 1975 0
 6105 01e2 17F82F3C 		ldrb	r3, [r7, #-47]	@ zero_extendqisi2
1974:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 6106              		.loc 1 1974 0
 6107 01e6 16F8342C 		ldrb	r2, [r6, #-52]	@ zero_extendqisi2
1975:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 6108              		.loc 1 1975 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 169


 6109 01ea 1B02     		lsls	r3, r3, #8
 6110 01ec 43EA0243 		orr	r3, r3, r2, lsl #16
1976:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 6111              		.loc 1 1976 0
 6112 01f0 17F8302C 		ldrb	r2, [r7, #-48]	@ zero_extendqisi2
 6113 01f4 1343     		orrs	r3, r3, r2
1977:bluetooth_rxtx.c **** 				goto rx_flush;
 6114              		.loc 1 1977 0
 6115 01f6 9842     		cmp	r0, r3
 6116 01f8 22D1     		bne	.L647
 6117 01fa E6E7     		b	.L658
 6118              	.LVL665:
 6119              	.L656:
 6120              	.LBE58:
1988:bluetooth_rxtx.c **** 		  ){
 6121              		.loc 1 1988 0 discriminator 1
 6122 01fc 3B48     		ldr	r0, .L709+52
 6123 01fe 0DF11A01 		add	r1, sp, #26
 6124 0202 0622     		movs	r2, #6
 6125 0204 FFF7FEFF 		bl	memcmp
 6126              	.LVL666:
1987:bluetooth_rxtx.c **** 			memcmp(le.target, &p[6], 6) != 0
 6127              		.loc 1 1987 0 discriminator 1
 6128 0208 D0B9     		cbnz	r0, .L647
 6129              	.L657:
1994:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 6130              		.loc 1 1994 0
 6131 020a 394B     		ldr	r3, .L709+56
 6132 020c 1022     		movs	r2, #16
 6133 020e 1A60     		str	r2, [r3]
1995:bluetooth_rxtx.c **** 
 6134              		.loc 1 1995 0
 6135 0210 05A8     		add	r0, sp, #20
 6136              	.LVL667:
 6137 0212 AB69     		ldr	r3, [r5, #24]
 6138 0214 9847     		blx	r3
 6139              	.LVL668:
1999:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 6140              		.loc 1 1999 0
 6141 0216 374B     		ldr	r3, .L709+60
 6142 0218 4FF08076 		mov	r6, #16777216
 6143 021c 1E60     		str	r6, [r3]
2000:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 6144              		.loc 1 2000 0
 6145 021e 05A9     		add	r1, sp, #20
 6146              	.LVL669:
 6147 0220 0120     		movs	r0, #1
 6148 0222 FFF7FEFF 		bl	enqueue
 6149              	.LVL670:
2003:bluetooth_rxtx.c **** 
 6150              		.loc 1 2003 0
 6151 0226 40F63541 		movw	r1, #3125
2001:bluetooth_rxtx.c **** 
 6152              		.loc 1 2001 0
 6153 022a 254B     		ldr	r3, .L709+8
 6154 022c 1E60     		str	r6, [r3]
2003:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 170


 6155              		.loc 1 2003 0
 6156 022e 324B     		ldr	r3, .L709+64
 6157 0230 1A68     		ldr	r2, [r3]
 6158 0232 324B     		ldr	r3, .L709+68
 6159 0234 C2F31302 		ubfx	r2, r2, #0, #20
 6160 0238 1B68     		ldr	r3, [r3]
 6161 023a 01FB0233 		mla	r3, r1, r2, r3
 6162 023e 6364     		str	r3, [r4, #68]
 6163              	.LVL671:
 6164              	.L647:
2007:bluetooth_rxtx.c **** 
 6165              		.loc 1 2007 0
 6166 0240 6120     		movs	r0, #97
 6167 0242 FFF7FEFF 		bl	cc2400_strobe
 6168              	.LVL672:
2010:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6169              		.loc 1 2010 0
 6170 0246 284A     		ldr	r2, .L709+48
 6171 0248 1368     		ldr	r3, [r2]
 6172 024a 23F00103 		bic	r3, r3, #1
 6173 024e 1360     		str	r3, [r2]
 6174              	.L659:
2011:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 6175              		.loc 1 2011 0
 6176 0250 2B4B     		ldr	r3, .L709+72
 6177 0252 1B68     		ldr	r3, [r3]
 6178 0254 5907     		lsls	r1, r3, #29
 6179 0256 02D5     		bpl	.L708
 6180              	.LBB59:
2012:bluetooth_rxtx.c **** 		}
 6181              		.loc 1 2012 0
 6182 0258 2A4B     		ldr	r3, .L709+76
 6183 025a 1B68     		ldr	r3, [r3]
 6184 025c F8E7     		b	.L659
 6185              	.L708:
 6186              	.LBE59:
2016:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 6187              		.loc 1 2016 0
 6188 025e 40F63541 		movw	r1, #3125
 6189 0262 254B     		ldr	r3, .L709+64
 6190 0264 1A68     		ldr	r2, [r3]
 6191 0266 254B     		ldr	r3, .L709+68
 6192 0268 C2F31302 		ubfx	r2, r2, #0, #20
 6193 026c 1B68     		ldr	r3, [r3]
 6194 026e 01FB0233 		mla	r3, r1, r2, r3
 6195              	.LVL673:
2017:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 6196              		.loc 1 2017 0
 6197 0272 616C     		ldr	r1, [r4, #68]
2020:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 6198              		.loc 1 2020 0
 6199 0274 227E     		ldrb	r2, [r4, #24]	@ zero_extendqisi2
2017:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 6200              		.loc 1 2017 0
 6201 0276 8B42     		cmp	r3, r1
2018:bluetooth_rxtx.c **** 		if  ( // timeout
 6202              		.loc 1 2018 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 171


 6203 0278 38BF     		it	cc
 6204 027a 03F14343 		addcc	r3, r3, #-1023410176
 6205              	.LVL674:
2019:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 6206              		.loc 1 2019 0
 6207 027e A2F10202 		sub	r2, r2, #2
2018:bluetooth_rxtx.c **** 		if  ( // timeout
 6208              		.loc 1 2018 0
 6209 0282 38BF     		it	cc
 6210 0284 03F5A003 		addcc	r3, r3, #5242880
 6211              	.LVL675:
2019:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 6212              		.loc 1 2019 0
 6213 0288 012A     		cmp	r2, #1
 6214 028a 03D8     		bhi	.L662
2021:bluetooth_rxtx.c **** 			// jam finished
 6215              		.loc 1 2021 0
 6216 028c 1E4A     		ldr	r2, .L709+80
 6217 028e 5B1A     		subs	r3, r3, r1
 6218              	.LVL676:
 6219 0290 9342     		cmp	r3, r2
 6220 0292 02D8     		bhi	.L663
 6221              	.L662:
2023:bluetooth_rxtx.c **** 			)
 6222              		.loc 1 2023 0
 6223 0294 EB69     		ldr	r3, [r5, #28]
 6224 0296 012B     		cmp	r3, #1
 6225 0298 52D1     		bne	.L664
 6226              	.L663:
2026:bluetooth_rxtx.c **** 			le_jam_count = 0;
 6227              		.loc 1 2026 0
 6228 029a FFF7FEFF 		bl	reset_le
 6229              	.LVL677:
2028:bluetooth_rxtx.c **** 
 6230              		.loc 1 2028 0
 6231 029e 4FF48071 		mov	r1, #256
2027:bluetooth_rxtx.c **** 			TXLED_CLR;
 6232              		.loc 1 2027 0
 6233 02a2 0023     		movs	r3, #0
 6234 02a4 EB61     		str	r3, [r5, #28]
2028:bluetooth_rxtx.c **** 
 6235              		.loc 1 2028 0
 6236 02a6 C9F80010 		str	r1, [r9]
2030:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 6237              		.loc 1 2030 0
 6238 02aa E97C     		ldrb	r1, [r5, #19]	@ zero_extendqisi2
2027:bluetooth_rxtx.c **** 			TXLED_CLR;
 6239              		.loc 1 2027 0
 6240 02ac 024A     		ldr	r2, .L709
2030:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 6241              		.loc 1 2030 0
 6242 02ae 0129     		cmp	r1, #1
 6243 02b0 2CD1     		bne	.L665
2031:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 6244              		.loc 1 2031 0
 6245 02b2 D374     		strb	r3, [r2, #19]
2032:bluetooth_rxtx.c **** 				goto cleanup;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 172


 6246              		.loc 1 2032 0
 6247 02b4 9374     		strb	r3, [r2, #18]
2033:bluetooth_rxtx.c **** 			}
 6248              		.loc 1 2033 0
 6249 02b6 74E0     		b	.L673
 6250              	.L710:
 6251              		.align	2
 6252              	.L709:
 6253 02b8 00000000 		.word	.LANCHOR0
 6254 02bc 00000000 		.word	.LANCHOR1
 6255 02c0 00E100E0 		.word	-536813312
 6256 02c4 3CC00920 		.word	537509948
 6257 02c8 00000000 		.word	rx_tc
 6258 02cc 00000000 		.word	rx_err
 6259 02d0 00000000 		.word	rssi_max
 6260 02d4 00000000 		.word	rssi_min
 6261 02d8 F0000000 		.word	.LANCHOR2+240
 6262 02dc 00000000 		.word	rxbuf1
 6263 02e0 04410050 		.word	1342193924
 6264 02e4 10410050 		.word	1342193936
 6265 02e8 24000340 		.word	1073938468
 6266 02ec 38000000 		.word	.LANCHOR1+56
 6267 02f0 38C00920 		.word	537509944
 6268 02f4 80E100E0 		.word	-536813184
 6269 02f8 00000000 		.word	clkn
 6270 02fc 08400040 		.word	1073758216
 6271 0300 0C000340 		.word	1073938444
 6272 0304 08000340 		.word	1073938440
 6273 0308 80F0FA02 		.word	50000000
 6274              	.L665:
2037:bluetooth_rxtx.c **** 				goto cleanup;
 6275              		.loc 1 2037 0
 6276 030c B8F10A0F 		cmp	r8, #10
 6277 0310 47D0     		beq	.L673
2040:bluetooth_rxtx.c **** 
 6278              		.loc 1 2040 0
 6279 0312 0123     		movs	r3, #1
2042:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 6280              		.loc 1 2042 0
 6281 0314 6420     		movs	r0, #100
2040:bluetooth_rxtx.c **** 
 6282              		.loc 1 2040 0
 6283 0316 2376     		strb	r3, [r4, #24]
2042:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 6284              		.loc 1 2042 0
 6285 0318 FFF7FEFF 		bl	cc2400_strobe
 6286              	.LVL678:
 6287              	.L667:
2043:bluetooth_rxtx.c **** 
 6288              		.loc 1 2043 0 discriminator 1
 6289 031c FFF7FEFF 		bl	cc2400_status
 6290              	.LVL679:
 6291 0320 4207     		lsls	r2, r0, #29
 6292 0322 FBD4     		bmi	.L667
2046:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6293              		.loc 1 2046 0
 6294 0324 B4F84A30 		ldrh	r3, [r4, #74]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 173


 6295 0328 9BB2     		uxth	r3, r3
 6296 032a 23B1     		cbz	r3, .L675
2046:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6297              		.loc 1 2046 0 is_stmt 0 discriminator 1
 6298 032c 234B     		ldr	r3, .L711
 6299 032e B3F84A30 		ldrh	r3, [r3, #74]
 6300 0332 9BB2     		uxth	r3, r3
 6301 0334 01E0     		b	.L668
 6302              	.L675:
2046:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6303              		.loc 1 2046 0
 6304 0336 40F66213 		movw	r3, #2402
 6305              	.L668:
2046:bluetooth_rxtx.c **** 			restart_jamming = 1;
 6306              		.loc 1 2046 0 discriminator 4
 6307 033a 2380     		strh	r3, [r4]	@ movhi
2047:bluetooth_rxtx.c **** 		}
 6308              		.loc 1 2047 0 is_stmt 1 discriminator 4
 6309 033c 0123     		movs	r3, #1
 6310 033e 2B63     		str	r3, [r5, #48]
 6311              	.L664:
2050:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 6312              		.loc 1 2050 0
 6313 0340 2C20     		movs	r0, #44
 6314 0342 6189     		ldrh	r1, [r4, #10]
 6315 0344 FFF7FEFF 		bl	cc2400_set
 6316              	.LVL680:
2051:bluetooth_rxtx.c **** 
 6317              		.loc 1 2051 0
 6318 0348 2D20     		movs	r0, #45
 6319 034a 2189     		ldrh	r1, [r4, #8]
 6320 034c FFF7FEFF 		bl	cc2400_set
 6321              	.LVL681:
2053:bluetooth_rxtx.c **** 			hop();
 6322              		.loc 1 2053 0
 6323 0350 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 6324 0352 0BB1     		cbz	r3, .L669
2054:bluetooth_rxtx.c **** 
 6325              		.loc 1 2054 0
 6326 0354 FFF7FEFF 		bl	hop
 6327              	.LVL682:
 6328              	.L669:
2057:bluetooth_rxtx.c **** 			le_jam();
 6329              		.loc 1 2057 0
 6330 0358 EB69     		ldr	r3, [r5, #28]
 6331 035a 194E     		ldr	r6, .L711+4
 6332 035c 002B     		cmp	r3, #0
 6333 035e 05DD     		ble	.L670
2058:bluetooth_rxtx.c **** 			--le_jam_count;
 6334              		.loc 1 2058 0
 6335 0360 FFF7FEFF 		bl	le_jam
 6336              	.LVL683:
2059:bluetooth_rxtx.c **** 		} else {
 6337              		.loc 1 2059 0
 6338 0364 F369     		ldr	r3, [r6, #28]
 6339 0366 013B     		subs	r3, r3, #1
 6340 0368 F361     		str	r3, [r6, #28]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 174


 6341 036a 14E0     		b	.L671
 6342              	.L670:
2062:bluetooth_rxtx.c **** 			dio_ssp_start();
 6343              		.loc 1 2062 0
 6344 036c FFF7FEFF 		bl	dma_init_le
 6345              	.LVL684:
2063:bluetooth_rxtx.c **** 
 6346              		.loc 1 2063 0
 6347 0370 FFF7FEFF 		bl	dio_ssp_start
 6348              	.LVL685:
2065:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 6349              		.loc 1 2065 0
 6350 0374 336B     		ldr	r3, [r6, #48]
 6351 0376 3BB1     		cbz	r3, .L672
2066:bluetooth_rxtx.c **** 				restart_jamming = 0;
 6352              		.loc 1 2066 0
 6353 0378 6068     		ldr	r0, [r4, #4]
 6354 037a FFF7FEFF 		bl	rbit
 6355              	.LVL686:
 6356 037e FFF7FEFF 		bl	cc2400_rx_sync
 6357              	.LVL687:
2067:bluetooth_rxtx.c **** 			} else {
 6358              		.loc 1 2067 0
 6359 0382 0023     		movs	r3, #0
 6360 0384 3363     		str	r3, [r6, #48]
 6361 0386 06E0     		b	.L671
 6362              	.L672:
2070:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 6363              		.loc 1 2070 0 discriminator 1
 6364 0388 FFF7FEFF 		bl	cc2400_status
 6365              	.LVL688:
 6366 038c 4307     		lsls	r3, r0, #29
 6367 038e FBD5     		bpl	.L672
2071:bluetooth_rxtx.c **** 			}
 6368              		.loc 1 2071 0
 6369 0390 6220     		movs	r0, #98
 6370 0392 FFF7FEFF 		bl	cc2400_strobe
 6371              	.LVL689:
 6372              	.L671:
2075:bluetooth_rxtx.c **** 		rx_err = 0;
 6373              		.loc 1 2075 0
 6374 0396 0023     		movs	r3, #0
 6375 0398 CAF80030 		str	r3, [r10]
2076:bluetooth_rxtx.c **** 	}
 6376              		.loc 1 2076 0
 6377 039c CBF80030 		str	r3, [fp]
 6378 03a0 4DE6     		b	.L638
 6379              	.L673:
 6380              	.LBE51:
2082:bluetooth_rxtx.c **** 
 6381              		.loc 1 2082 0
 6382 03a2 084B     		ldr	r3, .L711+8
 6383 03a4 4FF08072 		mov	r2, #16777216
 6384 03a8 1A60     		str	r2, [r3]
2085:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6385              		.loc 1 2085 0
 6386 03aa FFF7FEFF 		bl	cc2400_idle
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 175


 6387              	.LVL690:
2086:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6388              		.loc 1 2086 0
 6389 03ae FFF7FEFF 		bl	dio_ssp_stop
 6390              	.LVL691:
2087:bluetooth_rxtx.c **** }
 6391              		.loc 1 2087 0
 6392 03b2 FFF7FEFF 		bl	cs_trigger_disable
 6393              	.LVL692:
2088:bluetooth_rxtx.c **** 
 6394              		.loc 1 2088 0
 6395 03b6 13B0     		add	sp, sp, #76
 6396              		.cfi_def_cfa_offset 36
 6397              		@ sp needed
 6398 03b8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6399              	.L712:
 6400              		.align	2
 6401              	.L711:
 6402 03bc 00000000 		.word	.LANCHOR1
 6403 03c0 00000000 		.word	.LANCHOR0
 6404 03c4 80E100E0 		.word	-536813184
 6405              		.cfi_endproc
 6406              	.LFE23:
 6408              		.section	.text.bt_follow_le,"ax",%progbits
 6409              		.align	1
 6410              		.global	bt_follow_le
 6411              		.thumb
 6412              		.thumb_func
 6414              	bt_follow_le:
 6415              	.LFB27:
2365:bluetooth_rxtx.c **** 		}
2366:bluetooth_rxtx.c **** 	}
2367:bluetooth_rxtx.c **** }
2368:bluetooth_rxtx.c **** 
2369:bluetooth_rxtx.c **** void bt_follow_le() {
 6416              		.loc 1 2369 0
 6417              		.cfi_startproc
 6418              		@ args = 0, pretend = 0, frame = 0
 6419              		@ frame_needed = 0, uses_anonymous_args = 0
 6420 0000 10B5     		push	{r4, lr}
 6421              		.cfi_def_cfa_offset 8
 6422              		.cfi_offset 4, -8
 6423              		.cfi_offset 14, -4
2370:bluetooth_rxtx.c **** 	reset_le();
 6424              		.loc 1 2370 0
 6425 0002 FFF7FEFF 		bl	reset_le
 6426              	.LVL693:
2371:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 6427              		.loc 1 2371 0
 6428 0006 044C     		ldr	r4, .L714
 6429 0008 044B     		ldr	r3, .L714+4
2372:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 6430              		.loc 1 2372 0
 6431 000a 0920     		movs	r0, #9
2371:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 6432              		.loc 1 2371 0
 6433 000c A361     		str	r3, [r4, #24]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 176


 6434              		.loc 1 2372 0
 6435 000e FFF7FEFF 		bl	bt_le_sync
 6436              	.LVL694:
2373:bluetooth_rxtx.c **** 
2374:bluetooth_rxtx.c **** 	/* old non-sync mode
2375:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2376:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2377:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2378:bluetooth_rxtx.c **** 	*/
2379:bluetooth_rxtx.c **** 
2380:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6437              		.loc 1 2380 0
 6438 0012 0023     		movs	r3, #0
 6439 0014 6374     		strb	r3, [r4, #17]
 6440 0016 10BD     		pop	{r4, pc}
 6441              	.L715:
 6442              		.align	2
 6443              	.L714:
 6444 0018 00000000 		.word	.LANCHOR0
 6445 001c 00000000 		.word	connection_follow_cb
 6446              		.cfi_endproc
 6447              	.LFE27:
 6449              		.section	.text.bt_boss_master_le,"ax",%progbits
 6450              		.align	1
 6451              		.global	bt_boss_master_le
 6452              		.thumb
 6453              		.thumb_func
 6455              	bt_boss_master_le:
 6456              	.LFB28:
2381:bluetooth_rxtx.c **** }
2382:bluetooth_rxtx.c **** 
2383:bluetooth_rxtx.c **** void bt_boss_master_le() {
 6457              		.loc 1 2383 0
 6458              		.cfi_startproc
 6459              		@ args = 0, pretend = 0, frame = 0
 6460              		@ frame_needed = 0, uses_anonymous_args = 0
 6461 0000 10B5     		push	{r4, lr}
 6462              		.cfi_def_cfa_offset 8
 6463              		.cfi_offset 4, -8
 6464              		.cfi_offset 14, -4
2384:bluetooth_rxtx.c **** 	reset_le();
 6465              		.loc 1 2384 0
 6466 0002 FFF7FEFF 		bl	reset_le
 6467              	.LVL695:
2385:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb_boss_master;
 6468              		.loc 1 2385 0
 6469 0006 044C     		ldr	r4, .L717
 6470 0008 044B     		ldr	r3, .L717+4
2386:bluetooth_rxtx.c **** 	bt_le_sync_boss_master(MODE_BOSS_MASTER_LE);
 6471              		.loc 1 2386 0
 6472 000a 1220     		movs	r0, #18
2385:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb_boss_master;
 6473              		.loc 1 2385 0
 6474 000c A361     		str	r3, [r4, #24]
 6475              		.loc 1 2386 0
 6476 000e FFF7FEFF 		bl	bt_le_sync_boss_master
 6477              	.LVL696:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 177


2387:bluetooth_rxtx.c **** 
2388:bluetooth_rxtx.c **** 	/* old non-sync mode
2389:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2390:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2391:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2392:bluetooth_rxtx.c **** 	*/
2393:bluetooth_rxtx.c **** 
2394:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6478              		.loc 1 2394 0
 6479 0012 0023     		movs	r3, #0
 6480 0014 6374     		strb	r3, [r4, #17]
 6481 0016 10BD     		pop	{r4, pc}
 6482              	.L718:
 6483              		.align	2
 6484              	.L717:
 6485 0018 00000000 		.word	.LANCHOR0
 6486 001c 00000000 		.word	connection_follow_cb_boss_master
 6487              		.cfi_endproc
 6488              	.LFE28:
 6490              		.section	.text.le_promisc_state,"ax",%progbits
 6491              		.align	1
 6492              		.global	le_promisc_state
 6493              		.thumb
 6494              		.thumb_func
 6496              	le_promisc_state:
 6497              	.LFB29:
2395:bluetooth_rxtx.c **** }
2396:bluetooth_rxtx.c **** 
2397:bluetooth_rxtx.c **** // issue state change message
2398:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 6498              		.loc 1 2398 0
 6499              		.cfi_startproc
 6500              		@ args = 0, pretend = 0, frame = 56
 6501              		@ frame_needed = 0, uses_anonymous_args = 0
 6502              	.LVL697:
 6503 0000 70B5     		push	{r4, r5, r6, lr}
 6504              		.cfi_def_cfa_offset 16
 6505              		.cfi_offset 4, -16
 6506              		.cfi_offset 5, -12
 6507              		.cfi_offset 6, -8
 6508              		.cfi_offset 14, -4
 6509 0002 8EB0     		sub	sp, sp, #56
 6510              		.cfi_def_cfa_offset 72
 6511              		.loc 1 2398 0
 6512 0004 1446     		mov	r4, r2
 6513 0006 0D46     		mov	r5, r1
 6514 0008 0646     		mov	r6, r0
2399:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 6515              		.loc 1 2399 0
 6516 000a 0021     		movs	r1, #0
 6517              	.LVL698:
 6518 000c 01A8     		add	r0, sp, #4
 6519              	.LVL699:
 6520 000e 3222     		movs	r2, #50
 6521              	.LVL700:
 6522 0010 FFF7FEFF 		bl	memset
 6523              	.LVL701:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 178


2400:bluetooth_rxtx.c **** 	if (len > 49)
2401:bluetooth_rxtx.c **** 		len = 49;
2402:bluetooth_rxtx.c **** 
2403:bluetooth_rxtx.c **** 	buf[0] = type;
2404:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 6524              		.loc 1 2404 0
 6525 0014 312C     		cmp	r4, #49
 6526 0016 2246     		mov	r2, r4
 6527 0018 2946     		mov	r1, r5
 6528 001a 28BF     		it	cs
 6529 001c 3122     		movcs	r2, #49
 6530 001e 0DF10500 		add	r0, sp, #5
2403:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 6531              		.loc 1 2403 0
 6532 0022 8DF80460 		strb	r6, [sp, #4]
 6533              		.loc 1 2404 0
 6534 0026 FFF7FEFF 		bl	memcpy
 6535              	.LVL702:
2405:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, (uint8_t*)buf);
 6536              		.loc 1 2405 0
 6537 002a 01A9     		add	r1, sp, #4
 6538 002c 0520     		movs	r0, #5
 6539 002e FFF7FEFF 		bl	enqueue
 6540              	.LVL703:
2406:bluetooth_rxtx.c **** }
 6541              		.loc 1 2406 0
 6542 0032 0EB0     		add	sp, sp, #56
 6543              		.cfi_def_cfa_offset 16
 6544              		@ sp needed
 6545 0034 70BD     		pop	{r4, r5, r6, pc}
 6546              		.cfi_endproc
 6547              	.LFE29:
 6549              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 6550              		.align	1
 6551              		.global	promisc_recover_hop_increment
 6552              		.thumb
 6553              		.thumb_func
 6555              	promisc_recover_hop_increment:
 6556              	.LFB30:
2407:bluetooth_rxtx.c **** 
2408:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2409:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2410:bluetooth_rxtx.c **** 
2411:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 6557              		.loc 1 2411 0
 6558              		.cfi_startproc
 6559              		@ args = 0, pretend = 0, frame = 0
 6560              		@ frame_needed = 0, uses_anonymous_args = 0
 6561              	.LVL704:
 6562 0000 38B5     		push	{r3, r4, r5, lr}
 6563              		.cfi_def_cfa_offset 16
 6564              		.cfi_offset 3, -16
 6565              		.cfi_offset 4, -12
 6566              		.cfi_offset 5, -8
 6567              		.cfi_offset 14, -4
2412:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2413:bluetooth_rxtx.c **** 	if (channel == 2404) {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 179


 6568              		.loc 1 2413 0
 6569 0002 40F66412 		movw	r2, #2404
 6570 0006 3148     		ldr	r0, .L731
 6571              	.LVL705:
 6572 0008 314C     		ldr	r4, .L731+4
 6573 000a 0388     		ldrh	r3, [r0]
 6574 000c 9BB2     		uxth	r3, r3
 6575 000e 9342     		cmp	r3, r2
 6576 0010 0DD1     		bne	.L721
2414:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 6577              		.loc 1 2414 0
 6578 0012 40F63541 		movw	r1, #3125
 6579 0016 2F4B     		ldr	r3, .L731+8
 6580 0018 1A68     		ldr	r2, [r3]
 6581 001a 2F4B     		ldr	r3, .L731+12
 6582 001c C2F31302 		ubfx	r2, r2, #0, #20
 6583 0020 1B68     		ldr	r3, [r3]
 6584 0022 01FB0233 		mla	r3, r1, r2, r3
 6585 0026 6363     		str	r3, [r4, #52]
2415:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 6586              		.loc 1 2415 0
 6587 0028 40F66613 		movw	r3, #2406
 6588 002c 48E0     		b	.L730
 6589              	.L721:
2416:bluetooth_rxtx.c **** 		do_hop = 1;
2417:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 6590              		.loc 1 2417 0
 6591 002e 40F66611 		movw	r1, #2406
 6592 0032 0388     		ldrh	r3, [r0]
 6593 0034 9BB2     		uxth	r3, r3
 6594 0036 8B42     		cmp	r3, r1
 6595 0038 44D1     		bne	.L723
 6596              	.LVL706:
 6597              	.LBB64:
 6598              	.LBB65:
 6599              	.LBB66:
2418:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 6600              		.loc 1 2418 0
 6601 003a 40F63541 		movw	r1, #3125
 6602 003e 254B     		ldr	r3, .L731+8
2419:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
2420:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
2421:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2422:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 6603              		.loc 1 2422 0
 6604 0040 408C     		ldrh	r0, [r0, #34]
2418:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 6605              		.loc 1 2418 0
 6606 0042 1A68     		ldr	r2, [r3]
 6607 0044 244B     		ldr	r3, .L731+12
 6608 0046 C2F31302 		ubfx	r2, r2, #0, #20
 6609 004a 1B68     		ldr	r3, [r3]
 6610 004c 01FB0233 		mla	r3, r1, r2, r3
 6611              	.LVL707:
2419:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 6612              		.loc 1 2419 0
 6613 0050 626B     		ldr	r2, [r4, #52]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 180


 6614              		.loc 1 2422 0
 6615 0052 1E49     		ldr	r1, .L731
2419:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 6616              		.loc 1 2419 0
 6617 0054 9342     		cmp	r3, r2
2420:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
 6618              		.loc 1 2420 0
 6619 0056 3CBF     		itt	cc
 6620 0058 03F14343 		addcc	r3, r3, #-1023410176
 6621              	.LVL708:
 6622 005c 03F5A003 		addcc	r3, r3, #5242880
 6623              	.LVL709:
 6624 0060 9B1A     		subs	r3, r3, r2
 6625              	.LVL710:
 6626              		.loc 1 2422 0
 6627 0062 41F66A02 		movw	r2, #6250
 6628 0066 02FB0033 		mla	r3, r2, r0, r3
 6629 006a 43F2D402 		movw	r2, #12500
 6630 006e 4243     		muls	r2, r0, r2
 6631 0070 B3FBF2F3 		udiv	r3, r3, r2
 6632              	.LVL711:
2423:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2424:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 6633              		.loc 1 2424 0
 6634 0074 242B     		cmp	r3, #36
 6635 0076 21D8     		bhi	.L725
2425:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2426:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 6636              		.loc 1 2426 0
 6637 0078 184A     		ldr	r2, .L731+16
2427:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 6638              		.loc 1 2427 0
 6639 007a 4008     		lsrs	r0, r0, #1
2426:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 6640              		.loc 1 2426 0
 6641 007c 1344     		add	r3, r3, r2
 6642              	.LVL712:
 6643 007e 93F87038 		ldrb	r3, [r3, #2160]	@ zero_extendqisi2
 6644              	.LVL713:
2428:bluetooth_rxtx.c **** 			le.conn_count = 0;
2429:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
2430:bluetooth_rxtx.c **** 			do_hop = 0;
2431:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2432:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 6645              		.loc 1 2432 0
 6646 0082 2525     		movs	r5, #37
2426:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 6647              		.loc 1 2426 0
 6648 0084 8B76     		strb	r3, [r1, #26]
 6649              		.loc 1 2432 0
 6650 0086 0133     		adds	r3, r3, #1
2427:bluetooth_rxtx.c **** 			le.conn_count = 0;
 6651              		.loc 1 2427 0
 6652 0088 0884     		strh	r0, [r1, #32]	@ movhi
 6653              		.loc 1 2432 0
 6654 008a 93FBF5F0 		sdiv	r0, r3, r5
 6655 008e 05FB1033 		mls	r3, r5, r0, r3
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 181


2428:bluetooth_rxtx.c **** 			le.conn_count = 0;
 6656              		.loc 1 2428 0
 6657 0092 0022     		movs	r2, #0
 6658              		.loc 1 2432 0
 6659 0094 4B76     		strb	r3, [r1, #25]
2433:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 6660              		.loc 1 2433 0
 6661 0096 0320     		movs	r0, #3
2434:bluetooth_rxtx.c **** 			le.crc_verify = 0;
2435:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
2436:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 6662              		.loc 1 2436 0
 6663 0098 114B     		ldr	r3, .L731+20
2428:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 6664              		.loc 1 2428 0
 6665 009a 8A84     		strh	r2, [r1, #36]	@ movhi
2429:bluetooth_rxtx.c **** 			do_hop = 0;
 6666              		.loc 1 2429 0
 6667 009c CA61     		str	r2, [r1, #28]
2430:bluetooth_rxtx.c **** 			// Move on to regular connection following.
 6668              		.loc 1 2430 0
 6669 009e E272     		strb	r2, [r4, #11]
2434:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 6670              		.loc 1 2434 0
 6671 00a0 4A61     		str	r2, [r1, #20]
2433:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 6672              		.loc 1 2433 0
 6673 00a2 0876     		strb	r0, [r1, #24]
2437:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 6674              		.loc 1 2437 0
 6675 00a4 0122     		movs	r2, #1
 6676 00a6 1A31     		adds	r1, r1, #26
2436:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 6677              		.loc 1 2436 0
 6678 00a8 A361     		str	r3, [r4, #24]
2435:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 6679              		.loc 1 2435 0
 6680 00aa A072     		strb	r0, [r4, #10]
 6681              		.loc 1 2437 0
 6682 00ac FFF7FEFF 		bl	le_promisc_state
 6683              	.LVL714:
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 6684              		.loc 1 2439 0
 6685 00b0 E37C     		ldrb	r3, [r4, #19]	@ zero_extendqisi2
 6686 00b2 53B1     		cbz	r3, .L720
2440:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 6687              		.loc 1 2440 0
 6688 00b4 064B     		ldr	r3, .L731+4
 6689 00b6 2822     		movs	r2, #40
 6690 00b8 DA61     		str	r2, [r3, #28]
 6691 00ba 38BD     		pop	{r3, r4, r5, pc}
 6692              	.LVL715:
 6693              	.L725:
2441:bluetooth_rxtx.c **** 
2442:bluetooth_rxtx.c **** 			return;
2443:bluetooth_rxtx.c **** 		}
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 182


2444:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 6694              		.loc 1 2444 0
 6695 00bc 40F66413 		movw	r3, #2404
 6696              	.LVL716:
 6697              	.L730:
 6698 00c0 A381     		strh	r3, [r4, #12]	@ movhi
 6699 00c2 00E0     		b	.L729
 6700              	.L723:
 6701              	.LBE66:
 6702              	.LBE65:
 6703              	.LBE64:
2445:bluetooth_rxtx.c **** 		do_hop = 1;
2446:bluetooth_rxtx.c **** 	}
2447:bluetooth_rxtx.c **** 	else {
2448:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 6704              		.loc 1 2448 0
 6705 00c4 A281     		strh	r2, [r4, #12]	@ movhi
 6706              	.L729:
2449:bluetooth_rxtx.c **** 		do_hop = 1;
 6707              		.loc 1 2449 0
 6708 00c6 0123     		movs	r3, #1
 6709 00c8 E372     		strb	r3, [r4, #11]
 6710              	.L720:
 6711 00ca 38BD     		pop	{r3, r4, r5, pc}
 6712              	.L732:
 6713              		.align	2
 6714              	.L731:
 6715 00cc 00000000 		.word	.LANCHOR1
 6716 00d0 00000000 		.word	.LANCHOR0
 6717 00d4 00000000 		.word	clkn
 6718 00d8 08400040 		.word	1073758216
 6719 00dc 00000000 		.word	.LANCHOR2
 6720 00e0 00000000 		.word	connection_follow_cb
 6721              		.cfi_endproc
 6722              	.LFE30:
 6724              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 6725              		.align	1
 6726              		.global	promisc_recover_hop_interval
 6727              		.thumb
 6728              		.thumb_func
 6730              	promisc_recover_hop_interval:
 6731              	.LFB31:
2450:bluetooth_rxtx.c **** 	}
2451:bluetooth_rxtx.c **** }
2452:bluetooth_rxtx.c **** 
2453:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 6732              		.loc 1 2453 0
 6733              		.cfi_startproc
 6734              		@ args = 0, pretend = 0, frame = 0
 6735              		@ frame_needed = 0, uses_anonymous_args = 0
 6736              	.LVL717:
 6737 0000 38B5     		push	{r3, r4, r5, lr}
 6738              		.cfi_def_cfa_offset 16
 6739              		.cfi_offset 3, -16
 6740              		.cfi_offset 4, -12
 6741              		.cfi_offset 5, -8
 6742              		.cfi_offset 14, -4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 183


2454:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2455:bluetooth_rxtx.c **** 
2456:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 6743              		.loc 1 2456 0
 6744 0002 40F63544 		movw	r4, #3125
 6745 0006 244B     		ldr	r3, .L739
 6746 0008 244A     		ldr	r2, .L739+4
 6747 000a 1B68     		ldr	r3, [r3]
 6748 000c 1268     		ldr	r2, [r2]
 6749 000e C3F31303 		ubfx	r3, r3, #0, #20
 6750 0012 04FB0324 		mla	r4, r4, r3, r2
 6751              	.LVL718:
2457:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
2458:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
2459:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
2460:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2461:bluetooth_rxtx.c **** 
2462:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2463:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 6752              		.loc 1 2463 0
 6753 0016 46F2A712 		movw	r2, #24999
2457:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 6754              		.loc 1 2457 0
 6755 001a 214D     		ldr	r5, .L739+8
 6756 001c AB6B     		ldr	r3, [r5, #56]
 6757 001e 9C42     		cmp	r4, r3
2458:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 6758              		.loc 1 2458 0
 6759 0020 3EBF     		ittt	cc
 6760 0022 04F14344 		addcc	r4, r4, #-1023410176
 6761              	.LVL719:
 6762 0026 A4F56514 		subcc	r4, r4, #3751936
 6763 002a A4F5A254 		subcc	r4, r4, #5184
 6764              	.LVL720:
2459:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
 6765              		.loc 1 2459 0
 6766 002e E31A     		subs	r3, r4, r3
 6767              	.LVL721:
 6768              		.loc 1 2463 0
 6769 0030 9342     		cmp	r3, r2
 6770 0032 30D9     		bls	.L733
2464:bluetooth_rxtx.c **** 		return;
2465:bluetooth_rxtx.c **** 
2466:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 6771              		.loc 1 2466 0
 6772 0034 1B4A     		ldr	r2, .L739+12
2467:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
2468:bluetooth_rxtx.c **** 
2469:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 6773              		.loc 1 2469 0
 6774 0036 1B48     		ldr	r0, .L739+12
 6775              	.LVL722:
2466:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 6776              		.loc 1 2466 0
 6777 0038 D2F80011 		ldr	r1, [r2, #256]
 6778 003c 8B42     		cmp	r3, r1
2467:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 184


 6779              		.loc 1 2467 0
 6780 003e 38BF     		it	cc
 6781 0040 C2F80031 		strcc	r3, [r2, #256]
 6782              		.loc 1 2469 0
 6783 0044 D2F80031 		ldr	r3, [r2, #256]
 6784              	.LVL723:
 6785 0048 174A     		ldr	r2, .L739+16
 6786 004a 03F56133 		add	r3, r3, #230400
 6787 004e 03F25233 		addw	r3, r3, #850
 6788 0052 B3FBF2F3 		udiv	r3, r3, r2
2470:bluetooth_rxtx.c **** 
2471:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 6789              		.loc 1 2471 0
 6790 0056 1549     		ldr	r1, .L739+20
2469:bluetooth_rxtx.c **** 
 6791              		.loc 1 2469 0
 6792 0058 9BB2     		uxth	r3, r3
 6793              	.LVL724:
 6794              		.loc 1 2471 0
 6795 005a 4A8C     		ldrh	r2, [r1, #34]
 6796 005c 9A42     		cmp	r2, r3
 6797 005e 15D1     		bne	.L737
2472:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2473:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 6798              		.loc 1 2473 0
 6799 0060 D0F80431 		ldr	r3, [r0, #260]
 6800              	.LVL725:
 6801 0064 0133     		adds	r3, r3, #1
2474:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 6802              		.loc 1 2474 0
 6803 0066 052B     		cmp	r3, #5
2473:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 6804              		.loc 1 2473 0
 6805 0068 C0F80431 		str	r3, [r0, #260]
 6806              		.loc 1 2474 0
 6807 006c 12D1     		bne	.L738
2475:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 6808              		.loc 1 2475 0
 6809 006e 104B     		ldr	r3, .L739+24
2476:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
2477:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
2478:bluetooth_rxtx.c **** 			do_hop = 1;
2479:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 6810              		.loc 1 2479 0
 6811 0070 0220     		movs	r0, #2
2475:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 6812              		.loc 1 2475 0
 6813 0072 AB61     		str	r3, [r5, #24]
2476:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 6814              		.loc 1 2476 0
 6815 0074 40F66413 		movw	r3, #2404
 6816 0078 AB81     		strh	r3, [r5, #12]	@ movhi
2477:bluetooth_rxtx.c **** 			do_hop = 1;
 6817              		.loc 1 2477 0
 6818 007a 0423     		movs	r3, #4
 6819 007c AB72     		strb	r3, [r5, #10]
 6820              		.loc 1 2479 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 185


 6821 007e 2231     		adds	r1, r1, #34
2478:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 6822              		.loc 1 2478 0
 6823 0080 0123     		movs	r3, #1
 6824              		.loc 1 2479 0
 6825 0082 0246     		mov	r2, r0
2478:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 6826              		.loc 1 2478 0
 6827 0084 EB72     		strb	r3, [r5, #11]
 6828              		.loc 1 2479 0
 6829 0086 FFF7FEFF 		bl	le_promisc_state
 6830              	.LVL726:
 6831 008a 03E0     		b	.L738
 6832              	.LVL727:
 6833              	.L737:
2480:bluetooth_rxtx.c **** 		}
2481:bluetooth_rxtx.c **** 	} else {
2482:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 6834              		.loc 1 2482 0
 6835 008c 4B84     		strh	r3, [r1, #34]	@ movhi
2483:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 6836              		.loc 1 2483 0
 6837 008e 0023     		movs	r3, #0
 6838              	.LVL728:
 6839 0090 C0F80431 		str	r3, [r0, #260]
 6840              	.LVL729:
 6841              	.L738:
2484:bluetooth_rxtx.c **** 	}
2485:bluetooth_rxtx.c **** 
2486:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 6842              		.loc 1 2486 0
 6843 0094 AC63     		str	r4, [r5, #56]
 6844              	.L733:
 6845 0096 38BD     		pop	{r3, r4, r5, pc}
 6846              	.LVL730:
 6847              	.L740:
 6848              		.align	2
 6849              	.L739:
 6850 0098 00000000 		.word	clkn
 6851 009c 08400040 		.word	1073758216
 6852 00a0 00000000 		.word	.LANCHOR0
 6853 00a4 00000000 		.word	le_promisc
 6854 00a8 A40E0700 		.word	462500
 6855 00ac 00000000 		.word	.LANCHOR1
 6856 00b0 00000000 		.word	promisc_recover_hop_increment
 6857              		.cfi_endproc
 6858              	.LFE31:
 6860              		.section	.text.promisc_follow_cb,"ax",%progbits
 6861              		.align	1
 6862              		.global	promisc_follow_cb
 6863              		.thumb
 6864              		.thumb_func
 6866              	promisc_follow_cb:
 6867              	.LFB32:
2487:bluetooth_rxtx.c **** }
2488:bluetooth_rxtx.c **** 
2489:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 186


 6868              		.loc 1 2489 0
 6869              		.cfi_startproc
 6870              		@ args = 0, pretend = 0, frame = 0
 6871              		@ frame_needed = 0, uses_anonymous_args = 0
 6872              	.LVL731:
 6873 0000 38B5     		push	{r3, r4, r5, lr}
 6874              		.cfi_def_cfa_offset 16
 6875              		.cfi_offset 3, -16
 6876              		.cfi_offset 4, -12
 6877              		.cfi_offset 5, -8
 6878              		.cfi_offset 14, -4
2490:bluetooth_rxtx.c **** 	int i;
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** 	// get the CRCInit
2493:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 6879              		.loc 1 2493 0
 6880 0002 184D     		ldr	r5, .L745
2489:bluetooth_rxtx.c **** 	int i;
 6881              		.loc 1 2489 0
 6882 0004 0146     		mov	r1, r0
 6883              		.loc 1 2493 0
 6884 0006 6B69     		ldr	r3, [r5, #20]
 6885 0008 53BB     		cbnz	r3, .L741
 6886              		.loc 1 2493 0 is_stmt 0 discriminator 1
 6887 000a 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 6888 000c 012B     		cmp	r3, #1
 6889 000e 27D1     		bne	.L741
 6890              		.loc 1 2493 0 discriminator 2
 6891 0010 4479     		ldrb	r4, [r0, #5]	@ zero_extendqisi2
 6892 0012 2CBB     		cbnz	r4, .L741
 6893              	.LVL732:
 6894              	.LBB70:
 6895              	.LBB71:
 6896              	.LBB72:
2494:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 6897              		.loc 1 2494 0 is_stmt 1
 6898 0014 CB79     		ldrb	r3, [r1, #7]	@ zero_extendqisi2
 6899 0016 007A     		ldrb	r0, [r0, #8]	@ zero_extendqisi2
 6900              	.LVL733:
 6901 0018 1B02     		lsls	r3, r3, #8
 6902 001a 43EA0043 		orr	r3, r3, r0, lsl #16
 6903 001e 8879     		ldrb	r0, [r1, #6]	@ zero_extendqisi2
2495:bluetooth_rxtx.c **** 
2496:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 6904              		.loc 1 2496 0
 6905 0020 0222     		movs	r2, #2
 6906 0022 1843     		orrs	r0, r0, r3
 6907 0024 0431     		adds	r1, r1, #4
 6908              	.LVL734:
 6909 0026 FFF7FEFF 		bl	btle_reverse_crc
 6910              	.LVL735:
 6911 002a 2346     		mov	r3, r4
2497:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
2498:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 6912              		.loc 1 2498 0
 6913 002c 2246     		mov	r2, r4
2496:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 187


 6914              		.loc 1 2496 0
 6915 002e E860     		str	r0, [r5, #12]
 6916              	.LVL736:
 6917              	.L743:
2499:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6918              		.loc 1 2499 0
 6919 0030 20FA02F1 		lsr	r1, r0, r2
 6920 0034 C2F11704 		rsb	r4, r2, #23
 6921 0038 01F00101 		and	r1, r1, #1
2498:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6922              		.loc 1 2498 0
 6923 003c 0132     		adds	r2, r2, #1
 6924              	.LVL737:
 6925              		.loc 1 2499 0
 6926 003e A140     		lsls	r1, r1, r4
2498:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6927              		.loc 1 2498 0
 6928 0040 182A     		cmp	r2, #24
 6929              		.loc 1 2499 0
 6930 0042 43EA0103 		orr	r3, r3, r1
2498:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6931              		.loc 1 2498 0
 6932 0046 F3D1     		bne	.L743
 6933 0048 2B61     		str	r3, [r5, #16]
2500:bluetooth_rxtx.c **** 
2501:bluetooth_rxtx.c **** 		le.crc_verify = 1;
2502:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 6934              		.loc 1 2502 0
 6935 004a 074A     		ldr	r2, .L745+4
 6936              	.LVL738:
 6937 004c 074B     		ldr	r3, .L745+8
2501:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 6938              		.loc 1 2501 0
 6939 004e 0120     		movs	r0, #1
 6940              		.loc 1 2502 0
 6941 0050 9A61     		str	r2, [r3, #24]
2501:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 6942              		.loc 1 2501 0
 6943 0052 6861     		str	r0, [r5, #20]
2503:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 6944              		.loc 1 2503 0
 6945 0054 0649     		ldr	r1, .L745+12
 6946 0056 0322     		movs	r2, #3
 6947              	.LBE72:
 6948              	.LBE71:
 6949              	.LBE70:
2504:bluetooth_rxtx.c **** 	}
2505:bluetooth_rxtx.c **** }
 6950              		.loc 1 2505 0
 6951 0058 BDE83840 		pop	{r3, r4, r5, lr}
 6952              		.cfi_remember_state
 6953              		.cfi_restore 14
 6954              		.cfi_restore 5
 6955              		.cfi_restore 4
 6956              		.cfi_restore 3
 6957              		.cfi_def_cfa_offset 0
 6958              	.LBB75:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 188


 6959              	.LBB74:
 6960              	.LBB73:
2503:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 6961              		.loc 1 2503 0
 6962 005c FFF7FEBF 		b	le_promisc_state
 6963              	.LVL739:
 6964              	.L741:
 6965              		.cfi_restore_state
 6966 0060 38BD     		pop	{r3, r4, r5, pc}
 6967              	.L746:
 6968 0062 00BF     		.align	2
 6969              	.L745:
 6970 0064 00000000 		.word	.LANCHOR1
 6971 0068 00000000 		.word	promisc_recover_hop_interval
 6972 006c 00000000 		.word	.LANCHOR0
 6973 0070 0C000000 		.word	.LANCHOR1+12
 6974              	.LBE73:
 6975              	.LBE74:
 6976              	.LBE75:
 6977              		.cfi_endproc
 6978              	.LFE32:
 6980              		.section	.text.see_aa,"ax",%progbits
 6981              		.align	1
 6982              		.global	see_aa
 6983              		.thumb
 6984              		.thumb_func
 6986              	see_aa:
 6987              	.LFB33:
2506:bluetooth_rxtx.c **** 
2507:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2508:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 6988              		.loc 1 2508 0
 6989              		.cfi_startproc
 6990              		@ args = 0, pretend = 0, frame = 0
 6991              		@ frame_needed = 0, uses_anonymous_args = 0
 6992              	.LVL740:
 6993 0000 30B5     		push	{r4, r5, lr}
 6994              		.cfi_def_cfa_offset 12
 6995              		.cfi_offset 4, -12
 6996              		.cfi_offset 5, -8
 6997              		.cfi_offset 14, -4
 6998              	.LVL741:
2509:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
2510:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 6999              		.loc 1 2510 0
 7000 0002 0022     		movs	r2, #0
 7001              	.LVL742:
 7002              	.L750:
2511:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7003              		.loc 1 2511 0
 7004 0004 124B     		ldr	r3, .L756
 7005 0006 53F83240 		ldr	r4, [r3, r2, lsl #3]
 7006 000a 03EBC201 		add	r1, r3, r2, lsl #3
 7007 000e 8442     		cmp	r4, r0
 7008 0010 03D1     		bne	.L748
2512:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 7009              		.loc 1 2512 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 189


 7010 0012 4B68     		ldr	r3, [r1, #4]
 7011 0014 0133     		adds	r3, r3, #1
 7012 0016 4B60     		str	r3, [r1, #4]
2513:bluetooth_rxtx.c **** 			return;
 7013              		.loc 1 2513 0
 7014 0018 30BD     		pop	{r4, r5, pc}
 7015              	.L748:
2510:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 7016              		.loc 1 2510 0 discriminator 2
 7017 001a 0132     		adds	r2, r2, #1
 7018              	.LVL743:
 7019 001c 202A     		cmp	r2, #32
 7020 001e F1D1     		bne	.L750
 7021 0020 4FF0FF31 		mov	r1, #-1
 7022 0024 0C46     		mov	r4, r1
 7023 0026 0022     		movs	r2, #0
 7024              	.LVL744:
 7025              	.L752:
 7026 0028 03EBC205 		add	r5, r3, r2, lsl #3
 7027              	.LBB78:
 7028              	.LBB79:
2514:bluetooth_rxtx.c **** 		}
2515:bluetooth_rxtx.c **** 
2516:bluetooth_rxtx.c **** 	// evict someone
2517:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
2518:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7029              		.loc 1 2518 0
 7030 002c 6D68     		ldr	r5, [r5, #4]
 7031 002e A542     		cmp	r5, r4
 7032 0030 01DB     		blt	.L753
 7033 0032 002C     		cmp	r4, #0
 7034 0034 01DA     		bge	.L751
 7035              	.L753:
 7036 0036 1146     		mov	r1, r2
 7037 0038 2C46     		mov	r4, r5
 7038              	.LVL745:
 7039              	.L751:
2517:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 7040              		.loc 1 2517 0
 7041 003a 0132     		adds	r2, r2, #1
 7042              	.LVL746:
 7043 003c 202A     		cmp	r2, #32
 7044 003e F3D1     		bne	.L752
2519:bluetooth_rxtx.c **** 			killme = i;
2520:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
2521:bluetooth_rxtx.c **** 		}
2522:bluetooth_rxtx.c **** 
2523:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 7045              		.loc 1 2523 0
 7046 0040 43F83100 		str	r0, [r3, r1, lsl #3]
2524:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 7047              		.loc 1 2524 0
 7048 0044 0122     		movs	r2, #1
 7049              	.LVL747:
 7050 0046 03EBC103 		add	r3, r3, r1, lsl #3
 7051 004a 5A60     		str	r2, [r3, #4]
 7052 004c 30BD     		pop	{r4, r5, pc}
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 190


 7053              	.LVL748:
 7054              	.L757:
 7055 004e 00BF     		.align	2
 7056              	.L756:
 7057 0050 00000000 		.word	le_promisc
 7058              	.LBE79:
 7059              	.LBE78:
 7060              		.cfi_endproc
 7061              	.LFE33:
 7063              		.section	.text.cb_le_promisc,"ax",%progbits
 7064              		.align	1
 7065              		.global	cb_le_promisc
 7066              		.thumb
 7067              		.thumb_func
 7069              	cb_le_promisc:
 7070              	.LFB34:
2525:bluetooth_rxtx.c **** }
2526:bluetooth_rxtx.c **** 
2527:bluetooth_rxtx.c **** /* le promiscuous mode */
2528:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 7071              		.loc 1 2528 0
 7072              		.cfi_startproc
 7073              		@ args = 0, pretend = 0, frame = 80
 7074              		@ frame_needed = 0, uses_anonymous_args = 0
 7075              	.LVL749:
 7076 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7077              		.cfi_def_cfa_offset 24
 7078              		.cfi_offset 4, -24
 7079              		.cfi_offset 5, -20
 7080              		.cfi_offset 6, -16
 7081              		.cfi_offset 7, -12
 7082              		.cfi_offset 8, -8
 7083              		.cfi_offset 14, -4
 7084 0004 94B0     		sub	sp, sp, #80
 7085              		.cfi_def_cfa_offset 104
2529:bluetooth_rxtx.c **** 	int i, j, k;
2530:bluetooth_rxtx.c **** 	int idx;
2531:bluetooth_rxtx.c **** 
2532:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2533:bluetooth_rxtx.c **** 	char desired[4][16] = {
 7086              		.loc 1 2533 0
 7087 0006 0021     		movs	r1, #0
2528:bluetooth_rxtx.c **** 	int i, j, k;
 7088              		.loc 1 2528 0
 7089 0008 0446     		mov	r4, r0
 7090              		.loc 1 2533 0
 7091 000a 4022     		movs	r2, #64
 7092 000c 04A8     		add	r0, sp, #16
 7093              	.LVL750:
 7094 000e FFF7FEFF 		bl	memset
 7095              	.LVL751:
 7096 0012 0123     		movs	r3, #1
 7097 0014 8DF81030 		strb	r3, [sp, #16]
 7098 0018 8DF82030 		strb	r3, [sp, #32]
 7099 001c 8DF82330 		strb	r3, [sp, #35]
 7100 0020 8DF83030 		strb	r3, [sp, #48]
 7101 0024 8DF83230 		strb	r3, [sp, #50]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 191


 7102 0028 8DF84030 		strb	r3, [sp, #64]
 7103 002c 8DF84230 		strb	r3, [sp, #66]
 7104 0030 8DF84330 		strb	r3, [sp, #67]
 7105              	.LVL752:
 7106 0034 0027     		movs	r7, #0
 7107              	.LVL753:
 7108              	.L760:
2534:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2535:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2536:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2537:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2538:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2539:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2540:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2541:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2542:bluetooth_rxtx.c **** 	};
2543:bluetooth_rxtx.c **** 
2544:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
2545:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 7109              		.loc 1 2545 0
 7110 0036 594D     		ldr	r5, .L787
 7111 0038 594E     		ldr	r6, .L787+4
 7112 003a 2888     		ldrh	r0, [r5]
 7113 003c 6238     		subs	r0, r0, #98
 7114 003e C0B2     		uxtb	r0, r0
 7115 0040 FFF7FEFF 		bl	btle_channel_index
 7116              	.LVL754:
 7117 0044 335C     		ldrb	r3, [r6, r0]	@ zero_extendqisi2
 7118              	.LVL755:
2546:bluetooth_rxtx.c **** 
2547:bluetooth_rxtx.c **** 		// whiten the desired data
2548:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 7119              		.loc 1 2548 0
 7120 0046 0021     		movs	r1, #0
 7121              	.LVL756:
 7122              	.L759:
2549:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7123              		.loc 1 2549 0 discriminator 3
 7124 0048 04AA     		add	r2, sp, #16
 7125 004a 3A44     		add	r2, r2, r7
 7126 004c F018     		adds	r0, r6, r3
 7127 004e 12F801E0 		ldrb	lr, [r2, r1]	@ zero_extendqisi2
 7128 0052 90F82800 		ldrb	r0, [r0, #40]	@ zero_extendqisi2
2550:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 7129              		.loc 1 2550 0 discriminator 3
 7130 0056 0133     		adds	r3, r3, #1
 7131              	.LVL757:
2549:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7132              		.loc 1 2549 0 discriminator 3
 7133 0058 8EEA0000 		eor	r0, lr, r0
 7134 005c 5054     		strb	r0, [r2, r1]
 7135              		.loc 1 2550 0 discriminator 3
 7136 005e 7F22     		movs	r2, #127
 7137 0060 B3FBF2F2 		udiv	r2, r3, r2
2548:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7138              		.loc 1 2548 0 discriminator 3
 7139 0064 0131     		adds	r1, r1, #1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 192


 7140              	.LVL758:
 7141              		.loc 1 2550 0 discriminator 3
 7142 0066 C2EBC212 		rsb	r2, r2, r2, lsl #7
2548:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7143              		.loc 1 2548 0 discriminator 3
 7144 006a 1029     		cmp	r1, #16
 7145              		.loc 1 2550 0 discriminator 3
 7146 006c A3EB0203 		sub	r3, r3, r2
 7147              	.LVL759:
2548:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7148              		.loc 1 2548 0 discriminator 3
 7149 0070 EAD1     		bne	.L759
 7150 0072 1037     		adds	r7, r7, #16
2544:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 7151              		.loc 1 2544 0 discriminator 2
 7152 0074 402F     		cmp	r7, #64
 7153 0076 DED1     		bne	.L760
 7154 0078 2027     		movs	r7, #32
 7155              	.LVL760:
 7156              	.L773:
 7157              	.LBB80:
2551:bluetooth_rxtx.c **** 		}
2552:bluetooth_rxtx.c **** 	}
2553:bluetooth_rxtx.c **** 
2554:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2555:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
2556:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7158              		.loc 1 2556 0
 7159 007a EE46     		mov	lr, sp
 7160 007c 494B     		ldr	r3, .L787+8
 7161 007e 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 7162 0080 8DE80F00 		stmia	sp, {r0, r1, r2, r3}
 7163              	.LVL761:
2557:bluetooth_rxtx.c **** 		int matching = -1;
2558:bluetooth_rxtx.c **** 
2559:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 7164              		.loc 1 2559 0
 7165 0084 0022     		movs	r2, #0
 7166              	.LVL762:
 7167              	.L761:
 7168 0086 04AB     		add	r3, sp, #16
 7169 0088 03EB0211 		add	r1, r3, r2, lsl #4
 7170              	.LBE80:
 7171 008c 0023     		movs	r3, #0
 7172              	.LVL763:
 7173              	.L764:
 7174 008e E019     		adds	r0, r4, r7
 7175              	.LBB85:
2560:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
2561:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 7176              		.loc 1 2561 0
 7177 0090 10F803C0 		ldrb	ip, [r0, r3]	@ zero_extendqisi2
 7178 0094 C85C     		ldrb	r0, [r1, r3]	@ zero_extendqisi2
 7179 0096 8445     		cmp	ip, r0
 7180 0098 03D0     		beq	.L762
2562:bluetooth_rxtx.c **** 					ok[j] = 0;
 7181              		.loc 1 2562 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 193


 7182 009a 0023     		movs	r3, #0
 7183              	.LVL764:
 7184 009c 4EF82230 		str	r3, [lr, r2, lsl #2]
2563:bluetooth_rxtx.c **** 					break;
 7185              		.loc 1 2563 0
 7186 00a0 02E0     		b	.L763
 7187              	.LVL765:
 7188              	.L762:
2560:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7189              		.loc 1 2560 0 discriminator 2
 7190 00a2 0133     		adds	r3, r3, #1
 7191              	.LVL766:
 7192 00a4 102B     		cmp	r3, #16
 7193 00a6 F2D1     		bne	.L764
 7194              	.LVL767:
 7195              	.L763:
2559:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7196              		.loc 1 2559 0 discriminator 2
 7197 00a8 0132     		adds	r2, r2, #1
 7198              	.LVL768:
 7199 00aa 042A     		cmp	r2, #4
 7200 00ac EBD1     		bne	.L761
2559:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7201              		.loc 1 2559 0 is_stmt 0
 7202 00ae 0023     		movs	r3, #0
 7203              	.LVL769:
 7204              	.L767:
2564:bluetooth_rxtx.c **** 				}
2565:bluetooth_rxtx.c **** 			}
2566:bluetooth_rxtx.c **** 		}
2567:bluetooth_rxtx.c **** 
2568:bluetooth_rxtx.c **** 		// see if any match
2569:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
2570:bluetooth_rxtx.c **** 			if (ok[j]) {
 7205              		.loc 1 2570 0 is_stmt 1
 7206 00b0 5EF82320 		ldr	r2, [lr, r3, lsl #2]
 7207 00b4 1AB9     		cbnz	r2, .L766
2569:bluetooth_rxtx.c **** 			if (ok[j]) {
 7208              		.loc 1 2569 0 discriminator 2
 7209 00b6 0133     		adds	r3, r3, #1
 7210              	.LVL770:
 7211 00b8 042B     		cmp	r3, #4
 7212 00ba F9D1     		bne	.L767
 7213 00bc 4AE0     		b	.L777
 7214              	.L766:
 7215              	.LVL771:
2571:bluetooth_rxtx.c **** 				matching = j;
2572:bluetooth_rxtx.c **** 				break;
2573:bluetooth_rxtx.c **** 			}
2574:bluetooth_rxtx.c **** 		}
2575:bluetooth_rxtx.c **** 
2576:bluetooth_rxtx.c **** 		// skip if no match
2577:bluetooth_rxtx.c **** 		if (matching < 0)
2578:bluetooth_rxtx.c **** 			continue;
2579:bluetooth_rxtx.c **** 
2580:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2581:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 194


 7216              		.loc 1 2581 0
 7217 00be 2888     		ldrh	r0, [r5]
 7218 00c0 6238     		subs	r0, r0, #98
 7219 00c2 C0B2     		uxtb	r0, r0
 7220 00c4 FFF7FEFF 		bl	btle_channel_index
 7221              	.LVL772:
 7222 00c8 315C     		ldrb	r1, [r6, r0]	@ zero_extendqisi2
 7223              	.LVL773:
2582:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 7224              		.loc 1 2582 0
 7225 00ca 0022     		movs	r2, #0
 7226              	.LVL774:
 7227              	.L778:
2559:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7228              		.loc 1 2559 0
 7229 00cc 4FF0000C 		mov	ip, #0
 7230 00d0 E646     		mov	lr, ip
 7231 00d2 07EBC208 		add	r8, r7, r2, lsl #3
 7232              	.LVL775:
 7233              	.L771:
 7234 00d6 0EEB0803 		add	r3, lr, r8
 7235 00da 2344     		add	r3, r3, r4
 7236              	.LBB81:
 7237              	.LBB82:
2583:bluetooth_rxtx.c **** 			u8 byte = 0;
2584:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
2585:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
2586:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
2587:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
2588:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 7238              		.loc 1 2588 0
 7239 00dc 032A     		cmp	r2, #3
2587:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 7240              		.loc 1 2587 0
 7241 00de 13F8203C 		ldrb	r3, [r3, #-32]	@ zero_extendqisi2
 7242              	.LVL776:
 7243              		.loc 1 2588 0
 7244 00e2 0ADD     		ble	.L770
2589:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 7245              		.loc 1 2589 0
 7246 00e4 7018     		adds	r0, r6, r1
 7247 00e6 90F82800 		ldrb	r0, [r0, #40]	@ zero_extendqisi2
2590:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 7248              		.loc 1 2590 0
 7249 00ea 0131     		adds	r1, r1, #1
 7250              	.LVL777:
2589:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 7251              		.loc 1 2589 0
 7252 00ec 4340     		eors	r3, r3, r0
 7253              	.LVL778:
 7254              		.loc 1 2590 0
 7255 00ee 7F20     		movs	r0, #127
 7256 00f0 B1FBF0F0 		udiv	r0, r1, r0
 7257 00f4 C0EBC010 		rsb	r0, r0, r0, lsl #7
 7258 00f8 091A     		subs	r1, r1, r0
 7259              	.LVL779:
 7260              	.L770:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 195


2591:bluetooth_rxtx.c **** 				}
2592:bluetooth_rxtx.c **** 				byte |= bit << k;
 7261              		.loc 1 2592 0 discriminator 2
 7262 00fa 03FA0EF3 		lsl	r3, r3, lr
 7263              	.LVL780:
 7264              	.LBE82:
2584:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7265              		.loc 1 2584 0 discriminator 2
 7266 00fe 0EF1010E 		add	lr, lr, #1
 7267              	.LVL781:
 7268              	.LBB83:
 7269              		.loc 1 2592 0 discriminator 2
 7270 0102 43EA0C03 		orr	r3, r3, ip
 7271              	.LBE83:
2584:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7272              		.loc 1 2584 0 discriminator 2
 7273 0106 BEF1080F 		cmp	lr, #8
 7274              	.LBB84:
 7275              		.loc 1 2592 0 discriminator 2
 7276 010a 5FFA83FC 		uxtb	ip, r3
 7277              	.LVL782:
 7278              	.LBE84:
2584:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7279              		.loc 1 2584 0 discriminator 2
 7280 010e E2D1     		bne	.L771
2593:bluetooth_rxtx.c **** 			}
2594:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 7281              		.loc 1 2594 0
 7282 0110 DFF8A880 		ldr	r8, .L787+32
 7283 0114 D8F80030 		ldr	r3, [r8]
 7284 0118 03F802C0 		strb	ip, [r3, r2]
 7285              	.LBE81:
2582:bluetooth_rxtx.c **** 			u8 byte = 0;
 7286              		.loc 1 2582 0
 7287 011c 0132     		adds	r2, r2, #1
 7288              	.LVL783:
 7289 011e 0A2A     		cmp	r2, #10
 7290 0120 D4D1     		bne	.L778
2595:bluetooth_rxtx.c **** 		}
2596:bluetooth_rxtx.c **** 
2597:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 7291              		.loc 1 2597 0
 7292 0122 D8F80030 		ldr	r3, [r8]
 7293 0126 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
2598:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 7294              		.loc 1 2598 0
 7295 0128 D8F80020 		ldr	r2, [r8]
 7296              	.LVL784:
 7297 012c 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
2599:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 7298              		.loc 1 2599 0
 7299 012e D8F80010 		ldr	r1, [r8]
 7300              	.LVL785:
2598:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 7301              		.loc 1 2598 0
 7302 0132 1204     		lsls	r2, r2, #16
 7303              		.loc 1 2599 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 196


 7304 0134 4878     		ldrb	r0, [r1, #1]	@ zero_extendqisi2
2600:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 7305              		.loc 1 2600 0
 7306 0136 D8F80010 		ldr	r1, [r8]
2597:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 7307              		.loc 1 2597 0
 7308 013a 42EA0363 		orr	r3, r2, r3, lsl #24
 7309              		.loc 1 2600 0
 7310 013e 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 7311              	.LVL786:
 7312 0140 0B43     		orrs	r3, r3, r1
2601:bluetooth_rxtx.c **** 		see_aa(aa);
 7313              		.loc 1 2601 0
 7314 0142 43EA0020 		orr	r0, r3, r0, lsl #8
 7315 0146 FFF7FEFF 		bl	see_aa
 7316              	.LVL787:
2602:bluetooth_rxtx.c **** 
2603:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
 7317              		.loc 1 2603 0
 7318 014a D8F80010 		ldr	r1, [r8]
 7319 014e 0120     		movs	r0, #1
 7320 0150 FFF7FEFF 		bl	enqueue
 7321              	.LVL788:
 7322              	.L777:
 7323              	.LBE85:
2555:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7324              		.loc 1 2555 0 discriminator 2
 7325 0154 0137     		adds	r7, r7, #1
 7326              	.LVL789:
 7327 0156 B7F53C7F 		cmp	r7, #752
 7328 015a 8ED1     		bne	.L773
 7329 015c 0023     		movs	r3, #0
 7330              	.LVL790:
 7331              	.L776:
 7332 015e 124A     		ldr	r2, .L787+12
 7333 0160 02EBC301 		add	r1, r2, r3, lsl #3
2604:bluetooth_rxtx.c **** 
2605:bluetooth_rxtx.c **** 	}
2606:bluetooth_rxtx.c **** 
2607:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2608:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
2609:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 7334              		.loc 1 2609 0
 7335 0164 4968     		ldr	r1, [r1, #4]
 7336 0166 0329     		cmp	r1, #3
 7337 0168 11DD     		ble	.L774
2610:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 7338              		.loc 1 2610 0
 7339 016a 52F83300 		ldr	r0, [r2, r3, lsl #3]
 7340 016e FFF7FEFF 		bl	le_set_access_address
 7341              	.LVL791:
2611:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7342              		.loc 1 2611 0
 7343 0172 0E4B     		ldr	r3, .L787+16
 7344 0174 0E4A     		ldr	r2, .L787+20
2612:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
2613:bluetooth_rxtx.c **** 			le.crc_verify = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 197


 7345              		.loc 1 2613 0
 7346 0176 0024     		movs	r4, #0
 7347              	.LVL792:
2611:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7348              		.loc 1 2611 0
 7349 0178 9A62     		str	r2, [r3, #40]
2612:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 7350              		.loc 1 2612 0
 7351 017a 0E4A     		ldr	r2, .L787+24
2614:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7352              		.loc 1 2614 0
 7353 017c 2046     		mov	r0, r4
2612:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 7354              		.loc 1 2612 0
 7355 017e 9A61     		str	r2, [r3, #24]
 7356              		.loc 1 2614 0
 7357 0180 0D49     		ldr	r1, .L787+28
 7358 0182 0422     		movs	r2, #4
2613:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7359              		.loc 1 2613 0
 7360 0184 6C61     		str	r4, [r5, #20]
 7361              		.loc 1 2614 0
 7362 0186 FFF7FEFF 		bl	le_promisc_state
 7363              	.LVL793:
2615:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2616:bluetooth_rxtx.c **** 			return 0;
 7364              		.loc 1 2616 0
 7365 018a 2046     		mov	r0, r4
 7366 018c 03E0     		b	.L786
 7367              	.LVL794:
 7368              	.L774:
2608:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 7369              		.loc 1 2608 0 discriminator 2
 7370 018e 0133     		adds	r3, r3, #1
 7371              	.LVL795:
 7372 0190 202B     		cmp	r3, #32
 7373 0192 E4D1     		bne	.L776
2617:bluetooth_rxtx.c **** 		}
2618:bluetooth_rxtx.c **** 	}
2619:bluetooth_rxtx.c **** 
2620:bluetooth_rxtx.c **** 	return 1;
 7374              		.loc 1 2620 0
 7375 0194 0120     		movs	r0, #1
 7376              	.LVL796:
 7377              	.L786:
2621:bluetooth_rxtx.c **** }
 7378              		.loc 1 2621 0
 7379 0196 14B0     		add	sp, sp, #80
 7380              		.cfi_def_cfa_offset 24
 7381              		@ sp needed
 7382 0198 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7383              	.L788:
 7384              		.align	2
 7385              	.L787:
 7386 019c 00000000 		.word	.LANCHOR1
 7387 01a0 00000000 		.word	.LANCHOR2
 7388 01a4 98080000 		.word	.LANCHOR2+2200
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 198


 7389 01a8 00000000 		.word	le_promisc
 7390 01ac 00000000 		.word	.LANCHOR0
 7391 01b0 00000000 		.word	cb_follow_le
 7392 01b4 00000000 		.word	promisc_follow_cb
 7393 01b8 04000000 		.word	.LANCHOR1+4
 7394 01bc 00000000 		.word	idle_rxbuf
 7395              		.cfi_endproc
 7396              	.LFE34:
 7398              		.section	.text.bt_promisc_le,"ax",%progbits
 7399              		.align	1
 7400              		.global	bt_promisc_le
 7401              		.thumb
 7402              		.thumb_func
 7404              	bt_promisc_le:
 7405              	.LFB35:
2622:bluetooth_rxtx.c **** 
2623:bluetooth_rxtx.c **** void bt_promisc_le() {
 7406              		.loc 1 2623 0
 7407              		.cfi_startproc
 7408              		@ args = 0, pretend = 0, frame = 0
 7409              		@ frame_needed = 0, uses_anonymous_args = 0
 7410 0000 38B5     		push	{r3, r4, r5, lr}
 7411              		.cfi_def_cfa_offset 16
 7412              		.cfi_offset 3, -16
 7413              		.cfi_offset 4, -12
 7414              		.cfi_offset 5, -8
 7415              		.cfi_offset 14, -4
 7416              	.L790:
2624:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 7417              		.loc 1 2624 0
 7418 0002 164C     		ldr	r4, .L799
 7419 0004 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 7420 0006 0A2B     		cmp	r3, #10
 7421 0008 26D1     		bne	.L789
2625:bluetooth_rxtx.c **** 		reset_le_promisc();
2626:bluetooth_rxtx.c **** 
2627:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2628:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 7422              		.loc 1 2628 0
 7423 000a 154D     		ldr	r5, .L799+4
2625:bluetooth_rxtx.c **** 		reset_le_promisc();
 7424              		.loc 1 2625 0
 7425 000c FFF7FEFF 		bl	reset_le_promisc
 7426              	.LVL797:
 7427              		.loc 1 2628 0
 7428 0010 2B88     		ldrh	r3, [r5]
 7429 0012 DB07     		lsls	r3, r3, #31
2629:bluetooth_rxtx.c **** 			channel = 2440;
 7430              		.loc 1 2629 0
 7431 0014 44BF     		itt	mi
 7432 0016 40F68813 		movwmi	r3, #2440
 7433 001a 2B80     		strhmi	r3, [r5]	@ movhi
2630:bluetooth_rxtx.c **** 
2631:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2632:bluetooth_rxtx.c **** 		if (!le.target_set) {
 7434              		.loc 1 2632 0
 7435 001c 2B6C     		ldr	r3, [r5, #64]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 199


 7436 001e 4BB9     		cbnz	r3, .L792
2633:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2634:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
 7437              		.loc 1 2634 0
 7438 0020 0F4B     		ldr	r3, .L799+4
 7439 0022 1888     		ldrh	r0, [r3]
 7440 0024 80B2     		uxth	r0, r0
 7441 0026 FFF7FEFF 		bl	cs_threshold_calc_and_set
 7442              	.LVL798:
2635:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 7443              		.loc 1 2635 0
 7444 002a 0E4B     		ldr	r3, .L799+8
2636:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 7445              		.loc 1 2636 0
 7446 002c 0A20     		movs	r0, #10
2635:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 7447              		.loc 1 2635 0
 7448 002e A362     		str	r3, [r4, #40]
 7449              		.loc 1 2636 0
 7450 0030 FFF7FEFF 		bl	bt_generic_le
 7451              	.LVL799:
 7452              	.L792:
2637:bluetooth_rxtx.c **** 		}
2638:bluetooth_rxtx.c **** 
2639:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2640:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 7453              		.loc 1 2640 0
 7454 0034 A47C     		ldrb	r4, [r4, #18]	@ zero_extendqisi2
 7455 0036 E4B2     		uxtb	r4, r4
 7456 0038 0A2C     		cmp	r4, #10
 7457 003a 0DD1     		bne	.L789
2641:bluetooth_rxtx.c **** 			break;
2642:bluetooth_rxtx.c **** 
2643:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 7458              		.loc 1 2643 0
 7459 003c 0020     		movs	r0, #0
 7460 003e 0A49     		ldr	r1, .L799+12
 7461 0040 0422     		movs	r2, #4
 7462 0042 FFF7FEFF 		bl	le_promisc_state
 7463              	.LVL800:
2644:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 7464              		.loc 1 2644 0
 7465 0046 094A     		ldr	r2, .L799+16
 7466 0048 044B     		ldr	r3, .L799
2645:bluetooth_rxtx.c **** 		le.crc_verify = 0;
2646:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 7467              		.loc 1 2646 0
 7468 004a 2046     		mov	r0, r4
2644:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 7469              		.loc 1 2644 0
 7470 004c 9A61     		str	r2, [r3, #24]
2645:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 7471              		.loc 1 2645 0
 7472 004e 0023     		movs	r3, #0
 7473 0050 6B61     		str	r3, [r5, #20]
 7474              		.loc 1 2646 0
 7475 0052 FFF7FEFF 		bl	bt_le_sync
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 200


 7476              	.LVL801:
 7477 0056 D4E7     		b	.L790
 7478              	.L789:
 7479 0058 38BD     		pop	{r3, r4, r5, pc}
 7480              	.L800:
 7481 005a 00BF     		.align	2
 7482              	.L799:
 7483 005c 00000000 		.word	.LANCHOR0
 7484 0060 00000000 		.word	.LANCHOR1
 7485 0064 00000000 		.word	cb_le_promisc
 7486 0068 04000000 		.word	.LANCHOR1+4
 7487 006c 00000000 		.word	promisc_follow_cb
 7488              		.cfi_endproc
 7489              	.LFE35:
 7491              		.section	.text.generatePacket_boss,"ax",%progbits
 7492              		.align	1
 7493              		.global	generatePacket_boss
 7494              		.thumb
 7495              		.thumb_func
 7497              	generatePacket_boss:
 7498              	.LFB36:
2647:bluetooth_rxtx.c **** 	}
2648:bluetooth_rxtx.c **** }
2649:bluetooth_rxtx.c **** 
2650:bluetooth_rxtx.c **** u8 generatePacket_boss(uint8_t mode, uint8_t *data, u8 *pkt){
 7499              		.loc 1 2650 0
 7500              		.cfi_startproc
 7501              		@ args = 0, pretend = 0, frame = 0
 7502              		@ frame_needed = 0, uses_anonymous_args = 0
 7503              	.LVL802:
 7504 0000 38B5     		push	{r3, r4, r5, lr}
 7505              		.cfi_def_cfa_offset 16
 7506              		.cfi_offset 3, -16
 7507              		.cfi_offset 4, -12
 7508              		.cfi_offset 5, -8
 7509              		.cfi_offset 14, -4
 7510              	.LVL803:
 7511              		.loc 1 2650 0
 7512 0002 1446     		mov	r4, r2
2651:bluetooth_rxtx.c **** 
2652:bluetooth_rxtx.c **** 	u32 calc_crc;
2653:bluetooth_rxtx.c **** 	int i;
2654:bluetooth_rxtx.c **** 	u8 pkt_len;
2655:bluetooth_rxtx.c **** 
2656:bluetooth_rxtx.c **** 	u8 pkt_tempate[]= {
2657:bluetooth_rxtx.c **** 		// LL header
2658:bluetooth_rxtx.c **** 		0x00, 0x09,
2659:bluetooth_rxtx.c **** 
2660:bluetooth_rxtx.c **** 		// advertising address
2661:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2662:bluetooth_rxtx.c **** 
2663:bluetooth_rxtx.c **** 		// advertising data
2664:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2665:bluetooth_rxtx.c **** 
2666:bluetooth_rxtx.c **** 		// CRC (calc)
2667:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2668:bluetooth_rxtx.c **** 	};
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 201


2669:bluetooth_rxtx.c **** 
2670:bluetooth_rxtx.c **** 	// -3 to eliminate the length of the default CRC in the template.
2671:bluetooth_rxtx.c **** 	pkt_len = sizeof(pkt_tempate);
2672:bluetooth_rxtx.c **** 
2673:bluetooth_rxtx.c **** 	//Copy pkt_template contents to the new packet
2674:bluetooth_rxtx.c **** 	//for(i = 0; i < pkt_len; i++)
2675:bluetooth_rxtx.c **** 	//	pkt[i] = pkt_tempate[i];
2676:bluetooth_rxtx.c **** 
2677:bluetooth_rxtx.c **** 	switch(mode){
 7513              		.loc 1 2677 0
 7514 0004 90B9     		cbnz	r0, .L807
2678:bluetooth_rxtx.c **** 
2679:bluetooth_rxtx.c **** 		case ADV_IND:
2680:bluetooth_rxtx.c **** 
2681:bluetooth_rxtx.c **** 			// LL header
2682:bluetooth_rxtx.c **** 			pkt[0] =  0x00;
2683:bluetooth_rxtx.c **** 			pkt[1] = 0x09;
 7515              		.loc 1 2683 0
 7516 0006 1346     		mov	r3, r2
2682:bluetooth_rxtx.c **** 			pkt[1] = 0x09;
 7517              		.loc 1 2682 0
 7518 0008 1070     		strb	r0, [r2]
 7519              		.loc 1 2683 0
 7520 000a 0922     		movs	r2, #9
 7521              	.LVL804:
 7522 000c 03F8012F 		strb	r2, [r3, #1]!
 7523              	.LVL805:
 7524 0010 0E4A     		ldr	r2, .L808
 7525 0012 E11D     		adds	r1, r4, #7
 7526              	.LVL806:
 7527              	.L804:
2684:bluetooth_rxtx.c **** 			pkt_len = 2; //2 Bytes for LL Address
2685:bluetooth_rxtx.c **** 
2686:bluetooth_rxtx.c **** 			// Advertising Address: copy the user-specified mac address
2687:bluetooth_rxtx.c **** 			for (i = 0; i < 6; ++i)
2688:bluetooth_rxtx.c **** 				pkt[i+2] = slave_mac_address[5-i];
 7528              		.loc 1 2688 0 discriminator 3
 7529 0014 12F8010D 		ldrb	r0, [r2, #-1]!	@ zero_extendqisi2
 7530 0018 03F8010F 		strb	r0, [r3, #1]!
2687:bluetooth_rxtx.c **** 				pkt[i+2] = slave_mac_address[5-i];
 7531              		.loc 1 2687 0 discriminator 3
 7532 001c 8B42     		cmp	r3, r1
 7533 001e F9D1     		bne	.L804
 7534              	.LVL807:
2689:bluetooth_rxtx.c **** 
2690:bluetooth_rxtx.c **** 			pkt_len+=6; //6 Bytes Address
2691:bluetooth_rxtx.c **** 
2692:bluetooth_rxtx.c **** 
2693:bluetooth_rxtx.c **** 			// Add Random Data : 3 Bytes for now
2694:bluetooth_rxtx.c **** 			// TODO: make data dynamic
2695:bluetooth_rxtx.c **** 			// Ahmed Salem, 4/27/2017
2696:bluetooth_rxtx.c **** 			for (i = 0; i < 3; i++){
2697:bluetooth_rxtx.c **** 				pkt[i+8] = 0x02;
 7535              		.loc 1 2697 0 discriminator 1
 7536 0020 0223     		movs	r3, #2
 7537 0022 2372     		strb	r3, [r4, #8]
 7538              	.LVL808:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 202


 7539 0024 6372     		strb	r3, [r4, #9]
 7540              	.LVL809:
 7541 0026 A372     		strb	r3, [r4, #10]
 7542              	.LVL810:
2698:bluetooth_rxtx.c **** 				pkt_len++;
 7543              		.loc 1 2698 0 discriminator 1
 7544 0028 0B25     		movs	r5, #11
 7545 002a 00E0     		b	.L802
 7546              	.LVL811:
 7547              	.L807:
2671:bluetooth_rxtx.c **** 
 7548              		.loc 1 2671 0
 7549 002c 0E25     		movs	r5, #14
 7550              	.LVL812:
 7551              	.L802:
2699:bluetooth_rxtx.c **** 			}
2700:bluetooth_rxtx.c **** 
2701:bluetooth_rxtx.c **** //
2702:bluetooth_rxtx.c **** 			break;
2703:bluetooth_rxtx.c **** 
2704:bluetooth_rxtx.c **** 		case ADV_DIRECT_IND:
2705:bluetooth_rxtx.c **** 			break;
2706:bluetooth_rxtx.c **** 
2707:bluetooth_rxtx.c **** 		case ADV_SCAN_IND:
2708:bluetooth_rxtx.c **** 			break;
2709:bluetooth_rxtx.c **** 
2710:bluetooth_rxtx.c **** 		case ADV_NONCONN_IND:
2711:bluetooth_rxtx.c **** 			break;
2712:bluetooth_rxtx.c **** 
2713:bluetooth_rxtx.c **** 		case SCAN_REQ:
2714:bluetooth_rxtx.c **** 			break;
2715:bluetooth_rxtx.c **** 
2716:bluetooth_rxtx.c **** 		case SCAN_RSP:
2717:bluetooth_rxtx.c **** 			break;
2718:bluetooth_rxtx.c **** 
2719:bluetooth_rxtx.c **** 		case CONNECT_REQ:
2720:bluetooth_rxtx.c **** 
2721:bluetooth_rxtx.c **** 			break;
2722:bluetooth_rxtx.c **** 
2723:bluetooth_rxtx.c **** 		default:
2724:bluetooth_rxtx.c **** 			break;
2725:bluetooth_rxtx.c **** 	}
2726:bluetooth_rxtx.c **** 
2727:bluetooth_rxtx.c **** //	pkt_len = sizeof(pkt);
2728:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, pkt, pkt_len);
 7552              		.loc 1 2728 0
 7553 002e 084B     		ldr	r3, .L808+4
 7554 0030 2146     		mov	r1, r4
 7555 0032 1869     		ldr	r0, [r3, #16]
 7556 0034 2A46     		mov	r2, r5
 7557 0036 FFF7FEFF 		bl	btle_calc_crc
 7558              	.LVL813:
2729:bluetooth_rxtx.c **** 	pkt[pkt_len+0] = (calc_crc >>  0) & 0xff;
 7559              		.loc 1 2729 0
 7560 003a 6055     		strb	r0, [r4, r5]
2730:bluetooth_rxtx.c **** 	pkt[pkt_len+1] = (calc_crc >>  8) & 0xff;
 7561              		.loc 1 2730 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 203


 7562 003c 030A     		lsrs	r3, r0, #8
 7563 003e 2C44     		add	r4, r4, r5
 7564              	.LVL814:
2731:bluetooth_rxtx.c **** 	pkt[pkt_len+2] = (calc_crc >> 16) & 0xff;
 7565              		.loc 1 2731 0
 7566 0040 000C     		lsrs	r0, r0, #16
 7567              	.LVL815:
 7568 0042 A070     		strb	r0, [r4, #2]
 7569              	.LVL816:
2730:bluetooth_rxtx.c **** 	pkt[pkt_len+1] = (calc_crc >>  8) & 0xff;
 7570              		.loc 1 2730 0
 7571 0044 6370     		strb	r3, [r4, #1]
2732:bluetooth_rxtx.c **** 	pkt_len+=3; //3 Bytes CRC
2733:bluetooth_rxtx.c **** 
2734:bluetooth_rxtx.c **** 
2735:bluetooth_rxtx.c **** 
2736:bluetooth_rxtx.c **** 	return pkt_len;
2737:bluetooth_rxtx.c **** 
2738:bluetooth_rxtx.c **** }
 7572              		.loc 1 2738 0
 7573 0046 E81C     		adds	r0, r5, #3
 7574 0048 38BD     		pop	{r3, r4, r5, pc}
 7575              	.LVL817:
 7576              	.L809:
 7577 004a 00BF     		.align	2
 7578              	.L808:
 7579 004c 26000000 		.word	.LANCHOR0+38
 7580 0050 00000000 		.word	.LANCHOR1
 7581              		.cfi_endproc
 7582              	.LFE36:
 7584              		.section	.text.bt_boss_slave_le,"ax",%progbits
 7585              		.align	1
 7586              		.global	bt_boss_slave_le
 7587              		.thumb
 7588              		.thumb_func
 7590              	bt_boss_slave_le:
 7591              	.LFB37:
2739:bluetooth_rxtx.c **** 
2740:bluetooth_rxtx.c **** void bt_boss_slave_le(){
 7592              		.loc 1 2740 0
 7593              		.cfi_startproc
 7594              		@ args = 0, pretend = 0, frame = 40
 7595              		@ frame_needed = 0, uses_anonymous_args = 0
 7596 0000 70B5     		push	{r4, r5, r6, lr}
 7597              		.cfi_def_cfa_offset 16
 7598              		.cfi_offset 4, -16
 7599              		.cfi_offset 5, -12
 7600              		.cfi_offset 6, -8
 7601              		.cfi_offset 14, -4
 7602 0002 8AB0     		sub	sp, sp, #40
 7603              		.cfi_def_cfa_offset 56
2741:bluetooth_rxtx.c **** 
2742:bluetooth_rxtx.c **** 	u8 pkt_len;
2743:bluetooth_rxtx.c **** 	//39 is the max. PDU length from the BLE standard.
2744:bluetooth_rxtx.c **** 	u8 pkt[39];
2745:bluetooth_rxtx.c **** 
2746:bluetooth_rxtx.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 204


2747:bluetooth_rxtx.c **** 	pkt_len = generatePacket_boss(ADV_IND, NULL, pkt);
 7604              		.loc 1 2747 0
 7605 0004 0020     		movs	r0, #0
 7606 0006 0146     		mov	r1, r0
 7607 0008 6A46     		mov	r2, sp
 7608 000a FFF7FEFF 		bl	generatePacket_boss
 7609              	.LVL818:
 7610 000e 0646     		mov	r6, r0
 7611              	.LVL819:
2748:bluetooth_rxtx.c **** 
2749:bluetooth_rxtx.c **** 	clkn_start();
 7612              		.loc 1 2749 0
 7613 0010 FFF7FEFF 		bl	clkn_start
 7614              	.LVL820:
 7615              	.L811:
2750:bluetooth_rxtx.c **** 
2751:bluetooth_rxtx.c **** 	// spam advertising packets
2752:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BOSS_SLAVE_LE) {
 7616              		.loc 1 2752 0
 7617 0014 0B4B     		ldr	r3, .L814
 7618 0016 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 7619 0018 112B     		cmp	r3, #17
 7620 001a 11D1     		bne	.L813
2753:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 7621              		.loc 1 2753 0
 7622 001c 0A4B     		ldr	r3, .L814+4
 7623 001e 4FF08075 		mov	r5, #16777216
2754:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 7624              		.loc 1 2754 0
 7625 0022 4FF08064 		mov	r4, #67108864
2753:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 7626              		.loc 1 2753 0
 7627 0026 1D60     		str	r5, [r3]
2755:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, pkt_len, pkt);
 7628              		.loc 1 2755 0
 7629 0028 0848     		ldr	r0, .L814+8
2754:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 7630              		.loc 1 2754 0
 7631 002a 1C60     		str	r4, [r3]
 7632              		.loc 1 2755 0
 7633 002c 3146     		mov	r1, r6
 7634 002e 6A46     		mov	r2, sp
 7635 0030 FFF7FEFF 		bl	le_transmit
 7636              	.LVL821:
2756:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 7637              		.loc 1 2756 0
 7638 0034 064B     		ldr	r3, .L814+12
 7639 0036 1D60     		str	r5, [r3]
2757:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 7640              		.loc 1 2757 0
 7641 0038 1C60     		str	r4, [r3]
2758:bluetooth_rxtx.c **** 		msleep(100);
 7642              		.loc 1 2758 0
 7643 003a FFF7FEFF 		bl	msleep.constprop.3
 7644              	.LVL822:
 7645 003e E9E7     		b	.L811
 7646              	.L813:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 205


2759:bluetooth_rxtx.c **** 	}
2760:bluetooth_rxtx.c **** }
 7647              		.loc 1 2760 0
 7648 0040 0AB0     		add	sp, sp, #40
 7649              		.cfi_def_cfa_offset 16
 7650              		@ sp needed
 7651 0042 70BD     		pop	{r4, r5, r6, pc}
 7652              	.LVL823:
 7653              	.L815:
 7654              		.align	2
 7655              	.L814:
 7656 0044 00000000 		.word	.LANCHOR0
 7657 0048 80E100E0 		.word	-536813184
 7658 004c D6BE898E 		.word	-1903575338
 7659 0050 00E100E0 		.word	-536813312
 7660              		.cfi_endproc
 7661              	.LFE37:
 7663              		.section	.text.bt_slave_le,"ax",%progbits
 7664              		.align	1
 7665              		.global	bt_slave_le
 7666              		.thumb
 7667              		.thumb_func
 7669              	bt_slave_le:
 7670              	.LFB38:
2761:bluetooth_rxtx.c **** 
2762:bluetooth_rxtx.c **** 
2763:bluetooth_rxtx.c **** void bt_slave_le() {
 7671              		.loc 1 2763 0
 7672              		.cfi_startproc
 7673              		@ args = 0, pretend = 0, frame = 16
 7674              		@ frame_needed = 0, uses_anonymous_args = 0
 7675 0000 7FB5     		push	{r0, r1, r2, r3, r4, r5, r6, lr}
 7676              		.cfi_def_cfa_offset 32
 7677              		.cfi_offset 4, -16
 7678              		.cfi_offset 5, -12
 7679              		.cfi_offset 6, -8
 7680              		.cfi_offset 14, -4
2764:bluetooth_rxtx.c **** 	u32 calc_crc;
2765:bluetooth_rxtx.c **** 	int i;
2766:bluetooth_rxtx.c **** 
2767:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 7681              		.loc 1 2767 0
 7682 0002 6A46     		mov	r2, sp
 7683 0004 6D46     		mov	r5, sp
 7684 0006 224B     		ldr	r3, .L830
 7685 0008 03F10806 		add	r6, r3, #8
 7686              	.L817:
 7687 000c 1446     		mov	r4, r2
 7688 000e 1868     		ldr	r0, [r3]	@ unaligned
 7689 0010 5968     		ldr	r1, [r3, #4]	@ unaligned
 7690 0012 0833     		adds	r3, r3, #8
 7691 0014 03C4     		stmia	r4!, {r0, r1}
 7692 0016 B342     		cmp	r3, r6
 7693 0018 2246     		mov	r2, r4
 7694 001a F7D1     		bne	.L817
 7695 001c 1868     		ldr	r0, [r3]	@ unaligned
 7696 001e 9B88     		ldrh	r3, [r3, #4]	@ unaligned
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 206


 7697 0020 2060     		str	r0, [r4]	@ unaligned
 7698 0022 A380     		strh	r3, [r4, #4]	@ unaligned
 7699              	.LVL824:
 7700 0024 0DF10102 		add	r2, sp, #1
 7701 0028 0523     		movs	r3, #5
 7702              	.LVL825:
 7703              	.L818:
2768:bluetooth_rxtx.c **** 		// LL header
2769:bluetooth_rxtx.c **** 		0x00, 0x09,
2770:bluetooth_rxtx.c **** 
2771:bluetooth_rxtx.c **** 		// advertising address
2772:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2773:bluetooth_rxtx.c **** 
2774:bluetooth_rxtx.c **** 		// advertising data
2775:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2776:bluetooth_rxtx.c **** 
2777:bluetooth_rxtx.c **** 		// CRC (calc)
2778:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2779:bluetooth_rxtx.c **** 	};
2780:bluetooth_rxtx.c **** 
2781:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
2782:bluetooth_rxtx.c **** 
2783:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2784:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
2785:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 7704              		.loc 1 2785 0 discriminator 3
 7705 002a 1A49     		ldr	r1, .L830+4
 7706 002c 595C     		ldrb	r1, [r3, r1]	@ zero_extendqisi2
2784:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 7707              		.loc 1 2784 0 discriminator 3
 7708 002e 13F1FF33 		adds	r3, r3, #-1
 7709              		.loc 1 2785 0 discriminator 3
 7710 0032 02F8011F 		strb	r1, [r2, #1]!
 7711              	.LVL826:
2784:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 7712              		.loc 1 2784 0 discriminator 3
 7713 0036 F8D2     		bcs	.L818
2786:bluetooth_rxtx.c **** 
2787:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 7714              		.loc 1 2787 0
 7715 0038 174B     		ldr	r3, .L830+8
 7716 003a 2946     		mov	r1, r5
 7717 003c 1869     		ldr	r0, [r3, #16]
 7718 003e 0B22     		movs	r2, #11
 7719              	.LVL827:
 7720 0040 FFF7FEFF 		bl	btle_calc_crc
 7721              	.LVL828:
2788:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
2789:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 7722              		.loc 1 2789 0
 7723 0044 030A     		lsrs	r3, r0, #8
2788:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 7724              		.loc 1 2788 0
 7725 0046 8DF80B00 		strb	r0, [sp, #11]
2790:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 7726              		.loc 1 2790 0
 7727 004a 000C     		lsrs	r0, r0, #16
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 207


 7728              	.LVL829:
2789:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 7729              		.loc 1 2789 0
 7730 004c 8DF80C30 		strb	r3, [sp, #12]
 7731              		.loc 1 2790 0
 7732 0050 8DF80D00 		strb	r0, [sp, #13]
2791:bluetooth_rxtx.c **** 
2792:bluetooth_rxtx.c **** 	clkn_start();
 7733              		.loc 1 2792 0
 7734 0054 FFF7FEFF 		bl	clkn_start
 7735              	.LVL830:
 7736              	.L819:
2793:bluetooth_rxtx.c **** 
2794:bluetooth_rxtx.c **** 	// spam advertising packets
2795:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE || requested_mode == MODE_BOSS_SLAVE_LE) {
 7737              		.loc 1 2795 0
 7738 0058 104B     		ldr	r3, .L830+12
 7739 005a 9A7C     		ldrb	r2, [r3, #18]	@ zero_extendqisi2
 7740 005c 0C2A     		cmp	r2, #12
 7741 005e 11D1     		bne	.L829
 7742              	.L820:
2796:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 7743              		.loc 1 2796 0
 7744 0060 0F4B     		ldr	r3, .L830+16
 7745 0062 4FF08076 		mov	r6, #16777216
2797:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 7746              		.loc 1 2797 0
 7747 0066 4FF08064 		mov	r4, #67108864
2796:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 7748              		.loc 1 2796 0
 7749 006a 1E60     		str	r6, [r3]
2798:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 7750              		.loc 1 2798 0
 7751 006c 0D48     		ldr	r0, .L830+20
2797:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 7752              		.loc 1 2797 0
 7753 006e 1C60     		str	r4, [r3]
 7754              		.loc 1 2798 0
 7755 0070 0E21     		movs	r1, #14
 7756 0072 2A46     		mov	r2, r5
 7757 0074 FFF7FEFF 		bl	le_transmit
 7758              	.LVL831:
2799:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 7759              		.loc 1 2799 0
 7760 0078 0B4B     		ldr	r3, .L830+24
 7761 007a 1E60     		str	r6, [r3]
2800:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 7762              		.loc 1 2800 0
 7763 007c 1C60     		str	r4, [r3]
2801:bluetooth_rxtx.c **** 		msleep(100);
 7764              		.loc 1 2801 0
 7765 007e FFF7FEFF 		bl	msleep.constprop.3
 7766              	.LVL832:
 7767 0082 E9E7     		b	.L819
 7768              	.L829:
2795:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 7769              		.loc 1 2795 0 discriminator 1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 208


 7770 0084 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 7771 0086 112B     		cmp	r3, #17
 7772 0088 EAD0     		beq	.L820
2802:bluetooth_rxtx.c **** 	}
2803:bluetooth_rxtx.c **** }
 7773              		.loc 1 2803 0
 7774 008a 04B0     		add	sp, sp, #16
 7775              		.cfi_def_cfa_offset 16
 7776              		@ sp needed
 7777 008c 70BD     		pop	{r4, r5, r6, pc}
 7778              	.L831:
 7779 008e 00BF     		.align	2
 7780              	.L830:
 7781 0090 A8080000 		.word	.LANCHOR2+2216
 7782 0094 20000000 		.word	.LANCHOR0+32
 7783 0098 00000000 		.word	.LANCHOR1
 7784 009c 00000000 		.word	.LANCHOR0
 7785 00a0 80E100E0 		.word	-536813184
 7786 00a4 D6BE898E 		.word	-1903575338
 7787 00a8 00E100E0 		.word	-536813312
 7788              		.cfi_endproc
 7789              	.LFE38:
 7791              		.section	.text.rx_generic_sync,"ax",%progbits
 7792              		.align	1
 7793              		.global	rx_generic_sync
 7794              		.thumb
 7795              		.thumb_func
 7797              	rx_generic_sync:
 7798              	.LFB39:
2804:bluetooth_rxtx.c **** 
2805:bluetooth_rxtx.c **** void rx_generic_sync(void) {
 7799              		.loc 1 2805 0
 7800              		.cfi_startproc
 7801              		@ args = 0, pretend = 0, frame = 40
 7802              		@ frame_needed = 0, uses_anonymous_args = 0
 7803 0000 10B5     		push	{r4, lr}
 7804              		.cfi_def_cfa_offset 8
 7805              		.cfi_offset 4, -8
 7806              		.cfi_offset 14, -4
 7807 0002 8AB0     		sub	sp, sp, #40
 7808              		.cfi_def_cfa_offset 48
 7809              	.LVL833:
2806:bluetooth_rxtx.c **** 	u8 len = 32;
2807:bluetooth_rxtx.c **** 	u8 buf[len+4];
2808:bluetooth_rxtx.c **** 	u16 reg_val;
2809:bluetooth_rxtx.c **** 
2810:bluetooth_rxtx.c **** 	/* Put syncword at start of buffer
2811:bluetooth_rxtx.c **** 	 * DGS: fix this later, we don't know number of syncword bytes, etc
2812:bluetooth_rxtx.c **** 	 */
2813:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCH);
 7810              		.loc 1 2813 0
 7811 0004 2D20     		movs	r0, #45
 7812 0006 FFF7FEFF 		bl	cc2400_get
 7813              	.LVL834:
2814:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 7814              		.loc 1 2814 0
 7815 000a 030A     		lsrs	r3, r0, #8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 209


2815:bluetooth_rxtx.c **** 	buf[1] = reg_val & 0xFF;
 7816              		.loc 1 2815 0
 7817 000c 8DF80500 		strb	r0, [sp, #5]
2816:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCL);
 7818              		.loc 1 2816 0
 7819 0010 2C20     		movs	r0, #44
 7820              	.LVL835:
2814:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 7821              		.loc 1 2814 0
 7822 0012 8DF80430 		strb	r3, [sp, #4]
 7823              		.loc 1 2816 0
 7824 0016 FFF7FEFF 		bl	cc2400_get
 7825              	.LVL836:
2817:bluetooth_rxtx.c **** 	buf[2] = (reg_val >> 8) & 0xFF;
 7826              		.loc 1 2817 0
 7827 001a 030A     		lsrs	r3, r0, #8
 7828 001c 8DF80630 		strb	r3, [sp, #6]
2818:bluetooth_rxtx.c **** 	buf[3] = reg_val & 0xFF;
 7829              		.loc 1 2818 0
 7830 0020 8DF80700 		strb	r0, [sp, #7]
2819:bluetooth_rxtx.c **** 
2820:bluetooth_rxtx.c **** 	queue_init();
 7831              		.loc 1 2820 0
 7832 0024 FFF7FEFF 		bl	queue_init
 7833              	.LVL837:
2821:bluetooth_rxtx.c **** 	clkn_start();
 7834              		.loc 1 2821 0
 7835 0028 FFF7FEFF 		bl	clkn_start
 7836              	.LVL838:
 7837              	.L833:
2822:bluetooth_rxtx.c **** 
2823:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7838              		.loc 1 2823 0 discriminator 1
 7839 002c FFF7FEFF 		bl	cc2400_status
 7840              	.LVL839:
 7841 0030 4106     		lsls	r1, r0, #25
 7842 0032 FBD5     		bpl	.L833
2824:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7843              		.loc 1 2824 0
 7844 0034 6120     		movs	r0, #97
 7845 0036 FFF7FEFF 		bl	cc2400_strobe
 7846              	.LVL840:
 7847              	.L834:
2825:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7848              		.loc 1 2825 0 discriminator 1
 7849 003a FFF7FEFF 		bl	cc2400_status
 7850              	.LVL841:
 7851 003e 4207     		lsls	r2, r0, #29
 7852 0040 FBD5     		bpl	.L834
2826:bluetooth_rxtx.c **** 	RXLED_SET;
 7853              		.loc 1 2826 0
 7854 0042 154B     		ldr	r3, .L845
 7855 0044 1022     		movs	r2, #16
 7856 0046 1C46     		mov	r4, r3
 7857 0048 1A60     		str	r2, [r3]
2827:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2828:bluetooth_rxtx.c **** 		PAEN_SET;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 210


 7858              		.loc 1 2828 0
 7859 004a 144A     		ldr	r2, .L845+4
 7860 004c 8021     		movs	r1, #128
 7861 004e 1160     		str	r1, [r2]
2829:bluetooth_rxtx.c **** 		HGM_SET;
 7862              		.loc 1 2829 0
 7863 0050 4FF48071 		mov	r1, #256
 7864 0054 1160     		str	r1, [r2]
 7865              	.L835:
2830:bluetooth_rxtx.c **** #endif
2831:bluetooth_rxtx.c **** 	while (1) {
2832:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 7866              		.loc 1 2832 0 discriminator 1
 7867 0056 0E20     		movs	r0, #14
 7868 0058 FFF7FEFF 		bl	cc2400_get
 7869              	.LVL842:
 7870 005c 00F01F00 		and	r0, r0, #31
 7871 0060 0F28     		cmp	r0, #15
 7872 0062 F8D1     		bne	.L835
2833:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 7873              		.loc 1 2833 0
 7874 0064 6220     		movs	r0, #98
 7875 0066 FFF7FEFF 		bl	cc2400_strobe
 7876              	.LVL843:
2834:bluetooth_rxtx.c **** 		USRLED_CLR;
 7877              		.loc 1 2834 0
 7878 006a 0D4B     		ldr	r3, .L845+8
 7879 006c 0222     		movs	r2, #2
 7880 006e 1A60     		str	r2, [r3]
 7881              	.L836:
2835:bluetooth_rxtx.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 7882              		.loc 1 2835 0 discriminator 1
 7883 0070 FFF7FEFF 		bl	cc2400_status
 7884              	.LVL844:
 7885 0074 C306     		lsls	r3, r0, #27
 7886 0076 FBD5     		bpl	.L836
2836:bluetooth_rxtx.c **** 		USRLED_SET;
 7887              		.loc 1 2836 0
 7888 0078 0223     		movs	r3, #2
 7889 007a 2360     		str	r3, [r4]
2837:bluetooth_rxtx.c **** 
2838:bluetooth_rxtx.c **** 		cc2400_fifo_read(len, buf+4);
 7890              		.loc 1 2838 0
 7891 007c 02A9     		add	r1, sp, #8
 7892 007e 2020     		movs	r0, #32
 7893 0080 FFF7FEFF 		bl	cc2400_fifo_read
 7894              	.LVL845:
2839:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
 7895              		.loc 1 2839 0
 7896 0084 01A9     		add	r1, sp, #4
 7897              	.LVL846:
 7898 0086 0020     		movs	r0, #0
 7899 0088 FFF7FEFF 		bl	enqueue
 7900              	.LVL847:
2840:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7901              		.loc 1 2840 0
 7902 008c 054B     		ldr	r3, .L845+12
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 211


 7903 008e 1868     		ldr	r0, [r3]
 7904 0090 FFF7FEFF 		bl	handle_usb
 7905              	.LVL848:
2841:bluetooth_rxtx.c **** 	}
 7906              		.loc 1 2841 0
 7907 0094 DFE7     		b	.L835
 7908              	.L846:
 7909 0096 00BF     		.align	2
 7910              	.L845:
 7911 0098 38C00920 		.word	537509944
 7912 009c 58C00920 		.word	537509976
 7913 00a0 3CC00920 		.word	537509948
 7914 00a4 00000000 		.word	clkn
 7915              		.cfi_endproc
 7916              	.LFE39:
 7918              		.section	.text.rx_generic,"ax",%progbits
 7919              		.align	1
 7920              		.global	rx_generic
 7921              		.thumb
 7922              		.thumb_func
 7924              	rx_generic:
 7925              	.LFB40:
2842:bluetooth_rxtx.c **** }
2843:bluetooth_rxtx.c **** 
2844:bluetooth_rxtx.c **** void rx_generic(void) {
 7926              		.loc 1 2844 0
 7927              		.cfi_startproc
 7928              		@ args = 0, pretend = 0, frame = 0
 7929              		@ frame_needed = 0, uses_anonymous_args = 0
 7930 0000 08B5     		push	{r3, lr}
 7931              		.cfi_def_cfa_offset 8
 7932              		.cfi_offset 3, -8
 7933              		.cfi_offset 14, -4
2845:bluetooth_rxtx.c **** 	// Check for packet mode
2846:bluetooth_rxtx.c **** 	if(cc2400_get(GRMDM) && 0x0400) {
 7934              		.loc 1 2846 0
 7935 0002 2020     		movs	r0, #32
 7936 0004 FFF7FEFF 		bl	cc2400_get
 7937              	.LVL849:
 7938 0008 08B1     		cbz	r0, .L848
2847:bluetooth_rxtx.c **** 		rx_generic_sync();
 7939              		.loc 1 2847 0
 7940 000a FFF7FEFF 		bl	rx_generic_sync
 7941              	.LVL850:
 7942              	.L848:
2848:bluetooth_rxtx.c **** 	} else {
2849:bluetooth_rxtx.c **** 		modulation = MOD_NONE;
 7943              		.loc 1 2849 0
 7944 000e 034B     		ldr	r3, .L849
 7945 0010 0322     		movs	r2, #3
 7946 0012 1A70     		strb	r2, [r3]
2850:bluetooth_rxtx.c **** 		bt_stream_rx();
2851:bluetooth_rxtx.c **** 	}
2852:bluetooth_rxtx.c **** }
 7947              		.loc 1 2852 0
 7948 0014 BDE80840 		pop	{r3, lr}
 7949              		.cfi_restore 14
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 212


 7950              		.cfi_restore 3
 7951              		.cfi_def_cfa_offset 0
2850:bluetooth_rxtx.c **** 		bt_stream_rx();
 7952              		.loc 1 2850 0
 7953 0018 FFF7FEBF 		b	bt_stream_rx
 7954              	.LVL851:
 7955              	.L850:
 7956              		.align	2
 7957              	.L849:
 7958 001c 00000000 		.word	.LANCHOR0
 7959              		.cfi_endproc
 7960              	.LFE40:
 7962              		.section	.text.tx_generic,"ax",%progbits
 7963              		.align	1
 7964              		.global	tx_generic
 7965              		.thumb
 7966              		.thumb_func
 7968              	tx_generic:
 7969              	.LFB41:
2853:bluetooth_rxtx.c **** 
2854:bluetooth_rxtx.c **** void tx_generic(void) {
 7970              		.loc 1 2854 0
 7971              		.cfi_startproc
 7972              		@ args = 0, pretend = 0, frame = 0
 7973              		@ frame_needed = 0, uses_anonymous_args = 0
 7974 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7975              		.cfi_def_cfa_offset 24
 7976              		.cfi_offset 4, -24
 7977              		.cfi_offset 5, -20
 7978              		.cfi_offset 6, -16
 7979              		.cfi_offset 7, -12
 7980              		.cfi_offset 8, -8
 7981              		.cfi_offset 14, -4
2855:bluetooth_rxtx.c **** 	u16 synch, syncl;
2856:bluetooth_rxtx.c **** 	u8 prev_mode = mode;
 7982              		.loc 1 2856 0
 7983 0004 354D     		ldr	r5, .L864
2857:bluetooth_rxtx.c **** 
2858:bluetooth_rxtx.c **** 	mode = MODE_TX_GENERIC;
 7984              		.loc 1 2858 0
 7985 0006 1023     		movs	r3, #16
2859:bluetooth_rxtx.c **** 
2860:bluetooth_rxtx.c **** 	// Save existing syncword
2861:bluetooth_rxtx.c **** 	synch = cc2400_get(SYNCH);
 7986              		.loc 1 2861 0
 7987 0008 2D20     		movs	r0, #45
2856:bluetooth_rxtx.c **** 
 7988              		.loc 1 2856 0
 7989 000a 6E7C     		ldrb	r6, [r5, #17]	@ zero_extendqisi2
2858:bluetooth_rxtx.c **** 
 7990              		.loc 1 2858 0
 7991 000c 6B74     		strb	r3, [r5, #17]
 7992              		.loc 1 2861 0
 7993 000e FFF7FEFF 		bl	cc2400_get
 7994              	.LVL852:
 7995 0012 8046     		mov	r8, r0
2862:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 213


 7996              		.loc 1 2862 0
 7997 0014 2C20     		movs	r0, #44
 7998 0016 FFF7FEFF 		bl	cc2400_get
 7999              	.LVL853:
2863:bluetooth_rxtx.c **** 
2864:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, tx_pkt.synch);
 8000              		.loc 1 2864 0
 8001 001a 314C     		ldr	r4, .L864+4
2862:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8002              		.loc 1 2862 0
 8003 001c 0746     		mov	r7, r0
 8004              		.loc 1 2864 0
 8005 001e 2188     		ldrh	r1, [r4]
 8006 0020 2D20     		movs	r0, #45
 8007 0022 FFF7FEFF 		bl	cc2400_set
 8008              	.LVL854:
2865:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, tx_pkt.syncl);
 8009              		.loc 1 2865 0
 8010 0026 2C20     		movs	r0, #44
 8011 0028 6188     		ldrh	r1, [r4, #2]
 8012 002a FFF7FEFF 		bl	cc2400_set
 8013              	.LVL855:
2866:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0057);
 8014              		.loc 1 2866 0
 8015 002e 0320     		movs	r0, #3
 8016 0030 5721     		movs	r1, #87
 8017 0032 FFF7FEFF 		bl	cc2400_set
 8018              	.LVL856:
2867:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);
 8019              		.loc 1 2867 0
 8020 0036 1420     		movs	r0, #20
 8021 0038 41F24B31 		movw	r1, #4939
 8022 003c FFF7FEFF 		bl	cc2400_set
 8023              	.LVL857:
2868:bluetooth_rxtx.c **** 	cc2400_set(GRMDM, 0x0f61);
 8024              		.loc 1 2868 0
 8025 0040 2020     		movs	r0, #32
 8026 0042 40F66171 		movw	r1, #3937
 8027 0046 FFF7FEFF 		bl	cc2400_set
 8028              	.LVL858:
2869:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, tx_pkt.channel);
 8029              		.loc 1 2869 0
 8030 004a 0220     		movs	r0, #2
 8031 004c A188     		ldrh	r1, [r4, #4]
 8032 004e FFF7FEFF 		bl	cc2400_set
 8033              	.LVL859:
2870:bluetooth_rxtx.c **** 	cc2400_set(FREND, tx_pkt.pa_level);
 8034              		.loc 1 2870 0
 8035 0052 0520     		movs	r0, #5
 8036 0054 E179     		ldrb	r1, [r4, #7]	@ zero_extendqisi2
2856:bluetooth_rxtx.c **** 
 8037              		.loc 1 2856 0
 8038 0056 F6B2     		uxtb	r6, r6
 8039              	.LVL860:
 8040              		.loc 1 2870 0
 8041 0058 FFF7FEFF 		bl	cc2400_set
 8042              	.LVL861:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 214


 8043              	.L852:
2871:bluetooth_rxtx.c **** 
2872:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8044              		.loc 1 2872 0 discriminator 1
 8045 005c FFF7FEFF 		bl	cc2400_status
 8046              	.LVL862:
 8047 0060 4106     		lsls	r1, r0, #25
 8048 0062 FBD5     		bpl	.L852
2873:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8049              		.loc 1 2873 0
 8050 0064 6120     		movs	r0, #97
 8051 0066 FFF7FEFF 		bl	cc2400_strobe
 8052              	.LVL863:
 8053              	.L853:
2874:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8054              		.loc 1 2874 0 discriminator 1
 8055 006a FFF7FEFF 		bl	cc2400_status
 8056              	.LVL864:
 8057 006e 4207     		lsls	r2, r0, #29
 8058 0070 FBD5     		bpl	.L853
2875:bluetooth_rxtx.c **** 	TXLED_SET;
 8059              		.loc 1 2875 0
 8060 0072 1C4B     		ldr	r3, .L864+8
 8061 0074 4FF48072 		mov	r2, #256
 8062 0078 1A60     		str	r2, [r3]
2876:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2877:bluetooth_rxtx.c **** 		PAEN_SET;
 8063              		.loc 1 2877 0
 8064 007a 8022     		movs	r2, #128
 8065 007c 1A62     		str	r2, [r3, #32]
 8066              	.L854:
2878:bluetooth_rxtx.c **** #endif
2879:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8067              		.loc 1 2879 0 discriminator 1
 8068 007e 0E20     		movs	r0, #14
 8069 0080 FFF7FEFF 		bl	cc2400_get
 8070              	.LVL865:
 8071 0084 00F01F00 		and	r0, r0, #31
 8072 0088 0F28     		cmp	r0, #15
 8073 008a F8D1     		bne	.L854
2880:bluetooth_rxtx.c **** 
2881:bluetooth_rxtx.c **** 	cc2400_fifo_write(tx_pkt.length, tx_pkt.data);
 8074              		.loc 1 2881 0
 8075 008c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 8076 008e 1649     		ldr	r1, .L864+12
 8077 0090 FFF7FEFF 		bl	cc2400_fifo_write
 8078              	.LVL866:
2882:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 8079              		.loc 1 2882 0
 8080 0094 6320     		movs	r0, #99
 8081 0096 FFF7FEFF 		bl	cc2400_strobe
 8082              	.LVL867:
 8083              	.L855:
2883:bluetooth_rxtx.c **** 
2884:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8084              		.loc 1 2884 0 discriminator 1
 8085 009a 0E20     		movs	r0, #14
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 215


 8086 009c FFF7FEFF 		bl	cc2400_get
 8087              	.LVL868:
 8088 00a0 00F01F00 		and	r0, r0, #31
 8089 00a4 0F28     		cmp	r0, #15
 8090 00a6 F8D1     		bne	.L855
2885:bluetooth_rxtx.c **** 	TXLED_CLR;
 8091              		.loc 1 2885 0
 8092 00a8 104B     		ldr	r3, .L864+16
 8093 00aa 4FF48072 		mov	r2, #256
 8094 00ae 1A60     		str	r2, [r3]
2886:bluetooth_rxtx.c **** 
2887:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 8095              		.loc 1 2887 0
 8096 00b0 6420     		movs	r0, #100
 8097 00b2 FFF7FEFF 		bl	cc2400_strobe
 8098              	.LVL869:
 8099              	.L856:
2888:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8100              		.loc 1 2888 0 discriminator 1
 8101 00b6 FFF7FEFF 		bl	cc2400_status
 8102              	.LVL870:
 8103 00ba 4307     		lsls	r3, r0, #29
 8104 00bc FBD4     		bmi	.L856
2889:bluetooth_rxtx.c **** 
2890:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2891:bluetooth_rxtx.c **** 	PAEN_CLR;
 8105              		.loc 1 2891 0
 8106 00be 0C4B     		ldr	r3, .L864+20
 8107 00c0 8022     		movs	r2, #128
 8108 00c2 1A60     		str	r2, [r3]
2892:bluetooth_rxtx.c **** #endif
2893:bluetooth_rxtx.c **** 
2894:bluetooth_rxtx.c **** 	// Restore state
2895:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, synch);
 8109              		.loc 1 2895 0
 8110 00c4 2D20     		movs	r0, #45
 8111 00c6 4146     		mov	r1, r8
 8112 00c8 FFF7FEFF 		bl	cc2400_set
 8113              	.LVL871:
2896:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, syncl);
 8114              		.loc 1 2896 0
 8115 00cc 2C20     		movs	r0, #44
 8116 00ce 3946     		mov	r1, r7
 8117 00d0 FFF7FEFF 		bl	cc2400_set
 8118              	.LVL872:
2897:bluetooth_rxtx.c **** 	requested_mode = prev_mode;
 8119              		.loc 1 2897 0
 8120 00d4 AE74     		strb	r6, [r5, #18]
 8121 00d6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 8122              	.LVL873:
 8123              	.L865:
 8124 00da 00BF     		.align	2
 8125              	.L864:
 8126 00dc 00000000 		.word	.LANCHOR0
 8127 00e0 00000000 		.word	tx_pkt
 8128 00e4 38C00920 		.word	537509944
 8129 00e8 08000000 		.word	tx_pkt+8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 216


 8130 00ec 3CC00920 		.word	537509948
 8131 00f0 5CC00920 		.word	537509980
 8132              		.cfi_endproc
 8133              	.LFE41:
 8135              		.section	.text.specan,"ax",%progbits
 8136              		.align	1
 8137              		.global	specan
 8138              		.thumb
 8139              		.thumb_func
 8141              	specan:
 8142              	.LFB42:
2898:bluetooth_rxtx.c **** }
2899:bluetooth_rxtx.c **** 
2900:bluetooth_rxtx.c **** /* spectrum analysis */
2901:bluetooth_rxtx.c **** void specan()
2902:bluetooth_rxtx.c **** {
 8143              		.loc 1 2902 0
 8144              		.cfi_startproc
 8145              		@ args = 0, pretend = 0, frame = 56
 8146              		@ frame_needed = 0, uses_anonymous_args = 0
 8147 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8148              		.cfi_def_cfa_offset 24
 8149              		.cfi_offset 4, -24
 8150              		.cfi_offset 5, -20
 8151              		.cfi_offset 6, -16
 8152              		.cfi_offset 7, -12
 8153              		.cfi_offset 8, -8
 8154              		.cfi_offset 14, -4
 8155 0004 8EB0     		sub	sp, sp, #56
 8156              		.cfi_def_cfa_offset 80
 8157              	.LVL874:
2903:bluetooth_rxtx.c **** 	u16 f;
2904:bluetooth_rxtx.c **** 	u8 i = 0;
2905:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2906:bluetooth_rxtx.c **** 
2907:bluetooth_rxtx.c **** 	RXLED_SET;
 8158              		.loc 1 2907 0
 8159 0006 3D4B     		ldr	r3, .L886
 8160 0008 1022     		movs	r2, #16
 8161 000a 1A60     		str	r2, [r3]
2908:bluetooth_rxtx.c **** 
2909:bluetooth_rxtx.c **** 	queue_init();
 8162              		.loc 1 2909 0
 8163 000c FFF7FEFF 		bl	queue_init
 8164              	.LVL875:
2910:bluetooth_rxtx.c **** 	clkn_start();
 8165              		.loc 1 2910 0
 8166 0010 FFF7FEFF 		bl	clkn_start
 8167              	.LVL876:
2911:bluetooth_rxtx.c **** 
2912:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2913:bluetooth_rxtx.c **** 	PAEN_SET;
 8168              		.loc 1 2913 0
 8169 0014 3A4B     		ldr	r3, .L886+4
 8170 0016 8022     		movs	r2, #128
 8171 0018 1A60     		str	r2, [r3]
2914:bluetooth_rxtx.c **** 	//HGM_SET;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 217


2915:bluetooth_rxtx.c **** #endif
2916:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8172              		.loc 1 2916 0
 8173 001a 1220     		movs	r0, #18
 8174 001c 42F62231 		movw	r1, #11042
 8175 0020 FFF7FEFF 		bl	cc2400_set
 8176              	.LVL877:
2917:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 8177              		.loc 1 2917 0
 8178 0024 1420     		movs	r0, #20
 8179 0026 41F24B31 		movw	r1, #4939
 8180 002a FFF7FEFF 		bl	cc2400_set
 8181              	.LVL878:
2918:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 8182              		.loc 1 2918 0
 8183 002e 2020     		movs	r0, #32
 8184 0030 40F20111 		movw	r1, #257
 8185 0034 FFF7FEFF 		bl	cc2400_set
 8186              	.LVL879:
2919:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 8187              		.loc 1 2919 0
 8188 0038 0320     		movs	r0, #3
 8189 003a 2921     		movs	r1, #41
 8190 003c FFF7FEFF 		bl	cc2400_set
 8191              	.LVL880:
 8192              	.L867:
2920:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2921:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8193              		.loc 1 2921 0 discriminator 1
 8194 0040 FFF7FEFF 		bl	cc2400_status
 8195              	.LVL881:
 8196 0044 4106     		lsls	r1, r0, #25
 8197 0046 FBD5     		bpl	.L867
 8198              	.L879:
2922:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8199              		.loc 1 2922 0 discriminator 1
 8200 0048 FFF7FEFF 		bl	cc2400_status
 8201              	.LVL882:
 8202 004c 00F00400 		and	r0, r0, #4
 8203 0050 00F0FF04 		and	r4, r0, #255
 8204 0054 0028     		cmp	r0, #0
 8205 0056 F7D1     		bne	.L879
 8206              	.LVL883:
 8207              	.L869:
2923:bluetooth_rxtx.c **** 
2924:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 8208              		.loc 1 2924 0
 8209 0058 2A4B     		ldr	r3, .L886+8
 8210 005a 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 8211 005c 042B     		cmp	r3, #4
 8212 005e 47D1     		bne	.L885
2925:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 8213              		.loc 1 2925 0
 8214 0060 294B     		ldr	r3, .L886+12
 8215 0062 9846     		mov	r8, r3
 8216 0064 B3F84C50 		ldrh	r5, [r3, #76]
 8217 0068 ADB2     		uxth	r5, r5
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 218


 8218              	.LVL884:
 8219              	.L870:
 8220              		.loc 1 2925 0 is_stmt 0 discriminator 1
 8221 006a B8F84E30 		ldrh	r3, [r8, #78]
 8222 006e 9BB2     		uxth	r3, r3
 8223 0070 AB42     		cmp	r3, r5
 8224 0072 F1DB     		blt	.L869
 8225 0074 691E     		subs	r1, r5, #1
 8226              	.LBB86:
2926:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8227              		.loc 1 2926 0 is_stmt 1
 8228 0076 0220     		movs	r0, #2
 8229 0078 89B2     		uxth	r1, r1
 8230 007a FFF7FEFF 		bl	cc2400_set
 8231              	.LVL885:
2927:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 8232              		.loc 1 2927 0
 8233 007e 6120     		movs	r0, #97
 8234 0080 FFF7FEFF 		bl	cc2400_strobe
 8235              	.LVL886:
 8236              	.L871:
2928:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 8237              		.loc 1 2928 0 discriminator 1
 8238 0084 FFF7FEFF 		bl	cc2400_status
 8239              	.LVL887:
 8240 0088 4207     		lsls	r2, r0, #29
 8241 008a FBD5     		bpl	.L871
2929:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 8242              		.loc 1 2929 0
 8243 008c 6220     		movs	r0, #98
 8244 008e FFF7FEFF 		bl	cc2400_strobe
 8245              	.LVL888:
2930:bluetooth_rxtx.c **** 
2931:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2932:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 8246              		.loc 1 2932 0
 8247 0092 4FF4FA73 		mov	r3, #500
 8248 0096 0093     		str	r3, [sp]
 8249              	.L872:
 8250              		.loc 1 2932 0 is_stmt 0 discriminator 2
 8251 0098 009E     		ldr	r6, [sp]
 8252 009a 013E     		subs	r6, r6, #1
 8253 009c 0096     		str	r6, [sp]
 8254 009e 002E     		cmp	r6, #0
 8255 00a0 FAD1     		bne	.L872
2933:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 8256              		.loc 1 2933 0 is_stmt 1
 8257 00a2 04EB4407 		add	r7, r4, r4, lsl #1
 8258 00a6 0EAB     		add	r3, sp, #56
 8259 00a8 1F44     		add	r7, r7, r3
2934:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
2935:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 8260              		.loc 1 2935 0
 8261 00aa 0620     		movs	r0, #6
2933:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 8262              		.loc 1 2933 0
 8263 00ac 2B0A     		lsrs	r3, r5, #8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 219


 8264 00ae 07F8343C 		strb	r3, [r7, #-52]
2934:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 8265              		.loc 1 2934 0
 8266 00b2 07F8335C 		strb	r5, [r7, #-51]
 8267              		.loc 1 2935 0
 8268 00b6 FFF7FEFF 		bl	cc2400_get
 8269              	.LVL889:
2936:bluetooth_rxtx.c **** 			i++;
 8270              		.loc 1 2936 0
 8271 00ba 0134     		adds	r4, r4, #1
 8272              	.LVL890:
 8273 00bc E4B2     		uxtb	r4, r4
 8274              	.LVL891:
2935:bluetooth_rxtx.c **** 			i++;
 8275              		.loc 1 2935 0
 8276 00be 000A     		lsrs	r0, r0, #8
2937:bluetooth_rxtx.c **** 			if (i == 16) {
 8277              		.loc 1 2937 0
 8278 00c0 102C     		cmp	r4, #16
2935:bluetooth_rxtx.c **** 			i++;
 8279              		.loc 1 2935 0
 8280 00c2 07F8320C 		strb	r0, [r7, #-50]
 8281              		.loc 1 2937 0
 8282 00c6 09D1     		bne	.L873
2938:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 8283              		.loc 1 2938 0
 8284 00c8 0420     		movs	r0, #4
 8285 00ca 0DEB0001 		add	r1, sp, r0
 8286 00ce FFF7FEFF 		bl	enqueue
 8287              	.LVL892:
2939:bluetooth_rxtx.c **** 				i = 0;
2940:bluetooth_rxtx.c **** 
2941:bluetooth_rxtx.c **** 				handle_usb(clkn);
 8288              		.loc 1 2941 0
 8289 00d2 0E4B     		ldr	r3, .L886+16
2939:bluetooth_rxtx.c **** 				i = 0;
 8290              		.loc 1 2939 0
 8291 00d4 3446     		mov	r4, r6
 8292              		.loc 1 2941 0
 8293 00d6 1868     		ldr	r0, [r3]
 8294 00d8 FFF7FEFF 		bl	handle_usb
 8295              	.LVL893:
 8296              	.L873:
2942:bluetooth_rxtx.c **** 			}
2943:bluetooth_rxtx.c **** 
2944:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 8297              		.loc 1 2944 0
 8298 00dc 6420     		movs	r0, #100
 8299 00de FFF7FEFF 		bl	cc2400_strobe
 8300              	.LVL894:
 8301              	.L874:
2945:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 8302              		.loc 1 2945 0 discriminator 1
 8303 00e2 FFF7FEFF 		bl	cc2400_status
 8304              	.LVL895:
 8305 00e6 4307     		lsls	r3, r0, #29
 8306 00e8 FBD4     		bmi	.L874
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 220


 8307              	.LBE86:
2925:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8308              		.loc 1 2925 0 discriminator 2
 8309 00ea 0135     		adds	r5, r5, #1
 8310              	.LVL896:
 8311 00ec ADB2     		uxth	r5, r5
 8312              	.LVL897:
 8313 00ee BCE7     		b	.L870
 8314              	.LVL898:
 8315              	.L885:
2946:bluetooth_rxtx.c **** 		}
2947:bluetooth_rxtx.c **** 	}
2948:bluetooth_rxtx.c **** 	RXLED_CLR;
 8316              		.loc 1 2948 0
 8317 00f0 074B     		ldr	r3, .L886+20
 8318 00f2 1022     		movs	r2, #16
 8319 00f4 1A60     		str	r2, [r3]
2949:bluetooth_rxtx.c **** }
 8320              		.loc 1 2949 0
 8321 00f6 0EB0     		add	sp, sp, #56
 8322              		.cfi_def_cfa_offset 24
 8323              		@ sp needed
 8324 00f8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 8325              	.LVL899:
 8326              	.L887:
 8327              		.align	2
 8328              	.L886:
 8329 00fc 38C00920 		.word	537509944
 8330 0100 58C00920 		.word	537509976
 8331 0104 00000000 		.word	.LANCHOR0
 8332 0108 00000000 		.word	.LANCHOR1
 8333 010c 00000000 		.word	clkn
 8334 0110 3CC00920 		.word	537509948
 8335              		.cfi_endproc
 8336              	.LFE42:
 8338              		.section	.text.led_specan,"ax",%progbits
 8339              		.align	1
 8340              		.global	led_specan
 8341              		.thumb
 8342              		.thumb_func
 8344              	led_specan:
 8345              	.LFB43:
2950:bluetooth_rxtx.c **** 
2951:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2952:bluetooth_rxtx.c **** void led_specan()
2953:bluetooth_rxtx.c **** {
 8346              		.loc 1 2953 0
 8347              		.cfi_startproc
 8348              		@ args = 0, pretend = 0, frame = 16
 8349              		@ frame_needed = 0, uses_anonymous_args = 0
 8350 0000 1FB5     		push	{r0, r1, r2, r3, r4, lr}
 8351              		.cfi_def_cfa_offset 24
 8352              		.cfi_offset 4, -8
 8353              		.cfi_offset 14, -4
 8354              	.LVL900:
2954:bluetooth_rxtx.c **** 	int8_t lvl;
2955:bluetooth_rxtx.c **** 	u8 i = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 221


2956:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 8355              		.loc 1 2956 0
 8356 0002 444B     		ldr	r3, .L917
2957:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2958:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2959:bluetooth_rxtx.c **** 
2960:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2961:bluetooth_rxtx.c **** 	PAEN_SET;
 8357              		.loc 1 2961 0
 8358 0004 8022     		movs	r2, #128
2956:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
 8359              		.loc 1 2956 0
 8360 0006 1868     		ldr	r0, [r3]	@ unaligned
 8361 0008 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 8362 000a 0290     		str	r0, [sp, #8]	@ unaligned
 8363 000c ADF80C30 		strh	r3, [sp, #12]	@ unaligned
 8364              		.loc 1 2961 0
 8365 0010 414B     		ldr	r3, .L917+4
2962:bluetooth_rxtx.c **** 	//HGM_SET;
2963:bluetooth_rxtx.c **** #endif
2964:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8366              		.loc 1 2964 0
 8367 0012 1220     		movs	r0, #18
2961:bluetooth_rxtx.c **** 	//HGM_SET;
 8368              		.loc 1 2961 0
 8369 0014 1A60     		str	r2, [r3]
 8370              		.loc 1 2964 0
 8371 0016 42F62231 		movw	r1, #11042
 8372 001a FFF7FEFF 		bl	cc2400_set
 8373              	.LVL901:
2965:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 8374              		.loc 1 2965 0
 8375 001e 1420     		movs	r0, #20
 8376 0020 41F24B31 		movw	r1, #4939
 8377 0024 FFF7FEFF 		bl	cc2400_set
 8378              	.LVL902:
2966:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 8379              		.loc 1 2966 0
 8380 0028 2020     		movs	r0, #32
 8381 002a 40F20111 		movw	r1, #257
 8382 002e FFF7FEFF 		bl	cc2400_set
 8383              	.LVL903:
2967:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 8384              		.loc 1 2967 0
 8385 0032 0320     		movs	r0, #3
 8386 0034 2921     		movs	r1, #41
 8387 0036 FFF7FEFF 		bl	cc2400_set
 8388              	.LVL904:
2968:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 8389              		.loc 1 2968 0
 8390 003a 0620     		movs	r0, #6
 8391 003c F121     		movs	r1, #241
 8392 003e FFF7FEFF 		bl	cc2400_set
 8393              	.LVL905:
 8394              	.L889:
2969:bluetooth_rxtx.c **** 
2970:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 222


 8395              		.loc 1 2970 0 discriminator 1
 8396 0042 FFF7FEFF 		bl	cc2400_status
 8397              	.LVL906:
 8398 0046 4106     		lsls	r1, r0, #25
 8399 0048 FBD5     		bpl	.L889
 8400              	.L906:
2971:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8401              		.loc 1 2971 0 discriminator 1
 8402 004a FFF7FEFF 		bl	cc2400_status
 8403              	.LVL907:
 8404 004e 00F00400 		and	r0, r0, #4
 8405 0052 00F0FF04 		and	r4, r0, #255
 8406 0056 0028     		cmp	r0, #0
 8407 0058 F7D1     		bne	.L906
 8408              	.LVL908:
 8409              	.L891:
2972:bluetooth_rxtx.c **** 
2973:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 8410              		.loc 1 2973 0
 8411 005a 304B     		ldr	r3, .L917+8
 8412 005c 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 8413 005e 072B     		cmp	r3, #7
 8414 0060 56D1     		bne	.L916
 8415              	.LBB87:
2974:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 8416              		.loc 1 2974 0
 8417 0062 04AB     		add	r3, sp, #16
 8418 0064 03EB4403 		add	r3, r3, r4, lsl #1
 8419 0068 33F8081C 		ldrh	r1, [r3, #-8]
 8420 006c 0220     		movs	r0, #2
 8421 006e 0139     		subs	r1, r1, #1
 8422 0070 89B2     		uxth	r1, r1
 8423 0072 FFF7FEFF 		bl	cc2400_set
 8424              	.LVL909:
2975:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 8425              		.loc 1 2975 0
 8426 0076 6120     		movs	r0, #97
 8427 0078 FFF7FEFF 		bl	cc2400_strobe
 8428              	.LVL910:
 8429              	.L892:
2976:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 8430              		.loc 1 2976 0 discriminator 1
 8431 007c FFF7FEFF 		bl	cc2400_status
 8432              	.LVL911:
 8433 0080 4207     		lsls	r2, r0, #29
 8434 0082 FBD5     		bpl	.L892
2977:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8435              		.loc 1 2977 0
 8436 0084 6220     		movs	r0, #98
 8437 0086 FFF7FEFF 		bl	cc2400_strobe
 8438              	.LVL912:
2978:bluetooth_rxtx.c **** 
2979:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2980:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 8439              		.loc 1 2980 0
 8440 008a 4FF4FA73 		mov	r3, #500
 8441 008e 0193     		str	r3, [sp, #4]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 223


 8442              	.L893:
 8443              		.loc 1 2980 0 is_stmt 0 discriminator 2
 8444 0090 019B     		ldr	r3, [sp, #4]
 8445 0092 013B     		subs	r3, r3, #1
 8446 0094 0193     		str	r3, [sp, #4]
 8447 0096 002B     		cmp	r3, #0
 8448 0098 FAD1     		bne	.L893
2981:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 8449              		.loc 1 2981 0 is_stmt 1
 8450 009a 0620     		movs	r0, #6
 8451 009c FFF7FEFF 		bl	cc2400_get
 8452              	.LVL913:
2982:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
 8453              		.loc 1 2982 0
 8454 00a0 1F4B     		ldr	r3, .L917+12
 8455 00a2 40F30720 		sbfx	r0, r0, #8, #8
 8456              	.LVL914:
 8457 00a6 93F85030 		ldrb	r3, [r3, #80]	@ zero_extendqisi2
 8458 00aa 5BB2     		sxtb	r3, r3
 8459 00ac 9842     		cmp	r0, r3
 8460 00ae 0CDD     		ble	.L894
2983:bluetooth_rxtx.c **** 			switch (i) {
 8461              		.loc 1 2983 0
 8462 00b0 012C     		cmp	r4, #1
 8463 00b2 07D0     		beq	.L896
 8464 00b4 03D3     		bcc	.L897
 8465 00b6 022C     		cmp	r4, #2
 8466 00b8 16D1     		bne	.L895
2984:bluetooth_rxtx.c **** 				case 0:
2985:bluetooth_rxtx.c **** 					TXLED_SET;
2986:bluetooth_rxtx.c **** 					break;
2987:bluetooth_rxtx.c **** 				case 1:
2988:bluetooth_rxtx.c **** 					RXLED_SET;
2989:bluetooth_rxtx.c **** 					break;
2990:bluetooth_rxtx.c **** 				case 2:
2991:bluetooth_rxtx.c **** 					USRLED_SET;
 8467              		.loc 1 2991 0
 8468 00ba 1A4B     		ldr	r3, .L917+16
 8469 00bc 13E0     		b	.L912
 8470              	.L897:
2985:bluetooth_rxtx.c **** 					break;
 8471              		.loc 1 2985 0
 8472 00be 4FF48072 		mov	r2, #256
 8473 00c2 00E0     		b	.L915
 8474              	.L896:
2988:bluetooth_rxtx.c **** 					break;
 8475              		.loc 1 2988 0
 8476 00c4 1022     		movs	r2, #16
 8477              	.L915:
 8478 00c6 174B     		ldr	r3, .L917+16
 8479 00c8 0BE0     		b	.L914
 8480              	.L894:
2992:bluetooth_rxtx.c **** 					break;
2993:bluetooth_rxtx.c **** 			}
2994:bluetooth_rxtx.c **** 		}
2995:bluetooth_rxtx.c **** 		else {
2996:bluetooth_rxtx.c **** 			switch (i) {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 224


 8481              		.loc 1 2996 0
 8482 00ca 012C     		cmp	r4, #1
 8483 00cc 07D0     		beq	.L899
 8484 00ce 03D3     		bcc	.L900
 8485 00d0 022C     		cmp	r4, #2
 8486 00d2 09D1     		bne	.L895
2997:bluetooth_rxtx.c **** 				case 0:
2998:bluetooth_rxtx.c **** 					TXLED_CLR;
2999:bluetooth_rxtx.c **** 					break;
3000:bluetooth_rxtx.c **** 				case 1:
3001:bluetooth_rxtx.c **** 					RXLED_CLR;
3002:bluetooth_rxtx.c **** 					break;
3003:bluetooth_rxtx.c **** 				case 2:
3004:bluetooth_rxtx.c **** 					USRLED_CLR;
 8487              		.loc 1 3004 0
 8488 00d4 144B     		ldr	r3, .L917+20
 8489 00d6 06E0     		b	.L912
 8490              	.L900:
2998:bluetooth_rxtx.c **** 					break;
 8491              		.loc 1 2998 0
 8492 00d8 4FF48072 		mov	r2, #256
 8493 00dc 00E0     		b	.L913
 8494              	.L899:
3001:bluetooth_rxtx.c **** 					break;
 8495              		.loc 1 3001 0
 8496 00de 1022     		movs	r2, #16
 8497              	.L913:
 8498 00e0 114B     		ldr	r3, .L917+20
 8499              	.L914:
 8500 00e2 1A60     		str	r2, [r3]
3002:bluetooth_rxtx.c **** 				case 2:
 8501              		.loc 1 3002 0
 8502 00e4 00E0     		b	.L895
 8503              	.L912:
 8504              		.loc 1 3004 0
 8505 00e6 1C60     		str	r4, [r3]
 8506              	.L895:
3005:bluetooth_rxtx.c **** 					break;
3006:bluetooth_rxtx.c **** 			}
3007:bluetooth_rxtx.c **** 		}
3008:bluetooth_rxtx.c **** 
3009:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 8507              		.loc 1 3009 0
 8508 00e8 0134     		adds	r4, r4, #1
 8509              	.LVL915:
 8510 00ea 0323     		movs	r3, #3
 8511 00ec 94FBF3F3 		sdiv	r3, r4, r3
 8512 00f0 03EB4303 		add	r3, r3, r3, lsl #1
 8513 00f4 E41A     		subs	r4, r4, r3
3010:bluetooth_rxtx.c **** 
3011:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8514              		.loc 1 3011 0
 8515 00f6 0D4B     		ldr	r3, .L917+24
3009:bluetooth_rxtx.c **** 
 8516              		.loc 1 3009 0
 8517 00f8 E4B2     		uxtb	r4, r4
 8518              	.LVL916:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 225


 8519              		.loc 1 3011 0
 8520 00fa 1868     		ldr	r0, [r3]
 8521 00fc FFF7FEFF 		bl	handle_usb
 8522              	.LVL917:
3012:bluetooth_rxtx.c **** 
3013:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 8523              		.loc 1 3013 0
 8524 0100 6420     		movs	r0, #100
 8525 0102 FFF7FEFF 		bl	cc2400_strobe
 8526              	.LVL918:
 8527              	.L902:
3014:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 8528              		.loc 1 3014 0 discriminator 1
 8529 0106 FFF7FEFF 		bl	cc2400_status
 8530              	.LVL919:
 8531 010a 4307     		lsls	r3, r0, #29
 8532 010c FBD4     		bmi	.L902
 8533 010e A4E7     		b	.L891
 8534              	.L916:
 8535              	.LBE87:
3015:bluetooth_rxtx.c **** 	}
3016:bluetooth_rxtx.c **** }
 8536              		.loc 1 3016 0
 8537 0110 04B0     		add	sp, sp, #16
 8538              		.cfi_def_cfa_offset 8
 8539              		@ sp needed
 8540 0112 10BD     		pop	{r4, pc}
 8541              	.LVL920:
 8542              	.L918:
 8543              		.align	2
 8544              	.L917:
 8545 0114 B6080000 		.word	.LANCHOR2+2230
 8546 0118 58C00920 		.word	537509976
 8547 011c 00000000 		.word	.LANCHOR0
 8548 0120 00000000 		.word	.LANCHOR1
 8549 0124 38C00920 		.word	537509944
 8550 0128 3CC00920 		.word	537509948
 8551 012c 00000000 		.word	clkn
 8552              		.cfi_endproc
 8553              	.LFE43:
 8555              		.section	.text.startup.main,"ax",%progbits
 8556              		.align	1
 8557              		.global	main
 8558              		.thumb
 8559              		.thumb_func
 8561              	main:
 8562              	.LFB44:
3017:bluetooth_rxtx.c **** 
3018:bluetooth_rxtx.c **** int main()
3019:bluetooth_rxtx.c **** {
 8563              		.loc 1 3019 0
 8564              		.cfi_startproc
 8565              		@ Volatile: function does not return.
 8566              		@ args = 0, pretend = 0, frame = 0
 8567              		@ frame_needed = 0, uses_anonymous_args = 0
 8568 0000 08B5     		push	{r3, lr}
 8569              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 226


 8570              		.cfi_offset 3, -8
 8571              		.cfi_offset 14, -4
3020:bluetooth_rxtx.c **** 	ubertooth_init();
 8572              		.loc 1 3020 0
 8573 0002 FFF7FEFF 		bl	ubertooth_init
 8574              	.LVL921:
3021:bluetooth_rxtx.c **** 	clkn_init();
 8575              		.loc 1 3021 0
 8576 0006 FFF7FEFF 		bl	clkn_init
 8577              	.LVL922:
3022:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 8578              		.loc 1 3022 0
 8579 000a 4348     		ldr	r0, .L944
 8580 000c FFF7FEFF 		bl	ubertooth_usb_init
 8581              	.LVL923:
 8582              	.L943:
3023:bluetooth_rxtx.c **** 	cc2400_idle();
 8583              		.loc 1 3023 0
 8584 0010 FFF7FEFF 		bl	cc2400_idle
 8585              	.LVL924:
 8586              	.L920:
3024:bluetooth_rxtx.c **** 
3025:bluetooth_rxtx.c **** 	while (1) {
3026:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8587              		.loc 1 3026 0
 8588 0014 414B     		ldr	r3, .L944+4
3027:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 8589              		.loc 1 3027 0
 8590 0016 424C     		ldr	r4, .L944+8
3026:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 8591              		.loc 1 3026 0
 8592 0018 1868     		ldr	r0, [r3]
 8593 001a FFF7FEFF 		bl	handle_usb
 8594              	.LVL925:
 8595              		.loc 1 3027 0
 8596 001e A27C     		ldrb	r2, [r4, #18]	@ zero_extendqisi2
 8597 0020 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 8598 0022 9A42     		cmp	r2, r3
 8599 0024 F6D0     		beq	.L920
3028:bluetooth_rxtx.c **** 			switch (requested_mode) {
 8600              		.loc 1 3028 0
 8601 0026 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 8602 0028 122B     		cmp	r3, #18
 8603 002a F3D8     		bhi	.L920
 8604 002c 01A2     		adr	r2, .L923
 8605 002e 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 8606 0032 00BF     		.p2align 2
 8607              	.L923:
 8608 0034 11000000 		.word	.L943+1
 8609 0038 91000000 		.word	.L924+1
 8610 003c 9B000000 		.word	.L925+1
 8611 0040 C7000000 		.word	.L926+1
 8612 0044 F1000000 		.word	.L927+1
 8613 0048 D5000000 		.word	.L928+1
 8614 004c E5000000 		.word	.L929+1
 8615 0050 F7000000 		.word	.L930+1
 8616 0054 A5000000 		.word	.L931+1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 227


 8617 0058 A9000000 		.word	.L932+1
 8618 005c B5000000 		.word	.L933+1
 8619 0060 81000000 		.word	.L934+1
 8620 0064 BB000000 		.word	.L935+1
 8621 0068 FD000000 		.word	.L936+1
 8622 006c 8D000000 		.word	.L937+1
 8623 0070 09010000 		.word	.L938+1
 8624 0074 13010000 		.word	.L939+1
 8625 0078 C1000000 		.word	.L940+1
 8626 007c AF000000 		.word	.L941+1
 8627              		.p2align 1
 8628              	.L934:
3029:bluetooth_rxtx.c **** 				case MODE_RESET:
3030:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
3031:bluetooth_rxtx.c **** 					wait(1);
 8629              		.loc 1 3031 0
 8630 0080 0120     		movs	r0, #1
 8631 0082 FFF7FEFF 		bl	wait
 8632              	.LVL926:
3032:bluetooth_rxtx.c **** 					reset();
 8633              		.loc 1 3032 0
 8634 0086 FFF7FEFF 		bl	reset
 8635              	.LVL927:
3033:bluetooth_rxtx.c **** 					break;
 8636              		.loc 1 3033 0
 8637 008a C3E7     		b	.L920
 8638              	.L937:
3034:bluetooth_rxtx.c **** 				case MODE_AFH:
3035:bluetooth_rxtx.c **** 					mode = MODE_AFH;
 8639              		.loc 1 3035 0
 8640 008c 0E23     		movs	r3, #14
 8641 008e 00E0     		b	.L942
 8642              	.L924:
3036:bluetooth_rxtx.c **** 					bt_stream_rx();
3037:bluetooth_rxtx.c **** 					break;
3038:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
3039:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 8643              		.loc 1 3039 0
 8644 0090 0123     		movs	r3, #1
 8645              	.L942:
 8646 0092 6374     		strb	r3, [r4, #17]
3040:bluetooth_rxtx.c **** 					bt_stream_rx();
 8647              		.loc 1 3040 0
 8648 0094 FFF7FEFF 		bl	bt_stream_rx
 8649              	.LVL928:
3041:bluetooth_rxtx.c **** 					break;
 8650              		.loc 1 3041 0
 8651 0098 BCE7     		b	.L920
 8652              	.L925:
3042:bluetooth_rxtx.c **** 				case MODE_TX_SYMBOLS:
3043:bluetooth_rxtx.c **** 					mode = MODE_TX_SYMBOLS;
 8653              		.loc 1 3043 0
 8654 009a 0223     		movs	r3, #2
 8655 009c 6374     		strb	r3, [r4, #17]
3044:bluetooth_rxtx.c **** 					br_transmit();
 8656              		.loc 1 3044 0
 8657 009e FFF7FEFF 		bl	br_transmit
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 228


 8658              	.LVL929:
3045:bluetooth_rxtx.c **** 					break;
 8659              		.loc 1 3045 0
 8660 00a2 B7E7     		b	.L920
 8661              	.L931:
3046:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
3047:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 8662              		.loc 1 3047 0
 8663 00a4 0823     		movs	r3, #8
 8664 00a6 F4E7     		b	.L942
 8665              	.L932:
3048:bluetooth_rxtx.c **** 					bt_stream_rx();
3049:bluetooth_rxtx.c **** 					break;
3050:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
3051:bluetooth_rxtx.c **** 					bt_follow_le();
 8666              		.loc 1 3051 0
 8667 00a8 FFF7FEFF 		bl	bt_follow_le
 8668              	.LVL930:
3052:bluetooth_rxtx.c **** 					break;
 8669              		.loc 1 3052 0
 8670 00ac B2E7     		b	.L920
 8671              	.L941:
3053:bluetooth_rxtx.c **** 				case MODE_BOSS_MASTER_LE:
3054:bluetooth_rxtx.c **** 					bt_boss_master_le();
 8672              		.loc 1 3054 0
 8673 00ae FFF7FEFF 		bl	bt_boss_master_le
 8674              	.LVL931:
3055:bluetooth_rxtx.c **** 					break;
 8675              		.loc 1 3055 0
 8676 00b2 AFE7     		b	.L920
 8677              	.L933:
3056:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
3057:bluetooth_rxtx.c **** 					bt_promisc_le();
 8678              		.loc 1 3057 0
 8679 00b4 FFF7FEFF 		bl	bt_promisc_le
 8680              	.LVL932:
3058:bluetooth_rxtx.c **** 					break;
 8681              		.loc 1 3058 0
 8682 00b8 ACE7     		b	.L920
 8683              	.L935:
3059:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
3060:bluetooth_rxtx.c **** 					bt_slave_le();
 8684              		.loc 1 3060 0
 8685 00ba FFF7FEFF 		bl	bt_slave_le
 8686              	.LVL933:
3061:bluetooth_rxtx.c **** 					break;
 8687              		.loc 1 3061 0
 8688 00be A9E7     		b	.L920
 8689              	.L940:
3062:bluetooth_rxtx.c **** 				case MODE_BOSS_SLAVE_LE:
3063:bluetooth_rxtx.c **** 					bt_boss_slave_le();
 8690              		.loc 1 3063 0
 8691 00c0 FFF7FEFF 		bl	bt_boss_slave_le
 8692              	.LVL934:
3064:bluetooth_rxtx.c **** 					break;
 8693              		.loc 1 3064 0
 8694 00c4 A6E7     		b	.L920
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 229


 8695              	.L926:
3065:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
3066:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 8696              		.loc 1 3066 0
 8697 00c6 0323     		movs	r3, #3
3067:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 8698              		.loc 1 3067 0
 8699 00c8 1548     		ldr	r0, .L944+8
 8700 00ca 1649     		ldr	r1, .L944+12
3066:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 8701              		.loc 1 3066 0
 8702 00cc 6374     		strb	r3, [r4, #17]
 8703              		.loc 1 3067 0
 8704 00ce FFF7FEFF 		bl	cc2400_txtest
 8705              	.LVL935:
3068:bluetooth_rxtx.c **** 					break;
 8706              		.loc 1 3068 0
 8707 00d2 9FE7     		b	.L920
 8708              	.L928:
3069:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
3070:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 8709              		.loc 1 3070 0
 8710 00d4 0523     		movs	r3, #5
3071:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 8711              		.loc 1 3071 0
 8712 00d6 1348     		ldr	r0, .L944+12
3070:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 8713              		.loc 1 3070 0
 8714 00d8 6374     		strb	r3, [r4, #17]
 8715              		.loc 1 3071 0
 8716 00da FFF7FEFF 		bl	cc2400_rangetest
 8717              	.LVL936:
3072:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
 8718              		.loc 1 3072 0
 8719 00de 0023     		movs	r3, #0
 8720 00e0 A374     		strb	r3, [r4, #18]
3073:bluetooth_rxtx.c **** 					break;
 8721              		.loc 1 3073 0
 8722 00e2 97E7     		b	.L920
 8723              	.L929:
3074:bluetooth_rxtx.c **** 				case MODE_REPEATER:
3075:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 8724              		.loc 1 3075 0
 8725 00e4 0623     		movs	r3, #6
3076:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 8726              		.loc 1 3076 0
 8727 00e6 0F48     		ldr	r0, .L944+12
3075:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 8728              		.loc 1 3075 0
 8729 00e8 6374     		strb	r3, [r4, #17]
 8730              		.loc 1 3076 0
 8731 00ea FFF7FEFF 		bl	cc2400_repeater
 8732              	.LVL937:
3077:bluetooth_rxtx.c **** 					break;
 8733              		.loc 1 3077 0
 8734 00ee 91E7     		b	.L920
 8735              	.L927:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 230


3078:bluetooth_rxtx.c **** 				case MODE_SPECAN:
3079:bluetooth_rxtx.c **** 					specan();
 8736              		.loc 1 3079 0
 8737 00f0 FFF7FEFF 		bl	specan
 8738              	.LVL938:
3080:bluetooth_rxtx.c **** 					break;
 8739              		.loc 1 3080 0
 8740 00f4 8EE7     		b	.L920
 8741              	.L930:
3081:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
3082:bluetooth_rxtx.c **** 					led_specan();
 8742              		.loc 1 3082 0
 8743 00f6 FFF7FEFF 		bl	led_specan
 8744              	.LVL939:
3083:bluetooth_rxtx.c **** 					break;
 8745              		.loc 1 3083 0
 8746 00fa 8BE7     		b	.L920
 8747              	.L936:
3084:bluetooth_rxtx.c **** 				case MODE_EGO:
3085:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 8748              		.loc 1 3085 0
 8749 00fc 0D23     		movs	r3, #13
 8750 00fe 6374     		strb	r3, [r4, #17]
3086:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 8751              		.loc 1 3086 0
 8752 0100 207D     		ldrb	r0, [r4, #20]	@ zero_extendqisi2
 8753 0102 FFF7FEFF 		bl	ego_main
 8754              	.LVL940:
3087:bluetooth_rxtx.c **** 					break;
 8755              		.loc 1 3087 0
 8756 0106 85E7     		b	.L920
 8757              	.L938:
3088:bluetooth_rxtx.c **** 				case MODE_RX_GENERIC:
3089:bluetooth_rxtx.c **** 					mode = MODE_RX_GENERIC;
 8758              		.loc 1 3089 0
 8759 0108 0F23     		movs	r3, #15
 8760 010a 6374     		strb	r3, [r4, #17]
3090:bluetooth_rxtx.c **** 					rx_generic();
 8761              		.loc 1 3090 0
 8762 010c FFF7FEFF 		bl	rx_generic
 8763              	.LVL941:
3091:bluetooth_rxtx.c **** 					break;
 8764              		.loc 1 3091 0
 8765 0110 80E7     		b	.L920
 8766              	.L939:
3092:bluetooth_rxtx.c **** 				case MODE_TX_GENERIC:
3093:bluetooth_rxtx.c **** 					tx_generic();
 8767              		.loc 1 3093 0
 8768 0112 FFF7FEFF 		bl	tx_generic
 8769              	.LVL942:
3094:bluetooth_rxtx.c **** 					break;
 8770              		.loc 1 3094 0
 8771 0116 7DE7     		b	.L920
 8772              	.L945:
 8773              		.align	2
 8774              	.L944:
 8775 0118 00000000 		.word	vendor_request_handler
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 231


 8776 011c 00000000 		.word	clkn
 8777 0120 00000000 		.word	.LANCHOR0
 8778 0124 00000000 		.word	.LANCHOR1
 8779              		.cfi_endproc
 8780              	.LFE44:
 8782              		.comm	unpacked,800,1
 8783              		.global	packet_cb
 8784              		.global	data_cb
 8785              		.global	le_jam_count
 8786              		.comm	le_promisc,264,4
 8787              		.global	le
 8788              		.global	slave_mac_address
 8789              		.comm	tx_pkt,58,2
 8790              		.global	rssi_threshold
 8791              		.global	high_freq
 8792              		.global	low_freq
 8793              		.global	modulation
 8794              		.global	ego_mode
 8795              		.global	jam_mode
 8796              		.global	requested_mode
 8797              		.global	mode
 8798              		.global	status
 8799              		.global	dma_discard
 8800              		.global	idle_buf_channel
 8801              		.global	idle_buf_clk100ns
 8802              		.global	idle_buf_clkn_high
 8803              		.global	le_adv_channel
 8804              		.global	requested_channel
 8805              		.global	hop_timeout
 8806              		.global	hop_direct_channel
 8807              		.global	channel
 8808              		.global	do_hop
 8809              		.global	hop_mode
 8810              		.global	compile_info
 8811              		.comm	rr,5,1
 8812              		.comm	used_channels,1,1
 8813              		.comm	afh_map,10,1
 8814              		.comm	afh_enabled,1,1
 8815              		.comm	syncword,8,8
 8816              		.comm	target,16,8
 8817              		.comm	clkn_next_drift_fix,4,4
 8818              		.comm	clkn_last_drift_fix,4,4
 8819              		.comm	clk_drift_correction,2,2
 8820              		.comm	clk_drift_ppm,2,2
 8821              		.comm	clk100ns_offset,2,2
 8822              		.comm	clkn_offset,4,4
 8823              		.comm	last_hop,4,4
 8824              		.comm	clkn,4,4
 8825              		.comm	rx_err,4,4
 8826              		.comm	rx_tc,4,4
 8827              		.comm	idle_rxbuf,4,4
 8828              		.comm	active_rxbuf,4,4
 8829              		.comm	rxbuf2,50,1
 8830              		.comm	rxbuf1,50,1
 8831              		.comm	cs_trigger,1,1
 8832              		.comm	cs_threshold_cur,1,1
 8833              		.comm	cs_threshold_req,1,1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 232


 8834              		.comm	cs_no_squelch,1,1
 8835              		.comm	rssi_count,1,1
 8836              		.comm	rssi_min,1,1
 8837              		.comm	rssi_max,1,1
 8838              		.section	.rodata
 8839              		.align	2
 8840              		.set	.LANCHOR2,. + 0
 8843              	whitening_index:
 8844 0000 46       		.byte	70
 8845 0001 3E       		.byte	62
 8846 0002 78       		.byte	120
 8847 0003 6F       		.byte	111
 8848 0004 4D       		.byte	77
 8849 0005 2E       		.byte	46
 8850 0006 0F       		.byte	15
 8851 0007 65       		.byte	101
 8852 0008 42       		.byte	66
 8853 0009 27       		.byte	39
 8854 000a 1F       		.byte	31
 8855 000b 1A       		.byte	26
 8856 000c 50       		.byte	80
 8857 000d 53       		.byte	83
 8858 000e 7D       		.byte	125
 8859 000f 59       		.byte	89
 8860 0010 0A       		.byte	10
 8861 0011 23       		.byte	35
 8862 0012 08       		.byte	8
 8863 0013 36       		.byte	54
 8864 0014 7A       		.byte	122
 8865 0015 11       		.byte	17
 8866 0016 21       		.byte	33
 8867 0017 00       		.byte	0
 8868 0018 3A       		.byte	58
 8869 0019 73       		.byte	115
 8870 001a 06       		.byte	6
 8871 001b 5E       		.byte	94
 8872 001c 56       		.byte	86
 8873 001d 31       		.byte	49
 8874 001e 34       		.byte	52
 8875 001f 14       		.byte	20
 8876 0020 28       		.byte	40
 8877 0021 1B       		.byte	27
 8878 0022 54       		.byte	84
 8879 0023 5A       		.byte	90
 8880 0024 3F       		.byte	63
 8881 0025 70       		.byte	112
 8882 0026 2F       		.byte	47
 8883 0027 66       		.byte	102
 8886              	whitening:
 8887 0028 01       		.byte	1
 8888 0029 01       		.byte	1
 8889 002a 01       		.byte	1
 8890 002b 01       		.byte	1
 8891 002c 00       		.byte	0
 8892 002d 01       		.byte	1
 8893 002e 00       		.byte	0
 8894 002f 01       		.byte	1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 233


 8895 0030 00       		.byte	0
 8896 0031 01       		.byte	1
 8897 0032 00       		.byte	0
 8898 0033 00       		.byte	0
 8899 0034 00       		.byte	0
 8900 0035 00       		.byte	0
 8901 0036 01       		.byte	1
 8902 0037 00       		.byte	0
 8903 0038 01       		.byte	1
 8904 0039 01       		.byte	1
 8905 003a 00       		.byte	0
 8906 003b 01       		.byte	1
 8907 003c 01       		.byte	1
 8908 003d 01       		.byte	1
 8909 003e 01       		.byte	1
 8910 003f 00       		.byte	0
 8911 0040 00       		.byte	0
 8912 0041 01       		.byte	1
 8913 0042 01       		.byte	1
 8914 0043 01       		.byte	1
 8915 0044 00       		.byte	0
 8916 0045 00       		.byte	0
 8917 0046 01       		.byte	1
 8918 0047 00       		.byte	0
 8919 0048 01       		.byte	1
 8920 0049 00       		.byte	0
 8921 004a 01       		.byte	1
 8922 004b 01       		.byte	1
 8923 004c 00       		.byte	0
 8924 004d 00       		.byte	0
 8925 004e 01       		.byte	1
 8926 004f 01       		.byte	1
 8927 0050 00       		.byte	0
 8928 0051 00       		.byte	0
 8929 0052 00       		.byte	0
 8930 0053 00       		.byte	0
 8931 0054 00       		.byte	0
 8932 0055 01       		.byte	1
 8933 0056 01       		.byte	1
 8934 0057 00       		.byte	0
 8935 0058 01       		.byte	1
 8936 0059 01       		.byte	1
 8937 005a 00       		.byte	0
 8938 005b 01       		.byte	1
 8939 005c 00       		.byte	0
 8940 005d 01       		.byte	1
 8941 005e 01       		.byte	1
 8942 005f 01       		.byte	1
 8943 0060 00       		.byte	0
 8944 0061 01       		.byte	1
 8945 0062 00       		.byte	0
 8946 0063 00       		.byte	0
 8947 0064 00       		.byte	0
 8948 0065 01       		.byte	1
 8949 0066 01       		.byte	1
 8950 0067 00       		.byte	0
 8951 0068 00       		.byte	0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 234


 8952 0069 01       		.byte	1
 8953 006a 00       		.byte	0
 8954 006b 00       		.byte	0
 8955 006c 00       		.byte	0
 8956 006d 01       		.byte	1
 8957 006e 00       		.byte	0
 8958 006f 00       		.byte	0
 8959 0070 00       		.byte	0
 8960 0071 00       		.byte	0
 8961 0072 00       		.byte	0
 8962 0073 00       		.byte	0
 8963 0074 01       		.byte	1
 8964 0075 00       		.byte	0
 8965 0076 00       		.byte	0
 8966 0077 01       		.byte	1
 8967 0078 00       		.byte	0
 8968 0079 00       		.byte	0
 8969 007a 01       		.byte	1
 8970 007b 01       		.byte	1
 8971 007c 00       		.byte	0
 8972 007d 01       		.byte	1
 8973 007e 00       		.byte	0
 8974 007f 00       		.byte	0
 8975 0080 01       		.byte	1
 8976 0081 01       		.byte	1
 8977 0082 01       		.byte	1
 8978 0083 01       		.byte	1
 8979 0084 00       		.byte	0
 8980 0085 01       		.byte	1
 8981 0086 01       		.byte	1
 8982 0087 01       		.byte	1
 8983 0088 00       		.byte	0
 8984 0089 00       		.byte	0
 8985 008a 00       		.byte	0
 8986 008b 00       		.byte	0
 8987 008c 01       		.byte	1
 8988 008d 01       		.byte	1
 8989 008e 01       		.byte	1
 8990 008f 01       		.byte	1
 8991 0090 01       		.byte	1
 8992 0091 01       		.byte	1
 8993 0092 01       		.byte	1
 8994 0093 00       		.byte	0
 8995 0094 00       		.byte	0
 8996 0095 00       		.byte	0
 8997 0096 01       		.byte	1
 8998 0097 01       		.byte	1
 8999 0098 01       		.byte	1
 9000 0099 00       		.byte	0
 9001 009a 01       		.byte	1
 9002 009b 01       		.byte	1
 9003 009c 00       		.byte	0
 9004 009d 00       		.byte	0
 9005 009e 00       		.byte	0
 9006 009f 01       		.byte	1
 9007 00a0 00       		.byte	0
 9008 00a1 01       		.byte	1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 235


 9009 00a2 00       		.byte	0
 9010 00a3 00       		.byte	0
 9011 00a4 01       		.byte	1
 9012 00a5 00       		.byte	0
 9013 00a6 01       		.byte	1
 9016              	compile_info:
 9017 00a7 75626572 		.ascii	"ubertooth git-1ee8434* (ahesham@ahesham) Thu Apr 27"
 9017      746F6F74 
 9017      68206769 
 9017      742D3165 
 9017      65383433 
 9018 00da 2031323A 		.ascii	" 12:53:49 EDT 2017\000"
 9018      35333A34 
 9018      39204544 
 9018      54203230 
 9018      313700
 9019 00ed 000000   		.space	3
 9022              	whitening_word:
 9023 00f0 40B2BCC3 		.word	-1011043776
 9024 00f4 1F374A5F 		.word	1598699295
 9025 00f8 85F69C9A 		.word	-1700989307
 9026 00fc C1D6C544 		.word	1153816257
 9027 0100 2059DEE1 		.word	-505521888
 9028 0104 8F1BA5AF 		.word	-1348134001
 9029 0108 427B4ECD 		.word	-850494654
 9030 010c 60EB6222 		.word	576908128
 9031 0110 902CEFF0 		.word	-252760944
 9032 0114 C78DD257 		.word	1473416647
 9033 0118 A13DA766 		.word	1722236321
 9034 011c B0753111 		.word	288454064
 9035 0120 8940B2BC 		.word	-1129168759
 9036 0124 C31F374A 		.word	1245126595
 9037 0128 5F85F69C 		.word	-1661565601
 9038 012c 9AC1D6C5 		.word	-975781478
 9039 0130 442059DE 		.word	-564584380
 9040 0134 E18F1BA5 		.word	-1524920351
 9041 0138 AF427B4E 		.word	1316700847
 9042 013c CD60EB62 		.word	1659592909
 9043 0140 22902CEF 		.word	-282292190
 9044 0144 F0C78DD2 		.word	-762460176
 9045 0148 57A13DA7 		.word	-1489133225
 9046 014c 66B07531 		.word	829796454
 9047 0150 D257A13D 		.word	1033983954
 9048 0154 A766B075 		.word	1974494887
 9049 0158 31114896 		.word	-1773661903
 9050 015c 77F8E346 		.word	1189345399
 9051 0160 E9ABD09E 		.word	-1630491671
 9052 0164 5333D8BA 		.word	-1160236205
 9053 0168 980824CB 		.word	-886830952
 9054 016c 3BFC71A3 		.word	-1552810949
 9055 0170 F45568CF 		.word	-815245836
 9056 0174 A9196C5D 		.word	1567365545
 9057 0178 4C0492E5 		.word	-443415476
 9058 017c 1DFEB851 		.word	1371078173
 9059 0180 1BA5AF42 		.word	1118807323
 9060 0184 7B4ECD60 		.word	1624067707
 9061 0188 EB622290 		.word	-1876794645
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 236


 9062 018c 2CEFF0C7 		.word	-940511444
 9063 0190 8DD257A1 		.word	-1588079987
 9064 0194 3DA766B0 		.word	-1335449795
 9065 0198 75311148 		.word	1209086325
 9066 019c 9677F8E3 		.word	-470255722
 9067 01a0 46E9ABD0 		.word	-794039994
 9068 01a4 9E5333D8 		.word	-667724898
 9069 01a8 BA980824 		.word	604543162
 9070 01ac CB3BFC71 		.word	1912355787
 9071 01b0 6479873F 		.word	1065843044
 9072 01b4 6E94BE0A 		.word	180261998
 9073 01b8 ED393583 		.word	-2093663763
 9074 01bc AD8B8940 		.word	1082756013
 9075 01c0 B2BCC31F 		.word	532921522
 9076 01c4 374A5F85 		.word	-2057352649
 9077 01c8 F69C9AC1 		.word	-1046831882
 9078 01cc D6C54420 		.word	541378006
 9079 01d0 59DEE18F 		.word	-1881022887
 9080 01d4 1BA5AF42 		.word	1118807323
 9081 01d8 7B4ECD60 		.word	1624067707
 9082 01dc EB622290 		.word	-1876794645
 9083 01e0 AD8B8940 		.word	1082756013
 9084 01e4 B2BCC31F 		.word	532921522
 9085 01e8 374A5F85 		.word	-2057352649
 9086 01ec F69C9AC1 		.word	-1046831882
 9087 01f0 D6C54420 		.word	541378006
 9088 01f4 59DEE18F 		.word	-1881022887
 9089 01f8 1BA5AF42 		.word	1118807323
 9090 01fc 7B4ECD60 		.word	1624067707
 9091 0200 EB622290 		.word	-1876794645
 9092 0204 2CEFF0C7 		.word	-940511444
 9093 0208 8DD257A1 		.word	-1588079987
 9094 020c 3DA766B0 		.word	-1335449795
 9095 0210 F69C9AC1 		.word	-1046831882
 9096 0214 D6C54420 		.word	541378006
 9097 0218 59DEE18F 		.word	-1881022887
 9098 021c 1BA5AF42 		.word	1118807323
 9099 0220 7B4ECD60 		.word	1624067707
 9100 0224 EB622290 		.word	-1876794645
 9101 0228 2CEFF0C7 		.word	-940511444
 9102 022c 8DD257A1 		.word	-1588079987
 9103 0230 3DA766B0 		.word	-1335449795
 9104 0234 75311148 		.word	1209086325
 9105 0238 9677F8E3 		.word	-470255722
 9106 023c 46E9ABD0 		.word	-794039994
 9107 0240 3F6E94BE 		.word	-1097568705
 9108 0244 0AED3935 		.word	892988682
 9109 0248 83AD8B89 		.word	-1987334781
 9110 024c 40B2BCC3 		.word	-1011043776
 9111 0250 1F374A5F 		.word	1598699295
 9112 0254 85F69C9A 		.word	-1700989307
 9113 0258 C1D6C544 		.word	1153816257
 9114 025c 2059DEE1 		.word	-505521888
 9115 0260 8F1BA5AF 		.word	-1348134001
 9116 0264 427B4ECD 		.word	-850494654
 9117 0268 60EB6222 		.word	576908128
 9118 026c 902CEFF0 		.word	-252760944
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 237


 9119 0270 0824CB3B 		.word	1003168776
 9120 0274 FC71A3F4 		.word	-190615044
 9121 0278 5568CFA9 		.word	-1446025131
 9122 027c 196C5D4C 		.word	1281190937
 9123 0280 0492E51D 		.word	501584388
 9124 0284 FEB851FA 		.word	-95307522
 9125 0288 2AB4E7D4 		.word	-723012566
 9126 028c 0CB62E26 		.word	640595468
 9127 0290 02C9F20E 		.word	250792194
 9128 0294 7FDC287D 		.word	2099829887
 9129 0298 15DA736A 		.word	1785977365
 9130 029c 065B1713 		.word	320297734
 9131 02a0 C1D6C544 		.word	1153816257
 9132 02a4 2059DEE1 		.word	-505521888
 9133 02a8 8F1BA5AF 		.word	-1348134001
 9134 02ac 427B4ECD 		.word	-850494654
 9135 02b0 60EB6222 		.word	576908128
 9136 02b4 902CEFF0 		.word	-252760944
 9137 02b8 C78DD257 		.word	1473416647
 9138 02bc A13DA766 		.word	1722236321
 9139 02c0 B0753111 		.word	288454064
 9140 02c4 489677F8 		.word	-126380472
 9141 02c8 E346E9AB 		.word	-1410775325
 9142 02cc D09E5333 		.word	861118160
 9143 02d0 9AC1D6C5 		.word	-975781478
 9144 02d4 442059DE 		.word	-564584380
 9145 02d8 E18F1BA5 		.word	-1524920351
 9146 02dc AF427B4E 		.word	1316700847
 9147 02e0 CD60EB62 		.word	1659592909
 9148 02e4 22902CEF 		.word	-282292190
 9149 02e8 F0C78DD2 		.word	-762460176
 9150 02ec 57A13DA7 		.word	-1489133225
 9151 02f0 66B07531 		.word	829796454
 9152 02f4 11489677 		.word	2006337553
 9153 02f8 F8E346E9 		.word	-381230088
 9154 02fc ABD09E53 		.word	1402917035
 9155 0300 5333D8BA 		.word	-1160236205
 9156 0304 980824CB 		.word	-886830952
 9157 0308 3BFC71A3 		.word	-1552810949
 9158 030c F45568CF 		.word	-815245836
 9159 0310 A9196C5D 		.word	1567365545
 9160 0314 4C0492E5 		.word	-443415476
 9161 0318 1DFEB851 		.word	1371078173
 9162 031c FA2AB4E7 		.word	-407622918
 9163 0320 D40CB62E 		.word	783682772
 9164 0324 2602C9F2 		.word	-221707738
 9165 0328 0E7FDC28 		.word	685539086
 9166 032c 7D15DA73 		.word	1943672189
 9167 0330 2CEFF0C7 		.word	-940511444
 9168 0334 8DD257A1 		.word	-1588079987
 9169 0338 3DA766B0 		.word	-1335449795
 9170 033c 75311148 		.word	1209086325
 9171 0340 9677F8E3 		.word	-470255722
 9172 0344 46E9ABD0 		.word	-794039994
 9173 0348 9E5333D8 		.word	-667724898
 9174 034c BA980824 		.word	604543162
 9175 0350 CB3BFC71 		.word	1912355787
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 238


 9176 0354 A3F45568 		.word	1750463651
 9177 0358 CFA9196C 		.word	1813621199
 9178 035c 5D4C0492 		.word	-1845212067
 9179 0360 E51DFEB8 		.word	-1191305755
 9180 0364 51FA2AB4 		.word	-1272251823
 9181 0368 E7D40CB6 		.word	-1240673049
 9182 036c 2E2602C9 		.word	-922606034
 9183 0370 F20E7FDC 		.word	-595652878
 9184 0374 287D15DA 		.word	-636125912
 9185 0378 736A065B 		.word	1527147123
 9186 037c 17138164 		.word	1686180631
 9187 0380 79873F6E 		.word	1849657209
 9188 0384 94BE0AED 		.word	-318062956
 9189 0388 393583AD 		.word	-1383910087
 9190 038c 8B8940B2 		.word	-1304393333
 9191 0390 BE0AED39 		.word	971836094
 9192 0394 3583AD8B 		.word	-1951562955
 9193 0398 8940B2BC 		.word	-1129168759
 9194 039c C31F374A 		.word	1245126595
 9195 03a0 5F85F69C 		.word	-1661565601
 9196 03a4 9AC1D6C5 		.word	-975781478
 9197 03a8 442059DE 		.word	-564584380
 9198 03ac E18F1BA5 		.word	-1524920351
 9199 03b0 AF427B4E 		.word	1316700847
 9200 03b4 CD60EB62 		.word	1659592909
 9201 03b8 22902CEF 		.word	-282292190
 9202 03bc F0C78DD2 		.word	-762460176
 9203 03c0 77F8E346 		.word	1189345399
 9204 03c4 E9ABD09E 		.word	-1630491671
 9205 03c8 5333D8BA 		.word	-1160236205
 9206 03cc 980824CB 		.word	-886830952
 9207 03d0 3BFC71A3 		.word	-1552810949
 9208 03d4 F45568CF 		.word	-815245836
 9209 03d8 A9196C5D 		.word	1567365545
 9210 03dc 4C0492E5 		.word	-443415476
 9211 03e0 1DFEB851 		.word	1371078173
 9212 03e4 FA2AB4E7 		.word	-407622918
 9213 03e8 D40CB62E 		.word	783682772
 9214 03ec 2602C9F2 		.word	-221707738
 9215 03f0 D09E5333 		.word	861118160
 9216 03f4 D8BA9808 		.word	144227032
 9217 03f8 24CB3BFC 		.word	-63190236
 9218 03fc 71A3F455 		.word	1442095985
 9219 0400 68CFA919 		.word	430559080
 9220 0404 6C5D4C04 		.word	72113516
 9221 0408 92E51DFE 		.word	-31595118
 9222 040c B851FA2A 		.word	721047992
 9223 0410 B4E7D40C 		.word	215279540
 9224 0414 B62E2602 		.word	36056758
 9225 0418 C9F20E7F 		.word	2131686089
 9226 041c DC287D15 		.word	360523996
 9227 0420 196C5D4C 		.word	1281190937
 9228 0424 0492E51D 		.word	501584388
 9229 0428 FEB851FA 		.word	-95307522
 9230 042c 2AB4E7D4 		.word	-723012566
 9231 0430 0CB62E26 		.word	640595468
 9232 0434 02C9F20E 		.word	250792194
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 239


 9233 0438 7FDC287D 		.word	2099829887
 9234 043c 15DA736A 		.word	1785977365
 9235 0440 065B1713 		.word	320297734
 9236 0444 81647987 		.word	-2022087551
 9237 0448 3F6E94BE 		.word	-1097568705
 9238 044c 0AED3935 		.word	892988682
 9239 0450 427B4ECD 		.word	-850494654
 9240 0454 60EB6222 		.word	576908128
 9241 0458 902CEFF0 		.word	-252760944
 9242 045c C78DD257 		.word	1473416647
 9243 0460 A13DA766 		.word	1722236321
 9244 0464 B0753111 		.word	288454064
 9245 0468 489677F8 		.word	-126380472
 9246 046c E346E9AB 		.word	-1410775325
 9247 0470 D09E5333 		.word	861118160
 9248 0474 D8BA9808 		.word	144227032
 9249 0478 24CB3BFC 		.word	-63190236
 9250 047c 71A3F455 		.word	1442095985
 9251 0480 8B8940B2 		.word	-1304393333
 9252 0484 BCC31F37 		.word	924828604
 9253 0488 4A5F85F6 		.word	-159031478
 9254 048c 9C9AC1D6 		.word	-691955044
 9255 0490 C5442059 		.word	1495286981
 9256 0494 DEE18F1B 		.word	462414302
 9257 0498 A5AF427B 		.word	2067967909
 9258 049c 4ECD60EB 		.word	-345977522
 9259 04a0 6222902C 		.word	747643490
 9260 04a4 EFF0C78D 		.word	-1916276497
 9261 04a8 D257A13D 		.word	1033983954
 9262 04ac A766B075 		.word	1974494887
 9263 04b0 F45568CF 		.word	-815245836
 9264 04b4 A9196C5D 		.word	1567365545
 9265 04b8 4C0492E5 		.word	-443415476
 9266 04bc 1DFEB851 		.word	1371078173
 9267 04c0 FA2AB4E7 		.word	-407622918
 9268 04c4 D40CB62E 		.word	783682772
 9269 04c8 2602C9F2 		.word	-221707738
 9270 04cc 0E7FDC28 		.word	685539086
 9271 04d0 7D15DA73 		.word	1943672189
 9272 04d4 6A065B17 		.word	391841386
 9273 04d8 13816479 		.word	2036629779
 9274 04dc 873F6E94 		.word	-1804714105
 9275 04e0 3DA766B0 		.word	-1335449795
 9276 04e4 75311148 		.word	1209086325
 9277 04e8 9677F8E3 		.word	-470255722
 9278 04ec 46E9ABD0 		.word	-794039994
 9279 04f0 9E5333D8 		.word	-667724898
 9280 04f4 BA980824 		.word	604543162
 9281 04f8 CB3BFC71 		.word	1912355787
 9282 04fc A3F45568 		.word	1750463651
 9283 0500 CFA9196C 		.word	1813621199
 9284 0504 5D4C0492 		.word	-1845212067
 9285 0508 E51DFEB8 		.word	-1191305755
 9286 050c 51FA2AB4 		.word	-1272251823
 9287 0510 66B07531 		.word	829796454
 9288 0514 11489677 		.word	2006337553
 9289 0518 F8E346E9 		.word	-381230088
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 240


 9290 051c ABD09E53 		.word	1402917035
 9291 0520 33D8BA98 		.word	-1732585421
 9292 0524 0824CB3B 		.word	1003168776
 9293 0528 FC71A3F4 		.word	-190615044
 9294 052c 5568CFA9 		.word	-1446025131
 9295 0530 196C5D4C 		.word	1281190937
 9296 0534 0492E51D 		.word	501584388
 9297 0538 FEB851FA 		.word	-95307522
 9298 053c 2AB4E7D4 		.word	-723012566
 9299 0540 AF427B4E 		.word	1316700847
 9300 0544 CD60EB62 		.word	1659592909
 9301 0548 22902CEF 		.word	-282292190
 9302 054c F0C78DD2 		.word	-762460176
 9303 0550 57A13DA7 		.word	-1489133225
 9304 0554 66B07531 		.word	829796454
 9305 0558 11489677 		.word	2006337553
 9306 055c F8E346E9 		.word	-381230088
 9307 0560 ABD09E53 		.word	1402917035
 9308 0564 33D8BA98 		.word	-1732585421
 9309 0568 0824CB3B 		.word	1003168776
 9310 056c FC71A3F4 		.word	-190615044
 9311 0570 980824CB 		.word	-886830952
 9312 0574 3BFC71A3 		.word	-1552810949
 9313 0578 F45568CF 		.word	-815245836
 9314 057c A9196C5D 		.word	1567365545
 9315 0580 4C0492E5 		.word	-443415476
 9316 0584 1DFEB851 		.word	1371078173
 9317 0588 FA2AB4E7 		.word	-407622918
 9318 058c D40CB62E 		.word	783682772
 9319 0590 2602C9F2 		.word	-221707738
 9320 0594 0E7FDC28 		.word	685539086
 9321 0598 7D15DA73 		.word	1943672189
 9322 059c 6A065B17 		.word	391841386
 9323 05a0 51FA2AB4 		.word	-1272251823
 9324 05a4 E7D40CB6 		.word	-1240673049
 9325 05a8 2E2602C9 		.word	-922606034
 9326 05ac F20E7FDC 		.word	-595652878
 9327 05b0 287D15DA 		.word	-636125912
 9328 05b4 736A065B 		.word	1527147123
 9329 05b8 17138164 		.word	1686180631
 9330 05bc 79873F6E 		.word	1849657209
 9331 05c0 94BE0AED 		.word	-318062956
 9332 05c4 393583AD 		.word	-1383910087
 9333 05c8 8B8940B2 		.word	-1304393333
 9334 05cc BCC31F37 		.word	924828604
 9335 05d0 0AED3935 		.word	892988682
 9336 05d4 83AD8B89 		.word	-1987334781
 9337 05d8 40B2BCC3 		.word	-1011043776
 9338 05dc 1F374A5F 		.word	1598699295
 9339 05e0 85F69C9A 		.word	-1700989307
 9340 05e4 C1D6C544 		.word	1153816257
 9341 05e8 2059DEE1 		.word	-505521888
 9342 05ec 8F1BA5AF 		.word	-1348134001
 9343 05f0 427B4ECD 		.word	-850494654
 9344 05f4 60EB6222 		.word	576908128
 9345 05f8 902CEFF0 		.word	-252760944
 9346 05fc C78DD257 		.word	1473416647
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 241


 9347 0600 C31F374A 		.word	1245126595
 9348 0604 5F85F69C 		.word	-1661565601
 9349 0608 9AC1D6C5 		.word	-975781478
 9350 060c 442059DE 		.word	-564584380
 9351 0610 E18F1BA5 		.word	-1524920351
 9352 0614 AF427B4E 		.word	1316700847
 9353 0618 CD60EB62 		.word	1659592909
 9354 061c 22902CEF 		.word	-282292190
 9355 0620 F0C78DD2 		.word	-762460176
 9356 0624 57A13DA7 		.word	-1489133225
 9357 0628 66B07531 		.word	829796454
 9358 062c 11489677 		.word	2006337553
 9359 0630 BCC31F37 		.word	924828604
 9360 0634 4A5F85F6 		.word	-159031478
 9361 0638 9C9AC1D6 		.word	-691955044
 9362 063c C5442059 		.word	1495286981
 9363 0640 DEE18F1B 		.word	462414302
 9364 0644 A5AF427B 		.word	2067967909
 9365 0648 4ECD60EB 		.word	-345977522
 9366 064c 6222902C 		.word	747643490
 9367 0650 EFF0C78D 		.word	-1916276497
 9368 0654 D257A13D 		.word	1033983954
 9369 0658 A766B075 		.word	1974494887
 9370 065c 31114896 		.word	-1773661903
 9371 0660 75311148 		.word	1209086325
 9372 0664 9677F8E3 		.word	-470255722
 9373 0668 46E9ABD0 		.word	-794039994
 9374 066c 9E5333D8 		.word	-667724898
 9375 0670 BA980824 		.word	604543162
 9376 0674 CB3BFC71 		.word	1912355787
 9377 0678 A3F45568 		.word	1750463651
 9378 067c CFA9196C 		.word	1813621199
 9379 0680 5D4C0492 		.word	-1845212067
 9380 0684 E51DFEB8 		.word	-1191305755
 9381 0688 51FA2AB4 		.word	-1272251823
 9382 068c E7D40CB6 		.word	-1240673049
 9383 0690 2E2602C9 		.word	-922606034
 9384 0694 F20E7FDC 		.word	-595652878
 9385 0698 287D15DA 		.word	-636125912
 9386 069c 736A065B 		.word	1527147123
 9387 06a0 17138164 		.word	1686180631
 9388 06a4 79873F6E 		.word	1849657209
 9389 06a8 94BE0AED 		.word	-318062956
 9390 06ac 393583AD 		.word	-1383910087
 9391 06b0 8B8940B2 		.word	-1304393333
 9392 06b4 BCC31F37 		.word	924828604
 9393 06b8 4A5F85F6 		.word	-159031478
 9394 06bc 9C9AC1D6 		.word	-691955044
 9395 06c0 E7D40CB6 		.word	-1240673049
 9396 06c4 2E2602C9 		.word	-922606034
 9397 06c8 F20E7FDC 		.word	-595652878
 9398 06cc 287D15DA 		.word	-636125912
 9399 06d0 736A065B 		.word	1527147123
 9400 06d4 17138164 		.word	1686180631
 9401 06d8 79873F6E 		.word	1849657209
 9402 06dc 94BE0AED 		.word	-318062956
 9403 06e0 393583AD 		.word	-1383910087
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 242


 9404 06e4 8B8940B2 		.word	-1304393333
 9405 06e8 BCC31F37 		.word	924828604
 9406 06ec 4A5F85F6 		.word	-159031478
 9407 06f0 60EB6222 		.word	576908128
 9408 06f4 902CEFF0 		.word	-252760944
 9409 06f8 C78DD257 		.word	1473416647
 9410 06fc A13DA766 		.word	1722236321
 9411 0700 B0753111 		.word	288454064
 9412 0704 489677F8 		.word	-126380472
 9413 0708 E346E9AB 		.word	-1410775325
 9414 070c D09E5333 		.word	861118160
 9415 0710 D8BA9808 		.word	144227032
 9416 0714 24CB3BFC 		.word	-63190236
 9417 0718 71A3F455 		.word	1442095985
 9418 071c 68CFA919 		.word	430559080
 9419 0720 A9196C5D 		.word	1567365545
 9420 0724 4C0492E5 		.word	-443415476
 9421 0728 1DFEB851 		.word	1371078173
 9422 072c FA2AB4E7 		.word	-407622918
 9423 0730 D40CB62E 		.word	783682772
 9424 0734 2602C9F2 		.word	-221707738
 9425 0738 0E7FDC28 		.word	685539086
 9426 073c 7D15DA73 		.word	1943672189
 9427 0740 6A065B17 		.word	391841386
 9428 0744 13816479 		.word	2036629779
 9429 0748 873F6E94 		.word	-1804714105
 9430 074c BE0AED39 		.word	971836094
 9431 0750 F20E7FDC 		.word	-595652878
 9432 0754 287D15DA 		.word	-636125912
 9433 0758 736A065B 		.word	1527147123
 9434 075c 17138164 		.word	1686180631
 9435 0760 79873F6E 		.word	1849657209
 9436 0764 94BE0AED 		.word	-318062956
 9437 0768 393583AD 		.word	-1383910087
 9438 076c 8B8940B2 		.word	-1304393333
 9439 0770 BCC31F37 		.word	924828604
 9440 0774 4A5F85F6 		.word	-159031478
 9441 0778 9C9AC1D6 		.word	-691955044
 9442 077c C5442059 		.word	1495286981
 9443 0780 3BFC71A3 		.word	-1552810949
 9444 0784 F45568CF 		.word	-815245836
 9445 0788 A9196C5D 		.word	1567365545
 9446 078c 4C0492E5 		.word	-443415476
 9447 0790 1DFEB851 		.word	1371078173
 9448 0794 FA2AB4E7 		.word	-407622918
 9449 0798 D40CB62E 		.word	783682772
 9450 079c 2602C9F2 		.word	-221707738
 9451 07a0 0E7FDC28 		.word	685539086
 9452 07a4 7D15DA73 		.word	1943672189
 9453 07a8 6A065B17 		.word	391841386
 9454 07ac 13816479 		.word	2036629779
 9455 07b0 442059DE 		.word	-564584380
 9456 07b4 E18F1BA5 		.word	-1524920351
 9457 07b8 AF427B4E 		.word	1316700847
 9458 07bc CD60EB62 		.word	1659592909
 9459 07c0 22902CEF 		.word	-282292190
 9460 07c4 F0C78DD2 		.word	-762460176
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 243


 9461 07c8 57A13DA7 		.word	-1489133225
 9462 07cc 66B07531 		.word	829796454
 9463 07d0 11489677 		.word	2006337553
 9464 07d4 F8E346E9 		.word	-381230088
 9465 07d8 ABD09E53 		.word	1402917035
 9466 07dc 33D8BA98 		.word	-1732585421
 9467 07e0 8DD257A1 		.word	-1588079987
 9468 07e4 3DA766B0 		.word	-1335449795
 9469 07e8 75311148 		.word	1209086325
 9470 07ec 9677F8E3 		.word	-470255722
 9471 07f0 46E9ABD0 		.word	-794039994
 9472 07f4 9E5333D8 		.word	-667724898
 9473 07f8 BA980824 		.word	604543162
 9474 07fc CB3BFC71 		.word	1912355787
 9475 0800 A3F45568 		.word	1750463651
 9476 0804 CFA9196C 		.word	1813621199
 9477 0808 5D4C0492 		.word	-1845212067
 9478 080c E51DFEB8 		.word	-1191305755
 9479 0810 D6C54420 		.word	541378006
 9480 0814 59DEE18F 		.word	-1881022887
 9481 0818 1BA5AF42 		.word	1118807323
 9482 081c 7B4ECD60 		.word	1624067707
 9483 0820 EB622290 		.word	-1876794645
 9484 0824 2CEFF0C7 		.word	-940511444
 9485 0828 8DD257A1 		.word	-1588079987
 9486 082c 3DA766B0 		.word	-1335449795
 9487 0830 75311148 		.word	1209086325
 9488 0834 9677F8E3 		.word	-470255722
 9489 0838 46E9ABD0 		.word	-794039994
 9490 083c 9E5333D8 		.word	-667724898
 9491 0840 1F374A5F 		.word	1598699295
 9492 0844 85F69C9A 		.word	-1700989307
 9493 0848 C1D6C544 		.word	1153816257
 9494 084c 2059DEE1 		.word	-505521888
 9495 0850 8F1BA5AF 		.word	-1348134001
 9496 0854 427B4ECD 		.word	-850494654
 9497 0858 60EB6222 		.word	576908128
 9498 085c 902CEFF0 		.word	-252760944
 9499 0860 C78DD257 		.word	1473416647
 9500 0864 A13DA766 		.word	1722236321
 9501 0868 B0753111 		.word	288454064
 9502 086c 489677F8 		.word	-126380472
 9505              	hop_interval_lut:
 9506 0870 00       		.byte	0
 9507 0871 01       		.byte	1
 9508 0872 13       		.byte	19
 9509 0873 19       		.byte	25
 9510 0874 1C       		.byte	28
 9511 0875 0F       		.byte	15
 9512 0876 1F       		.byte	31
 9513 0877 10       		.byte	16
 9514 0878 0E       		.byte	14
 9515 0879 21       		.byte	33
 9516 087a 1A       		.byte	26
 9517 087b 1B       		.byte	27
 9518 087c 22       		.byte	34
 9519 087d 14       		.byte	20
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 244


 9520 087e 08       		.byte	8
 9521 087f 05       		.byte	5
 9522 0880 07       		.byte	7
 9523 0881 18       		.byte	24
 9524 0882 23       		.byte	35
 9525 0883 02       		.byte	2
 9526 0884 0D       		.byte	13
 9527 0885 1E       		.byte	30
 9528 0886 20       		.byte	32
 9529 0887 1D       		.byte	29
 9530 0888 11       		.byte	17
 9531 0889 03       		.byte	3
 9532 088a 0A       		.byte	10
 9533 088b 0B       		.byte	11
 9534 088c 04       		.byte	4
 9535 088d 17       		.byte	23
 9536 088e 15       		.byte	21
 9537 088f 06       		.byte	6
 9538 0890 16       		.byte	22
 9539 0891 09       		.byte	9
 9540 0892 0C       		.byte	12
 9541 0893 12       		.byte	18
 9542 0894 24       		.byte	36
 9543 0895 000000   		.space	3
 9544              	.LC0:
 9545 0898 01000000 		.word	1
 9546 089c 01000000 		.word	1
 9547 08a0 01000000 		.word	1
 9548 08a4 01000000 		.word	1
 9549              	.LC1:
 9550 08a8 00       		.byte	0
 9551 08a9 09       		.byte	9
 9552 08aa FF       		.byte	-1
 9553 08ab FF       		.byte	-1
 9554 08ac FF       		.byte	-1
 9555 08ad FF       		.byte	-1
 9556 08ae FF       		.byte	-1
 9557 08af FF       		.byte	-1
 9558 08b0 02       		.byte	2
 9559 08b1 01       		.byte	1
 9560 08b2 05       		.byte	5
 9561 08b3 FF       		.byte	-1
 9562 08b4 FF       		.byte	-1
 9563 08b5 FF       		.byte	-1
 9564              	.LC2:
 9565 08b6 6C09     		.short	2412
 9566 08b8 8509     		.short	2437
 9567 08ba 9E09     		.short	2462
 9568              		.section	.rodata.str1.1,"aMS",%progbits,1
 9569              	.LC3:
 9570 0000 6769742D 		.ascii	"git-1ee8434*\000"
 9570      31656538 
 9570      3433342A 
 9570      00
 9571              		.data
 9572              		.align	2
 9573              		.set	.LANCHOR1,. + 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 245


 9576              	channel:
 9577 0000 8909     		.short	2441
 9578 0002 0000     		.space	2
 9581              	le:
 9582 0004 D6BE898E 		.word	-1903575338
 9583 0008 7D6B     		.short	27517
 9584 000a 7191     		.short	-28303
 9585 000c 55555500 		.word	5592405
 9586 0010 AAAAAA00 		.word	11184810
 9587 0014 00000000 		.word	0
 9588 0018 00       		.byte	0
 9589 0019 000000   		.space	3
 9590 001c 00000000 		.word	0
 9591 0020 00000000 		.space	32
 9591      00000000 
 9591      00000000 
 9591      00000000 
 9591      00000000 
 9592 0040 00000000 		.word	0
 9593 0044 00000000 		.word	0
 9596              	hop_timeout:
 9597 0048 9E00     		.short	158
 9600              	le_adv_channel:
 9601 004a 6209     		.short	2402
 9604              	low_freq:
 9605 004c 6009     		.short	2400
 9608              	high_freq:
 9609 004e B309     		.short	2483
 9612              	rssi_threshold:
 9613 0050 E2       		.byte	-30
 9614 0051 000000   		.bss
 9615              		.align	2
 9616              		.set	.LANCHOR0,. + 0
 9619              	modulation:
 9620 0000 00       		.space	1
 9623              	status:
 9624 0001 00       		.space	1
 9627              	idle_buf_clkn_high:
 9628 0002 00       		.space	1
 9629 0003 00       		.space	1
 9632              	idle_buf_clk100ns:
 9633 0004 00000000 		.space	4
 9636              	idle_buf_channel:
 9637 0008 0000     		.space	2
 9640              	hop_mode:
 9641 000a 00       		.space	1
 9644              	do_hop:
 9645 000b 00       		.space	1
 9648              	hop_direct_channel:
 9649 000c 0000     		.space	2
 9652              	requested_channel:
 9653 000e 0000     		.space	2
 9656              	dma_discard:
 9657 0010 00       		.space	1
 9660              	mode:
 9661 0011 00       		.space	1
 9664              	requested_mode:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 246


 9665 0012 00       		.space	1
 9668              	jam_mode:
 9669 0013 00       		.space	1
 9672              	ego_mode:
 9673 0014 00       		.space	1
 9674 0015 000000   		.space	3
 9677              	packet_cb:
 9678 0018 00000000 		.space	4
 9681              	le_jam_count:
 9682 001c 00000000 		.space	4
 9685              	slave_mac_address:
 9686 0020 00000000 		.space	6
 9686      0000
 9687 0026 0000     		.space	2
 9690              	data_cb:
 9691 0028 00000000 		.space	4
 9694              	restart_jamming.4782:
 9695 002c 00000000 		.space	4
 9698              	restart_jamming.4834:
 9699 0030 00000000 		.space	4
 9702              	first_ts.4947:
 9703 0034 00000000 		.space	4
 9706              	prev_clk.4953:
 9707 0038 00000000 		.space	4
 9708              		.text
 9709              	.Letext0:
 9710              		.file 2 "/Users/ahesham/research/Bluetooth/boss/uberCode/gcc-arm-none-eabi/lib/gcc/arm-none-eabi/4
 9711              		.file 3 "/Users/ahesham/research/Bluetooth/boss/uberCode/gcc-arm-none-eabi/lib/gcc/arm-none-eabi/4
 9712              		.file 4 "../../host/libubertooth/src/ubertooth_interface.h"
 9713              		.file 5 "../common/ubertooth.h"
 9714              		.file 6 "ubertooth_usb.h"
 9715              		.file 7 "bluetooth_le.h"
 9716              		.file 8 "ego.h"
 9717              		.file 9 "ubertooth_rssi.h"
 9718              		.file 10 "ubertooth_cs.h"
 9719              		.file 11 "ubertooth_dma.h"
 9720              		.file 12 "ubertooth_clock.h"
 9721              		.file 13 "bluetooth.h"
 9722              		.file 14 "cc2400_rangetest.h"
 9723              		.file 15 "/Users/ahesham/research/Bluetooth/boss/uberCode/gcc-arm-none-eabi/arm-none-eabi/include/
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 247


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:19     .text.reverse8:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:23     .text.reverse8:0000000000000000 reverse8
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:72     .text.cc2400_rx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:76     .text.cc2400_rx:0000000000000000 cc2400_rx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:188    .text.cc2400_rx:0000000000000098 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:195    .text.cc2400_rx_sync:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:199    .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:323    .text.cc2400_rx_sync:00000000000000a0 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:330    .text.enqueue:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:334    .text.enqueue:0000000000000000 enqueue
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:442    .text.enqueue:0000000000000080 $d
                            *COM*:0000000000000004 clkn
                            *COM*:0000000000000001 rssi_min
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_count
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:452    .text.le_set_access_address:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:456    .text.le_set_access_address:0000000000000000 le_set_access_address
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:483    .text.le_set_access_address:0000000000000014 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:488    .text.cc2400_idle:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:492    .text.cc2400_idle:0000000000000000 cc2400_idle
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:606    .text.cc2400_idle:00000000000000a0 $d
                            *COM*:0000000000000010 target
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:614    .text.cb_follow_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:619    .text.cb_follow_le:0000000000000000 cb_follow_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:827    .text.cb_follow_le:00000000000000ec $d
                            *COM*:0000000000000320 unpacked
                            *COM*:0000000000000004 idle_rxbuf
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:837    .text.connection_follow_cb_boss_master:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:842    .text.connection_follow_cb_boss_master:0000000000000000 connection_follow_cb_boss_master
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1117   .text.connection_follow_cb_boss_master:0000000000000168 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1126   .text.connection_follow_cb:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1131   .text.connection_follow_cb:0000000000000000 connection_follow_cb
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1406   .text.connection_follow_cb:0000000000000168 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1416   .text.vendor_request_handler:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1420   .text.vendor_request_handler:0000000000000000 vendor_request_handler
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1446   .text.vendor_request_handler:0000000000000012 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:1518   .text.vendor_request_handler:00000000000000a2 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2040   .text.vendor_request_handler:0000000000000320 $d
                            *COM*:0000000000000005 rr
                            *COM*:0000000000000001 cs_threshold_req
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2058   .text.vendor_request_handler:000000000000035c $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2655   .text.vendor_request_handler:0000000000000610 $d
                            *COM*:0000000000000004 clkn_offset
                            *COM*:0000000000000002 clk100ns_offset
                            *COM*:000000000000000a afh_map
                            *COM*:0000000000000001 used_channels
                            *COM*:0000000000000001 afh_enabled
                            *COM*:0000000000000002 clk_drift_ppm
                            *COM*:0000000000000004 clkn_next_drift_fix
                            *COM*:0000000000000002 clk_drift_correction
                            *COM*:0000000000000004 clkn_last_drift_fix
                            *COM*:000000000000003a tx_pkt
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2672   .text.vendor_request_handler:0000000000000648 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2695   .text.vendor_request_handler:000000000000065c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2700   .text.msleep.constprop.3:0000000000000000 $t
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 248


/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2704   .text.msleep.constprop.3:0000000000000000 msleep.constprop.3
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2732   .text.msleep.constprop.3:0000000000000018 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2737   .text.enqueue_with_ts:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2742   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2817   .text.enqueue_with_ts:000000000000004c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2823   .text.TIMER0_IRQHandler:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:2828   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3024   .text.TIMER0_IRQHandler:000000000000010c $d
                            *COM*:0000000000000004 last_hop
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3041   .text.EINT3_IRQHandler:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3046   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3077   .text.EINT3_IRQHandler:0000000000000024 $d
                            *COM*:0000000000000001 cs_trigger
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3085   .text.DMA_IRQHandler:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3090   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3222   .text.DMA_IRQHandler:00000000000000b0 $d
                            *COM*:0000000000000004 active_rxbuf
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3240   .text.le_transmit:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3245   .text.le_transmit:0000000000000000 le_transmit
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3545   .text.le_transmit:00000000000001a4 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3555   .text.le_jam:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3560   .text.le_jam:0000000000000000 le_jam
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3644   .text.le_jam:0000000000000074 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3649   .text.hop:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3654   .text.hop:0000000000000000 hop
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3897   .text.hop:0000000000000178 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3909   .text.bt_stream_rx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:3914   .text.bt_stream_rx:0000000000000000 bt_stream_rx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4141   .text.bt_stream_rx:0000000000000130 $d
                            *COM*:0000000000000001 cs_threshold_cur
                            *COM*:0000000000000001 cs_no_squelch
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4157   .text.br_transmit:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4162   .text.br_transmit:0000000000000000 br_transmit
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4581   .text.br_transmit:0000000000000254 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4594   .text.reset_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4599   .text.reset_le:0000000000000000 reset_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4661   .text.reset_le:0000000000000040 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4670   .text.reset_le_promisc:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4675   .text.reset_le_promisc:0000000000000000 reset_le_promisc
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4699   .text.reset_le_promisc:000000000000001c $d
                            *COM*:0000000000000108 le_promisc
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4704   .text.bt_generic_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:4709   .text.bt_generic_le:0000000000000000 bt_generic_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5057   .text.bt_generic_le:00000000000001b0 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5075   .text.bt_le_sync:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5080   .text.bt_le_sync:0000000000000000 bt_le_sync
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5579   .text.bt_le_sync:00000000000002a4 $d
                            *COM*:0000000000000032 rxbuf1
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5601   .text.bt_le_sync:00000000000002f4 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5727   .text.bt_le_sync:00000000000003a4 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5734   .text.bt_le_sync_boss_master:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:5739   .text.bt_le_sync_boss_master:0000000000000000 bt_le_sync_boss_master
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6253   .text.bt_le_sync_boss_master:00000000000002b8 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6276   .text.bt_le_sync_boss_master:000000000000030c $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6402   .text.bt_le_sync_boss_master:00000000000003bc $d
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 249


/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6409   .text.bt_follow_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6414   .text.bt_follow_le:0000000000000000 bt_follow_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6444   .text.bt_follow_le:0000000000000018 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6450   .text.bt_boss_master_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6455   .text.bt_boss_master_le:0000000000000000 bt_boss_master_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6485   .text.bt_boss_master_le:0000000000000018 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6491   .text.le_promisc_state:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6496   .text.le_promisc_state:0000000000000000 le_promisc_state
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6550   .text.promisc_recover_hop_increment:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6555   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6715   .text.promisc_recover_hop_increment:00000000000000cc $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6725   .text.promisc_recover_hop_interval:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6730   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6850   .text.promisc_recover_hop_interval:0000000000000098 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6861   .text.promisc_follow_cb:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6866   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6970   .text.promisc_follow_cb:0000000000000064 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6981   .text.see_aa:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:6986   .text.see_aa:0000000000000000 see_aa
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7057   .text.see_aa:0000000000000050 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7064   .text.cb_le_promisc:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7069   .text.cb_le_promisc:0000000000000000 cb_le_promisc
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7386   .text.cb_le_promisc:000000000000019c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7399   .text.bt_promisc_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7404   .text.bt_promisc_le:0000000000000000 bt_promisc_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7483   .text.bt_promisc_le:000000000000005c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7492   .text.generatePacket_boss:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7497   .text.generatePacket_boss:0000000000000000 generatePacket_boss
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7579   .text.generatePacket_boss:000000000000004c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7585   .text.bt_boss_slave_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7590   .text.bt_boss_slave_le:0000000000000000 bt_boss_slave_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7656   .text.bt_boss_slave_le:0000000000000044 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7664   .text.bt_slave_le:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7669   .text.bt_slave_le:0000000000000000 bt_slave_le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7781   .text.bt_slave_le:0000000000000090 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7792   .text.rx_generic_sync:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7797   .text.rx_generic_sync:0000000000000000 rx_generic_sync
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7911   .text.rx_generic_sync:0000000000000098 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7919   .text.rx_generic:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7924   .text.rx_generic:0000000000000000 rx_generic
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7958   .text.rx_generic:000000000000001c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7963   .text.tx_generic:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:7968   .text.tx_generic:0000000000000000 tx_generic
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8126   .text.tx_generic:00000000000000dc $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8136   .text.specan:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8141   .text.specan:0000000000000000 specan
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8329   .text.specan:00000000000000fc $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8339   .text.led_specan:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8344   .text.led_specan:0000000000000000 led_specan
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8545   .text.led_specan:0000000000000114 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8556   .text.startup.main:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8561   .text.startup.main:0000000000000000 main
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8608   .text.startup.main:0000000000000034 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8627   .text.startup.main:0000000000000080 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8775   .text.startup.main:0000000000000118 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9677   .bss:0000000000000018 packet_cb
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9690   .bss:0000000000000028 data_cb
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 250


/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9681   .bss:000000000000001c le_jam_count
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9581   .data:0000000000000004 le
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9685   .bss:0000000000000020 slave_mac_address
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9612   .data:0000000000000050 rssi_threshold
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9608   .data:000000000000004e high_freq
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9604   .data:000000000000004c low_freq
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9619   .bss:0000000000000000 modulation
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9672   .bss:0000000000000014 ego_mode
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9668   .bss:0000000000000013 jam_mode
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9664   .bss:0000000000000012 requested_mode
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9660   .bss:0000000000000011 mode
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9623   .bss:0000000000000001 status
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9656   .bss:0000000000000010 dma_discard
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9636   .bss:0000000000000008 idle_buf_channel
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9632   .bss:0000000000000004 idle_buf_clk100ns
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9627   .bss:0000000000000002 idle_buf_clkn_high
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9600   .data:000000000000004a le_adv_channel
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9652   .bss:000000000000000e requested_channel
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9596   .data:0000000000000048 hop_timeout
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9648   .bss:000000000000000c hop_direct_channel
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9576   .data:0000000000000000 channel
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9644   .bss:000000000000000b do_hop
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9640   .bss:000000000000000a hop_mode
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9016   .rodata:00000000000000a7 compile_info
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000032 rxbuf2
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8839   .rodata:0000000000000000 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8843   .rodata:0000000000000000 whitening_index
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:8886   .rodata:0000000000000028 whitening
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9022   .rodata:00000000000000f0 whitening_word
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9505   .rodata:0000000000000870 hop_interval_lut
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9572   .data:0000000000000000 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9615   .bss:0000000000000000 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9694   .bss:000000000000002c restart_jamming.4782
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9698   .bss:0000000000000030 restart_jamming.4834
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9702   .bss:0000000000000034 first_ts.4947
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s:9706   .bss:0000000000000038 prev_clk.4953
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
cs_threshold_calc_and_set
clkn_start
cc2400_status
cc2400_strobe
usb_enqueue
rssi_get_avg
memcpy
rbit
clkn_stop
dio_ssp_stop
cs_reset
rssi_reset
btle_channel_index
btle_crcgen_lut
memcmp
__aeabi_llsl
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccF5ee78.s 			page 251


get_part_num
get_device_serial
cc2400_get
set_isp
strlen
precalc
bootloader_ctrl
dequeue
queue_init
cc2400_fifo_write
next_hop
btle_next_hop
dio_ssp_init
dma_init
dio_ssp_start
cs_trigger_enable
rssi_add
handle_usb
rssi_iir_update
cs_trigger_disable
memset
dma_init_le
btle_reverse_crc
btle_calc_crc
cc2400_fifo_read
ubertooth_init
clkn_init
ubertooth_usb_init
wait
reset
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
