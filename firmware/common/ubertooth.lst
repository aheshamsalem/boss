ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 4
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"ubertooth.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.spi_delay,"ax",%progbits
  19              		.align	1
  20              		.thumb
  21              		.thumb_func
  23              	spi_delay:
  24              	.LFB15:
  25              		.file 1 "../common/ubertooth.c"
   1:../common/ubertooth.c **** /*
   2:../common/ubertooth.c ****  * Copyright 2010, 2011 Michael Ossmann
   3:../common/ubertooth.c ****  *
   4:../common/ubertooth.c ****  * This file is part of Project Ubertooth.
   5:../common/ubertooth.c ****  *
   6:../common/ubertooth.c ****  * This program is free software; you can redistribute it and/or modify
   7:../common/ubertooth.c ****  * it under the terms of the GNU General Public License as published by
   8:../common/ubertooth.c ****  * the Free Software Foundation; either version 2, or (at your option)
   9:../common/ubertooth.c ****  * any later version.
  10:../common/ubertooth.c ****  *
  11:../common/ubertooth.c ****  * This program is distributed in the hope that it will be useful,
  12:../common/ubertooth.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:../common/ubertooth.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:../common/ubertooth.c ****  * GNU General Public License for more details.
  15:../common/ubertooth.c ****  *
  16:../common/ubertooth.c ****  * You should have received a copy of the GNU General Public License
  17:../common/ubertooth.c ****  * along with this program; see the file COPYING.  If not, write to
  18:../common/ubertooth.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  19:../common/ubertooth.c ****  * Boston, MA 02110-1301, USA.
  20:../common/ubertooth.c ****  */
  21:../common/ubertooth.c **** 
  22:../common/ubertooth.c **** #include "ubertooth.h"
  23:../common/ubertooth.c **** 
  24:../common/ubertooth.c **** #define IAP_LOCATION 0x1FFF1FF1
  25:../common/ubertooth.c **** const IAP_ENTRY iap_entry = (IAP_ENTRY)IAP_LOCATION;
  26:../common/ubertooth.c **** 
  27:../common/ubertooth.c **** /* delay a number of seconds while on internal oscillator (4 MHz) */
  28:../common/ubertooth.c **** void wait(u8 seconds)
  29:../common/ubertooth.c **** {
  30:../common/ubertooth.c **** 	wait_us(seconds * 1000000);
  31:../common/ubertooth.c **** }
  32:../common/ubertooth.c **** 
  33:../common/ubertooth.c **** /* delay a number of milliseconds while on internal oscillator (4 MHz) */
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 2


  34:../common/ubertooth.c **** void wait_ms(u32 ms)
  35:../common/ubertooth.c **** {
  36:../common/ubertooth.c **** 	wait_us(ms * 1000);
  37:../common/ubertooth.c **** }
  38:../common/ubertooth.c **** 
  39:../common/ubertooth.c **** /* efficiently reverse the bits of a 32-bit word */
  40:../common/ubertooth.c **** u32 rbit(u32 value) {
  41:../common/ubertooth.c ****   u32 result = 0;
  42:../common/ubertooth.c ****   asm("rbit %0, %1" : "=r" (result) : "r" (value));
  43:../common/ubertooth.c ****   return result;
  44:../common/ubertooth.c **** }
  45:../common/ubertooth.c **** 
  46:../common/ubertooth.c **** /* delay a number of microseconds while on internal oscillator (4 MHz) */
  47:../common/ubertooth.c **** /* we only have a resolution of 1000/400, so to the nearest 2.5        */
  48:../common/ubertooth.c **** static volatile u32 wait_us_counter;
  49:../common/ubertooth.c **** void wait_us(u32 us)
  50:../common/ubertooth.c **** {
  51:../common/ubertooth.c **** 	/* This is binary multiply by ~0.3999, i.e, multiply by
  52:../common/ubertooth.c **** 	   0.011011011b. The loop also contains 6 instructions at -Os, so
  53:../common/ubertooth.c **** 	   why this factor works is not at all related to the comment
  54:../common/ubertooth.c **** 	   above ;-) */
  55:../common/ubertooth.c **** 	wait_us_counter =
  56:../common/ubertooth.c **** 		(us>>2) + (us>>3) + (us>>6) + (us>>7) + (us>>10) + (us>>11);
  57:../common/ubertooth.c **** 	while(--wait_us_counter);
  58:../common/ubertooth.c **** }
  59:../common/ubertooth.c **** 
  60:../common/ubertooth.c **** 
  61:../common/ubertooth.c **** /*
  62:../common/ubertooth.c ****  * This should be called very early by every firmware in order to ensure safe
  63:../common/ubertooth.c ****  * operating conditions for the CC2400.
  64:../common/ubertooth.c ****  */
  65:../common/ubertooth.c **** void gpio_init()
  66:../common/ubertooth.c **** {
  67:../common/ubertooth.c **** 	/* 
  68:../common/ubertooth.c **** 	 * Set all pins for GPIO.  This shouldn't be necessary after a reset, but
  69:../common/ubertooth.c **** 	 * we might get called at other times.
  70:../common/ubertooth.c **** 	 */
  71:../common/ubertooth.c **** 	all_pins_off();
  72:../common/ubertooth.c **** 
  73:../common/ubertooth.c **** 	/* set certain pins as outputs, all others inputs */
  74:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
  75:../common/ubertooth.c **** 	FIO0DIR = PIN_USRLED;
  76:../common/ubertooth.c **** 	FIO1DIR = (PIN_CC3V3 | PIN_RX | PIN_TX | PIN_CSN |
  77:../common/ubertooth.c **** 			PIN_SCLK | PIN_MOSI | PIN_CC1V8 | PIN_BTGR);
  78:../common/ubertooth.c **** 	FIO2DIR = PIN_SSEL0;
  79:../common/ubertooth.c **** 	FIO3DIR = 0;
  80:../common/ubertooth.c **** 	FIO4DIR = (PIN_RXLED | PIN_TXLED);
  81:../common/ubertooth.c **** #endif
  82:../common/ubertooth.c **** #ifdef UBERTOOTH_ONE
  83:../common/ubertooth.c **** 	FIO0DIR = 0;
  84:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
  85:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
  86:../common/ubertooth.c **** 	FIO2DIR = (PIN_CSN | PIN_SCLK | PIN_MOSI | PIN_PAEN | PIN_HGM);
  87:../common/ubertooth.c **** 	FIO3DIR = 0;
  88:../common/ubertooth.c **** 	FIO4DIR = (PIN_TX | PIN_SSEL1);
  89:../common/ubertooth.c **** #endif
  90:../common/ubertooth.c **** #ifdef TC13BADGE
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 3


  91:../common/ubertooth.c **** 	/*
  92:../common/ubertooth.c **** 	 * Leave all the CC2400 pins configured as inputs until cc2400_init() is
  93:../common/ubertooth.c **** 	 * called so that we don't interfere with the R8C's control of the CC2400.
  94:../common/ubertooth.c **** 	 */
  95:../common/ubertooth.c **** 	FIO0DIR = 0;
  96:../common/ubertooth.c **** 	FIO1DIR = PIN_R8C_CTL;
  97:../common/ubertooth.c **** 	FIO2DIR = 0;
  98:../common/ubertooth.c **** 	FIO3DIR = 0;
  99:../common/ubertooth.c **** 	FIO4DIR = 0;
 100:../common/ubertooth.c **** #endif
 101:../common/ubertooth.c **** 
 102:../common/ubertooth.c **** 	/* set all outputs low */
 103:../common/ubertooth.c **** 	FIO0PIN = 0;
 104:../common/ubertooth.c **** 	FIO1PIN = 0;
 105:../common/ubertooth.c **** 	FIO2PIN = 0;
 106:../common/ubertooth.c **** 	FIO3PIN = 0;
 107:../common/ubertooth.c **** 	FIO4PIN = 0;
 108:../common/ubertooth.c **** 
 109:../common/ubertooth.c **** #ifdef TC13BADGE
 110:../common/ubertooth.c **** 	/* R8C_CTL is active low */
 111:../common/ubertooth.c **** 	R8C_CTL_SET;
 112:../common/ubertooth.c **** #endif
 113:../common/ubertooth.c **** }
 114:../common/ubertooth.c **** 
 115:../common/ubertooth.c **** void all_pins_off(void)
 116:../common/ubertooth.c **** {
 117:../common/ubertooth.c **** 	/* configure all pins for GPIO */
 118:../common/ubertooth.c **** 	PINSEL0 = 0;
 119:../common/ubertooth.c **** 	PINSEL1 = 0;
 120:../common/ubertooth.c **** 	PINSEL2 = 0;
 121:../common/ubertooth.c **** 	PINSEL3 = 0;
 122:../common/ubertooth.c **** 	PINSEL4 = 0;
 123:../common/ubertooth.c **** 	PINSEL7 = 0;
 124:../common/ubertooth.c **** 	PINSEL9 = 0;
 125:../common/ubertooth.c **** 	PINSEL10 = 0;
 126:../common/ubertooth.c **** 
 127:../common/ubertooth.c **** 	/* configure all pins as inputs */
 128:../common/ubertooth.c **** 	FIO0DIR = 0;
 129:../common/ubertooth.c **** 	FIO1DIR = 0;
 130:../common/ubertooth.c **** 	FIO2DIR = 0;
 131:../common/ubertooth.c **** 	FIO3DIR = 0;
 132:../common/ubertooth.c **** 	FIO4DIR = 0;
 133:../common/ubertooth.c **** 
 134:../common/ubertooth.c **** 	/* pull-up on every pin */
 135:../common/ubertooth.c **** 	PINMODE0 = 0;
 136:../common/ubertooth.c **** 	PINMODE1 = 0;
 137:../common/ubertooth.c **** 	PINMODE2 = 0;
 138:../common/ubertooth.c **** 	PINMODE3 = 0;
 139:../common/ubertooth.c **** 	PINMODE4 = 0;
 140:../common/ubertooth.c **** 	PINMODE7 = 0;
 141:../common/ubertooth.c **** 	PINMODE9 = 0;
 142:../common/ubertooth.c **** 
 143:../common/ubertooth.c **** 	/* set all outputs low */
 144:../common/ubertooth.c **** 	FIO0PIN = 0;
 145:../common/ubertooth.c **** 	FIO1PIN = 0;
 146:../common/ubertooth.c **** 	FIO2PIN = 0;
 147:../common/ubertooth.c **** 	FIO3PIN = 0;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 4


 148:../common/ubertooth.c **** 	FIO4PIN = 0;
 149:../common/ubertooth.c **** }
 150:../common/ubertooth.c **** 
 151:../common/ubertooth.c **** /*
 152:../common/ubertooth.c ****  * Every application that uses the main oscillator (including any that use both
 153:../common/ubertooth.c ****  * USB and the CC2400) should start with this.
 154:../common/ubertooth.c ****  */
 155:../common/ubertooth.c **** void ubertooth_init()
 156:../common/ubertooth.c **** {
 157:../common/ubertooth.c **** 	gpio_init();
 158:../common/ubertooth.c **** 	cc2400_init();
 159:../common/ubertooth.c **** 	clock_start();
 160:../common/ubertooth.c **** }
 161:../common/ubertooth.c **** 
 162:../common/ubertooth.c **** /* configure SSP for CC2400's secondary serial data interface */
 163:../common/ubertooth.c **** void dio_ssp_init()
 164:../common/ubertooth.c **** {
 165:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
 166:../common/ubertooth.c **** 	/* set P0.15 as SCK0 */
 167:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 30)) | (2 << 30);
 168:../common/ubertooth.c **** 
 169:../common/ubertooth.c **** 	/* set P1.16 as SSEL0 */
 170:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 0)) | (2 << 0);
 171:../common/ubertooth.c **** 
 172:../common/ubertooth.c **** 	/* set P1.17 as MISO0 */
 173:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 2)) | (2 << 2);
 174:../common/ubertooth.c **** 
 175:../common/ubertooth.c **** 	/* set P1.18 as MOSI0 */
 176:../common/ubertooth.c **** 	PINSEL1 = (PINSEL1 & ~(3 << 4)) | (2 << 4);
 177:../common/ubertooth.c **** #endif
 178:../common/ubertooth.c **** #if defined UBERTOOTH_ONE || defined TC13BADGE
 179:../common/ubertooth.c **** 	/* set P0.7 as SCK1 */
 180:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 14)) | (2 << 14);
 181:../common/ubertooth.c **** 
 182:../common/ubertooth.c **** 	/* set P0.6 as SSEL1 */
 183:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 12)) | (2 << 12);
 184:../common/ubertooth.c **** 
 185:../common/ubertooth.c **** 	/* set P0.8 as MISO1 */
 186:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 16)) | (2 << 16);
 187:../common/ubertooth.c **** 
 188:../common/ubertooth.c **** 	/* set P0.9 as MOSI1 */
 189:../common/ubertooth.c **** 	PINSEL0 = (PINSEL0 & ~(3 << 18)) | (2 << 18);
 190:../common/ubertooth.c **** #endif
 191:../common/ubertooth.c **** 
 192:../common/ubertooth.c **** 	/*
 193:../common/ubertooth.c **** 	 * DIO_SSEL is a GPIO output connected directly to the SSEL input on the
 194:../common/ubertooth.c **** 	 * microcontroller for the CC2400's un-buffered (DIO/DCLK) serial
 195:../common/ubertooth.c **** 	 * interface.  Since the CC2400 doesn't have a slave select output, we
 196:../common/ubertooth.c **** 	 * control it with this.  DIO_SSEL should already be configured by
 197:../common/ubertooth.c **** 	 * gpio_init().  We set it high by default because it is an active low
 198:../common/ubertooth.c **** 	 * signal.
 199:../common/ubertooth.c **** 	 */
 200:../common/ubertooth.c **** 	DIO_SSEL_SET;
 201:../common/ubertooth.c **** 
 202:../common/ubertooth.c **** 	/* configure DIO_SSP */
 203:../common/ubertooth.c **** 	DIO_SSP_CR0 = (0x7 /* 8 bit transfer */ | SSPCR0_CPOL | SSPCR0_CPHA);
 204:../common/ubertooth.c **** 	DIO_SSP_CR1 = (SSPCR1_MS | SSPCR1_SOD);
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 5


 205:../common/ubertooth.c **** }
 206:../common/ubertooth.c **** 
 207:../common/ubertooth.c **** void atest_init()
 208:../common/ubertooth.c **** {
 209:../common/ubertooth.c **** 	/*
 210:../common/ubertooth.c **** 	 * ADC can optionally be configured for ATEST1 and ATEST2, but for now we
 211:../common/ubertooth.c **** 	 * set them as floating inputs.
 212:../common/ubertooth.c **** 	 */
 213:../common/ubertooth.c **** 
 214:../common/ubertooth.c **** 	/* P0.25 is ATEST1, P0.26 is ATEST2 */
 215:../common/ubertooth.c **** 	PINSEL1 &= ~((0x3 << 20) | (0x3 << 18)); // set as GPIO
 216:../common/ubertooth.c **** 	FIO0DIR &= ~(0x3 << 25); // set as input
 217:../common/ubertooth.c **** 	PINMODE1 |= (0x5 << 19); // no pull-up/pull-down
 218:../common/ubertooth.c **** 	PINMODE1 &= ~(0x5 << 18); // no pull-up/pull-down
 219:../common/ubertooth.c **** }
 220:../common/ubertooth.c **** 
 221:../common/ubertooth.c **** void cc2400_init()
 222:../common/ubertooth.c **** {
 223:../common/ubertooth.c **** #ifdef TC13BADGE
 224:../common/ubertooth.c **** 	/* request CC2400 control from the R8C */
 225:../common/ubertooth.c **** 	r8c_takeover();
 226:../common/ubertooth.c **** 
 227:../common/ubertooth.c **** 	/* configure output pins for CC2400 control */
 228:../common/ubertooth.c **** 	FIO0DIR = 0;
 229:../common/ubertooth.c **** 	FIO1DIR = (PIN_CC3V3 | PIN_CC1V8 | PIN_CSN | PIN_SCLK | PIN_MOSI |
 230:../common/ubertooth.c **** 			PIN_R8C_CTL);
 231:../common/ubertooth.c **** 	FIO2DIR = (PIN_CSN | PIN_SCLK | PIN_MOSI);
 232:../common/ubertooth.c **** 	FIO3DIR = 0;
 233:../common/ubertooth.c **** 	FIO4DIR = PIN_SSEL1;
 234:../common/ubertooth.c **** 
 235:../common/ubertooth.c **** 	/* set all outputs low */
 236:../common/ubertooth.c **** 	FIO0PIN = 0;
 237:../common/ubertooth.c **** 	FIO1PIN = 0; /* assuming we have already asserted R8C_CTL low */
 238:../common/ubertooth.c **** 	FIO2PIN = 0;
 239:../common/ubertooth.c **** 	FIO3PIN = 0;
 240:../common/ubertooth.c **** 	FIO4PIN = 0;
 241:../common/ubertooth.c **** #else
 242:../common/ubertooth.c **** 	atest_init();
 243:../common/ubertooth.c **** #endif
 244:../common/ubertooth.c **** 
 245:../common/ubertooth.c **** 	/* activate 1V8 supply for CC2400 */
 246:../common/ubertooth.c **** 	CC1V8_SET;
 247:../common/ubertooth.c **** 	wait_us(50);
 248:../common/ubertooth.c **** 
 249:../common/ubertooth.c **** 	/* CSN (slave select) is active low */
 250:../common/ubertooth.c **** 	CSN_SET;
 251:../common/ubertooth.c **** 
 252:../common/ubertooth.c **** 	/* activate 3V3 supply for CC2400 IO */
 253:../common/ubertooth.c **** 	CC3V3_SET;
 254:../common/ubertooth.c **** 
 255:../common/ubertooth.c **** 	/* initialise various cc2400 settings - see datasheet pg63 */
 256:../common/ubertooth.c **** 	cc2400_set(MANAND,  0x7fff);
 257:../common/ubertooth.c **** }
 258:../common/ubertooth.c **** 
 259:../common/ubertooth.c **** /*
 260:../common/ubertooth.c ****  * This is a single SPI transaction of variable length, usually 8 or 24 bits.
 261:../common/ubertooth.c ****  * The CC2400 also supports longer transactions (e.g. for the FIFO), but we
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 6


 262:../common/ubertooth.c ****  * haven't implemented anything longer than 32 bits.
 263:../common/ubertooth.c ****  *
 264:../common/ubertooth.c ****  * We're bit-banging because:
 265:../common/ubertooth.c ****  *
 266:../common/ubertooth.c ****  * 1. We're using one SPI peripheral for the CC2400's unbuffered data
 267:../common/ubertooth.c ****  *    interace.
 268:../common/ubertooth.c ****  * 2. We're saving the second SPI peripheral for an expansion port.
 269:../common/ubertooth.c ****  * 3. The CC2400 needs CSN held low for the entire transaction which the
 270:../common/ubertooth.c ****  *    LPC17xx SPI peripheral won't do without some workaround anyway.
 271:../common/ubertooth.c ****  */
 272:../common/ubertooth.c **** u32 cc2400_spi(u8 len, u32 data)
 273:../common/ubertooth.c **** {
 274:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 275:../common/ubertooth.c **** 
 276:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 277:../common/ubertooth.c **** 	CSN_CLR;
 278:../common/ubertooth.c **** 
 279:../common/ubertooth.c **** 	while (len--) {
 280:../common/ubertooth.c **** 		if (data & msb)
 281:../common/ubertooth.c **** 			MOSI_SET;
 282:../common/ubertooth.c **** 		else
 283:../common/ubertooth.c **** 			MOSI_CLR;
 284:../common/ubertooth.c **** 		data <<= 1;
 285:../common/ubertooth.c **** 
 286:../common/ubertooth.c **** 		SCLK_SET;
 287:../common/ubertooth.c **** 		if (MISO)
 288:../common/ubertooth.c **** 			data |= 1;
 289:../common/ubertooth.c **** 
 290:../common/ubertooth.c **** 		SCLK_CLR;
 291:../common/ubertooth.c **** 	}
 292:../common/ubertooth.c **** 
 293:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 294:../common/ubertooth.c **** 	CSN_SET;
 295:../common/ubertooth.c **** 
 296:../common/ubertooth.c **** 	return data;
 297:../common/ubertooth.c **** }
 298:../common/ubertooth.c **** 
 299:../common/ubertooth.c **** /* read 16 bit value from a register */
 300:../common/ubertooth.c **** u16 cc2400_get(u8 reg)
 301:../common/ubertooth.c **** {
 302:../common/ubertooth.c **** 	u32 in;
 303:../common/ubertooth.c **** 
 304:../common/ubertooth.c **** 	u32 out = (reg | 0x80) << 16;
 305:../common/ubertooth.c **** 	in = cc2400_spi(24, out);
 306:../common/ubertooth.c **** 	return in & 0xFFFF;
 307:../common/ubertooth.c **** }
 308:../common/ubertooth.c **** 
 309:../common/ubertooth.c **** /* write 16 bit value to a register */
 310:../common/ubertooth.c **** void cc2400_set(u8 reg, u16 val)
 311:../common/ubertooth.c **** {
 312:../common/ubertooth.c **** 	u32 out = (reg << 16) | val;
 313:../common/ubertooth.c **** 	cc2400_spi(24, out);
 314:../common/ubertooth.c **** }
 315:../common/ubertooth.c **** 
 316:../common/ubertooth.c **** /* read 8 bit value from a register */
 317:../common/ubertooth.c **** u8 cc2400_get8(u8 reg)
 318:../common/ubertooth.c **** {
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 7


 319:../common/ubertooth.c **** 	u16 in;
 320:../common/ubertooth.c **** 
 321:../common/ubertooth.c **** 	u16 out = (reg | 0x80) << 8;
 322:../common/ubertooth.c **** 	in = cc2400_spi(16, out);
 323:../common/ubertooth.c **** 	return in & 0xFF;
 324:../common/ubertooth.c **** }
 325:../common/ubertooth.c **** 
 326:../common/ubertooth.c **** /* write 8 bit value to a register */
 327:../common/ubertooth.c **** void cc2400_set8(u8 reg, u8 val)
 328:../common/ubertooth.c **** {
 329:../common/ubertooth.c **** 	u32 out = (reg << 8) | val;
 330:../common/ubertooth.c **** 	cc2400_spi(16, out);
 331:../common/ubertooth.c **** }
 332:../common/ubertooth.c **** 
 333:../common/ubertooth.c **** static volatile u32 delay_counter;
 334:../common/ubertooth.c **** static void spi_delay() {
  26              		.loc 1 334 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
 335:../common/ubertooth.c ****        delay_counter = 10;
  31              		.loc 1 335 0
  32 0000 044B     		ldr	r3, .L5
  33 0002 0A22     		movs	r2, #10
  34 0004 1A60     		str	r2, [r3]
  35              	.L2:
 336:../common/ubertooth.c ****        while (--delay_counter);
  36              		.loc 1 336 0 discriminator 1
  37 0006 1A68     		ldr	r2, [r3]
  38 0008 013A     		subs	r2, r2, #1
  39 000a 1A60     		str	r2, [r3]
  40 000c 002A     		cmp	r2, #0
  41 000e FAD1     		bne	.L2
 337:../common/ubertooth.c **** }
  42              		.loc 1 337 0
  43 0010 7047     		bx	lr
  44              	.L6:
  45 0012 00BF     		.align	2
  46              	.L5:
  47 0014 00000000 		.word	.LANCHOR0
  48              		.cfi_endproc
  49              	.LFE15:
  51              		.section	.text.rbit,"ax",%progbits
  52              		.align	1
  53              		.global	rbit
  54              		.thumb
  55              		.thumb_func
  57              	rbit:
  58              	.LFB2:
  40:../common/ubertooth.c ****   u32 result = 0;
  59              		.loc 1 40 0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              		@ link register save eliminated.
  64              	.LVL0:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 8


  65              	.LVL1:
  42:../common/ubertooth.c ****   return result;
  66              		.loc 1 42 0
  67              	@ 42 "../common/ubertooth.c" 1
  68 0000 90FAA0F0 		rbit r0, r0
  69              	@ 0 "" 2
  70              	.LVL2:
  44:../common/ubertooth.c **** 
  71              		.loc 1 44 0
  72              		.thumb
  73 0004 7047     		bx	lr
  74              		.cfi_endproc
  75              	.LFE2:
  77              		.section	.text.wait_us,"ax",%progbits
  78              		.align	1
  79              		.global	wait_us
  80              		.thumb
  81              		.thumb_func
  83              	wait_us:
  84              	.LFB3:
  50:../common/ubertooth.c **** 	/* This is binary multiply by ~0.3999, i.e, multiply by
  85              		.loc 1 50 0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89              		@ link register save eliminated.
  90              	.LVL3:
  56:../common/ubertooth.c **** 	while(--wait_us_counter);
  91              		.loc 1 56 0
  92 0000 8308     		lsrs	r3, r0, #2
  93 0002 03EBD003 		add	r3, r3, r0, lsr #3
  94 0006 03EB9013 		add	r3, r3, r0, lsr #6
  95 000a 03EBD013 		add	r3, r3, r0, lsr #7
  96 000e 03EB9023 		add	r3, r3, r0, lsr #10
  97 0012 03EBD020 		add	r0, r3, r0, lsr #11
  98              	.LVL4:
  55:../common/ubertooth.c **** 		(us>>2) + (us>>3) + (us>>6) + (us>>7) + (us>>10) + (us>>11);
  99              		.loc 1 55 0
 100 0016 044B     		ldr	r3, .L11
 101 0018 5860     		str	r0, [r3, #4]
 102              	.L9:
  57:../common/ubertooth.c **** }
 103              		.loc 1 57 0 discriminator 1
 104 001a 5A68     		ldr	r2, [r3, #4]
 105 001c 013A     		subs	r2, r2, #1
 106 001e 5A60     		str	r2, [r3, #4]
 107 0020 002A     		cmp	r2, #0
 108 0022 FAD1     		bne	.L9
  58:../common/ubertooth.c **** 
 109              		.loc 1 58 0
 110 0024 7047     		bx	lr
 111              	.L12:
 112 0026 00BF     		.align	2
 113              	.L11:
 114 0028 00000000 		.word	.LANCHOR0
 115              		.cfi_endproc
 116              	.LFE3:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 9


 118              		.section	.text.wait,"ax",%progbits
 119              		.align	1
 120              		.global	wait
 121              		.thumb
 122              		.thumb_func
 124              	wait:
 125              	.LFB0:
  29:../common/ubertooth.c **** 	wait_us(seconds * 1000000);
 126              		.loc 1 29 0
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 0
 129              		@ frame_needed = 0, uses_anonymous_args = 0
 130              		@ link register save eliminated.
 131              	.LVL5:
  30:../common/ubertooth.c **** }
 132              		.loc 1 30 0
 133 0000 014B     		ldr	r3, .L14
 134 0002 5843     		muls	r0, r3, r0
 135              	.LVL6:
 136 0004 FFF7FEBF 		b	wait_us
 137              	.LVL7:
 138              	.L15:
 139              		.align	2
 140              	.L14:
 141 0008 40420F00 		.word	1000000
 142              		.cfi_endproc
 143              	.LFE0:
 145              		.section	.text.wait_ms,"ax",%progbits
 146              		.align	1
 147              		.global	wait_ms
 148              		.thumb
 149              		.thumb_func
 151              	wait_ms:
 152              	.LFB1:
  35:../common/ubertooth.c **** 	wait_us(ms * 1000);
 153              		.loc 1 35 0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 0
 156              		@ frame_needed = 0, uses_anonymous_args = 0
 157              		@ link register save eliminated.
 158              	.LVL8:
  36:../common/ubertooth.c **** }
 159              		.loc 1 36 0
 160 0000 4FF47A73 		mov	r3, #1000
 161 0004 5843     		muls	r0, r3, r0
 162              	.LVL9:
 163 0006 FFF7FEBF 		b	wait_us
 164              	.LVL10:
 165              		.cfi_endproc
 166              	.LFE1:
 168              		.section	.text.all_pins_off,"ax",%progbits
 169              		.align	1
 170              		.global	all_pins_off
 171              		.thumb
 172              		.thumb_func
 174              	all_pins_off:
 175              	.LFB5:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 10


 116:../common/ubertooth.c **** 	/* configure all pins for GPIO */
 176              		.loc 1 116 0
 177              		.cfi_startproc
 178              		@ args = 0, pretend = 0, frame = 0
 179              		@ frame_needed = 0, uses_anonymous_args = 0
 180              		@ link register save eliminated.
 118:../common/ubertooth.c **** 	PINSEL1 = 0;
 181              		.loc 1 118 0
 182 0000 104A     		ldr	r2, .L18
 183 0002 0023     		movs	r3, #0
 184 0004 1360     		str	r3, [r2]
 119:../common/ubertooth.c **** 	PINSEL2 = 0;
 185              		.loc 1 119 0
 186 0006 5360     		str	r3, [r2, #4]
 120:../common/ubertooth.c **** 	PINSEL3 = 0;
 187              		.loc 1 120 0
 188 0008 9360     		str	r3, [r2, #8]
 121:../common/ubertooth.c **** 	PINSEL4 = 0;
 189              		.loc 1 121 0
 190 000a D360     		str	r3, [r2, #12]
 122:../common/ubertooth.c **** 	PINSEL7 = 0;
 191              		.loc 1 122 0
 192 000c 1361     		str	r3, [r2, #16]
 123:../common/ubertooth.c **** 	PINSEL9 = 0;
 193              		.loc 1 123 0
 194 000e D361     		str	r3, [r2, #28]
 124:../common/ubertooth.c **** 	PINSEL10 = 0;
 195              		.loc 1 124 0
 196 0010 5362     		str	r3, [r2, #36]
 125:../common/ubertooth.c **** 
 197              		.loc 1 125 0
 198 0012 9362     		str	r3, [r2, #40]
 128:../common/ubertooth.c **** 	FIO1DIR = 0;
 199              		.loc 1 128 0
 200 0014 0C4A     		ldr	r2, .L18+4
 201 0016 1360     		str	r3, [r2]
 129:../common/ubertooth.c **** 	FIO2DIR = 0;
 202              		.loc 1 129 0
 203 0018 1362     		str	r3, [r2, #32]
 130:../common/ubertooth.c **** 	FIO3DIR = 0;
 204              		.loc 1 130 0
 205 001a 1364     		str	r3, [r2, #64]
 131:../common/ubertooth.c **** 	FIO4DIR = 0;
 206              		.loc 1 131 0
 207 001c 1366     		str	r3, [r2, #96]
 132:../common/ubertooth.c **** 
 208              		.loc 1 132 0
 209 001e C2F88030 		str	r3, [r2, #128]
 135:../common/ubertooth.c **** 	PINMODE1 = 0;
 210              		.loc 1 135 0
 211 0022 0A4A     		ldr	r2, .L18+8
 212 0024 1360     		str	r3, [r2]
 136:../common/ubertooth.c **** 	PINMODE2 = 0;
 213              		.loc 1 136 0
 214 0026 5360     		str	r3, [r2, #4]
 137:../common/ubertooth.c **** 	PINMODE3 = 0;
 215              		.loc 1 137 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 11


 216 0028 9360     		str	r3, [r2, #8]
 138:../common/ubertooth.c **** 	PINMODE4 = 0;
 217              		.loc 1 138 0
 218 002a D360     		str	r3, [r2, #12]
 139:../common/ubertooth.c **** 	PINMODE7 = 0;
 219              		.loc 1 139 0
 220 002c 1361     		str	r3, [r2, #16]
 140:../common/ubertooth.c **** 	PINMODE9 = 0;
 221              		.loc 1 140 0
 222 002e D361     		str	r3, [r2, #28]
 141:../common/ubertooth.c **** 
 223              		.loc 1 141 0
 224 0030 5362     		str	r3, [r2, #36]
 144:../common/ubertooth.c **** 	FIO1PIN = 0;
 225              		.loc 1 144 0
 226 0032 074A     		ldr	r2, .L18+12
 227 0034 1360     		str	r3, [r2]
 145:../common/ubertooth.c **** 	FIO2PIN = 0;
 228              		.loc 1 145 0
 229 0036 1362     		str	r3, [r2, #32]
 146:../common/ubertooth.c **** 	FIO3PIN = 0;
 230              		.loc 1 146 0
 231 0038 1364     		str	r3, [r2, #64]
 147:../common/ubertooth.c **** 	FIO4PIN = 0;
 232              		.loc 1 147 0
 233 003a 1366     		str	r3, [r2, #96]
 148:../common/ubertooth.c **** }
 234              		.loc 1 148 0
 235 003c C2F88030 		str	r3, [r2, #128]
 236 0040 7047     		bx	lr
 237              	.L19:
 238 0042 00BF     		.align	2
 239              	.L18:
 240 0044 00C00240 		.word	1073922048
 241 0048 00C00920 		.word	537509888
 242 004c 40C00240 		.word	1073922112
 243 0050 14C00920 		.word	537509908
 244              		.cfi_endproc
 245              	.LFE5:
 247              		.section	.text.gpio_init,"ax",%progbits
 248              		.align	1
 249              		.global	gpio_init
 250              		.thumb
 251              		.thumb_func
 253              	gpio_init:
 254              	.LFB4:
  66:../common/ubertooth.c **** 	/* 
 255              		.loc 1 66 0
 256              		.cfi_startproc
 257              		@ args = 0, pretend = 0, frame = 0
 258              		@ frame_needed = 0, uses_anonymous_args = 0
 259 0000 08B5     		push	{r3, lr}
 260              		.cfi_def_cfa_offset 8
 261              		.cfi_offset 3, -8
 262              		.cfi_offset 14, -4
  71:../common/ubertooth.c **** 
 263              		.loc 1 71 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 12


 264 0002 FFF7FEFF 		bl	all_pins_off
 265              	.LVL11:
  84:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
 266              		.loc 1 84 0
 267 0006 4CF21271 		movw	r1, #50962
  83:../common/ubertooth.c **** 	FIO1DIR = (PIN_USRLED | PIN_RXLED | PIN_TXLED | PIN_CC3V3 |
 268              		.loc 1 83 0
 269 000a 094A     		ldr	r2, .L21
 270 000c 0023     		movs	r3, #0
 271 000e 1360     		str	r3, [r2]
  84:../common/ubertooth.c **** 			PIN_RX | PIN_CC1V8 | PIN_BTGR);
 272              		.loc 1 84 0
 273 0010 1162     		str	r1, [r2, #32]
  86:../common/ubertooth.c **** 	FIO3DIR = 0;
 274              		.loc 1 86 0
 275 0012 40F2B111 		movw	r1, #433
 276 0016 1164     		str	r1, [r2, #64]
  88:../common/ubertooth.c **** #endif
 277              		.loc 1 88 0
 278 0018 4FF04051 		mov	r1, #805306368
  87:../common/ubertooth.c **** 	FIO4DIR = (PIN_TX | PIN_SSEL1);
 279              		.loc 1 87 0
 280 001c 1366     		str	r3, [r2, #96]
  88:../common/ubertooth.c **** #endif
 281              		.loc 1 88 0
 282 001e C2F88010 		str	r1, [r2, #128]
 103:../common/ubertooth.c **** 	FIO1PIN = 0;
 283              		.loc 1 103 0
 284 0022 5361     		str	r3, [r2, #20]
 104:../common/ubertooth.c **** 	FIO2PIN = 0;
 285              		.loc 1 104 0
 286 0024 5363     		str	r3, [r2, #52]
 105:../common/ubertooth.c **** 	FIO3PIN = 0;
 287              		.loc 1 105 0
 288 0026 5365     		str	r3, [r2, #84]
 106:../common/ubertooth.c **** 	FIO4PIN = 0;
 289              		.loc 1 106 0
 290 0028 5367     		str	r3, [r2, #116]
 107:../common/ubertooth.c **** 
 291              		.loc 1 107 0
 292 002a C2F89430 		str	r3, [r2, #148]
 293 002e 08BD     		pop	{r3, pc}
 294              	.L22:
 295              		.align	2
 296              	.L21:
 297 0030 00C00920 		.word	537509888
 298              		.cfi_endproc
 299              	.LFE4:
 301              		.section	.text.dio_ssp_init,"ax",%progbits
 302              		.align	1
 303              		.global	dio_ssp_init
 304              		.thumb
 305              		.thumb_func
 307              	dio_ssp_init:
 308              	.LFB7:
 164:../common/ubertooth.c **** #ifdef UBERTOOTH_ZERO
 309              		.loc 1 164 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 13


 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 0
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 313              		@ link register save eliminated.
 180:../common/ubertooth.c **** 
 314              		.loc 1 180 0
 315 0000 114B     		ldr	r3, .L24
 316 0002 1A68     		ldr	r2, [r3]
 317 0004 22F44042 		bic	r2, r2, #49152
 318 0008 42F40042 		orr	r2, r2, #32768
 319 000c 1A60     		str	r2, [r3]
 183:../common/ubertooth.c **** 
 320              		.loc 1 183 0
 321 000e 1A68     		ldr	r2, [r3]
 322 0010 22F44052 		bic	r2, r2, #12288
 323 0014 42F40052 		orr	r2, r2, #8192
 324 0018 1A60     		str	r2, [r3]
 186:../common/ubertooth.c **** 
 325              		.loc 1 186 0
 326 001a 1A68     		ldr	r2, [r3]
 327 001c 22F44032 		bic	r2, r2, #196608
 328 0020 42F40032 		orr	r2, r2, #131072
 329 0024 1A60     		str	r2, [r3]
 189:../common/ubertooth.c **** #endif
 330              		.loc 1 189 0
 331 0026 1A68     		ldr	r2, [r3]
 332 0028 22F44022 		bic	r2, r2, #786432
 333 002c 42F40022 		orr	r2, r2, #524288
 334 0030 1A60     		str	r2, [r3]
 200:../common/ubertooth.c **** 
 335              		.loc 1 200 0
 336 0032 064B     		ldr	r3, .L24+4
 337 0034 4FF08052 		mov	r2, #268435456
 338 0038 1A60     		str	r2, [r3]
 203:../common/ubertooth.c **** 	DIO_SSP_CR1 = (SSPCR1_MS | SSPCR1_SOD);
 339              		.loc 1 203 0
 340 003a 054B     		ldr	r3, .L24+8
 341 003c C722     		movs	r2, #199
 342 003e 1A60     		str	r2, [r3]
 204:../common/ubertooth.c **** }
 343              		.loc 1 204 0
 344 0040 0C22     		movs	r2, #12
 345 0042 5A60     		str	r2, [r3, #4]
 346 0044 7047     		bx	lr
 347              	.L25:
 348 0046 00BF     		.align	2
 349              	.L24:
 350 0048 00C00240 		.word	1073922048
 351 004c 98C00920 		.word	537510040
 352 0050 00000340 		.word	1073938432
 353              		.cfi_endproc
 354              	.LFE7:
 356              		.section	.text.atest_init,"ax",%progbits
 357              		.align	1
 358              		.global	atest_init
 359              		.thumb
 360              		.thumb_func
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 14


 362              	atest_init:
 363              	.LFB8:
 208:../common/ubertooth.c **** 	/*
 364              		.loc 1 208 0
 365              		.cfi_startproc
 366              		@ args = 0, pretend = 0, frame = 0
 367              		@ frame_needed = 0, uses_anonymous_args = 0
 368              		@ link register save eliminated.
 215:../common/ubertooth.c **** 	FIO0DIR &= ~(0x3 << 25); // set as input
 369              		.loc 1 215 0
 370 0000 094A     		ldr	r2, .L27
 371 0002 1368     		ldr	r3, [r2]
 372 0004 23F47013 		bic	r3, r3, #3932160
 373 0008 1360     		str	r3, [r2]
 216:../common/ubertooth.c **** 	PINMODE1 |= (0x5 << 19); // no pull-up/pull-down
 374              		.loc 1 216 0
 375 000a 084A     		ldr	r2, .L27+4
 376 000c 1368     		ldr	r3, [r2]
 377 000e 23F0C063 		bic	r3, r3, #100663296
 378 0012 1360     		str	r3, [r2]
 217:../common/ubertooth.c **** 	PINMODE1 &= ~(0x5 << 18); // no pull-up/pull-down
 379              		.loc 1 217 0
 380 0014 064B     		ldr	r3, .L27+8
 381 0016 1A68     		ldr	r2, [r3]
 382 0018 42F42012 		orr	r2, r2, #2621440
 383 001c 1A60     		str	r2, [r3]
 218:../common/ubertooth.c **** }
 384              		.loc 1 218 0
 385 001e 1A68     		ldr	r2, [r3]
 386 0020 22F4A012 		bic	r2, r2, #1310720
 387 0024 1A60     		str	r2, [r3]
 388 0026 7047     		bx	lr
 389              	.L28:
 390              		.align	2
 391              	.L27:
 392 0028 04C00240 		.word	1073922052
 393 002c 00C00920 		.word	537509888
 394 0030 44C00240 		.word	1073922116
 395              		.cfi_endproc
 396              	.LFE8:
 398              		.section	.text.cc2400_spi,"ax",%progbits
 399              		.align	1
 400              		.global	cc2400_spi
 401              		.thumb
 402              		.thumb_func
 404              	cc2400_spi:
 405              	.LFB10:
 273:../common/ubertooth.c **** 	u32 msb = 1 << (len - 1);
 406              		.loc 1 273 0
 407              		.cfi_startproc
 408              		@ args = 0, pretend = 0, frame = 0
 409              		@ frame_needed = 0, uses_anonymous_args = 0
 410              	.LVL12:
 411 0000 30B5     		push	{r4, r5, lr}
 412              		.cfi_def_cfa_offset 12
 413              		.cfi_offset 4, -12
 414              		.cfi_offset 5, -8
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 15


 415              		.cfi_offset 14, -4
 274:../common/ubertooth.c **** 
 416              		.loc 1 274 0
 417 0002 0125     		movs	r5, #1
 418 0004 431E     		subs	r3, r0, #1
 419 0006 9D40     		lsls	r5, r5, r3
 420              	.LVL13:
 277:../common/ubertooth.c **** 
 421              		.loc 1 277 0
 422 0008 0D4B     		ldr	r3, .L39
 423 000a 2022     		movs	r2, #32
 424              	.L33:
 279:../common/ubertooth.c **** 		if (data & msb)
 425              		.loc 1 279 0
 426 000c 0138     		subs	r0, r0, #1
 427              	.LVL14:
 428 000e C0B2     		uxtb	r0, r0
 429 0010 FF28     		cmp	r0, #255
 290:../common/ubertooth.c **** 	}
 430              		.loc 1 290 0
 431 0012 1A60     		str	r2, [r3]
 432              	.LVL15:
 433 0014 0B4C     		ldr	r4, .L39+4
 279:../common/ubertooth.c **** 		if (data & msb)
 434              		.loc 1 279 0
 435 0016 0FD0     		beq	.L38
 280:../common/ubertooth.c **** 			MOSI_SET;
 436              		.loc 1 280 0
 437 0018 2942     		tst	r1, r5
 438 001a 4FF00102 		mov	r2, #1
 281:../common/ubertooth.c **** 		else
 439              		.loc 1 281 0
 440 001e 14BF     		ite	ne
 441 0020 2260     		strne	r2, [r4]
 283:../common/ubertooth.c **** 		data <<= 1;
 442              		.loc 1 283 0
 443 0022 1A60     		streq	r2, [r3]
 286:../common/ubertooth.c **** 		if (MISO)
 444              		.loc 1 286 0
 445 0024 1022     		movs	r2, #16
 446 0026 2260     		str	r2, [r4]
 287:../common/ubertooth.c **** 			data |= 1;
 447              		.loc 1 287 0
 448 0028 074C     		ldr	r4, .L39+8
 284:../common/ubertooth.c **** 
 449              		.loc 1 284 0
 450 002a 4900     		lsls	r1, r1, #1
 451              	.LVL16:
 287:../common/ubertooth.c **** 			data |= 1;
 452              		.loc 1 287 0
 453 002c 2468     		ldr	r4, [r4]
 454 002e A407     		lsls	r4, r4, #30
 288:../common/ubertooth.c **** 
 455              		.loc 1 288 0
 456 0030 48BF     		it	mi
 457 0032 41F00101 		orrmi	r1, r1, #1
 458              	.LVL17:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 16


 459 0036 E9E7     		b	.L33
 460              	.L38:
 294:../common/ubertooth.c **** 
 461              		.loc 1 294 0
 462 0038 2023     		movs	r3, #32
 463 003a 2360     		str	r3, [r4]
 297:../common/ubertooth.c **** 
 464              		.loc 1 297 0
 465 003c 0846     		mov	r0, r1
 466              	.LVL18:
 467 003e 30BD     		pop	{r4, r5, pc}
 468              	.LVL19:
 469              	.L40:
 470              		.align	2
 471              	.L39:
 472 0040 5CC00920 		.word	537509980
 473 0044 58C00920 		.word	537509976
 474 0048 54C00920 		.word	537509972
 475              		.cfi_endproc
 476              	.LFE10:
 478              		.section	.text.cc2400_init,"ax",%progbits
 479              		.align	1
 480              		.global	cc2400_init
 481              		.thumb
 482              		.thumb_func
 484              	cc2400_init:
 485              	.LFB9:
 222:../common/ubertooth.c **** #ifdef TC13BADGE
 486              		.loc 1 222 0
 487              		.cfi_startproc
 488              		@ args = 0, pretend = 0, frame = 0
 489              		@ frame_needed = 0, uses_anonymous_args = 0
 490 0000 10B5     		push	{r4, lr}
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 4, -8
 493              		.cfi_offset 14, -4
 246:../common/ubertooth.c **** 	wait_us(50);
 494              		.loc 1 246 0
 495 0002 0A4C     		ldr	r4, .L42
 242:../common/ubertooth.c **** #endif
 496              		.loc 1 242 0
 497 0004 FFF7FEFF 		bl	atest_init
 498              	.LVL20:
 246:../common/ubertooth.c **** 	wait_us(50);
 499              		.loc 1 246 0
 500 0008 4FF40073 		mov	r3, #512
 501 000c 2360     		str	r3, [r4]
 247:../common/ubertooth.c **** 
 502              		.loc 1 247 0
 503 000e 3220     		movs	r0, #50
 504 0010 FFF7FEFF 		bl	wait_us
 505              	.LVL21:
 250:../common/ubertooth.c **** 
 506              		.loc 1 250 0
 507 0014 064B     		ldr	r3, .L42+4
 508 0016 2022     		movs	r2, #32
 509 0018 1A60     		str	r2, [r3]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 17


 253:../common/ubertooth.c **** 
 510              		.loc 1 253 0
 511 001a 4FF48043 		mov	r3, #16384
 512 001e 2360     		str	r3, [r4]
 513              	.LVL22:
 514              	.LBB4:
 515              	.LBB5:
 313:../common/ubertooth.c **** }
 516              		.loc 1 313 0
 517 0020 1820     		movs	r0, #24
 518 0022 0449     		ldr	r1, .L42+8
 519              	.LBE5:
 520              	.LBE4:
 257:../common/ubertooth.c **** 
 521              		.loc 1 257 0
 522 0024 BDE81040 		pop	{r4, lr}
 523              		.cfi_restore 14
 524              		.cfi_restore 4
 525              		.cfi_def_cfa_offset 0
 526              	.LBB7:
 527              	.LBB6:
 313:../common/ubertooth.c **** }
 528              		.loc 1 313 0
 529 0028 FFF7FEBF 		b	cc2400_spi
 530              	.LVL23:
 531              	.L43:
 532              		.align	2
 533              	.L42:
 534 002c 38C00920 		.word	537509944
 535 0030 58C00920 		.word	537509976
 536 0034 FF7F0D00 		.word	884735
 537              	.LBE6:
 538              	.LBE7:
 539              		.cfi_endproc
 540              	.LFE9:
 542              		.section	.text.cc2400_get,"ax",%progbits
 543              		.align	1
 544              		.global	cc2400_get
 545              		.thumb
 546              		.thumb_func
 548              	cc2400_get:
 549              	.LFB11:
 301:../common/ubertooth.c **** 	u32 in;
 550              		.loc 1 301 0
 551              		.cfi_startproc
 552              		@ args = 0, pretend = 0, frame = 0
 553              		@ frame_needed = 0, uses_anonymous_args = 0
 554              	.LVL24:
 555 0000 08B5     		push	{r3, lr}
 556              		.cfi_def_cfa_offset 8
 557              		.cfi_offset 3, -8
 558              		.cfi_offset 14, -4
 559              	.LVL25:
 304:../common/ubertooth.c **** 	in = cc2400_spi(24, out);
 560              		.loc 1 304 0
 561 0002 40F08001 		orr	r1, r0, #128
 305:../common/ubertooth.c **** 	return in & 0xFFFF;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 18


 562              		.loc 1 305 0
 563 0006 0904     		lsls	r1, r1, #16
 564 0008 1820     		movs	r0, #24
 565              	.LVL26:
 566 000a FFF7FEFF 		bl	cc2400_spi
 567              	.LVL27:
 307:../common/ubertooth.c **** 
 568              		.loc 1 307 0
 569 000e 80B2     		uxth	r0, r0
 570              	.LVL28:
 571 0010 08BD     		pop	{r3, pc}
 572              		.cfi_endproc
 573              	.LFE11:
 575              		.section	.text.cc2400_set,"ax",%progbits
 576              		.align	1
 577              		.global	cc2400_set
 578              		.thumb
 579              		.thumb_func
 581              	cc2400_set:
 582              	.LFB12:
 311:../common/ubertooth.c **** 	u32 out = (reg << 16) | val;
 583              		.loc 1 311 0
 584              		.cfi_startproc
 585              		@ args = 0, pretend = 0, frame = 0
 586              		@ frame_needed = 0, uses_anonymous_args = 0
 587              		@ link register save eliminated.
 588              	.LVL29:
 589              	.LVL30:
 312:../common/ubertooth.c **** 	cc2400_spi(24, out);
 590              		.loc 1 312 0
 591 0000 41EA0041 		orr	r1, r1, r0, lsl #16
 592              	.LVL31:
 313:../common/ubertooth.c **** }
 593              		.loc 1 313 0
 594 0004 1820     		movs	r0, #24
 595              	.LVL32:
 596 0006 FFF7FEBF 		b	cc2400_spi
 597              	.LVL33:
 598              		.cfi_endproc
 599              	.LFE12:
 601              		.section	.text.cc2400_get8,"ax",%progbits
 602              		.align	1
 603              		.global	cc2400_get8
 604              		.thumb
 605              		.thumb_func
 607              	cc2400_get8:
 608              	.LFB13:
 318:../common/ubertooth.c **** 	u16 in;
 609              		.loc 1 318 0
 610              		.cfi_startproc
 611              		@ args = 0, pretend = 0, frame = 0
 612              		@ frame_needed = 0, uses_anonymous_args = 0
 613              	.LVL34:
 614 0000 08B5     		push	{r3, lr}
 615              		.cfi_def_cfa_offset 8
 616              		.cfi_offset 3, -8
 617              		.cfi_offset 14, -4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 19


 618              	.LVL35:
 321:../common/ubertooth.c **** 	in = cc2400_spi(16, out);
 619              		.loc 1 321 0
 620 0002 40F08001 		orr	r1, r0, #128
 322:../common/ubertooth.c **** 	return in & 0xFF;
 621              		.loc 1 322 0
 622 0006 0902     		lsls	r1, r1, #8
 623 0008 1020     		movs	r0, #16
 624              	.LVL36:
 625 000a FFF7FEFF 		bl	cc2400_spi
 626              	.LVL37:
 324:../common/ubertooth.c **** 
 627              		.loc 1 324 0
 628 000e C0B2     		uxtb	r0, r0
 629              	.LVL38:
 630 0010 08BD     		pop	{r3, pc}
 631              		.cfi_endproc
 632              	.LFE13:
 634              		.section	.text.cc2400_set8,"ax",%progbits
 635              		.align	1
 636              		.global	cc2400_set8
 637              		.thumb
 638              		.thumb_func
 640              	cc2400_set8:
 641              	.LFB14:
 328:../common/ubertooth.c **** 	u32 out = (reg << 8) | val;
 642              		.loc 1 328 0
 643              		.cfi_startproc
 644              		@ args = 0, pretend = 0, frame = 0
 645              		@ frame_needed = 0, uses_anonymous_args = 0
 646              		@ link register save eliminated.
 647              	.LVL39:
 648              	.LVL40:
 329:../common/ubertooth.c **** 	cc2400_spi(16, out);
 649              		.loc 1 329 0
 650 0000 41EA0021 		orr	r1, r1, r0, lsl #8
 651              	.LVL41:
 330:../common/ubertooth.c **** }
 652              		.loc 1 330 0
 653 0004 1020     		movs	r0, #16
 654              	.LVL42:
 655 0006 FFF7FEBF 		b	cc2400_spi
 656              	.LVL43:
 657              		.cfi_endproc
 658              	.LFE14:
 660              		.section	.text.cc2400_fifo_write,"ax",%progbits
 661              		.align	1
 662              		.global	cc2400_fifo_write
 663              		.thumb
 664              		.thumb_func
 666              	cc2400_fifo_write:
 667              	.LFB16:
 338:../common/ubertooth.c **** 
 339:../common/ubertooth.c **** 
 340:../common/ubertooth.c **** /* write multiple bytes to SPI */
 341:../common/ubertooth.c **** void cc2400_fifo_write(u8 len, u8 *data) {
 668              		.loc 1 341 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 20


 669              		.cfi_startproc
 670              		@ args = 0, pretend = 0, frame = 0
 671              		@ frame_needed = 0, uses_anonymous_args = 0
 672              	.LVL44:
 673 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 674              		.cfi_def_cfa_offset 24
 675              		.cfi_offset 3, -24
 676              		.cfi_offset 4, -20
 677              		.cfi_offset 5, -16
 678              		.cfi_offset 6, -12
 679              		.cfi_offset 7, -8
 680              		.cfi_offset 14, -4
 681              	.LVL45:
 342:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 343:../common/ubertooth.c **** 	u8 reg = FIFOREG;
 344:../common/ubertooth.c **** 	u8 i, j, temp;
 345:../common/ubertooth.c **** 
 346:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 347:../common/ubertooth.c **** 	CSN_CLR;
 682              		.loc 1 347 0
 683 0002 1F4B     		ldr	r3, .L62
 684 0004 2022     		movs	r2, #32
 685 0006 1A60     		str	r2, [r3]
 686              	.LVL46:
 343:../common/ubertooth.c **** 	u8 i, j, temp;
 687              		.loc 1 343 0
 688 0008 7025     		movs	r5, #112
 689              		.loc 1 347 0
 690 000a 0822     		movs	r2, #8
 691              	.LVL47:
 692              	.L51:
 693 000c 1D4C     		ldr	r4, .L62+4
 348:../common/ubertooth.c **** 
 349:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 350:../common/ubertooth.c **** 		if (reg & msb)
 694              		.loc 1 350 0
 695 000e 15F0800F 		tst	r5, #128
 696 0012 4FF00106 		mov	r6, #1
 697 0016 02F1FF32 		add	r2, r2, #-1
 698              	.LVL48:
 351:../common/ubertooth.c **** 			MOSI_SET;
 699              		.loc 1 351 0
 700 001a 14BF     		ite	ne
 701 001c 2660     		strne	r6, [r4]
 352:../common/ubertooth.c **** 		else
 353:../common/ubertooth.c **** 			MOSI_CLR;
 702              		.loc 1 353 0
 703 001e 1E60     		streq	r6, [r3]
 354:../common/ubertooth.c **** 		reg <<= 1;
 704              		.loc 1 354 0
 705 0020 6D00     		lsls	r5, r5, #1
 706              	.LVL49:
 355:../common/ubertooth.c **** 		SCLK_SET;
 707              		.loc 1 355 0
 708 0022 1026     		movs	r6, #16
 349:../common/ubertooth.c **** 		if (reg & msb)
 709              		.loc 1 349 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 21


 710 0024 12F0FF02 		ands	r2, r2, #255
 711              		.loc 1 355 0
 712 0028 2660     		str	r6, [r4]
 354:../common/ubertooth.c **** 		reg <<= 1;
 713              		.loc 1 354 0
 714 002a EDB2     		uxtb	r5, r5
 715              	.LVL50:
 356:../common/ubertooth.c **** 		SCLK_CLR;
 716              		.loc 1 356 0
 717 002c 1E60     		str	r6, [r3]
 349:../common/ubertooth.c **** 		if (reg & msb)
 718              		.loc 1 349 0
 719 002e EDD1     		bne	.L51
 720 0030 0E46     		mov	r6, r1
 721              	.LVL51:
 722              	.L52:
 723 0032 721A     		subs	r2, r6, r1
 357:../common/ubertooth.c **** 	}
 358:../common/ubertooth.c **** 
 359:../common/ubertooth.c **** 	for (i = 0; i < len; ++i) {
 724              		.loc 1 359 0 discriminator 1
 725 0034 D2B2     		uxtb	r2, r2
 726 0036 8242     		cmp	r2, r0
 727 0038 14D2     		bcs	.L61
 360:../common/ubertooth.c **** 		temp = data[i];
 728              		.loc 1 360 0
 729 003a 16F8015B 		ldrb	r5, [r6], #1	@ zero_extendqisi2
 730              	.LVL52:
 731 003e 0822     		movs	r2, #8
 732              	.LVL53:
 733              	.L55:
 361:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 362:../common/ubertooth.c **** 			if (temp & msb)
 734              		.loc 1 362 0
 735 0040 15F0800F 		tst	r5, #128
 736 0044 4FF00107 		mov	r7, #1
 737 0048 02F1FF32 		add	r2, r2, #-1
 738              	.LVL54:
 363:../common/ubertooth.c **** 				MOSI_SET;
 739              		.loc 1 363 0
 740 004c 14BF     		ite	ne
 741 004e 2760     		strne	r7, [r4]
 364:../common/ubertooth.c **** 			else
 365:../common/ubertooth.c **** 				MOSI_CLR;
 742              		.loc 1 365 0
 743 0050 1F60     		streq	r7, [r3]
 366:../common/ubertooth.c **** 			temp <<= 1;
 744              		.loc 1 366 0
 745 0052 6D00     		lsls	r5, r5, #1
 746              	.LVL55:
 367:../common/ubertooth.c **** 			SCLK_SET;
 747              		.loc 1 367 0
 748 0054 1027     		movs	r7, #16
 361:../common/ubertooth.c **** 			if (temp & msb)
 749              		.loc 1 361 0
 750 0056 12F0FF02 		ands	r2, r2, #255
 751              		.loc 1 367 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 22


 752 005a 2760     		str	r7, [r4]
 366:../common/ubertooth.c **** 			temp <<= 1;
 753              		.loc 1 366 0
 754 005c EDB2     		uxtb	r5, r5
 755              	.LVL56:
 368:../common/ubertooth.c **** 			SCLK_CLR;
 756              		.loc 1 368 0
 757 005e 1F60     		str	r7, [r3]
 361:../common/ubertooth.c **** 			if (temp & msb)
 758              		.loc 1 361 0
 759 0060 EED1     		bne	.L55
 760 0062 E6E7     		b	.L52
 761              	.LVL57:
 762              	.L61:
 763 0064 0822     		movs	r2, #8
 764              	.LVL58:
 765              	.L57:
 766 0066 013A     		subs	r2, r2, #1
 767              	.LVL59:
 369:../common/ubertooth.c **** 		}
 370:../common/ubertooth.c **** 	}
 371:../common/ubertooth.c **** 
 372:../common/ubertooth.c **** 	// this is necessary to clock in the last byte
 373:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 374:../common/ubertooth.c **** 		SCLK_SET;
 768              		.loc 1 374 0 discriminator 3
 769 0068 1021     		movs	r1, #16
 373:../common/ubertooth.c **** 		SCLK_SET;
 770              		.loc 1 373 0 discriminator 3
 771 006a 12F0FF02 		ands	r2, r2, #255
 772              		.loc 1 374 0 discriminator 3
 773 006e 2160     		str	r1, [r4]
 375:../common/ubertooth.c **** 		SCLK_CLR;
 774              		.loc 1 375 0 discriminator 3
 775 0070 1960     		str	r1, [r3]
 373:../common/ubertooth.c **** 		SCLK_SET;
 776              		.loc 1 373 0 discriminator 3
 777 0072 F8D1     		bne	.L57
 376:../common/ubertooth.c **** 	}
 377:../common/ubertooth.c **** 	
 378:../common/ubertooth.c **** 	spi_delay();
 778              		.loc 1 378 0
 779 0074 FFF7FEFF 		bl	spi_delay
 780              	.LVL60:
 379:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 380:../common/ubertooth.c **** 	CSN_SET;
 781              		.loc 1 380 0
 782 0078 024B     		ldr	r3, .L62+4
 783 007a 2022     		movs	r2, #32
 784 007c 1A60     		str	r2, [r3]
 785 007e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 786              	.L63:
 787              		.align	2
 788              	.L62:
 789 0080 5CC00920 		.word	537509980
 790 0084 58C00920 		.word	537509976
 791              		.cfi_endproc
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 23


 792              	.LFE16:
 794              		.section	.text.cc2400_fifo_read,"ax",%progbits
 795              		.align	1
 796              		.global	cc2400_fifo_read
 797              		.thumb
 798              		.thumb_func
 800              	cc2400_fifo_read:
 801              	.LFB17:
 381:../common/ubertooth.c **** }
 382:../common/ubertooth.c **** 
 383:../common/ubertooth.c **** /* read multiple bytes from SPI */
 384:../common/ubertooth.c **** void cc2400_fifo_read(u8 len, u8 *buf) {
 802              		.loc 1 384 0
 803              		.cfi_startproc
 804              		@ args = 0, pretend = 0, frame = 0
 805              		@ frame_needed = 0, uses_anonymous_args = 0
 806              	.LVL61:
 807 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 808              		.cfi_def_cfa_offset 32
 809              		.cfi_offset 3, -32
 810              		.cfi_offset 4, -28
 811              		.cfi_offset 5, -24
 812              		.cfi_offset 6, -20
 813              		.cfi_offset 7, -16
 814              		.cfi_offset 8, -12
 815              		.cfi_offset 9, -8
 816              		.cfi_offset 14, -4
 817              	.LVL62:
 385:../common/ubertooth.c **** 	u8 msb = 1 << 7;
 386:../common/ubertooth.c **** 	u8 i, j, temp, reg;
 387:../common/ubertooth.c **** 	// Set first bit because it's a read
 388:../common/ubertooth.c **** 	reg = 0x80 | FIFOREG;
 389:../common/ubertooth.c **** 
 390:../common/ubertooth.c **** 	/* start transaction by dropping CSN */
 391:../common/ubertooth.c **** 	CSN_CLR;
 818              		.loc 1 391 0
 819 0004 204D     		ldr	r5, .L78
 820 0006 2023     		movs	r3, #32
 821 0008 2B60     		str	r3, [r5]
 822              	.LVL63:
 388:../common/ubertooth.c **** 
 823              		.loc 1 388 0
 824 000a F022     		movs	r2, #240
 825              		.loc 1 391 0
 826 000c 0823     		movs	r3, #8
 827              	.LVL64:
 828              	.L67:
 829 000e DFF88080 		ldr	r8, .L78+8
 392:../common/ubertooth.c **** 
 393:../common/ubertooth.c **** 	for (i = 0; i < 8; ++i) {
 394:../common/ubertooth.c **** 		if (reg & msb)
 830              		.loc 1 394 0
 831 0012 12F0800F 		tst	r2, #128
 832 0016 4FF00104 		mov	r4, #1
 833 001a 03F1FF33 		add	r3, r3, #-1
 834              	.LVL65:
 395:../common/ubertooth.c **** 			MOSI_SET;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 24


 835              		.loc 1 395 0
 836 001e 14BF     		ite	ne
 837 0020 C8F80040 		strne	r4, [r8]
 396:../common/ubertooth.c **** 		else
 397:../common/ubertooth.c **** 			MOSI_CLR;
 838              		.loc 1 397 0
 839 0024 2C60     		streq	r4, [r5]
 398:../common/ubertooth.c **** 		reg <<= 1;
 840              		.loc 1 398 0
 841 0026 5200     		lsls	r2, r2, #1
 842              	.LVL66:
 399:../common/ubertooth.c **** 		SCLK_SET;
 843              		.loc 1 399 0
 844 0028 1024     		movs	r4, #16
 393:../common/ubertooth.c **** 		if (reg & msb)
 845              		.loc 1 393 0
 846 002a 13F0FF03 		ands	r3, r3, #255
 847              		.loc 1 399 0
 848 002e C8F80040 		str	r4, [r8]
 398:../common/ubertooth.c **** 		reg <<= 1;
 849              		.loc 1 398 0
 850 0032 D2B2     		uxtb	r2, r2
 851              	.LVL67:
 400:../common/ubertooth.c **** 		SCLK_CLR;
 852              		.loc 1 400 0
 853 0034 2C60     		str	r4, [r5]
 393:../common/ubertooth.c **** 		if (reg & msb)
 854              		.loc 1 393 0
 855 0036 EAD1     		bne	.L67
 856 0038 0138     		subs	r0, r0, #1
 857              	.LVL68:
 858 003a 01F1FF39 		add	r9, r1, #-1
 859 003e 0E18     		adds	r6, r1, r0
 860              	.LVL69:
 861              	.L68:
 401:../common/ubertooth.c **** 	}
 402:../common/ubertooth.c **** 
 403:../common/ubertooth.c **** 	for (i = 0; i < len; ++i) {
 862              		.loc 1 403 0 discriminator 1
 863 0040 B145     		cmp	r9, r6
 864 0042 1AD0     		beq	.L77
 865 0044 0827     		movs	r7, #8
 866 0046 0024     		movs	r4, #0
 867              	.L70:
 868              	.LVL70:
 404:../common/ubertooth.c **** 		temp = 0;
 405:../common/ubertooth.c **** 		for (j = 0; j < 8; ++j) {
 406:../common/ubertooth.c **** 			spi_delay();
 869              		.loc 1 406 0
 870 0048 FFF7FEFF 		bl	spi_delay
 871              	.LVL71:
 407:../common/ubertooth.c **** 			SCLK_SET;
 872              		.loc 1 407 0
 873 004c 1023     		movs	r3, #16
 874 004e C8F80030 		str	r3, [r8]
 408:../common/ubertooth.c **** 			temp <<= 1;
 409:../common/ubertooth.c **** 			if (MISO)
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 25


 875              		.loc 1 409 0
 876 0052 0E4B     		ldr	r3, .L78+4
 408:../common/ubertooth.c **** 			temp <<= 1;
 877              		.loc 1 408 0
 878 0054 6400     		lsls	r4, r4, #1
 879              	.LVL72:
 880              		.loc 1 409 0
 881 0056 1B68     		ldr	r3, [r3]
 408:../common/ubertooth.c **** 			temp <<= 1;
 882              		.loc 1 408 0
 883 0058 E4B2     		uxtb	r4, r4
 884              	.LVL73:
 885              		.loc 1 409 0
 886 005a 9B07     		lsls	r3, r3, #30
 887 005c 07F1FF37 		add	r7, r7, #-1
 888              	.LVL74:
 410:../common/ubertooth.c **** 				temp |= 1;
 889              		.loc 1 410 0
 890 0060 48BF     		it	mi
 891 0062 44F00104 		orrmi	r4, r4, #1
 892              	.LVL75:
 411:../common/ubertooth.c **** 			spi_delay();
 893              		.loc 1 411 0
 894 0066 FFF7FEFF 		bl	spi_delay
 895              	.LVL76:
 412:../common/ubertooth.c **** 			SCLK_CLR;
 896              		.loc 1 412 0
 897 006a 1023     		movs	r3, #16
 405:../common/ubertooth.c **** 			spi_delay();
 898              		.loc 1 405 0
 899 006c 17F0FF07 		ands	r7, r7, #255
 900              		.loc 1 412 0
 901 0070 2B60     		str	r3, [r5]
 405:../common/ubertooth.c **** 			spi_delay();
 902              		.loc 1 405 0
 903 0072 E9D1     		bne	.L70
 413:../common/ubertooth.c **** 		}
 414:../common/ubertooth.c **** 		buf[i] = temp;
 904              		.loc 1 414 0 discriminator 2
 905 0074 09F8014F 		strb	r4, [r9, #1]!
 906              	.LVL77:
 907 0078 E2E7     		b	.L68
 908              	.LVL78:
 909              	.L77:
 415:../common/ubertooth.c **** 	}
 416:../common/ubertooth.c **** 
 417:../common/ubertooth.c **** 	/* end transaction by raising CSN */
 418:../common/ubertooth.c **** 	spi_delay();
 910              		.loc 1 418 0
 911 007a FFF7FEFF 		bl	spi_delay
 912              	.LVL79:
 419:../common/ubertooth.c **** 	CSN_SET;
 913              		.loc 1 419 0
 914 007e 2023     		movs	r3, #32
 915 0080 C8F80030 		str	r3, [r8]
 916 0084 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 917              	.LVL80:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 26


 918              	.L79:
 919              		.align	2
 920              	.L78:
 921 0088 5CC00920 		.word	537509980
 922 008c 54C00920 		.word	537509972
 923 0090 58C00920 		.word	537509976
 924              		.cfi_endproc
 925              	.LFE17:
 927              		.section	.text.cc2400_status,"ax",%progbits
 928              		.align	1
 929              		.global	cc2400_status
 930              		.thumb
 931              		.thumb_func
 933              	cc2400_status:
 934              	.LFB18:
 420:../common/ubertooth.c **** }
 421:../common/ubertooth.c **** 
 422:../common/ubertooth.c **** /* get the status */
 423:../common/ubertooth.c **** u8 cc2400_status()
 424:../common/ubertooth.c **** {
 935              		.loc 1 424 0
 936              		.cfi_startproc
 937              		@ args = 0, pretend = 0, frame = 0
 938              		@ frame_needed = 0, uses_anonymous_args = 0
 939 0000 08B5     		push	{r3, lr}
 940              		.cfi_def_cfa_offset 8
 941              		.cfi_offset 3, -8
 942              		.cfi_offset 14, -4
 425:../common/ubertooth.c **** 	return cc2400_spi(8, 0);
 943              		.loc 1 425 0
 944 0002 0021     		movs	r1, #0
 945 0004 0820     		movs	r0, #8
 946 0006 FFF7FEFF 		bl	cc2400_spi
 947              	.LVL81:
 426:../common/ubertooth.c **** }
 948              		.loc 1 426 0
 949 000a C0B2     		uxtb	r0, r0
 950 000c 08BD     		pop	{r3, pc}
 951              		.cfi_endproc
 952              	.LFE18:
 954              		.section	.text.cc2400_strobe,"ax",%progbits
 955              		.align	1
 956              		.global	cc2400_strobe
 957              		.thumb
 958              		.thumb_func
 960              	cc2400_strobe:
 961              	.LFB19:
 427:../common/ubertooth.c **** 
 428:../common/ubertooth.c **** /* strobe register, return status */
 429:../common/ubertooth.c **** u8 cc2400_strobe(u8 reg)
 430:../common/ubertooth.c **** {
 962              		.loc 1 430 0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966              	.LVL82:
 967 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 27


 968              		.cfi_def_cfa_offset 8
 969              		.cfi_offset 3, -8
 970              		.cfi_offset 14, -4
 971              		.loc 1 430 0
 972 0002 0146     		mov	r1, r0
 431:../common/ubertooth.c **** 	return cc2400_spi(8, reg);
 973              		.loc 1 431 0
 974 0004 0820     		movs	r0, #8
 975              	.LVL83:
 976 0006 FFF7FEFF 		bl	cc2400_spi
 977              	.LVL84:
 432:../common/ubertooth.c **** }
 978              		.loc 1 432 0
 979 000a C0B2     		uxtb	r0, r0
 980 000c 08BD     		pop	{r3, pc}
 981              		.cfi_endproc
 982              	.LFE19:
 984              		.section	.text.cc2400_reset,"ax",%progbits
 985              		.align	1
 986              		.global	cc2400_reset
 987              		.thumb
 988              		.thumb_func
 990              	cc2400_reset:
 991              	.LFB20:
 433:../common/ubertooth.c **** 
 434:../common/ubertooth.c **** /*
 435:../common/ubertooth.c ****  * Warning: This should only be called when running on the internal oscillator.
 436:../common/ubertooth.c ****  * Otherwise use clock_start().
 437:../common/ubertooth.c ****  */
 438:../common/ubertooth.c **** void cc2400_reset()
 439:../common/ubertooth.c **** {
 992              		.loc 1 439 0
 993              		.cfi_startproc
 994              		@ args = 0, pretend = 0, frame = 0
 995              		@ frame_needed = 0, uses_anonymous_args = 0
 996 0000 08B5     		push	{r3, lr}
 997              		.cfi_def_cfa_offset 8
 998              		.cfi_offset 3, -8
 999              		.cfi_offset 14, -4
 1000              	.LVL85:
 1001              	.LBB12:
 1002              	.LBB13:
 313:../common/ubertooth.c **** }
 1003              		.loc 1 313 0
 1004 0002 1820     		movs	r0, #24
 1005 0004 0021     		movs	r1, #0
 1006 0006 FFF7FEFF 		bl	cc2400_spi
 1007              	.LVL86:
 1008              	.L83:
 1009              	.LBE13:
 1010              	.LBE12:
 440:../common/ubertooth.c **** 	cc2400_set(MAIN, 0x0000);
 441:../common/ubertooth.c **** 	while (cc2400_get(MAIN) != 0x0000);
 1011              		.loc 1 441 0 discriminator 1
 1012 000a 0020     		movs	r0, #0
 1013 000c FFF7FEFF 		bl	cc2400_get
 1014              	.LVL87:
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 28


 1015 0010 0028     		cmp	r0, #0
 1016 0012 FAD1     		bne	.L83
 1017              	.LVL88:
 1018              	.LBB14:
 1019              	.LBB15:
 313:../common/ubertooth.c **** }
 1020              		.loc 1 313 0
 1021 0014 1820     		movs	r0, #24
 1022 0016 4FF40041 		mov	r1, #32768
 1023 001a FFF7FEFF 		bl	cc2400_spi
 1024              	.LVL89:
 1025              	.L84:
 1026              	.LBE15:
 1027              	.LBE14:
 442:../common/ubertooth.c **** 	cc2400_set(MAIN, 0x8000);
 443:../common/ubertooth.c **** 	while (cc2400_get(MAIN) != 0x8000);
 1028              		.loc 1 443 0 discriminator 1
 1029 001e 0020     		movs	r0, #0
 1030 0020 FFF7FEFF 		bl	cc2400_get
 1031              	.LVL90:
 1032 0024 B0F5004F 		cmp	r0, #32768
 1033 0028 F9D1     		bne	.L84
 444:../common/ubertooth.c **** }
 1034              		.loc 1 444 0
 1035 002a 08BD     		pop	{r3, pc}
 1036              		.cfi_endproc
 1037              	.LFE20:
 1039              		.section	.text.clock_start,"ax",%progbits
 1040              		.align	1
 1041              		.global	clock_start
 1042              		.thumb
 1043              		.thumb_func
 1045              	clock_start:
 1046              	.LFB21:
 445:../common/ubertooth.c **** 
 446:../common/ubertooth.c **** /* activate the CC2400's 16 MHz oscillator and sync LPC175x to it */
 447:../common/ubertooth.c **** void clock_start()
 448:../common/ubertooth.c **** {
 1047              		.loc 1 448 0
 1048              		.cfi_startproc
 1049              		@ args = 0, pretend = 0, frame = 0
 1050              		@ frame_needed = 0, uses_anonymous_args = 0
 1051 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1052              		.cfi_def_cfa_offset 24
 1053              		.cfi_offset 4, -24
 1054              		.cfi_offset 5, -20
 1055              		.cfi_offset 6, -16
 1056              		.cfi_offset 7, -12
 1057              		.cfi_offset 8, -8
 1058              		.cfi_offset 14, -4
 449:../common/ubertooth.c **** 	/* configure flash accelerator for higher clock rate */
 450:../common/ubertooth.c **** 	FLASHCFG = (0x03A | (FLASHTIM << 12));
 1059              		.loc 1 450 0
 1060 0004 44F23A02 		movw	r2, #16442
 1061 0008 3E4B     		ldr	r3, .L114
 451:../common/ubertooth.c **** 
 452:../common/ubertooth.c **** 	/* switch to the internal oscillator if necessary */
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 29


 453:../common/ubertooth.c **** 	CLKSRCSEL = 0;
 1062              		.loc 1 453 0
 1063 000a 3F4F     		ldr	r7, .L114+4
 450:../common/ubertooth.c **** 
 1064              		.loc 1 450 0
 1065 000c 1A60     		str	r2, [r3]
 454:../common/ubertooth.c **** 
 455:../common/ubertooth.c **** 	/* disconnect PLL0 */
 456:../common/ubertooth.c **** 	PLL0CON &= ~PLL0CON_PLLC0;
 1066              		.loc 1 456 0
 1067 000e 3F4D     		ldr	r5, .L114+8
 453:../common/ubertooth.c **** 
 1068              		.loc 1 453 0
 1069 0010 0023     		movs	r3, #0
 1070 0012 3B60     		str	r3, [r7]
 1071              		.loc 1 456 0
 1072 0014 2B68     		ldr	r3, [r5]
 457:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1073              		.loc 1 457 0
 1074 0016 3E4C     		ldr	r4, .L114+12
 456:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1075              		.loc 1 456 0
 1076 0018 23F00203 		bic	r3, r3, #2
 1077 001c 2B60     		str	r3, [r5]
 1078              		.loc 1 457 0
 1079 001e AA23     		movs	r3, #170
 1080 0020 2360     		str	r3, [r4]
 1081 0022 5523     		movs	r3, #85
 1082 0024 2360     		str	r3, [r4]
 1083              	.L88:
 458:../common/ubertooth.c **** 	while (PLL0STAT & PLL0STAT_PLLC0_STAT);
 1084              		.loc 1 458 0 discriminator 1
 1085 0026 3B4E     		ldr	r6, .L114+16
 1086 0028 3368     		ldr	r3, [r6]
 1087 002a 9801     		lsls	r0, r3, #6
 1088 002c FBD4     		bmi	.L88
 459:../common/ubertooth.c **** 
 460:../common/ubertooth.c **** 	/* turn off PLL0 */
 461:../common/ubertooth.c **** 	PLL0CON &= ~PLL0CON_PLLE0;
 1089              		.loc 1 461 0
 1090 002e 2B68     		ldr	r3, [r5]
 1091 0030 23F00103 		bic	r3, r3, #1
 1092 0034 2B60     		str	r3, [r5]
 462:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1093              		.loc 1 462 0
 1094 0036 AA23     		movs	r3, #170
 1095 0038 2360     		str	r3, [r4]
 1096 003a 5523     		movs	r3, #85
 1097 003c 2360     		str	r3, [r4]
 1098              	.L89:
 463:../common/ubertooth.c **** 	while (PLL0STAT & PLL0STAT_PLLE0_STAT);
 1099              		.loc 1 463 0 discriminator 1
 1100 003e 3368     		ldr	r3, [r6]
 1101 0040 13F08073 		ands	r3, r3, #16777216
 1102 0044 FBD1     		bne	.L89
 464:../common/ubertooth.c **** 
 465:../common/ubertooth.c **** 	/* temporarily set CPU clock divider to 1 */
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 30


 466:../common/ubertooth.c **** 	CCLKCFG = 0;
 1103              		.loc 1 466 0
 1104 0046 DFF8F080 		ldr	r8, .L114+52
 1105 004a C8F80030 		str	r3, [r8]
 467:../common/ubertooth.c **** 
 468:../common/ubertooth.c **** 	/* configure CC2400 oscillator, output carrier sense on GIO6 */
 469:../common/ubertooth.c **** 	cc2400_reset();
 1106              		.loc 1 469 0
 1107 004e FFF7FEFF 		bl	cc2400_reset
 1108              	.LVL91:
 1109              	.LBB18:
 1110              	.LBB19:
 313:../common/ubertooth.c **** }
 1111              		.loc 1 313 0
 1112 0052 1820     		movs	r0, #24
 1113 0054 3049     		ldr	r1, .L114+20
 1114 0056 FFF7FEFF 		bl	cc2400_spi
 1115              	.LVL92:
 1116              	.LBE19:
 1117              	.LBE18:
 470:../common/ubertooth.c **** 	cc2400_set(IOCFG, (GIO_CARRIER_SENSE_N << 9) | (GIO_CLK_16M << 3));
 471:../common/ubertooth.c **** 	cc2400_strobe(SXOSCON);
 1118              		.loc 1 471 0
 1119 005a 6020     		movs	r0, #96
 1120 005c FFF7FEFF 		bl	cc2400_strobe
 1121              	.LVL93:
 1122              	.L90:
 472:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1123              		.loc 1 472 0 discriminator 1
 1124 0060 FFF7FEFF 		bl	cc2400_status
 1125              	.LVL94:
 1126 0064 4106     		lsls	r1, r0, #25
 1127 0066 FBD5     		bpl	.L90
 473:../common/ubertooth.c **** 
 474:../common/ubertooth.c **** 	/* activate main oscillator */
 475:../common/ubertooth.c **** 	SCS = SCS_OSCEN;
 1128              		.loc 1 475 0
 1129 0068 2C4B     		ldr	r3, .L114+24
 1130 006a 2022     		movs	r2, #32
 1131 006c 1A60     		str	r2, [r3]
 1132              	.L91:
 476:../common/ubertooth.c **** 	while (!(SCS & SCS_OSCSTAT));
 1133              		.loc 1 476 0 discriminator 1
 1134 006e 1A68     		ldr	r2, [r3]
 1135 0070 5206     		lsls	r2, r2, #25
 1136 0072 FCD5     		bpl	.L91
 477:../common/ubertooth.c **** 
 478:../common/ubertooth.c **** 	/*
 479:../common/ubertooth.c **** 	 * errata sheet says we must select peripheral clock before enabling and
 480:../common/ubertooth.c **** 	 * connecting PLL0
 481:../common/ubertooth.c ****  	 */
 482:../common/ubertooth.c **** #ifdef TC13BADGE
 483:../common/ubertooth.c **** 	PCLKSEL0  = (1 << 2); /* TIMER0 at cclk (30 MHz) */
 484:../common/ubertooth.c **** #else
 485:../common/ubertooth.c **** 	PCLKSEL0  = (2 << 2); /* TIMER0 at cclk/2 (50 MHz) */
 1137              		.loc 1 485 0
 1138 0074 2A4B     		ldr	r3, .L114+28
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 31


 1139 0076 0822     		movs	r2, #8
 1140 0078 1A60     		str	r2, [r3]
 486:../common/ubertooth.c **** #endif
 487:../common/ubertooth.c **** 	PCLKSEL1  = 0;
 1141              		.loc 1 487 0
 1142 007a 0022     		movs	r2, #0
 1143 007c 5A60     		str	r2, [r3, #4]
 488:../common/ubertooth.c **** 
 489:../common/ubertooth.c **** 	/* switch to main oscillator */
 490:../common/ubertooth.c **** 	CLKSRCSEL = 1;
 1144              		.loc 1 490 0
 1145 007e 0123     		movs	r3, #1
 1146 0080 3B60     		str	r3, [r7]
 491:../common/ubertooth.c **** 
 492:../common/ubertooth.c **** 	/* configure PLL0 */
 493:../common/ubertooth.c **** 	PLL0CFG = (MSEL0 << 0) | (NSEL0 << 16);
 1147              		.loc 1 493 0
 1148 0082 284A     		ldr	r2, .L114+32
 1149 0084 284B     		ldr	r3, .L114+36
 494:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1150              		.loc 1 494 0
 1151 0086 AA21     		movs	r1, #170
 493:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1152              		.loc 1 493 0
 1153 0088 1A60     		str	r2, [r3]
 1154              		.loc 1 494 0
 1155 008a 5522     		movs	r2, #85
 1156 008c 2160     		str	r1, [r4]
 1157 008e 2260     		str	r2, [r4]
 495:../common/ubertooth.c **** 
 496:../common/ubertooth.c **** 	/* turn on PLL0 */
 497:../common/ubertooth.c **** 	PLL0CON |= PLL0CON_PLLE0;
 1158              		.loc 1 497 0
 1159 0090 2B68     		ldr	r3, [r5]
 1160 0092 43F00103 		orr	r3, r3, #1
 1161 0096 2B60     		str	r3, [r5]
 498:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1162              		.loc 1 498 0
 1163 0098 2160     		str	r1, [r4]
 1164 009a 2260     		str	r2, [r4]
 1165              	.L92:
 499:../common/ubertooth.c **** 	while (!(PLL0STAT & PLL0STAT_PLLE0_STAT));
 1166              		.loc 1 499 0 discriminator 1
 1167 009c 3368     		ldr	r3, [r6]
 1168 009e DF01     		lsls	r7, r3, #7
 1169 00a0 FCD5     		bpl	.L92
 500:../common/ubertooth.c **** 
 501:../common/ubertooth.c **** 	/* set CPU clock divider */
 502:../common/ubertooth.c **** 	CCLKCFG = CCLKSEL;
 1170              		.loc 1 502 0
 1171 00a2 0323     		movs	r3, #3
 1172 00a4 C8F80030 		str	r3, [r8]
 503:../common/ubertooth.c **** 
 504:../common/ubertooth.c **** 	/* connect PLL0 */
 505:../common/ubertooth.c **** 	PLL0CON |= PLL0CON_PLLC0;
 1173              		.loc 1 505 0
 1174 00a8 2B68     		ldr	r3, [r5]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 32


 1175 00aa 43F00203 		orr	r3, r3, #2
 1176 00ae 2B60     		str	r3, [r5]
 506:../common/ubertooth.c **** 	PLL0FEED_SEQUENCE;
 1177              		.loc 1 506 0
 1178 00b0 AA23     		movs	r3, #170
 1179 00b2 2360     		str	r3, [r4]
 1180 00b4 5523     		movs	r3, #85
 1181 00b6 2360     		str	r3, [r4]
 1182              	.L93:
 507:../common/ubertooth.c **** 	while (!(PLL0STAT & PLL0STAT_PLLC0_STAT));
 1183              		.loc 1 507 0 discriminator 1
 1184 00b8 3368     		ldr	r3, [r6]
 1185 00ba 9D01     		lsls	r5, r3, #6
 1186 00bc FCD5     		bpl	.L93
 508:../common/ubertooth.c **** 
 509:../common/ubertooth.c **** 	/* configure PLL1 */
 510:../common/ubertooth.c **** 	PLL1CFG = (MSEL1 << 0) | (PSEL1 << 5);
 1187              		.loc 1 510 0
 1188 00be 1B4B     		ldr	r3, .L114+40
 1189 00c0 2222     		movs	r2, #34
 1190 00c2 1A60     		str	r2, [r3]
 511:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1191              		.loc 1 511 0
 1192 00c4 AA24     		movs	r4, #170
 1193 00c6 0833     		adds	r3, r3, #8
 1194 00c8 5520     		movs	r0, #85
 512:../common/ubertooth.c **** 
 513:../common/ubertooth.c **** 	/* turn on PLL1 */
 514:../common/ubertooth.c **** 	PLL1CON |= PLL1CON_PLLE1;
 1195              		.loc 1 514 0
 1196 00ca 194A     		ldr	r2, .L114+44
 511:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1197              		.loc 1 511 0
 1198 00cc 1C60     		str	r4, [r3]
 1199 00ce 1860     		str	r0, [r3]
 1200              		.loc 1 514 0
 1201 00d0 1168     		ldr	r1, [r2]
 1202 00d2 41F00101 		orr	r1, r1, #1
 1203 00d6 1160     		str	r1, [r2]
 515:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1204              		.loc 1 515 0
 1205 00d8 1C60     		str	r4, [r3]
 1206 00da 1860     		str	r0, [r3]
 1207              	.L94:
 516:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLLE1_STAT));
 1208              		.loc 1 516 0 discriminator 1
 1209 00dc 1549     		ldr	r1, .L114+48
 1210 00de 0868     		ldr	r0, [r1]
 1211 00e0 C405     		lsls	r4, r0, #23
 1212 00e2 FBD5     		bpl	.L94
 1213              	.L106:
 517:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLOCK1));
 1214              		.loc 1 517 0 discriminator 1
 1215 00e4 0868     		ldr	r0, [r1]
 1216 00e6 4005     		lsls	r0, r0, #21
 1217 00e8 FCD5     		bpl	.L106
 518:../common/ubertooth.c **** 
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 33


 519:../common/ubertooth.c **** 	/* connect PLL1 */
 520:../common/ubertooth.c **** 	PLL1CON |= PLL1CON_PLLC1;
 1218              		.loc 1 520 0
 1219 00ea 1068     		ldr	r0, [r2]
 1220 00ec 40F00200 		orr	r0, r0, #2
 1221 00f0 1060     		str	r0, [r2]
 521:../common/ubertooth.c **** 	PLL1FEED_SEQUENCE;
 1222              		.loc 1 521 0
 1223 00f2 AA22     		movs	r2, #170
 1224 00f4 1A60     		str	r2, [r3]
 1225 00f6 5522     		movs	r2, #85
 1226 00f8 1A60     		str	r2, [r3]
 1227              	.L96:
 522:../common/ubertooth.c **** 	while (!(PLL1STAT & PLL1STAT_PLLC1_STAT));
 1228              		.loc 1 522 0 discriminator 1
 1229 00fa 0B68     		ldr	r3, [r1]
 1230 00fc 9B05     		lsls	r3, r3, #22
 1231 00fe FCD5     		bpl	.L96
 523:../common/ubertooth.c **** }
 1232              		.loc 1 523 0
 1233 0100 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1234              	.L115:
 1235              		.align	2
 1236              	.L114:
 1237 0104 00C00F40 		.word	1074774016
 1238 0108 0CC10F40 		.word	1074774284
 1239 010c 80C00F40 		.word	1074774144
 1240 0110 8CC00F40 		.word	1074774156
 1241 0114 88C00F40 		.word	1074774152
 1242 0118 70150800 		.word	529776
 1243 011c A0C10F40 		.word	1074774432
 1244 0120 A8C10F40 		.word	1074774440
 1245 0124 18000100 		.word	65560
 1246 0128 84C00F40 		.word	1074774148
 1247 012c A4C00F40 		.word	1074774180
 1248 0130 A0C00F40 		.word	1074774176
 1249 0134 A8C00F40 		.word	1074774184
 1250 0138 04C10F40 		.word	1074774276
 1251              		.cfi_endproc
 1252              	.LFE21:
 1254              		.section	.text.ubertooth_init,"ax",%progbits
 1255              		.align	1
 1256              		.global	ubertooth_init
 1257              		.thumb
 1258              		.thumb_func
 1260              	ubertooth_init:
 1261              	.LFB6:
 156:../common/ubertooth.c **** 	gpio_init();
 1262              		.loc 1 156 0
 1263              		.cfi_startproc
 1264              		@ args = 0, pretend = 0, frame = 0
 1265              		@ frame_needed = 0, uses_anonymous_args = 0
 1266 0000 08B5     		push	{r3, lr}
 1267              		.cfi_def_cfa_offset 8
 1268              		.cfi_offset 3, -8
 1269              		.cfi_offset 14, -4
 157:../common/ubertooth.c **** 	cc2400_init();
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 34


 1270              		.loc 1 157 0
 1271 0002 FFF7FEFF 		bl	gpio_init
 1272              	.LVL95:
 158:../common/ubertooth.c **** 	clock_start();
 1273              		.loc 1 158 0
 1274 0006 FFF7FEFF 		bl	cc2400_init
 1275              	.LVL96:
 160:../common/ubertooth.c **** 
 1276              		.loc 1 160 0
 1277 000a BDE80840 		pop	{r3, lr}
 1278              		.cfi_restore 14
 1279              		.cfi_restore 3
 1280              		.cfi_def_cfa_offset 0
 159:../common/ubertooth.c **** }
 1281              		.loc 1 159 0
 1282 000e FFF7FEBF 		b	clock_start
 1283              	.LVL97:
 1284              		.cfi_endproc
 1285              	.LFE6:
 1287              		.section	.text.reset,"ax",%progbits
 1288              		.align	1
 1289              		.global	reset
 1290              		.thumb
 1291              		.thumb_func
 1293              	reset:
 1294              	.LFB22:
 524:../common/ubertooth.c **** 
 525:../common/ubertooth.c **** /* reset the LPC17xx, the cc2400 will be handled by the boot code */
 526:../common/ubertooth.c **** void reset()
 527:../common/ubertooth.c **** {
 1295              		.loc 1 527 0
 1296              		.cfi_startproc
 1297              		@ args = 0, pretend = 0, frame = 0
 1298              		@ frame_needed = 0, uses_anonymous_args = 0
 1299 0000 08B5     		push	{r3, lr}
 1300              		.cfi_def_cfa_offset 8
 1301              		.cfi_offset 3, -8
 1302              		.cfi_offset 14, -4
 528:../common/ubertooth.c **** 	all_pins_off();
 1303              		.loc 1 528 0
 1304 0002 FFF7FEFF 		bl	all_pins_off
 1305              	.LVL98:
 529:../common/ubertooth.c **** 
 530:../common/ubertooth.c **** 	/* Enable the watchdog with reset enabled */
 531:../common/ubertooth.c **** 	USRLED_CLR;
 1306              		.loc 1 531 0
 1307 0006 094B     		ldr	r3, .L118
 1308 0008 0222     		movs	r2, #2
 1309 000a 1A60     		str	r2, [r3]
 532:../common/ubertooth.c **** 	WDMOD |= WDMOD_WDEN | WDMOD_WDRESET;
 1310              		.loc 1 532 0
 1311 000c 4FF08042 		mov	r2, #1073741824
 1312 0010 1368     		ldr	r3, [r2]
 1313              	.LBB22:
 1314              	.LBB23:
  30:../common/ubertooth.c **** }
 1315              		.loc 1 30 0
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 35


 1316 0012 0748     		ldr	r0, .L118+4
 1317              	.LBE23:
 1318              	.LBE22:
 1319              		.loc 1 532 0
 1320 0014 43F00303 		orr	r3, r3, #3
 1321 0018 1360     		str	r3, [r2]
 533:../common/ubertooth.c **** 	WDFEED_SEQUENCE;
 1322              		.loc 1 533 0
 1323 001a 064B     		ldr	r3, .L118+8
 1324 001c AA22     		movs	r2, #170
 1325 001e 1A60     		str	r2, [r3]
 1326 0020 5522     		movs	r2, #85
 1327 0022 1A60     		str	r2, [r3]
 1328              	.LVL99:
 534:../common/ubertooth.c **** 	
 535:../common/ubertooth.c **** 	/* Set watchdog timeout to 256us (minimum) */
 536:../common/ubertooth.c **** 	
 537:../common/ubertooth.c **** 	/* sleep for 1s (minimum) */
 538:../common/ubertooth.c **** 	wait(1);
 539:../common/ubertooth.c **** }
 1329              		.loc 1 539 0
 1330 0024 BDE80840 		pop	{r3, lr}
 1331              		.cfi_restore 14
 1332              		.cfi_restore 3
 1333              		.cfi_def_cfa_offset 0
 1334              	.LBB25:
 1335              	.LBB24:
  30:../common/ubertooth.c **** }
 1336              		.loc 1 30 0
 1337 0028 FFF7FEBF 		b	wait_us
 1338              	.LVL100:
 1339              	.L119:
 1340              		.align	2
 1341              	.L118:
 1342 002c 3CC00920 		.word	537509948
 1343 0030 40420F00 		.word	1000000
 1344 0034 08000040 		.word	1073741832
 1345              	.LBE24:
 1346              	.LBE25:
 1347              		.cfi_endproc
 1348              	.LFE22:
 1350              		.section	.text.cc2400_tune_rx,"ax",%progbits
 1351              		.align	1
 1352              		.global	cc2400_tune_rx
 1353              		.thumb
 1354              		.thumb_func
 1356              	cc2400_tune_rx:
 1357              	.LFB23:
 540:../common/ubertooth.c **** 
 541:../common/ubertooth.c **** /* take control of R8C microcontroller and CC2400 on the ToorCon 13 badge */
 542:../common/ubertooth.c **** #ifdef TC13BADGE
 543:../common/ubertooth.c **** void r8c_takeover(void)
 544:../common/ubertooth.c **** {
 545:../common/ubertooth.c **** 	/* wait until user presses SW1 while USB is connected */
 546:../common/ubertooth.c **** 	while (SW1 || !VBUS) {
 547:../common/ubertooth.c **** 		/* turn off power to all peripherals except GPIO */
 548:../common/ubertooth.c **** 		PCONP = PCONP_PCGPIO;
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 36


 549:../common/ubertooth.c **** 
 550:../common/ubertooth.c **** 		/* enable interrupt on falling edge of P2.8 (SW1) */
 551:../common/ubertooth.c **** 		IO2IntEnF |= (0x1 << 8);
 552:../common/ubertooth.c **** 		ISER0 |= ISER0_ISE_EINT3;
 553:../common/ubertooth.c **** 
 554:../common/ubertooth.c **** 		/* go into power-down mode and wait for interrupt */
 555:../common/ubertooth.c **** 		SCB_SCR = SCB_SCR_SLEEPDEEP;
 556:../common/ubertooth.c **** 		PCON = (PCON_PM0 | PCON_BOGD);
 557:../common/ubertooth.c **** 		asm("WFI");
 558:../common/ubertooth.c **** 
 559:../common/ubertooth.c **** 		/* disable interrupt */
 560:../common/ubertooth.c **** 		IO2IntEnF &= ~(0x1 << 8);
 561:../common/ubertooth.c **** 		ICER0 |= ICER0_ICE_EINT3;
 562:../common/ubertooth.c **** 
 563:../common/ubertooth.c **** 		/* turn power back on for peripherals we use */
 564:../common/ubertooth.c **** 		PCONP = (PCONP_PCTIM0 | PCONP_PCSSP1 | PCONP_PCGPIO | PCONP_PCSSP0);
 565:../common/ubertooth.c **** 	}
 566:../common/ubertooth.c **** 
 567:../common/ubertooth.c **** 	/* drop R8C_CTL to let the R8C know we are taking over */
 568:../common/ubertooth.c **** 	R8C_CTL_CLR;
 569:../common/ubertooth.c **** 
 570:../common/ubertooth.c **** 	/* wait for the R8C to acknowledge the takeover */
 571:../common/ubertooth.c **** 	while (R8C_ACK);
 572:../common/ubertooth.c **** }
 573:../common/ubertooth.c **** 
 574:../common/ubertooth.c **** /* interrupt handler for SW1 */
 575:../common/ubertooth.c **** void EINT3_IRQHandler(void)
 576:../common/ubertooth.c **** {
 577:../common/ubertooth.c **** 	/* clear interrupt */
 578:../common/ubertooth.c **** 	IO2IntClr |= (0x1 << 8);
 579:../common/ubertooth.c **** }
 580:../common/ubertooth.c **** #endif
 581:../common/ubertooth.c **** 
 582:../common/ubertooth.c **** /*
 583:../common/ubertooth.c ****  * Tune the CC2400 to a frequency in MHz for RX.  The calling function should
 584:../common/ubertooth.c ****  * ensure that the CC2400 is in the IDLE state.
 585:../common/ubertooth.c ****  */
 586:../common/ubertooth.c **** void cc2400_tune_rx(uint16_t channel)
 587:../common/ubertooth.c **** {
 1358              		.loc 1 587 0
 1359              		.cfi_startproc
 1360              		@ args = 0, pretend = 0, frame = 0
 1361              		@ frame_needed = 0, uses_anonymous_args = 0
 1362              		@ link register save eliminated.
 1363              	.LVL101:
 588:../common/ubertooth.c **** 	cc2400_set(FSDIV, channel - 1);
 1364              		.loc 1 588 0
 1365 0000 411E     		subs	r1, r0, #1
 1366 0002 89B2     		uxth	r1, r1
 1367 0004 0220     		movs	r0, #2
 1368              	.LVL102:
 1369 0006 FFF7FEBF 		b	cc2400_set
 1370              	.LVL103:
 1371              		.cfi_endproc
 1372              	.LFE23:
 1374              		.section	.text.cc2400_tune_tx,"ax",%progbits
 1375              		.align	1
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 37


 1376              		.global	cc2400_tune_tx
 1377              		.thumb
 1378              		.thumb_func
 1380              	cc2400_tune_tx:
 1381              	.LFB24:
 589:../common/ubertooth.c **** }
 590:../common/ubertooth.c **** 
 591:../common/ubertooth.c **** /*
 592:../common/ubertooth.c ****  * Tune the CC2400 to a frequency in MHz for TX.  The calling function should
 593:../common/ubertooth.c ****  * ensure that the CC2400 is in the IDLE state.
 594:../common/ubertooth.c ****  */
 595:../common/ubertooth.c **** void cc2400_tune_tx(uint16_t channel)
 596:../common/ubertooth.c **** {
 1382              		.loc 1 596 0
 1383              		.cfi_startproc
 1384              		@ args = 0, pretend = 0, frame = 0
 1385              		@ frame_needed = 0, uses_anonymous_args = 0
 1386              		@ link register save eliminated.
 1387              	.LVL104:
 1388              		.loc 1 596 0
 1389 0000 0146     		mov	r1, r0
 597:../common/ubertooth.c **** 	cc2400_set(FSDIV, channel);
 1390              		.loc 1 597 0
 1391 0002 0220     		movs	r0, #2
 1392              	.LVL105:
 1393 0004 FFF7FEBF 		b	cc2400_set
 1394              	.LVL106:
 1395              		.cfi_endproc
 1396              	.LFE24:
 1398              		.section	.text.cc2400_hop_rx,"ax",%progbits
 1399              		.align	1
 1400              		.global	cc2400_hop_rx
 1401              		.thumb
 1402              		.thumb_func
 1404              	cc2400_hop_rx:
 1405              	.LFB25:
 598:../common/ubertooth.c **** }
 599:../common/ubertooth.c **** 
 600:../common/ubertooth.c **** /* Hop to a new RX frequency in MHz.  Assumes starting from RX or TX state. */
 601:../common/ubertooth.c **** void cc2400_hop_rx(uint16_t channel)
 602:../common/ubertooth.c **** {
 1406              		.loc 1 602 0
 1407              		.cfi_startproc
 1408              		@ args = 0, pretend = 0, frame = 0
 1409              		@ frame_needed = 0, uses_anonymous_args = 0
 1410              	.LVL107:
 1411 0000 10B5     		push	{r4, lr}
 1412              		.cfi_def_cfa_offset 8
 1413              		.cfi_offset 4, -8
 1414              		.cfi_offset 14, -4
 1415              		.loc 1 602 0
 1416 0002 0446     		mov	r4, r0
 603:../common/ubertooth.c **** 	cc2400_strobe(SRFOFF);
 1417              		.loc 1 603 0
 1418 0004 6420     		movs	r0, #100
 1419              	.LVL108:
 1420 0006 FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 38


 1421              	.LVL109:
 1422              	.L123:
 604:../common/ubertooth.c **** 	while ((cc2400_status() & FS_LOCK));
 1423              		.loc 1 604 0 discriminator 1
 1424 000a FFF7FEFF 		bl	cc2400_status
 1425              	.LVL110:
 1426 000e 4107     		lsls	r1, r0, #29
 1427 0010 FBD4     		bmi	.L123
 605:../common/ubertooth.c **** 	cc2400_tune_rx(channel);
 1428              		.loc 1 605 0
 1429 0012 2046     		mov	r0, r4
 1430 0014 FFF7FEFF 		bl	cc2400_tune_rx
 1431              	.LVL111:
 1432              	.L124:
 606:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1433              		.loc 1 606 0 discriminator 1
 1434 0018 FFF7FEFF 		bl	cc2400_status
 1435              	.LVL112:
 1436 001c 4206     		lsls	r2, r0, #25
 1437 001e FBD5     		bpl	.L124
 607:../common/ubertooth.c **** 	cc2400_strobe(SFSON);
 1438              		.loc 1 607 0
 1439 0020 6120     		movs	r0, #97
 1440 0022 FFF7FEFF 		bl	cc2400_strobe
 1441              	.LVL113:
 1442              	.L125:
 608:../common/ubertooth.c **** 	while (!(cc2400_status() & FS_LOCK));
 1443              		.loc 1 608 0 discriminator 1
 1444 0026 FFF7FEFF 		bl	cc2400_status
 1445              	.LVL114:
 1446 002a 4307     		lsls	r3, r0, #29
 1447 002c FBD5     		bpl	.L125
 609:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 1448              		.loc 1 609 0
 1449 002e 6220     		movs	r0, #98
 610:../common/ubertooth.c **** }
 1450              		.loc 1 610 0
 1451 0030 BDE81040 		pop	{r4, lr}
 1452              		.cfi_restore 14
 1453              		.cfi_restore 4
 1454              		.cfi_def_cfa_offset 0
 609:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 1455              		.loc 1 609 0
 1456 0034 FFF7FEBF 		b	cc2400_strobe
 1457              	.LVL115:
 1458              		.cfi_endproc
 1459              	.LFE25:
 1461              		.section	.text.cc2400_hop_tx,"ax",%progbits
 1462              		.align	1
 1463              		.global	cc2400_hop_tx
 1464              		.thumb
 1465              		.thumb_func
 1467              	cc2400_hop_tx:
 1468              	.LFB26:
 611:../common/ubertooth.c **** 
 612:../common/ubertooth.c **** /* Hop to a new TX frequency in MHz.  Assumes starting from RX or TX state. */
 613:../common/ubertooth.c **** void cc2400_hop_tx(uint16_t channel)
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 39


 614:../common/ubertooth.c **** {
 1469              		.loc 1 614 0
 1470              		.cfi_startproc
 1471              		@ args = 0, pretend = 0, frame = 0
 1472              		@ frame_needed = 0, uses_anonymous_args = 0
 1473              	.LVL116:
 1474 0000 10B5     		push	{r4, lr}
 1475              		.cfi_def_cfa_offset 8
 1476              		.cfi_offset 4, -8
 1477              		.cfi_offset 14, -4
 1478              		.loc 1 614 0
 1479 0002 0446     		mov	r4, r0
 615:../common/ubertooth.c **** 	cc2400_strobe(SRFOFF);
 1480              		.loc 1 615 0
 1481 0004 6420     		movs	r0, #100
 1482              	.LVL117:
 1483 0006 FFF7FEFF 		bl	cc2400_strobe
 1484              	.LVL118:
 1485              	.L132:
 616:../common/ubertooth.c **** 	while ((cc2400_status() & FS_LOCK));
 1486              		.loc 1 616 0 discriminator 1
 1487 000a FFF7FEFF 		bl	cc2400_status
 1488              	.LVL119:
 1489 000e 4107     		lsls	r1, r0, #29
 1490 0010 FBD4     		bmi	.L132
 617:../common/ubertooth.c **** 	cc2400_tune_rx(channel);
 1491              		.loc 1 617 0
 1492 0012 2046     		mov	r0, r4
 1493 0014 FFF7FEFF 		bl	cc2400_tune_rx
 1494              	.LVL120:
 1495              	.L133:
 618:../common/ubertooth.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 1496              		.loc 1 618 0 discriminator 1
 1497 0018 FFF7FEFF 		bl	cc2400_status
 1498              	.LVL121:
 1499 001c 4206     		lsls	r2, r0, #25
 1500 001e FBD5     		bpl	.L133
 619:../common/ubertooth.c **** 	cc2400_strobe(SFSON);
 1501              		.loc 1 619 0
 1502 0020 6120     		movs	r0, #97
 1503 0022 FFF7FEFF 		bl	cc2400_strobe
 1504              	.LVL122:
 1505              	.L134:
 620:../common/ubertooth.c **** 	while (!(cc2400_status() & FS_LOCK));
 1506              		.loc 1 620 0 discriminator 1
 1507 0026 FFF7FEFF 		bl	cc2400_status
 1508              	.LVL123:
 1509 002a 4307     		lsls	r3, r0, #29
 1510 002c FBD5     		bpl	.L134
 621:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 1511              		.loc 1 621 0
 1512 002e 6220     		movs	r0, #98
 622:../common/ubertooth.c **** }
 1513              		.loc 1 622 0
 1514 0030 BDE81040 		pop	{r4, lr}
 1515              		.cfi_restore 14
 1516              		.cfi_restore 4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 40


 1517              		.cfi_def_cfa_offset 0
 621:../common/ubertooth.c **** 	cc2400_strobe(SRX);
 1518              		.loc 1 621 0
 1519 0034 FFF7FEBF 		b	cc2400_strobe
 1520              	.LVL124:
 1521              		.cfi_endproc
 1522              	.LFE26:
 1524              		.section	.text.get_part_num,"ax",%progbits
 1525              		.align	1
 1526              		.global	get_part_num
 1527              		.thumb
 1528              		.thumb_func
 1530              	get_part_num:
 1531              	.LFB27:
 623:../common/ubertooth.c **** 
 624:../common/ubertooth.c **** void get_part_num(uint8_t *buffer, int *len)
 625:../common/ubertooth.c **** {
 1532              		.loc 1 625 0
 1533              		.cfi_startproc
 1534              		@ args = 0, pretend = 0, frame = 40
 1535              		@ frame_needed = 0, uses_anonymous_args = 0
 1536              	.LVL125:
 1537 0000 30B5     		push	{r4, r5, lr}
 1538              		.cfi_def_cfa_offset 12
 1539              		.cfi_offset 4, -12
 1540              		.cfi_offset 5, -8
 1541              		.cfi_offset 14, -4
 1542 0002 8BB0     		sub	sp, sp, #44
 1543              		.cfi_def_cfa_offset 56
 1544              		.loc 1 625 0
 1545 0004 0446     		mov	r4, r0
 626:../common/ubertooth.c **** 	u32 command[5];
 627:../common/ubertooth.c **** 	u32 result[5];
 628:../common/ubertooth.c **** 	command[0] = 54; /* read part number */
 1546              		.loc 1 628 0
 1547 0006 3623     		movs	r3, #54
 1548 0008 0AA8     		add	r0, sp, #40
 1549              	.LVL126:
 625:../common/ubertooth.c **** 	u32 command[5];
 1550              		.loc 1 625 0
 1551 000a 0D46     		mov	r5, r1
 1552              		.loc 1 628 0
 1553 000c 40F8283D 		str	r3, [r0, #-40]!
 629:../common/ubertooth.c **** 	iap_entry(command, result);
 1554              		.loc 1 629 0
 1555 0010 05A9     		add	r1, sp, #20
 1556              	.LVL127:
 1557 0012 084B     		ldr	r3, .L141
 1558 0014 9847     		blx	r3
 1559              	.LVL128:
 630:../common/ubertooth.c **** 	buffer[0] = result[0] & 0xFF; /* status */
 1560              		.loc 1 630 0
 1561 0016 059B     		ldr	r3, [sp, #20]
 1562 0018 2370     		strb	r3, [r4]
 631:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 1563              		.loc 1 631 0
 1564 001a 069B     		ldr	r3, [sp, #24]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 41


 632:../common/ubertooth.c **** 	buffer[2] = (result[1] >> 8) & 0xFF;
 1565              		.loc 1 632 0
 1566 001c 1A0A     		lsrs	r2, r3, #8
 631:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 1567              		.loc 1 631 0
 1568 001e 6370     		strb	r3, [r4, #1]
 1569              		.loc 1 632 0
 1570 0020 A270     		strb	r2, [r4, #2]
 633:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 1571              		.loc 1 633 0
 1572 0022 1A0C     		lsrs	r2, r3, #16
 634:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 1573              		.loc 1 634 0
 1574 0024 1B0E     		lsrs	r3, r3, #24
 1575 0026 2371     		strb	r3, [r4, #4]
 635:../common/ubertooth.c **** 	*len = 5;
 1576              		.loc 1 635 0
 1577 0028 0523     		movs	r3, #5
 633:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 1578              		.loc 1 633 0
 1579 002a E270     		strb	r2, [r4, #3]
 1580              		.loc 1 635 0
 1581 002c 2B60     		str	r3, [r5]
 636:../common/ubertooth.c **** 	
 637:../common/ubertooth.c **** }
 1582              		.loc 1 637 0
 1583 002e 0BB0     		add	sp, sp, #44
 1584              		.cfi_def_cfa_offset 12
 1585              		@ sp needed
 1586 0030 30BD     		pop	{r4, r5, pc}
 1587              	.LVL129:
 1588              	.L142:
 1589 0032 00BF     		.align	2
 1590              	.L141:
 1591 0034 F11FFF1F 		.word	536813553
 1592              		.cfi_endproc
 1593              	.LFE27:
 1595              		.section	.text.get_device_serial,"ax",%progbits
 1596              		.align	1
 1597              		.global	get_device_serial
 1598              		.thumb
 1599              		.thumb_func
 1601              	get_device_serial:
 1602              	.LFB28:
 638:../common/ubertooth.c **** 
 639:../common/ubertooth.c **** void get_device_serial(uint8_t *buffer, int *len)
 640:../common/ubertooth.c **** {
 1603              		.loc 1 640 0
 1604              		.cfi_startproc
 1605              		@ args = 0, pretend = 0, frame = 40
 1606              		@ frame_needed = 0, uses_anonymous_args = 0
 1607              	.LVL130:
 1608 0000 30B5     		push	{r4, r5, lr}
 1609              		.cfi_def_cfa_offset 12
 1610              		.cfi_offset 4, -12
 1611              		.cfi_offset 5, -8
 1612              		.cfi_offset 14, -4
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 42


 1613 0002 8BB0     		sub	sp, sp, #44
 1614              		.cfi_def_cfa_offset 56
 1615              		.loc 1 640 0
 1616 0004 0446     		mov	r4, r0
 641:../common/ubertooth.c **** 	u32 command[5];
 642:../common/ubertooth.c **** 	u32 result[5];
 643:../common/ubertooth.c **** 	command[0] = 58; /* read device serial number */
 1617              		.loc 1 643 0
 1618 0006 3A23     		movs	r3, #58
 1619 0008 0AA8     		add	r0, sp, #40
 1620              	.LVL131:
 640:../common/ubertooth.c **** 	u32 command[5];
 1621              		.loc 1 640 0
 1622 000a 0D46     		mov	r5, r1
 1623              		.loc 1 643 0
 1624 000c 40F8283D 		str	r3, [r0, #-40]!
 644:../common/ubertooth.c **** 	iap_entry(command, result);
 1625              		.loc 1 644 0
 1626 0010 05A9     		add	r1, sp, #20
 1627              	.LVL132:
 1628 0012 144B     		ldr	r3, .L144
 1629 0014 9847     		blx	r3
 1630              	.LVL133:
 645:../common/ubertooth.c **** 	buffer[0] = result[0] & 0xFF; /* status */
 1631              		.loc 1 645 0
 1632 0016 059B     		ldr	r3, [sp, #20]
 1633 0018 2370     		strb	r3, [r4]
 646:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 1634              		.loc 1 646 0
 1635 001a 069B     		ldr	r3, [sp, #24]
 647:../common/ubertooth.c **** 	buffer[2] = (result[1] >> 8) & 0xFF;
 1636              		.loc 1 647 0
 1637 001c 1A0A     		lsrs	r2, r3, #8
 646:../common/ubertooth.c **** 	buffer[1] = result[1] & 0xFF;
 1638              		.loc 1 646 0
 1639 001e 6370     		strb	r3, [r4, #1]
 1640              		.loc 1 647 0
 1641 0020 A270     		strb	r2, [r4, #2]
 648:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 1642              		.loc 1 648 0
 1643 0022 1A0C     		lsrs	r2, r3, #16
 649:../common/ubertooth.c **** 	buffer[4] = (result[1] >> 24) & 0xFF;
 1644              		.loc 1 649 0
 1645 0024 1B0E     		lsrs	r3, r3, #24
 1646 0026 2371     		strb	r3, [r4, #4]
 650:../common/ubertooth.c **** 	buffer[5] = result[2] & 0xFF;
 1647              		.loc 1 650 0
 1648 0028 079B     		ldr	r3, [sp, #28]
 648:../common/ubertooth.c **** 	buffer[3] = (result[1] >> 16) & 0xFF;
 1649              		.loc 1 648 0
 1650 002a E270     		strb	r2, [r4, #3]
 651:../common/ubertooth.c **** 	buffer[6] = (result[2] >> 8) & 0xFF;
 1651              		.loc 1 651 0
 1652 002c 1A0A     		lsrs	r2, r3, #8
 650:../common/ubertooth.c **** 	buffer[5] = result[2] & 0xFF;
 1653              		.loc 1 650 0
 1654 002e 6371     		strb	r3, [r4, #5]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 43


 1655              		.loc 1 651 0
 1656 0030 A271     		strb	r2, [r4, #6]
 652:../common/ubertooth.c **** 	buffer[7] = (result[2] >> 16) & 0xFF;
 1657              		.loc 1 652 0
 1658 0032 1A0C     		lsrs	r2, r3, #16
 653:../common/ubertooth.c **** 	buffer[8] = (result[2] >> 24) & 0xFF;
 1659              		.loc 1 653 0
 1660 0034 1B0E     		lsrs	r3, r3, #24
 1661 0036 2372     		strb	r3, [r4, #8]
 654:../common/ubertooth.c **** 	buffer[9] = result[3] & 0xFF;
 1662              		.loc 1 654 0
 1663 0038 089B     		ldr	r3, [sp, #32]
 652:../common/ubertooth.c **** 	buffer[7] = (result[2] >> 16) & 0xFF;
 1664              		.loc 1 652 0
 1665 003a E271     		strb	r2, [r4, #7]
 655:../common/ubertooth.c **** 	buffer[10] = (result[3] >> 8) & 0xFF;
 1666              		.loc 1 655 0
 1667 003c 1A0A     		lsrs	r2, r3, #8
 654:../common/ubertooth.c **** 	buffer[9] = result[3] & 0xFF;
 1668              		.loc 1 654 0
 1669 003e 6372     		strb	r3, [r4, #9]
 1670              		.loc 1 655 0
 1671 0040 A272     		strb	r2, [r4, #10]
 656:../common/ubertooth.c **** 	buffer[11] = (result[3] >> 16) & 0xFF;
 1672              		.loc 1 656 0
 1673 0042 1A0C     		lsrs	r2, r3, #16
 657:../common/ubertooth.c **** 	buffer[12] = (result[3] >> 24) & 0xFF;
 1674              		.loc 1 657 0
 1675 0044 1B0E     		lsrs	r3, r3, #24
 1676 0046 2373     		strb	r3, [r4, #12]
 658:../common/ubertooth.c **** 	buffer[13] = result[4] & 0xFF;
 1677              		.loc 1 658 0
 1678 0048 099B     		ldr	r3, [sp, #36]
 656:../common/ubertooth.c **** 	buffer[11] = (result[3] >> 16) & 0xFF;
 1679              		.loc 1 656 0
 1680 004a E272     		strb	r2, [r4, #11]
 659:../common/ubertooth.c **** 	buffer[14] = (result[4] >> 8) & 0xFF;
 1681              		.loc 1 659 0
 1682 004c 1A0A     		lsrs	r2, r3, #8
 658:../common/ubertooth.c **** 	buffer[13] = result[4] & 0xFF;
 1683              		.loc 1 658 0
 1684 004e 6373     		strb	r3, [r4, #13]
 1685              		.loc 1 659 0
 1686 0050 A273     		strb	r2, [r4, #14]
 660:../common/ubertooth.c **** 	buffer[15] = (result[4] >> 16) & 0xFF;
 1687              		.loc 1 660 0
 1688 0052 1A0C     		lsrs	r2, r3, #16
 661:../common/ubertooth.c **** 	buffer[16] = (result[4] >> 24) & 0xFF;
 1689              		.loc 1 661 0
 1690 0054 1B0E     		lsrs	r3, r3, #24
 1691 0056 2374     		strb	r3, [r4, #16]
 662:../common/ubertooth.c **** 	*len = 17;
 1692              		.loc 1 662 0
 1693 0058 1123     		movs	r3, #17
 660:../common/ubertooth.c **** 	buffer[15] = (result[4] >> 16) & 0xFF;
 1694              		.loc 1 660 0
 1695 005a E273     		strb	r2, [r4, #15]
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 44


 1696              		.loc 1 662 0
 1697 005c 2B60     		str	r3, [r5]
 663:../common/ubertooth.c **** }
 1698              		.loc 1 663 0
 1699 005e 0BB0     		add	sp, sp, #44
 1700              		.cfi_def_cfa_offset 12
 1701              		@ sp needed
 1702 0060 30BD     		pop	{r4, r5, pc}
 1703              	.LVL134:
 1704              	.L145:
 1705 0062 00BF     		.align	2
 1706              	.L144:
 1707 0064 F11FFF1F 		.word	536813553
 1708              		.cfi_endproc
 1709              	.LFE28:
 1711              		.section	.text.set_isp,"ax",%progbits
 1712              		.align	1
 1713              		.global	set_isp
 1714              		.thumb
 1715              		.thumb_func
 1717              	set_isp:
 1718              	.LFB29:
 664:../common/ubertooth.c **** 
 665:../common/ubertooth.c **** void set_isp(void)
 666:../common/ubertooth.c **** {
 1719              		.loc 1 666 0
 1720              		.cfi_startproc
 1721              		@ args = 0, pretend = 0, frame = 40
 1722              		@ frame_needed = 0, uses_anonymous_args = 0
 1723 0000 00B5     		push	{lr}
 1724              		.cfi_def_cfa_offset 4
 1725              		.cfi_offset 14, -4
 1726 0002 8BB0     		sub	sp, sp, #44
 1727              		.cfi_def_cfa_offset 48
 667:../common/ubertooth.c **** 	u32 command[5];
 668:../common/ubertooth.c **** 	u32 result[5];
 669:../common/ubertooth.c **** 	command[0] = 57;
 1728              		.loc 1 669 0
 1729 0004 3923     		movs	r3, #57
 1730 0006 0AA8     		add	r0, sp, #40
 1731 0008 40F8283D 		str	r3, [r0, #-40]!
 670:../common/ubertooth.c **** 	iap_entry(command, result);
 1732              		.loc 1 670 0
 1733 000c 05A9     		add	r1, sp, #20
 1734 000e 024B     		ldr	r3, .L147
 1735 0010 9847     		blx	r3
 1736              	.LVL135:
 671:../common/ubertooth.c **** }
 1737              		.loc 1 671 0
 1738 0012 0BB0     		add	sp, sp, #44
 1739              		.cfi_def_cfa_offset 4
 1740              		@ sp needed
 1741 0014 5DF804FB 		ldr	pc, [sp], #4
 1742              	.L148:
 1743              		.align	2
 1744              	.L147:
 1745 0018 F11FFF1F 		.word	536813553
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 45


 1746              		.cfi_endproc
 1747              	.LFE29:
 1749              		.global	iap_entry
 1750              		.section	.rodata
 1751              		.align	2
 1754              	iap_entry:
 1755 0000 F11FFF1F 		.word	536813553
 1756              		.bss
 1757              		.align	2
 1758              		.set	.LANCHOR0,. + 0
 1761              	delay_counter:
 1762 0000 00000000 		.space	4
 1765              	wait_us_counter:
 1766 0004 00000000 		.space	4
 1767              		.text
 1768              	.Letext0:
 1769              		.file 2 "/Users/ahesham/research/Bluetooth/boss/uberCode/gcc-arm-none-eabi/lib/gcc/arm-none-eabi/4
 1770              		.file 3 "../common/ubertooth.h"
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 46


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ubertooth.c
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:19     .text.spi_delay:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:23     .text.spi_delay:0000000000000000 spi_delay
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:47     .text.spi_delay:0000000000000014 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:52     .text.rbit:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:57     .text.rbit:0000000000000000 rbit
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:78     .text.wait_us:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:83     .text.wait_us:0000000000000000 wait_us
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:114    .text.wait_us:0000000000000028 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:119    .text.wait:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:124    .text.wait:0000000000000000 wait
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:141    .text.wait:0000000000000008 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:146    .text.wait_ms:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:151    .text.wait_ms:0000000000000000 wait_ms
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:169    .text.all_pins_off:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:174    .text.all_pins_off:0000000000000000 all_pins_off
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:240    .text.all_pins_off:0000000000000044 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:248    .text.gpio_init:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:253    .text.gpio_init:0000000000000000 gpio_init
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:297    .text.gpio_init:0000000000000030 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:302    .text.dio_ssp_init:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:307    .text.dio_ssp_init:0000000000000000 dio_ssp_init
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:350    .text.dio_ssp_init:0000000000000048 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:357    .text.atest_init:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:362    .text.atest_init:0000000000000000 atest_init
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:392    .text.atest_init:0000000000000028 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:399    .text.cc2400_spi:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:404    .text.cc2400_spi:0000000000000000 cc2400_spi
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:472    .text.cc2400_spi:0000000000000040 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:479    .text.cc2400_init:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:484    .text.cc2400_init:0000000000000000 cc2400_init
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:534    .text.cc2400_init:000000000000002c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:543    .text.cc2400_get:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:548    .text.cc2400_get:0000000000000000 cc2400_get
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:576    .text.cc2400_set:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:581    .text.cc2400_set:0000000000000000 cc2400_set
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:602    .text.cc2400_get8:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:607    .text.cc2400_get8:0000000000000000 cc2400_get8
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:635    .text.cc2400_set8:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:640    .text.cc2400_set8:0000000000000000 cc2400_set8
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:661    .text.cc2400_fifo_write:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:666    .text.cc2400_fifo_write:0000000000000000 cc2400_fifo_write
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:789    .text.cc2400_fifo_write:0000000000000080 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:795    .text.cc2400_fifo_read:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:800    .text.cc2400_fifo_read:0000000000000000 cc2400_fifo_read
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:921    .text.cc2400_fifo_read:0000000000000088 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:928    .text.cc2400_status:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:933    .text.cc2400_status:0000000000000000 cc2400_status
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:955    .text.cc2400_strobe:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:960    .text.cc2400_strobe:0000000000000000 cc2400_strobe
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:985    .text.cc2400_reset:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:990    .text.cc2400_reset:0000000000000000 cc2400_reset
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1040   .text.clock_start:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1045   .text.clock_start:0000000000000000 clock_start
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1237   .text.clock_start:0000000000000104 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1255   .text.ubertooth_init:0000000000000000 $t
ARM GAS  /var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s 			page 47


/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1260   .text.ubertooth_init:0000000000000000 ubertooth_init
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1288   .text.reset:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1293   .text.reset:0000000000000000 reset
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1342   .text.reset:000000000000002c $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1351   .text.cc2400_tune_rx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1356   .text.cc2400_tune_rx:0000000000000000 cc2400_tune_rx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1375   .text.cc2400_tune_tx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1380   .text.cc2400_tune_tx:0000000000000000 cc2400_tune_tx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1399   .text.cc2400_hop_rx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1404   .text.cc2400_hop_rx:0000000000000000 cc2400_hop_rx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1462   .text.cc2400_hop_tx:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1467   .text.cc2400_hop_tx:0000000000000000 cc2400_hop_tx
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1525   .text.get_part_num:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1530   .text.get_part_num:0000000000000000 get_part_num
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1591   .text.get_part_num:0000000000000034 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1596   .text.get_device_serial:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1601   .text.get_device_serial:0000000000000000 get_device_serial
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1707   .text.get_device_serial:0000000000000064 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1712   .text.set_isp:0000000000000000 $t
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1717   .text.set_isp:0000000000000000 set_isp
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1745   .text.set_isp:0000000000000018 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1754   .rodata:0000000000000000 iap_entry
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1751   .rodata:0000000000000000 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1757   .bss:0000000000000000 $d
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1761   .bss:0000000000000000 delay_counter
/var/folders/s6/4bph2j8d1nvcsgz5bgm0yhx00000gn/T//ccEDB4oN.s:1765   .bss:0000000000000004 wait_us_counter
                     .debug_frame:0000000000000010 $d

NO UNDEFINED SYMBOLS
